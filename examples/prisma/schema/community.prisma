/// 커뮤니티(Community) 정보
model communities {
  id             String   @id @db.Uuid
  name           String   @db.VarChar
  description    String?
  cover_media_id String?  @db.Uuid
  visibility     String   @db.VarChar
  member_count   Int      @db.Integer
  created_at     DateTime @db.Timestamptz

  cover_media media?              @relation(fields: [cover_media_id], references: [id])
  members     community_members[]
  events      events[]
}

/// 커뮤니티 회원(N:M 관계)
model community_members {
  id           String   @id @db.Uuid
  community_id String   @db.Uuid
  user_id      String   @db.Uuid
  role         String   @db.VarChar
  join_status  String   @db.VarChar
  joined_at    DateTime @db.Timestamptz

  community communities @relation(fields: [community_id], references: [id])
  user      users       @relation(fields: [user_id], references: [id])

  @@unique([community_id, user_id])
}

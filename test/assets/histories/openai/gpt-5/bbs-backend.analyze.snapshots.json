[{"event":{"type":"analyzeStart","reason":"The user wants to build a political/economic discussion board and explicitly delegated all planning decisions, asking for a full requirements analysis report. Generate a comprehensive specification covering purpose, user roles, features (posting, commenting, reactions, moderation, reputation, tagging/topics, search, reporting, content quality signals, debates/polls, events, media attachments), authentication/SSO, permissions, content policies, anti-abuse measures, rate limiting, notifications, bookmarks, follows, personalization, admin analytics, GDPR/CCPA, localization/timezone handling (Asia/Seoul), SEO, performance, scalability, and initial MVP vs. roadmap. Include data models, workflows, business rules, and acceptance criteria.","step":0,"created_at":"2025-08-12T04:14:24.508Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeScenario","prefix":"pol-econ-board","roles":[{"name":"member","description":"실명 또는 별칭 기반으로 가입한 일반 회원. 게시글/댓글 작성, 수정, 삭제(본인 한정), 신고, 북마크, 팔로우, 투표/리액션, 알림 설정을 수행한다. 커뮤니티 규칙을 준수하며 제재 대상이 될 수 있다."},{"name":"expert","description":"정치/경제 분야 전문성 검증을 통해 승격된 회원. member 권한 포함 + 전문가 배지 노출, 전문가 전용 주제 제안, 심층 글(리서치/인사이트) 게시, 전문가 Q&A 참여 등 신뢰도 기반의 추가 권한을 가진다."},{"name":"moderator","description":"커뮤니티 운영을 담당하는 중재자. 신고 접수 큐 열람, 콘텐츠 임시 숨김/삭제, 사용자 제재(경고/일시정지) 요청, 분쟁 조정, 투명성 로그 기록 관리 등 커뮤니티 가이드라인 집행 권한을 가진다."},{"name":"editor","description":"콘텐츠 품질을 책임지는 에디터. 말머리/주제 편집, 특집 큐레이션, 공지/고정글 관리, 홈·섹션 피처링 운영을 수행하며, 정책 위반 판단 권한은 moderator와 협업한다."},{"name":"admin","description":"전사 시스템 운영 권한. 모든 리소스에 대한 접근(감사 검토 포함), 역할 관리, 정책/설정 변경, 법적 요청 대응 워크플로 관리, 서비스 상태/지표 관리를 총괄한다."}],"files":[{"reason":"전체 문서 지도를 제공하여 이해관계자가 빠르게 필요한 문서로 이동할 수 있도록 하기 위함.","filename":"00-toc.md","documentType":"service-overview","outline":["문서 목적","문서 목록 및 간단 설명","문서 간 관계 및 읽기 순서","용어 및 약어 가이드"],"audience":"general","keyQuestions":["어떤 문서가 포함되어 있으며 무엇을 다루는가","각 문서의 읽기 순서는 무엇인가"],"detailLevel":"high-level overview","constraints":["문서 링크는 설명형 링크 텍스트를 사용할 것","개발자 노트는 본 문서 맨 하단에 블록인용 형식으로만 포함"]},{"reason":"서비스의 존재 이유, 대상 사용자, 핵심 가치와 범위 등 전반을 한눈에 제시하기 위함.","filename":"01-pol-econ-board-service-overview.md","documentType":"service-overview","outline":["서비스 비전과 목표","문제 정의와 기회","대상 사용자와 핵심 가치 제안","핵심 기능 요약","범위 및 비범위(Out of Scope)","경쟁 환경과 차별화 요소","성공 지표(KPI)와 목표 수준","단계적 로드맵(베타→정식→확장)"],"audience":"business stakeholders","keyQuestions":["이 서비스가 해결하는 문제와 제공 가치가 무엇인가","누가 주요 사용자이며 어떤 사용 사례가 핵심인가","성공을 어떻게 정의하고 측정할 것인가","초기와 중장기 로드맵은 무엇인가"],"detailLevel":"moderate detail","constraints":["비즈니스 요구 중심으로 작성","기술 구현 세부(아키텍처, API, DB) 금지"]},{"reason":"수익화/성장 전략과 운영 모델을 명확히 하여 비즈니스 관점의 의사결정을 지원하기 위함.","filename":"02-pol-econ-board-business-model.md","documentType":"business-model","outline":["왜 존재해야 하는가(시장 공백/사용자 페인포인트)","수익 모델(광고/스폰서십/프리미엄 멤버십/데이터 리포트)","사용자 획득 및 성장 전략(콘텐츠·커뮤니티·파트너)","운영 모델과 비용 구조(인력/도구/프로세스)","규제·정책 리스크와 대응 원칙","성공 지표와 모니터링(재무/사용자/콘텐츠 품질)"],"audience":"business stakeholders","keyQuestions":["지속 가능한 수익과 성장 경로는 무엇인가","핵심 비용 항목과 운영 리스크는 무엇이며 어떻게 완화하는가","어떤 KPI로 성과를 관리하는가"],"detailLevel":"moderate detail","constraints":["수익 및 비용 항목은 비즈니스 수준으로 정의","정량 KPI 예시 포함","기술 구현 세부 금지"]},{"reason":"역할과 권한, 인증/세션 정책을 비즈니스 관점에서 완전하게 정의하여 권한 관리의 기준으로 삼기 위함.","filename":"03-pol-econ-board-user-roles-and-authentication.md","documentType":"requirement","outline":["인증 요구사항 개요","회원가입/로그인/로그아웃/이메일 인증/비밀번호 재설정","세션 및 토큰 관리(JWT) 원칙","역할 정의 및 권한 설명","권한 매트릭스(역할×액션)","정책: 비밀번호 규칙·로그인 시도 제한·계정 정지/해제·디바이스 로그아웃","감사 및 보안 고려(비즈니스 관점)"],"audience":"development team","keyQuestions":["어떤 역할이 존재하며 각 역할이 수행/제한되는 액션은 무엇인가","인증 흐름과 세션 만료/갱신 정책은 무엇인가","보안 및 감사 요구는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["01-pol-econ-board-service-overview.md","07-pol-econ-board-community-governance-and-moderation.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 요구사항 명시","권한 매트릭스 포함","JWT 기반 토큰 관리 원칙 포함","API/DB 세부 명시 금지"]},{"reason":"핵심 기능을 업무 관점으로 완전·명확하게 규정하여 개발·QA 기준으로 사용하기 위함.","filename":"04-pol-econ-board-functional-requirements.md","documentType":"requirement","outline":["게시글 관리(작성/수정/삭제/버전)","댓글/대댓글/멘션","카테고리·태그·주제 팔로우","투표/리액션/추천","북마크/읽음 상태/저장","검색/정렬/필터","신고/차단 및 자동화 규칙","초안/검토/발행 워크플로","공지/고정글/특집 큐레이션 연계","피드/타임라인/구독","알림 트리거 연결","레이트리밋/이용제한 정책","접근성/다국어(비즈니스 관점)","수용 기준 및 예외 사항"],"audience":"development team","keyQuestions":["사용자가 수행할 수 있는 모든 업무 기능은 무엇이며 제약은 무엇인가","각 기능의 입력 검증/처리 로직/출력 기대치는 무엇인가","성능·보안·감사 요구와의 연계는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","06-pol-econ-board-user-flows.md","07-pol-econ-board-community-governance-and-moderation.md","11-pol-econ-board-notifications-and-communications.md"],"constraints":["EARS 형식으로 상세 요구사항 기술","성능 기대치(사용자 체감 기준) 포함","UI/설계/기술 구현 세부 금지"]},{"reason":"현실적인 사용자 관점의 시나리오를 제시하여 요구사항 검증과 테스트 기준을 제공하기 위함.","filename":"05-pol-econ-board-user-stories.md","documentType":"user-story","outline":["페르소나 정의(일반 회원/전문가/중재자/에디터/관리자)","핵심 시나리오(성공 경로)","보조·엣지 시나리오","오남용·남용 방지 시나리오","완료 정의(DoD) 및 수용 기준"],"audience":"development team","keyQuestions":["주요 사용자 여정에서 기대 행동과 결과는 무엇인가","엣지/실패 시나리오에서의 시스템 반응은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["자연어 중심의 사용자 관점 기술","측정 가능한 수용 기준 포함"]},{"reason":"주요 업무 절차를 시각적으로 정리하여 팀 간 커뮤니케이션과 구현 일관성을 높이기 위함.","filename":"06-pol-econ-board-user-flows.md","documentType":"user-flow","outline":["사용자 여정 개요","계정 생성·인증 플로우","게시글 작성·수정·발행 플로우","신고 접수→중재→이의제기 플로우","알림 설정·수신 플로우","Mermaid 다이어그램(좌→우 흐름, 서브그래프 활용)","예외 분기 및 롤백 흐름"],"audience":"development team","keyQuestions":["각 플로우의 단계와 분기 조건은 무엇인가","역할별로 다른 경로와 승인 포인트는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["Mermaid 문법 규칙 엄수(이중따옴표, 화살표 규칙)","API/DB/아키텍처 세부 금지"]},{"reason":"커뮤니티 운영 원칙과 중재 기준을 합의된 규범으로 문서화하여 일관 집행을 보장하기 위함.","filename":"07-pol-econ-board-community-governance-and-moderation.md","documentType":"requirement","outline":["커뮤니티 규칙과 허용/금지 콘텐츠 정의","정치적 민감 콘텐츠 가이드(사실성·출처·표현 수위)","신고 분류 체계와 처리 SLA","제재 수위표(경고/일시정지/영구 제재)와 트리거","투명성 보고 및 로그 공개 원칙","이의제기·재검토·복구 절차","선거기간 특별정책(국내 법·정책 준수)"],"audience":"development team","keyQuestions":["어떤 콘텐츠가 허용/금지되는가","신고 처리와 제재 집행의 기준과 기한은 무엇인가","이의제기와 복구는 어떻게 진행되는가"],"detailLevel":"detailed specification","relatedDocuments":["04-pol-econ-board-functional-requirements.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 제재/중재 요구사항 정의","정책·규정 준수 관점 강조"]},{"reason":"성능/가용성/확장성 등 비기능 요구를 사용자 체감 기준으로 명확히 하기 위함.","filename":"08-pol-econ-board-non-functional-requirements.md","documentType":"requirement","outline":["성능 기대치(응답 시간/처리량/동시성)","가용성 및 복구 목표(RTO/RPO 개념)","확장성·유연성 기대","관측가능성 요구(로그/지표/경보) 비즈니스 기준","개인정보 최소 수집/보관 원칙 연계","알림·배치 작업 시간 제약 기대","용량 계획 가이드와 성장 가정"],"audience":"development team","keyQuestions":["사용자가 체감하는 성능 기준은 무엇인가","장애/복구/확장 관점의 기대 수준은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["01-pol-econ-board-service-overview.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["정량적·검증 가능한 기준 제시","기술 구현 세부 금지"]},{"reason":"개인정보/법규 준수 및 오남용 방지 정책을 비즈니스 관점에서 규정하기 위함.","filename":"09-pol-econ-board-security-and-compliance.md","documentType":"requirement","outline":["개인정보 보호 원칙과 동의 관리","데이터 권리(열람/정정/삭제/이동) 처리 프로세스","연령/본인확인 및 민감 시기 정책(필요 시)","법률·정책 준수(국내 PIPA 등)와 유관 요청 대응","감사 추적 및 투명성 요구","오남용/스팸/봇 방지 정책과 레이트리밋 원칙","보안 이벤트 커뮤니케이션"],"audience":"development team","keyQuestions":["개인정보 및 법적 요구는 무엇이며 어떻게 충족하는가","오남용 방지와 투명성 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["07-pol-econ-board-community-governance-and-moderation.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["법/정책은 비즈니스 해석 수준으로 기술","API/암호화 상세 구현 금지"]},{"reason":"정보의 생성→사용→보존→삭제 전주기를 비즈니스 레벨에서 규정하기 위함.","filename":"10-pol-econ-board-data-lifecycle-and-retention.md","documentType":"requirement","outline":["데이터 흐름 개요(개념적)","게시물/댓글 라이프사이클(초안/발행/수정/아카이브/삭제)","신고/중재 라이프사이클과 증빙 보존","로그/지표/백업의 보존 기간과 파기 원칙","익명화/가명처리의 비즈니스 요건","사용자 요청 기반 삭제 및 복구 창구"],"audience":"development team","keyQuestions":["핵심 데이터의 라이프사이클 단계와 보존 원칙은 무엇인가","삭제/복구/익명화 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["09-pol-econ-board-security-and-compliance.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["정책은 검증 가능하고 감사 가능해야 함","기술 구현 세부 금지"]},{"reason":"사용자 커뮤니케이션 전반을 비즈니스 레벨에서 표준화하여 일관된 경험을 보장하기 위함.","filename":"11-pol-econ-board-notifications-and-communications.md","documentType":"requirement","outline":["알림 유형(실시간/배치/다이제스트)과 트리거 이벤트","채널(앱 내/이메일 등)과 빈도·레이트 한도","구독·팔로우·주제 다이제스트 정책","수신 동의/거부 및 선호 설정","콘텐츠 톤·메시지 구성 원칙","실패·지연 시 재시도/폴백 원칙"],"audience":"development team","keyQuestions":["어떤 이벤트에 어떤 알림을 어떤 채널로 보낼 것인가","이용자 통제권과 빈도 관리 정책은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["EARS 형식 요구사항 포함","기술 구현 세부 금지"]},{"reason":"오류/예외 상황에서의 사용자 관점 처리 원칙과 복구 절차를 표준화하기 위함.","filename":"12-pol-econ-board-exception-handling-and-error-scenarios.md","documentType":"requirement","outline":["공통 에러 분류와 사용자 메시지 원칙","인증/인가 관련 오류 처리","콘텐츠 작업 오류(업로드/저장/충돌) 처리","신고/중재 실패 및 재처리","외부 연동 실패 시 처리(로그인 제공자 등)","레이트리밋/스팸 차단에 따른 제한 알림","데이터 무결성/중복 감지와 정정","사용자 복구 절차와 안내"],"audience":"development team","keyQuestions":["대표적인 오류 상황과 기대되는 시스템 반응은 무엇인가","사용자 복구 경로와 재시도 정책은 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["EARS 형식으로 오류 처리 요구사항 작성","사용자 메시지 원칙 명시","API/코드 수준 상세 금지"]}],"step":0,"created_at":"2025-08-12T04:14:24.508Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"전체 문서 지도를 제공하여 이해관계자가 빠르게 필요한 문서로 이동할 수 있도록 하기 위함.","filename":"00-toc.md","documentType":"service-overview","outline":["문서 목적","문서 목록 및 간단 설명","문서 간 관계 및 읽기 순서","용어 및 약어 가이드"],"audience":"general","keyQuestions":["어떤 문서가 포함되어 있으며 무엇을 다루는가","각 문서의 읽기 순서는 무엇인가"],"detailLevel":"high-level overview","constraints":["문서 링크는 설명형 링크 텍스트를 사용할 것","개발자 노트는 본 문서 맨 하단에 블록인용 형식으로만 포함"],"content":"# pol-econ-board Documentation Index\n\n## Document Purpose\nThis index provides a complete, navigable map of the pol-econ-board documentation set. It enables any stakeholder to quickly locate the appropriate document, understand its scope, and follow a recommended reading sequence. The index also clarifies how documents relate to each other across business objectives, requirements, governance, and compliance.\n\n## Document List and Brief Descriptions\n- [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) — Summarizes vision, goals, target users, value proposition, scope, differentiation, success metrics (KPI), and phased roadmap from beta to expansion. Focused on business context and why the service should exist.\n- [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md) — Defines monetization (e.g., ads, sponsorships, premium membership, data reports), user acquisition and growth strategies, operating model and cost structure, regulatory risks, and performance monitoring metrics.\n- [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) — Specifies authentication flows (register/login/logout/email verification/password reset), JWT-based session policies, complete role definitions and permissions (member, expert, moderator, editor, admin), permission matrix, and security/audit expectations in business terms.\n- [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) — Details business functionality: posts, comments, categorization/tags/follows, votes/reactions, bookmarks, search/sort/filter, reporting and blocking workflows, draft/review/publish workflows, notices and featured curation, feeds and subscriptions, notifications triggers, rate limits, and cross-cutting acceptance criteria.\n- [User Stories and Acceptance Criteria](./05-pol-econ-board-user-stories.md) — Presents personas (general member, expert, moderator, editor, admin), key success scenarios, edge cases, misuse/abuse prevention, and Definition of Done with measurable acceptance criteria.\n- [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md) — Visualizes major workflows with Mermaid diagrams (left-to-right orientation), including account creation/authentication, authoring and publishing, reporting to moderation and appeal, notification settings and delivery, and exception branches with rollbacks.\n- [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) — Defines community rules, allowed/forbidden content, sensitive political content guardrails, report taxonomy and SLA, sanction ladders and triggers, transparency reporting, appeal/review/restore procedures, and special election-period policies.\n- [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) — Establishes measurable performance expectations (response times, throughput, concurrency), availability and recovery objectives (RTO/RPO concepts), scalability, observability requirements, data minimization principles, scheduling expectations, and capacity planning guidance.\n- [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) — Outlines privacy principles and consent management, data subject rights processing, age/identity and sensitive periods policy (if required), legal compliance (e.g., PIPA), auditability and transparency requirements, abuse/spam/bot mitigation with rate limiting, and security incident communication.\n- [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) — Describes conceptual data flows, content lifecycles (draft/publish/edit/archive/delete), moderation evidence retention, logs/metrics/backups retention and disposal, anonymization/pseudonymization business needs, and user-initiated deletion and recovery channels.\n- [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) — Standardizes notification types (real-time, batch, digest), trigger events, channels (in-app, email), frequency and rate limits, subscription/follow/digest policies, consent and preference management, tone and message composition, and retry/fallback rules.\n- [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) — Catalogs error classes and messaging principles, auth and authorization failures, content operation errors (upload/save/conflict), moderation workflow failures, external integration errors, rate-limiting and spam controls, data integrity and deduplication handling, and user recovery procedures.\n\n## Document Relationships and Recommended Reading Order\nThe documents are organized to move from context and strategy to detailed requirements and operational policies. The recommended path for most readers is: Overview → Business Model → Roles & Auth → Functional Requirements → User Flows → Governance → Non-Functional → Security & Compliance → Data Lifecycle → Notifications → Exceptions.\n\n```mermaid\ngraph LR\n  subgraph \"Context & Strategy\"\n    A1[\"Service Overview\"] --> A2[\"Business Model\"]\n  end\n\n  subgraph \"Core Requirements\"\n    B1[\"User Roles & Authentication\"] --> B2[\"Functional Requirements\"]\n    B2 --> B3[\"User Flows\"]\n  end\n\n  subgraph \"Operations & Governance\"\n    C1[\"Community Governance & Moderation\"]\n    C2[\"Notifications & Communications\"]\n  end\n\n  subgraph \"Quality & Compliance\"\n    D1[\"Non-Functional Requirements\"]\n    D2[\"Security & Compliance\"]\n    D3[\"Data Lifecycle & Retention\"]\n    D4[\"Exception Handling & Errors\"]\n  end\n\n  A2 --> B1\n  B3 --> C1\n  B3 --> C2\n  B2 --> D1\n  D1 --> D2\n  D2 --> D3\n  B2 --> D4\n```\n\nRole-specific shortcuts:\n- Product and business stakeholders: Start with [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) and [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md). Then review [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) and [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Backend developers and QA: Begin with [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) and [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md), followed by [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md), then consult governance, NFRs, compliance, data lifecycle, notifications, and error handling.\n- Moderation and editorial teams: Focus on [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) and [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md), then reference [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) and [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## Terms and Acronyms Guide\nThe following glossary standardizes key terms used across documents.\n\n| Term/Acronym | Definition | Where Used |\n|--------------|------------|------------|\n| pol-econ-board | The service prefix and identifier for this project focused on political and economic discourse. | All documents |\n| EARS | Easy Approach to Requirements Syntax; used for unambiguous, testable requirement statements. | Requirements documents (03, 04, 07, 08, 09, 11, 12) |\n| JWT | JSON Web Token used for access and refresh tokens to manage user sessions. | 03, 06, 09 |\n| RBAC | Role-Based Access Control; authorization model using roles like member, expert, moderator, editor, admin. | 03, 04 |\n| SLA | Service Level Agreement; specified response and processing time targets for moderation and other workflows. | 07, 08 |\n| KPI | Key Performance Indicator; success metrics such as MAU/DAU, retention rate, and content quality measures. | 01, 02 |\n| NFR | Non-Functional Requirements; performance, availability, scalability, observability expectations. | 08 |\n| PIPA | Personal Information Protection Act (Korea); core privacy regulation relevant to data handling. | 09, 10 |\n| RTO/RPO | Recovery Time Objective / Recovery Point Objective; targets for continuity and recovery. | 08, 10 |\n| MAU/DAU | Monthly/ Daily Active Users; common usage metrics. | 01, 02 |\n| Sanction Ladder | Progressive discipline model: warning → suspension → permanent action, based on policy triggers. | 07 |\n| Digest | Aggregated periodic notification summarizing content updates. | 11 |\n| Transparency Log | Public or internal record of moderation and policy enforcement actions. | 07, 09 |\n| Data Subject Rights | Rights to access, rectify, delete, and port personal data. | 09, 10 |\n| Rate Limiting | Business rules that cap actions per user/time window to prevent abuse. | 04, 08, 09, 11 |\n\nAdditional role definitions used throughout:\n- member — Registered user (real name or alias) with permissions to create, edit, and delete own posts/comments, report content, bookmark, follow, vote/react, and manage notifications; subject to community rules and potential sanctions.\n- expert — Verified political/economic domain expert; inherits member permissions and can publish deeper research/insights, propose expert-only topics, and participate in expert Q&A with a trust badge.\n- moderator — Community operator handling report queues, temporary hide/delete, proposing user sanctions (warning/suspension), dispute mediation, and transparency log oversight.\n- editor — Content quality owner managing topics/tags, special curation, announcements/pins, and featuring operations; collaborates with moderators on policy violations.\n- admin — Organization-level operator with access to all resources for audits, role management, policy/config changes, legal request workflows, service health, and metrics governance.\n\n> *Developer Note: This document defines **business requirements only**. All technical implementations (architecture, APIs, database design, etc.) are at the discretion of the development team.*"},"step":0,"total":13,"completed":1,"created_at":"2025-08-12T04:18:52.459Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"서비스의 존재 이유, 대상 사용자, 핵심 가치와 범위 등 전반을 한눈에 제시하기 위함.","filename":"01-pol-econ-board-service-overview.md","documentType":"service-overview","outline":["서비스 비전과 목표","문제 정의와 기회","대상 사용자와 핵심 가치 제안","핵심 기능 요약","범위 및 비범위(Out of Scope)","경쟁 환경과 차별화 요소","성공 지표(KPI)와 목표 수준","단계적 로드맵(베타→정식→확장)"],"audience":"business stakeholders","keyQuestions":["이 서비스가 해결하는 문제와 제공 가치가 무엇인가","누가 주요 사용자이며 어떤 사용 사례가 핵심인가","성공을 어떻게 정의하고 측정할 것인가","초기와 중장기 로드맵은 무엇인가"],"detailLevel":"moderate detail","constraints":["비즈니스 요구 중심으로 작성","기술 구현 세부(아키텍처, API, DB) 금지"],"content":"# pol-econ-board Service Overview\n\n## Service Vision and Objectives\npol-econ-board is a trust-focused political and economic discussion and analysis community that enables informed conversations, expert insights, and transparent moderation. The service exists to reduce noise, polarization, and misinformation by combining community participation with clear governance and role-based accountability.\n\nObjectives (12–18 months horizon):\n- Establish a reliable forum for policy and market discourse with measurable trust signals and transparent moderation.\n- Attract qualified experts and elevate high-quality insights to inform public understanding and decision-making.\n- Build a sustainable, scalable business with diversified revenue streams and strong user retention.\n\nGuiding principles:\n- Truth and verifiability over virality.\n- Community participation with accountability.\n- Transparency in moderation and policy enforcement.\n- Measurable outcomes and continuously improved operations.\n\n## Problem Definition and Opportunity\n- Information overload: Political and economic content is high-volume but low-signal. Users struggle to find reliable, contextualized analysis.\n- Trust deficit: Anonymous or low-accountability forums enable misinformation and low-quality discourse.\n- Expert–public gap: Experts lack structured ways to share insights with context and receive meaningful feedback.\n- Fragmented experiences: Insights, debate, curation, and policy enforcement are spread across disparate platforms without consistent standards.\n\nOpportunity:\n- Provide a specialized, moderated environment that privileges sourced, contextual analysis and civil debate.\n- Create a tiered role system (member, expert, moderator, editor, admin) to align incentives and responsibilities.\n- Offer transparent governance, auditable decisions, and topic-focused discovery to increase user confidence and time-on-platform.\n\n## Target Users and Core Value Proposition\nPrimary personas and value delivered:\n- Members (general participants):\n  - Value: Access to high-signal discussions, topic follow for personalization, bookmarking, reactions, and clear rules for safe participation.\n  - Use cases: Post viewpoints with sources, ask questions, follow topics/experts, receive notifications, report problematic content.\n- Experts (verified domain specialists):\n  - Value: Credibility badge, dedicated long-form analysis and research formats, expert Q&A, topic leadership, and influence.\n  - Use cases: Publish research notes, host Q&A threads, propose expert topics, respond to member questions.\n- Moderators (community governance):\n  - Value: Efficient intake queue, policy-aligned actions (hide, remove, warning/suspension requests), transparent records.\n  - Use cases: Process reports, apply sanctions per policy, manage appeals, maintain a transparency log.\n- Editors (content quality):\n  - Value: Curate features, manage tags/topics, headline and topic hygiene, special coverage packages and featured placements.\n  - Use cases: Tag and topic grooming, curated home/section features, announcements and pinning.\n- Admins (operational owners):\n  - Value: End-to-end oversight, policy configuration, role assignments, legal/compliance workflows, and audit visibility.\n  - Use cases: Manage roles and policies, oversee indicators and risk, respond to lawful requests.\n\nCore value proposition:\n- High-signal community powered by verified expertise and transparent governance.\n- Clear norms, predictable enforcement, and visible trust indicators.\n- Topic-centric discovery with measurable quality and relevance.\n\n## Business Model (Why/How/What)\n### Why This Service Exists\n- Address the trust and quality gap in political/economic discourse with an accountability-first community.\n- Serve a growing audience seeking reliable analysis and expert commentary without the noise of general-purpose social platforms.\n\n### Revenue Strategy\n- Advertising and sponsorships: Brand-safe placements in featured sections and expert channels.\n- Premium membership: Ad-light experience, advanced filters, expert AMAs access, early access to curated reports.\n- Sponsored expert series: Cohort-based expert columns or Q&A programs, clearly labeled.\n- Data-rich summaries and reports (business-level packaging): Periodic, curated digests for professionals.\n\n### Growth Plan\n- Supply-side seeding: Onboard a core cohort of verified experts and editors to set quality bar.\n- Community credibility: Transparency logs, clear sanctions policy, and measurable content quality indicators.\n- Partnerships: Think tanks, universities, and reputable media for co-produced series.\n- Retention loops: Topic follow, expert follow, personalized digests, and earned status for positive contributions.\n\n### Success Metrics\n- Trust and safety: Low reversal rate in moderation decisions, timely SLA adherence.\n- Engagement: Repeat sessions/week, quality reactions, follow actions, save/bookmark rates.\n- Expert participation: Number of active experts and expert-originated threads per week.\n- Monetization: Premium conversion rate, sponsorship bookings, ad yield.\n\n## Core Features Summary\nThis section states what the service must do at a business level. Detailed logic appears in other requirements documents. EARS format is used for applicable items.\n\nContent creation and management:\n- THE service SHALL allow members to create, edit, and delete their own posts and comments within policy-compliant boundaries.\n- WHEN a user publishes content, THE service SHALL record topic tags, sources (if provided), and attribution for later policy checks and discovery.\n- WHERE the user is an expert, THE service SHALL enable long-form analyses and expert Q&A threads with expert badges.\n- IF content is reported, THEN THE service SHALL route it to the moderation queue and apply configured timelines for action.\n- WHILE content is under review, THE service SHALL optionally restrict visibility according to policy.\n\nDiscovery and curation:\n- THE service SHALL provide topic follow, expert follow, and curated features to surface relevant content.\n- WHEN users follow topics or experts, THE service SHALL generate personalized feeds and digests subject to user preferences.\n- WHERE editors curate features, THE service SHALL support announcements, pinned posts, and special packages.\n\nReactions and community signals:\n- THE service SHALL support reactions, voting, and bookmarking to quantify engagement and relevance.\n- WHEN a user reacts or votes, THE service SHALL update engagement signals used for ranking and curation.\n- IF abnormal engagement patterns are detected, THEN THE service SHALL flag items for review (anti-gaming).\n\nReporting and governance:\n- THE service SHALL provide a report feature with clear categories (e.g., misinformation, harassment, spam, off-topic).\n- WHEN reports are submitted, THE service SHALL acknowledge receipt and communicate outcomes per policy.\n- WHERE sanctions are applied, THE service SHALL log the action to a transparency record with reason codes.\n\nNotifications (business-level):\n- WHEN followed experts or topics publish, THE service SHALL notify followers subject to frequency limits and user consent.\n- IF the system detects notification fatigue, THEN THE service SHALL throttle non-critical notifications.\n\nRole-based capabilities (high level):\n- WHERE the user is a moderator, THE service SHALL provide tools to hide/remove content, warn, and request suspensions per policy.\n- WHERE the user is an editor, THE service SHALL manage tags/topics, featured lists, and announcements.\n- WHERE the user is an admin, THE service SHALL manage roles, policies, and compliance workflows.\n\nPerformance experience (business expectation):\n- WHEN users perform common actions (login, open feed, view post), THE service SHALL respond within a user-perceived 1–2 seconds for typical conditions.\n- WHERE complex searches and filters are executed, THE service SHALL return initial results within 3 seconds for common queries.\n\n## Scope and Out of Scope\nIn scope (business outcomes):\n- Account registration, login/logout, email verification, password reset.\n- Role-based permissions: member, expert, moderator, editor, admin.\n- Posts, comments, replies, mentions, reactions, votes, bookmarks.\n- Topic/tag management, topic/expert follow, curated features.\n- Reporting, moderation workflow, sanctions policy, transparency logs.\n- Personalized feeds and configurable notifications.\n\nOut of scope (initial phases):\n- Real-time audio/video debates and live streaming.\n- Direct monetization between users (tips, paywalled posts) before compliance readiness.\n- Public API for third-party integrations in Beta/GA.\n- Frontend design specifications (layouts, colors, interactions).\n\nBoundary requirements (EARS):\n- THE service SHALL avoid collecting unnecessary personal data beyond business needs.\n- IF a feature introduces legal/compliance implications, THEN THE service SHALL require policy and compliance review before launch.\n- WHERE experimental features are enabled, THE service SHALL be opt-in and reversible at the cohort level.\n\n## Competitive Landscape and Differentiation\nCompetitive sets:\n- General social networks: Broad reach but low context, volatile quality.\n- Traditional forums: Community-led but uneven moderation and limited expert validation.\n- Publisher comment sections and Q&A: Limited interaction depth, weak governance transparency.\n\nDifferentiators:\n- Verified expert participation with visible credentials and specialized formats.\n- Transparent governance with clear reason codes, SLAs, and public transparency records.\n- Topic- and expert-centric discovery that privileges sourced, contextual contributions.\n- Role separation (moderator vs. editor) to balance policy enforcement and content quality.\n\n## Success Metrics (KPIs) and Target Levels\nTimeframes reference post-General Availability (GA). Targets define success thresholds that inform go/no-go decisions and iteration priorities.\n\nEngagement and growth:\n- THE service SHALL achieve 25–35% 28-day retention for new registered members by Month 6 post-GA.\n- THE service SHALL achieve at least 4 sessions/week median among retained members by Month 6 post-GA.\n- THE service SHALL reach 150–250 active experts with 400+ expert-originated threads/month by Month 6 post-GA.\n\nQuality and trust:\n- THE service SHALL maintain a moderation decision reversal rate under 5% monthly.\n- THE service SHALL process 90% of standard reports within 24 hours and 99% within 72 hours.\n- THE service SHALL keep repeat sanctions (within 90 days) under 10% of sanctioned accounts.\n\nMonetization:\n- THE service SHALL achieve 2.0–3.5% premium conversion among MAUs by Month 12 post-GA.\n- THE service SHALL secure at least two sponsorship packages per month by Month 6 post-GA.\n\nReliability and responsiveness (user-perceived):\n- THE service SHALL serve core feed and post views within 1–2 seconds p50 and under 4 seconds p95 for typical conditions.\n\n## Phased Roadmap (Beta → GA → Expansion)\nPrinciples:\n- Deliver trust and quality foundations first (roles, governance, transparency).\n- Validate expert and editor workflows alongside member value loops (follow, digest, reactions).\n- Use measurable gates to progress phases.\n\nPhase 1: Private Beta (target window: Q4 2025)\n- Cohort: ~1,000 members, 50–75 experts, 5–8 moderators, 3–5 editors.\n- Scope highlights: Core posting/comments, topic follow, expert badges and long-form posts, reporting and basic moderation queue, limited notifications.\n- Gates (must meet to exit):\n  - THE service SHALL achieve at least 30% weekly active rate among Beta cohort for four consecutive weeks.\n  - THE service SHALL process 95% of reports within 48 hours during Beta.\n  - THE service SHALL onboard minimum 50 verified experts with ≥2 posts each.\n\nPhase 2: Public Beta (target window: Q1–Q2 2026)\n- Scope highlights: Transparency logs, editor curation packages, expanded notification controls, improved discovery filters, sanctions and appeals process.\n- Gates:\n  - THE service SHALL demonstrate moderation reversal rate under 7% across two consecutive months.\n  - THE service SHALL reach 20–25% 28-day retention for new sign-ups in Public Beta.\n  - THE service SHALL sustain p95 perceived response under 4 seconds for feeds and posts under typical conditions.\n\nPhase 3: General Availability (GA) (target window: Q3 2026)\n- Scope highlights: Premium membership v1, sponsorship placements, expert Q&A programs, expanded governance reporting.\n- Gates:\n  - THE service SHALL reach 25–35% 28-day retention within three months post-GA.\n  - THE service SHALL onboard 150+ active experts with ongoing production.\n  - THE service SHALL meet monetization targets (≥2 sponsorships/month steady state).\n\nPhase 4: Expansion (post-GA, ongoing)\n- Possible directions: Regional topic verticals, institutional partnerships, digest products for professionals, advanced trust signals.\n- Governance maturity: More granular sanctions matrix and election-period policies aligned with local regulations.\n\n### Visual: Trust-Centric Content Lifecycle (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A1[\"Draft Content\"] --> A2[\"Add Sources/Tags\"]\n    A2 --> A3[\"Publish\"]\n  end\n\n  subgraph \"Community & Signals\"\n    B1[\"Topic/Expert Follow\"] --> B2[\"Reactions/Votes/Bookmarks\"]\n    B2 --> B3[\"Personalized Feeds/Digests\"]\n  end\n\n  subgraph \"Governance\"\n    C1[\"Reports Submitted\"] --> C2[\"Moderation Queue\"]\n    C2 --> C3{\"Action Needed?\"}\n    C3 -->|\"Yes\"| C4[\"Hide/Remove/Warn\"]\n    C3 -->|\"No\"| C5[\"Maintain Visibility\"]\n    C4 --> C6[\"Transparency Log\"]\n    C5 --> C6\n  end\n\n  A3 --> B1\n  B2 -.-> C1\n```\n\n## Document Scope and Implementation Ownership\nThis document defines business objectives, scope, and measurable outcomes. It does not prescribe technical implementations. All technical decisions—including architecture, APIs, data models, and infrastructure—are owned by the development team. The document describes what the service should do, not how to build it.\n\n## Related Documents\n- See the [Business Model and Monetization Strategy](./02-pol-econ-board-business-model.md) for deeper business assumptions and revenue details.\n- See the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for role definitions and authorization policies.\n- See the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for comprehensive feature-level requirements.\n- See the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for rules, sanctions, and transparency requirements.\n- See the [Non-Functional Requirements Guide](./08-pol-econ-board-non-functional-requirements.md) for performance and reliability expectations.\n- See the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) for business-level notification rules.\n"},"step":0,"total":13,"completed":2,"created_at":"2025-08-12T04:19:00.713Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"개인정보/법규 준수 및 오남용 방지 정책을 비즈니스 관점에서 규정하기 위함.","filename":"09-pol-econ-board-security-and-compliance.md","documentType":"requirement","outline":["개인정보 보호 원칙과 동의 관리","데이터 권리(열람/정정/삭제/이동) 처리 프로세스","연령/본인확인 및 민감 시기 정책(필요 시)","법률·정책 준수(국내 PIPA 등)와 유관 요청 대응","감사 추적 및 투명성 요구","오남용/스팸/봇 방지 정책과 레이트리밋 원칙","보안 이벤트 커뮤니케이션"],"audience":"development team","keyQuestions":["개인정보 및 법적 요구는 무엇이며 어떻게 충족하는가","오남용 방지와 투명성 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["07-pol-econ-board-community-governance-and-moderation.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["법/정책은 비즈니스 해석 수준으로 기술","API/암호화 상세 구현 금지"],"content":"# 09-pol-econ-board Security and Compliance Requirements\n\n## Document Purpose and Scope\nThis document specifies business-level security, privacy, compliance, abuse prevention, and incident communication requirements for the pol-econ-board service. It defines WHAT the system must do from a compliance perspective, not HOW to implement it. It is written for backend developers and stakeholders who need precise, testable requirements free of technical implementation details.\n\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, encryption choices, third-party tools) belong to the development team. The document describes expected system behaviors, policies, and service levels in natural language using EARS.\n\n## Definitions and Personal Data Scope\n- Personal Data: Any information relating to an identified or identifiable natural person (e.g., name, email, IP address, device identifiers, content authored by a user when it can be linked to them).\n- Sensitive Data: Government-issued IDs, financial account numbers, precise geolocation, political opinions, health data, and any special categories as defined by applicable law.\n- Processing: Any operation performed on personal data (collection, storage, use, disclosure, transfer, deletion).\n- Controller (Business Role): The service operator (admin role) determining purposes and means of processing.\n- Processor (Operational Role): Vendors executing processing on behalf of the controller.\n\n## Privacy Principles and Consent Management\n### Principles\n- Lawfulness, fairness, transparency\n- Purpose limitation and data minimization\n- Accuracy\n- Storage limitation and retention schedules\n- Integrity and confidentiality\n- Accountability and auditability\n\n### Requirements (EARS)\n- THE service SHALL present clear privacy notices at each point of personal data collection describing purposes, categories, and retention periods.\n- THE service SHALL collect only the minimum data necessary to provide stated features and comply with law.\n- THE service SHALL maintain a registry of processing activities including purposes, data categories, recipient categories, and retention periods.\n- WHEN a user registers, THE service SHALL obtain explicit consent for optional processing (e.g., marketing communications) separate from essential processing.\n- WHEN consent is required by law, THE service SHALL record consent with timestamp, user identifier, consent scope, and source context.\n- WHEN a user withdraws consent, THE service SHALL cease the corresponding processing within 24 hours and update the consent registry.\n- WHEN processing purposes change materially, THE service SHALL notify users prior to changes and request renewed consent where required.\n- WHERE cookies or trackers are used for analytics or marketing, THE service SHALL obtain opt-in consent before activation and provide per-category controls.\n- WHILE executing essential service features, THE service SHALL permit processing without optional consents strictly limited to essential purposes specified in notices.\n- IF a user declines optional tracking, THEN THE service SHALL honor the choice across sessions within the same account and device context.\n- THE service SHALL provide granular preference controls for marketing, newsletter digests, and topic-based communications.\n- THE service SHALL publish contact details for privacy inquiries and complaints, including an email contact and postal address where applicable.\n\n## Data Subject Rights Processing (Access/Rectification/Deletion/Portability)\n### Process Overview\nData rights requests (DSAR) are accepted via authenticated channels and must be acknowledged, verified, processed, and recorded within defined SLAs. Actions include access copy, rectification, deletion, portability export, and processing restriction where applicable.\n\n### Requirements (EARS)\n- WHEN a user submits a rights request, THE service SHALL acknowledge receipt within 1 hour via the user’s preferred contact channel.\n- THE service SHALL require identity verification for all rights requests before actioning them.\n- WHEN identity verification succeeds, THE service SHALL begin processing within 1 business day.\n- THE service SHALL fulfill access and portability requests within 14 calendar days unless legally permitted extensions apply (one additional 14-day extension for complex cases).\n- THE service SHALL fulfill rectification requests within 7 calendar days after verification.\n- THE service SHALL fulfill deletion requests within 7 calendar days except where retention is required by law or for dispute resolution per published policies.\n- IF legal retention obligations prevent immediate deletion, THEN THE service SHALL restrict processing to storage-only and inform the user of the legal basis and retention duration.\n- THE service SHALL provide access copies limited to the requesting user’s data and exclude third-party personal data unless law permits disclosure.\n- WHERE portability applies, THE service SHALL provide a structured, commonly used, machine-readable export of the user’s data and metadata relevant to their content and account settings.\n- THE service SHALL log each request with request type, timestamps, verification outcome, action taken, and final resolution status for audit purposes.\n- IF a request is manifestly unfounded or excessive, THEN THE service SHALL decline with justification and provide an appeal path.\n- THE service SHALL provide an appeal path with review by a moderator or admin independent from the initial handler.\n- WHEN a deletion request completes, THE service SHALL remove the user’s profile data and pseudonymize authored public content where policy requires content continuity.\n\n### Verification and Fraud Prevention\n- THE service SHALL prevent abuse of rights processes by limiting concurrent open requests per user to 3 and by rate-limiting submissions to 1 per 24 hours per request type.\n- IF verification fails after 2 attempts, THEN THE service SHALL close the request with status \"verification_failed\" and provide retry guidance after 7 days.\n\n## Age/Identity Verification and Sensitive Period Policies\n### Context\nPolitical and economic discourse may involve heightened risk periods (elections, regulatory windows). Age and identity verification may be required by law for specific features or content.\n\n### Requirements (EARS)\n- WHERE age-based restrictions apply, THE service SHALL require date-of-birth declaration at registration and provide guardian consent workflows for users under 14 years old.\n- IF a user is identified as under 14 years old without guardian consent, THEN THE service SHALL suspend data processing beyond essential safety operations and request consent.\n- WHERE real-name verification is mandated for specific publishing features by applicable law, THE service SHALL require identity verification before enabling those features.\n- WHILE an election-sensitive period is active as defined by policy, THE service SHALL enable heightened review workflows for flagged political content per community governance policies.\n- THE service SHALL provide clear notices about additional processing involved in identity or age verification and retain verification evidence only for the minimum period necessary for compliance.\n\n## Legal/Policy Compliance and Third-party Requests\n### Scope\nCovers compliance with Korea’s PIPA and other applicable local regulations for the service’s operating jurisdictions, as well as handling of official requests from authorities or litigants.\n\n### Requirements (EARS)\n- THE service SHALL maintain up-to-date records of applicable laws and guidance relevant to privacy and platform governance in operating jurisdictions.\n- WHEN the service receives a lawful request for user information, THE service SHALL verify legal validity and scope before disclosure and document the decision process.\n- IF a request is overbroad, THEN THE service SHALL seek to narrow scope and refuse disclosure beyond lawful requirements.\n- THE service SHALL notify affected users of disclosure requests unless legally prohibited or risk of harm is identified.\n- THE service SHALL preserve relevant data upon receipt of a valid preservation notice and limit access to authorized personnel only.\n- THE service SHALL publish jurisdiction-specific policies for cross-border transfers and apply appropriate safeguards consistent with law.\n- WHEN policies or laws change materially, THE service SHALL update internal procedures and staff training within 30 days.\n\n## Audit Trail and Transparency Requirements\n### Auditability\n- THE service SHALL record administrative and moderation actions with actor role, target resource, action type, timestamp, and reason codes.\n- THE service SHALL protect audit logs from tampering via controlled access and integrity controls under developer-chosen mechanisms.\n- THE service SHALL retain audit logs for 2 years unless law requires longer retention.\n\n### Transparency\n- THE service SHALL publish a transparency report at least quarterly summarizing content moderation actions, government requests, privacy incidents, and DSAR statistics.\n- THE service SHALL provide category-level metrics without exposing personal data.\n\n### Requirements (EARS)\n- WHEN any admin or moderator performs a content action, THE service SHALL require a reason code from a standardized taxonomy.\n- WHEN DSARs are processed, THE service SHALL update the transparency dataset with count and average resolution time within 7 days of closure.\n- IF audit logs reach 80% of planned capacity, THEN THE service SHALL trigger capacity review and retention optimization according to published retention rules.\n\n## Abuse/Spam/Bot Prevention and Rate Limiting Principles\n### Philosophy\nBalance community participation with platform integrity, using measurable thresholds and fair appeal mechanisms. Thresholds apply per role with stricter limits for new or flagged accounts.\n\n### Default Thresholds by Role\n| Action | member | expert | moderator | editor | admin |\n|--------|--------|--------|-----------|--------|-------|\n| Post creations per hour | 5 | 8 | 12 | 8 | 20 |\n| Comments per 10 minutes | 30 | 40 | 60 | 40 | 80 |\n| Follows per hour | 20 | 30 | 60 | 30 | 80 |\n| Reports filed per hour | 10 | 15 | 40 | 40 | 80 |\n| DMs/invites per hour (if enabled) | 10 | 15 | 40 | 20 | 80 |\n\nAdditional States:\n- New accounts (<72 hours since registration) use 50% of the above limits.\n- Flagged accounts (policy or security risk) use 25% of the above limits until review.\n\n### Requirements (EARS)\n- THE service SHALL enforce the default thresholds by role and state as listed in the table for posting, commenting, following, reporting, and messaging actions.\n- WHILE an account is in new state (<72 hours), THE service SHALL apply the \"new\" thresholds automatically.\n- WHILE an account is in flagged state, THE service SHALL apply the \"flagged\" thresholds and require manual review by a moderator within 72 hours.\n- WHEN rate limit is exceeded, THE service SHALL block the action and display the remaining wait time before the next allowed action.\n- IF automated signals indicate bot-like behavior (e.g., actions at constant intervals or high burstiness), THEN THE service SHALL require an interactive challenge before allowing further actions.\n- THE service SHALL provide an appeal path for rate-limit or restriction decisions and resolve appeals within 7 calendar days.\n- WHERE abuse is detected across IP/device clusters, THE service SHALL apply graduated restrictions at the cluster level while permitting legitimate users to request review.\n\n## Security Event Communication\n### Severity Levels\n- Low: No personal data involved; limited functionality impact.\n- Medium: Limited personal data exposure or moderate functionality impact.\n- High: Confirmed or likely personal data breach affecting a meaningful subset of users or sustained service degradation.\n- Critical: Large-scale personal data breach or service-wide impact.\n\n### Requirements (EARS)\n- WHEN a personal data breach is confirmed at Medium severity or higher, THE service SHALL notify affected users without undue delay and within 24 hours of confirmation, including incident overview, data types affected, protective steps, and contact details.\n- THE service SHALL notify the competent authority in jurisdictions where required within statutory time limits (target within 72 hours for reportable incidents).\n- WHEN a High or Critical incident occurs, THE service SHALL publish public status updates at least every 6 hours until containment and provide a post-incident report within 14 days.\n- IF incident investigation identifies specific compromised credentials or sessions, THEN THE service SHALL invalidate the affected sessions and require re-authentication for impacted users.\n- THE service SHALL maintain an incident communication playbook specifying roles, approval steps, and message templates consistent with these timeframes.\n\n## Roles and Responsibilities for Compliance\n### Role Capabilities\n| Compliance Action | member | expert | moderator | editor | admin |\n|-------------------|--------|--------|-----------|--------|-------|\n| Submit DSAR | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View own DSAR status | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Approve/deny DSAR | ❌ | ❌ | ✅ (review) | ❌ | ✅ (final) |\n| View audit logs | ❌ | ❌ | ✅ (limited) | ✅ (content ops) | ✅ (full) |\n| Modify retention schedules | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Apply account restrictions | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Publish transparency metrics | ❌ | ❌ | ❌ | ✅ (content metrics) | ✅ (full) |\n| Handle legal requests | ❌ | ❌ | ❌ | ❌ | ✅ |\n\n### Requirements (EARS)\n- THE service SHALL restrict DSAR approval authority to admin with optional moderator review as a prerequisite.\n- WHEN a moderator applies a restriction, THE service SHALL record the reason code and notify the user with appeal instructions.\n- THE service SHALL limit audit log visibility for moderators and editors to their operational scope and exclude sensitive personal data fields.\n- THE service SHALL require dual control (two-person review) for changes to retention schedules and transparency report publication.\n\n## Performance and Service Level Expectations\n### User-Perceived Performance\n- THE service SHALL provide DSAR portal responses (status retrieval) within 2 seconds under normal load.\n- THE service SHALL deliver consent preference changes and reflect them in processing decisions within 5 minutes.\n- THE service SHALL deliver incident notification emails or in-app messages within 15 minutes of the communication decision.\n\n### Operational SLAs\n- THE service SHALL maintain availability for DSAR submission endpoints 99.9% monthly, excluding planned maintenance announced 48 hours in advance.\n- THE service SHALL ensure audit log write operations succeed for 99.99% of eligible actions measured monthly.\n\n## Visual Process Diagrams (Mermaid)\n### DSAR Processing Flow\n```mermaid\ngraph LR\n  subgraph \"User Submission\"\n    A[\"Submit DSAR\"] --> B[\"Acknowledge(1h)\"]\n  end\n  subgraph \"Verification\"\n    C[\"Verify Identity\"] --> D{\"Verified?\"}\n  end\n  subgraph \"Processing\"\n    E[\"Assign Handler\"] --> F[\"Process Request\"] --> G{\"Type?\"}\n    G -->|\"Access/Portability\"| H[\"Assemble Export\"]\n    G -->|\"Rectification\"| I[\"Apply Corrections\"]\n    G -->|\"Deletion\"| J[\"Delete/Restrict\"]\n  end\n  subgraph \"Closure\"\n    K[\"Quality Review\"] --> L[\"Respond & Close\"]\n  end\n  B --> C\n  D -->|\"Yes\"| E\n  D -->|\"No\"| M[\"Close: verification_failed\"]\n  H --> K\n  I --> K\n  J --> K\n  E --> F\n  F --> G\n  K --> L\n```\n\n### Abuse Detection and Rate Limit Flow\n```mermaid\ngraph LR\n  A[\"User Action\"] --> B[\"Check Thresholds\"] --> C{\"Exceeded?\"}\n  C -->|\"No\"| D[\"Allow Action\"]\n  C -->|\"Yes\"| E[\"Block & Show Wait Time\"] --> F{\"Bot-like?\"}\n  F -->|\"No\"| G[\"Log Event\"]\n  F -->|\"Yes\"| H[\"Challenge User\"] --> I{\"Pass?\"}\n  I -->|\"Yes\"| D\n  I -->|\"No\"| J[\"Apply Restriction\"] --> K[\"Queue Review(72h)\"]\n```\n\n## References to Related Documents\n- Refer to the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md) for content policy, enforcement triggers, and appeal processes.\n- Refer to the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, observability, and capacity expectations that underpin compliance operations.\n\n## Compliance Notes\n- This document interprets laws and policies at a business-requirements level and deliberately omits technical implementation details, APIs, encryption specifics, and vendor selections.\n"},"step":0,"total":13,"completed":3,"created_at":"2025-08-12T04:19:13.937Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"주요 업무 절차를 시각적으로 정리하여 팀 간 커뮤니케이션과 구현 일관성을 높이기 위함.","filename":"06-pol-econ-board-user-flows.md","documentType":"user-flow","outline":["사용자 여정 개요","계정 생성·인증 플로우","게시글 작성·수정·발행 플로우","신고 접수→중재→이의제기 플로우","알림 설정·수신 플로우","Mermaid 다이어그램(좌→우 흐름, 서브그래프 활용)","예외 분기 및 롤백 흐름"],"audience":"development team","keyQuestions":["각 플로우의 단계와 분기 조건은 무엇인가","역할별로 다른 경로와 승인 포인트는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["Mermaid 문법 규칙 엄수(이중따옴표, 화살표 규칙)","API/DB/아키텍처 세부 금지"],"content":"# pol-econ-board User Flows\n\nThis document specifies business-level user flows for the pol-econ-board service to ensure consistent implementation across teams. It describes WHAT the system should do from a business perspective; it does not dictate HOW to implement it. All technical implementation decisions (architecture, APIs, database design, etc.) are at the discretion of the development team.\n\n## Scope and Principles\n- Scope: Business workflows covering account creation and authentication, content authoring and publishing, reporting and moderation with appeal, and notifications configuration and delivery. Includes exception branches and rollback behaviors.\n- Roles in scope: member, expert, moderator, editor, admin.\n- Non-scope: Frontend UI/UX layouts, API endpoints, database schemas, infrastructure design.\n- Consistency: Flows use EARS requirements and Mermaid diagrams with left-to-right orientation and subgraphs for clarity.\n\n## User Journey Overview\nThe service facilitates political/economic discourse with trust and accountability. Users discover content, create posts, engage via comments and reactions, and participate in community governance through reporting. Expert users contribute deep analyses. Moderators and editors assure compliance and quality. Admins manage global policies.\n\nKey journey highlights:\n- Onboarding: Registration, email verification, sign-in, session maintenance, and secure sign-out across devices.\n- Creation: Draft → edit → version tracking → publish, with possible visibility constraints depending on policies and role capabilities.\n- Governance: Report → triage → action (hide/delete/sanction) → transparency log → appeal → review → resolution.\n- Notifications: Real-time and batch/digest messages respecting user preferences and rate limits.\n\n### High-Level Journey Diagram\n```mermaid\ngraph LR\n  A[\"Discover Content\"] --> B[\"Register/Sign In\"]\n  B --> C[\"Create Draft/Post\"]\n  C --> D{ \"Publish?\" }\n  D -->|\"Yes\"| E[\"Visible Per Policy\"]\n  D -->|\"No\"| F[\"Save as Draft\"]\n  E --> G[\"Engage(Comments/Reactions)\"]\n  G --> H{ \"Policy Violation Report?\" }\n  H -->|\"No\"| I[\"Continue Engagement\"]\n  H -->|\"Yes\"| J[\"Moderation Workflow\"]\n  J --> K{ \"Action Required?\" }\n  K -->|\"Yes\"| L[\"Apply Action(Sanction/Hide/Delete)\"]\n  K -->|\"No\"| M[\"Close with No Action\"]\n  E --> N[\"Notifications\"]\n```\n\n## Account Creation and Authentication Flow\nCovers registration, email verification, sign-in, session maintenance, sign-out, password reset, and cross-device revocation. Token usage follows the JWT-based principles defined in the authentication requirements document.\n\n### Narrative Flow\n- Registration: User submits registration data, the system validates inputs, creates an account in pending-verification state, sends verification instructions, and activates the account upon successful verification.\n- Sign-in: User submits credentials; the system validates and establishes a session with short-lived access and long-lived refresh tokens. Failed attempts increase a counter with temporary lockout as needed.\n- Password reset: User initiates reset, receives a one-time process to set a new password, and upon success, all existing sessions may be invalidated per policy.\n- Sign-out and device revocation: User can sign out on the current device and revoke all sessions on all devices.\n\n### Role Notes\n- All roles use the same authentication flow. Role assignment influences subsequent authorization, not sign-in mechanics.\n\n### EARS Requirements (Authentication)\n- THE authentication service SHALL accept registration with email and password and create an account in a pending-verification state.\n- WHEN a user completes email verification within the valid window, THE authentication service SHALL activate the account for sign-in.\n- IF email verification is attempted after expiration, THEN THE authentication service SHALL deny activation and allow requesting a new verification process.\n- WHEN a user submits valid credentials, THE authentication service SHALL establish a session and issue tokens with defined expirations.\n- IF a login attempt uses invalid credentials, THEN THE authentication service SHALL reject the login, increment a failure counter, and present a non-revealing error message.\n- WHERE the failure counter exceeds the lockout threshold within a window, THE authentication service SHALL apply a temporary login delay and provide guidance for password reset.\n- WHEN a user requests password reset, THE authentication service SHALL issue a one-time reset process bound to time and single-use constraints.\n- WHEN a password reset is completed, THE authentication service SHALL invalidate prior sessions according to security policy.\n- WHEN a user signs out, THE authentication service SHALL terminate the current session immediately.\n- WHEN a user requests device-wide sign-out, THE authentication service SHALL revoke all active sessions associated with the account.\n- WHILE a session is active, THE authentication service SHALL refresh access according to token refresh policy and deny refresh after refresh expiration.\n- THE authentication service SHALL respond to sign-in attempts within 2 seconds under normal load.\n\n### Account Creation & Authentication Diagram\n```mermaid\ngraph LR\n  subgraph \"Registration\"\n    A[\"Start Registration\"] --> B[\"Validate Inputs\"]\n    B --> C{ \"Valid?\" }\n    C -->|\"Yes\"| D[\"Create Pending Account\"]\n    C -->|\"No\"| E[\"Reject and Explain\"]\n    D --> F[\"Send Verification\"]\n  end\n\n  subgraph \"Verification\"\n    F --> G[\"User Follows Link\"]\n    G --> H{ \"Within Valid Window?\" }\n    H -->|\"Yes\"| I[\"Activate Account\"]\n    H -->|\"No\"| J[\"Offer New Verification\"]\n  end\n\n  subgraph \"Sign-In & Session\"\n    K[\"Submit Credentials\"] --> L[\"Validate Credentials\"]\n    L --> M{ \"Valid?\" }\n    M -->|\"Yes\"| N[\"Issue Tokens\"]\n    M -->|\"No\"| O[\"Reject and Increment Counter\"]\n    N --> P[\"Access Protected Resources\"]\n    P --> Q{ \"Refresh Needed?\" }\n    Q -->|\"Yes\"| R[\"Refresh Within Policy\"]\n    Q -->|\"No\"| S[\"Continue\"]\n  end\n\n  subgraph \"Sign-Out & Revocation\"\n    T[\"User Sign-Out\"] --> U[\"Terminate Current Session\"]\n    V[\"Revoke All Devices\"] --> W[\"Invalidate All Sessions\"]\n  end\n```\n\n## Post Create, Edit, Publish Flow\nCovers drafting, editing, versioning, and publishing content with role-based nuances and policy checks.\n\n### Narrative Flow\n- Drafting: Any authenticated member or expert creates drafts with autosave. Editor and admin roles do not author on behalf of others unless business policy explicitly allows; they manage curation and featured placement through separate processes.\n- Editing: Authors can edit drafts without restriction; once published, edits create new versions with change logs. Members can update their own content; experts can publish \"insight\" or \"research\" posts with the same versioning rules.\n- Pre-publish checks: System runs policy validations (e.g., banned topics during sensitive periods, required sources for claims). Optional flags may route posts for moderator review depending on signals or configured rules.\n- Publishing: If checks pass and no mandatory review is required, the post becomes visible according to visibility policy (public or restricted). If review is required, visibility remains limited until approval.\n\n### Role Notes\n- member: Can draft, edit, publish their own content; subject to automated checks and potential moderation review.\n- expert: Same as member plus can mark posts as expert content; subject to the same policy checks. Their posts may be prioritized for curation but do not bypass policy enforcement.\n- editor: Can feature and pin posts, manage topics/labels; cannot override moderation policy alone.\n- moderator: Can hold, hide, or request actions on posts per governance policy.\n- admin: Can override for legal/policy compliance and manage system-level settings.\n\n### EARS Requirements (Authoring & Publishing)\n- WHEN an authenticated user creates a draft, THE content service SHALL save the draft and maintain an immutable version history upon each significant save.\n- WHILE a post remains in draft, THE content service SHALL restrict visibility to the author and authorized reviewers where applicable.\n- WHEN an author attempts to publish, THE content service SHALL execute policy checks including restricted periods, mandatory citations, and prohibited content categories.\n- IF any mandatory check fails, THEN THE content service SHALL block publishing, present failure reasons, and preserve the draft state.\n- WHERE a post is flagged by automated heuristics or configured rules, THE content service SHALL route the post to a moderation queue and defer public visibility until decision.\n- WHEN a post passes all checks without mandatory review, THE content service SHALL publish the post and set visibility per policy immediately.\n- WHEN an author edits a published post, THE content service SHALL create a new version, preserve prior versions, and update the live version upon successful checks.\n- IF an author attempts to edit content under active investigation, THEN THE content service SHALL restrict edits to draft-copy only and prevent live changes until the investigation concludes.\n- THE content service SHALL record publication timestamps and version identifiers for transparency.\n- THE content service SHALL complete pre-publish validation within 3 seconds for standard-length posts under normal load.\n\n### Authoring & Publishing Diagram\n```mermaid\ngraph LR\n  subgraph \"Drafting\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Edit Content\"]\n  end\n\n  subgraph \"Pre-Publish Checks\"\n    C --> D[\"Run Policy Checks\"]\n    D --> E{ \"Checks Pass?\" }\n    E -->|\"No\"| F[\"Block Publish and Explain\"]\n    E -->|\"Yes\"| G{ \"Flagged for Review?\" }\n    G -->|\"Yes\"| H[\"Route to Moderation Queue\"]\n    G -->|\"No\"| I[\"Publish Immediately\"]\n  end\n\n  subgraph \"Post-Publish\"\n    I --> J[\"Visible per Policy\"]\n    H --> K{ \"Moderator Decision\" }\n    K -->|\"Approve\"| L[\"Publish\"]\n    K -->|\"Reject\"| M[\"Return to Draft with Reasons\"]\n    K -->|\"Request Changes\"| N[\"Author Revises Draft\"]\n    N -.-> D\n  end\n\n  subgraph \"Editing Published Content\"\n    O[\"Edit Published Post\"] --> P[\"Create New Version\"]\n    P --> D\n  end\n```\n\n## Report Intake → Moderation → Appeal Flow\nDefines how users report content, how moderators triage and act, and how authors can appeal decisions. Time expectations are stated from a business perspective.\n\n### Narrative Flow\n- Reporting: Any authenticated user can report content under specified categories (e.g., misinformation, hate, spam). The system validates report completeness and enters it into the moderation queue.\n- Triage: Moderators review reports by severity and context, consult guidelines, and record transparent decisions, including temporary hiding where warranted.\n- Actions: Possible outcomes include no action, warning, temporary suspension, content edit request, hide, or delete. Sanctioning follows the governance policy and transparency logging.\n- Appeal: Affected users can file appeals within a defined window. Appeals are reviewed by a different moderator or a designated reviewer. Decisions are logged and communicated.\n\n### Role Notes\n- member/expert: Can submit reports; can appeal actions affecting their content or account.\n- moderator: Can triage reports, apply content actions, propose or apply sanctions within their remit.\n- editor: Collaborates for quality guidance but does not unilaterally override moderation outcomes.\n- admin: Handles escalations, legal requests, and final adjudication when policy demands.\n\n### EARS Requirements (Moderation)\n- WHEN a user submits a report with a valid category and target, THE governance service SHALL create a case and place it in the moderation queue.\n- IF the report lacks required details, THEN THE governance service SHALL reject the submission and instruct the reporter to provide missing fields.\n- WHERE content presents imminent harm indicators, THE governance service SHALL apply temporary hiding pending expedited review.\n- WHEN a moderator reviews a case, THE governance service SHALL require a decision record including category, rationale, and action.\n- WHEN a case is resolved with action, THE governance service SHALL notify the reporter and affected parties with outcome and rationale.\n- WHERE a sanction affects account capabilities, THE governance service SHALL enforce restrictions immediately upon decision.\n- WHEN an appeal is received within the allowed window, THE governance service SHALL assign it to an eligible reviewer distinct from the original decision maker.\n- IF an appeal is upheld, THEN THE governance service SHALL restore the content or reverse sanctions and update the transparency record.\n- IF an appeal is denied, THEN THE governance service SHALL maintain the action and record the rationale.\n- THE governance service SHALL target initial triage within 24 hours for standard cases and within 2 hours for imminent harm indicators.\n\n### Moderation & Appeal Diagram\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    A[\"Submit Report\"] --> B[\"Validate Fields\"]\n    B --> C{ \"Complete?\" }\n    C -->|\"No\"| D[\"Reject and Guide\"]\n    C -->|\"Yes\"| E[\"Create Case\"]\n  end\n\n  subgraph \"Triage & Review\"\n    E --> F{ \"Imminent Harm?\" }\n    F -->|\"Yes\"| G[\"Temporarily Hide Content\"]\n    F -->|\"No\"| H[\"Queue by Priority\"]\n    G --> I[\"Expedited Review\"]\n    H --> I\n    I --> J{ \"Decision\" }\n  end\n\n  subgraph \"Actions\"\n    J -->|\"No Action\"| K[\"Close Case\"]\n    J -->|\"Warn/Suspend\"| L[\"Apply Sanction\"]\n    J -->|\"Hide/Delete\"| M[\"Apply Content Action\"]\n    J -->|\"Edit Request\"| N[\"Request Changes from Author\"]\n  end\n\n  subgraph \"Appeal\"\n    O[\"File Appeal\"] --> P[\"Assign Different Reviewer\"]\n    P --> Q{ \"Appeal Outcome\" }\n    Q -->|\"Upheld\"| R[\"Reverse Action and Restore\"]\n    Q -->|\"Denied\"| S[\"Maintain Action\"]\n  end\n\n  K --> T[\"Notify Parties\"]\n  L --> T\n  M --> T\n  N --> T\n  R --> T\n  S --> T\n```\n\n## Notification Settings and Receipt Flow\nDefines how users configure preferences and how notifications are delivered in real time or digest, respecting rate limits and user control.\n\n### Narrative Flow\n- Preference management: Users opt in/out per channel (in-app, email) and per category (mentions, replies, follows, moderation updates, policy events). Users may select digest frequency for summaries.\n- Triggering: Events such as mentions, comments, follows, publication outcomes, and moderation decisions trigger notifications. The system evaluates user preferences, quiet hours if defined, and rate limits before sending.\n- Delivery: Real-time where required; batched aggregation for digest per chosen interval. Failures are retried according to policy. Users can view notification history.\n\n### Role Notes\n- All roles receive notifications relevant to their actions and responsibilities. Moderators additionally receive queue assignments; admins receive policy/legal event notifications.\n\n### EARS Requirements (Notifications)\n- WHEN a trigger event occurs, THE notification service SHALL evaluate the recipient's preferences and channel availability before queuing delivery.\n- WHERE a user has enabled digest for a category, THE notification service SHALL aggregate events and deliver at the configured interval.\n- IF a user has opted out for a channel or category, THEN THE notification service SHALL suppress delivery for that scope.\n- WHEN a delivery attempt fails transiently, THE notification service SHALL retry according to backoff policy and record failure if exhausted.\n- WHEN a notification pertains to moderation outcomes, THE notification service SHALL include outcome, rationale summary, and available next steps.\n- THE notification service SHALL respect configured rate limits and quiet hours for non-critical categories.\n- WHERE an event is critical (security or policy), THE notification service SHALL bypass quiet hours for the minimum necessary alerting.\n\n### Notification Flow Diagram\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    A[\"Open Preferences\"] --> B[\"Set Channels\"]\n    B --> C[\"Set Categories\"]\n    C --> D[\"Set Digest Frequency\"]\n  end\n\n  subgraph \"Trigger & Evaluation\"\n    E[\"Event Triggered\"] --> F[\"Load Recipient Preferences\"]\n    F --> G{ \"Opted Out?\" }\n    G -->|\"Yes\"| H[\"Suppress\"]\n    G -->|\"No\"| I{ \"Digest Category?\" }\n    I -->|\"Yes\"| J[\"Aggregate for Digest\"]\n    I -->|\"No\"| K[\"Queue for Real-Time Delivery\"]\n  end\n\n  subgraph \"Delivery\"\n    K --> L[\"Attempt Delivery\"]\n    L --> M{ \"Success?\" }\n    M -->|\"Yes\"| N[\"Record Sent\"]\n    M -->|\"No\"| O[\"Retry per Policy\"]\n    O --> P{ \"Exhausted?\" }\n    P -->|\"Yes\"| Q[\"Record Failure\"]\n    P -->|\"No\"| L\n    J --> R[\"Send Digest at Interval\"]\n  end\n```\n\n## Exception Branches and Rollback Flows\nThis section unifies common exception handling paths across flows from a business perspective.\n\n### EARS Requirements (Exceptions & Rollbacks)\n- IF registration input validation fails, THEN THE authentication service SHALL not create an account and SHALL provide actionable guidance without revealing sensitive validation logic.\n- IF email verification is attempted with an invalid or expired token, THEN THE authentication service SHALL deny activation and SHALL offer a new verification process.\n- IF token refresh is attempted after refresh expiration, THEN THE authentication service SHALL require re-authentication and SHALL deny access until successful sign-in.\n- IF an author loses connectivity during draft save, THEN THE content service SHALL retain the last confirmed version and SHALL surface a reconciliation prompt on next restore.\n- IF pre-publish checks detect policy violations, THEN THE content service SHALL preserve the draft, SHALL enumerate violations, and SHALL block publication until resolved.\n- IF a moderation action is applied in error and later reversed, THEN THE governance service SHALL restore content visibility and SHALL update all related notifications and transparency records.\n- IF notification delivery repeatedly fails for a channel, THEN THE notification service SHALL mark the channel as temporarily unavailable for the recipient and SHALL suggest remediation steps via an alternative channel if available.\n- WHEN a user requests account-wide sign-out, THE authentication service SHALL revoke all devices within 1 minute and SHALL require fresh authentication for any new access.\n\n### Cross-Flow Rollback Diagram\n```mermaid\ngraph LR\n  A[\"Draft Save Attempt\"] --> B{ \"Network OK?\" }\n  B -->|\"Yes\"| C[\"Save Draft Version\"]\n  B -->|\"No\"| D[\"Keep Last Confirmed Version\"]\n  D --> E[\"Prompt Reconcile on Return\"]\n\n  F[\"Publish Attempt\"] --> G{ \"Policy Checks Pass?\" }\n  G -->|\"Yes\"| H[\"Publish Live\"]\n  G -->|\"No\"| I[\"Block and Keep Draft\"]\n\n  J[\"Token Refresh\"] --> K{ \"Refresh Valid?\" }\n  K -->|\"Yes\"| L[\"Issue New Access\"]\n  K -->|\"No\"| M[\"Require Re-Auth\"]\n\n  N[\"Moderation Reversal\"] --> O[\"Restore Content\"]\n  O --> P[\"Update Notifications\"]\n  O --> Q[\"Update Transparency Record\"]\n```\n\n## Related Documents\n- For roles, tokens, and authentication policies, see the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- For end-to-end business functionality, refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n- For community rules, report categories, sanctions, and appeals, consult the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md).\n\n"},"step":0,"total":13,"completed":4,"created_at":"2025-08-12T04:19:14.950Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"정보의 생성→사용→보존→삭제 전주기를 비즈니스 레벨에서 규정하기 위함.","filename":"10-pol-econ-board-data-lifecycle-and-retention.md","documentType":"requirement","outline":["데이터 흐름 개요(개념적)","게시물/댓글 라이프사이클(초안/발행/수정/아카이브/삭제)","신고/중재 라이프사이클과 증빙 보존","로그/지표/백업의 보존 기간과 파기 원칙","익명화/가명처리의 비즈니스 요건","사용자 요청 기반 삭제 및 복구 창구"],"audience":"development team","keyQuestions":["핵심 데이터의 라이프사이클 단계와 보존 원칙은 무엇인가","삭제/복구/익명화 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["09-pol-econ-board-security-and-compliance.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["정책은 검증 가능하고 감사 가능해야 함","기술 구현 세부 금지"],"content":"# pol-econ-board Data Lifecycle and Retention Requirements\n\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, storage tiers, batch jobs, etc.) belong to developers. The document specifies WHAT must happen in the data lifecycle, not HOW to build it.\n\n## 1. Scope and Intent\n- Define verifiable and auditable business rules governing how information is created, used, preserved, anonymized, and deleted across its full lifecycle for the pol-econ-board service.\n- Ensure clarity across roles (member, expert, moderator, editor, admin) regarding responsibilities and constraints over data states.\n- Align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) and the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 2. Definitions and Data Classes\n- Core data classes (business-level):\n  - Account Profile: minimal identity and preferences for member/expert/moderator/editor/admin.\n  - Post: authored content including title/body and metadata (topics, tags, visibility).\n  - Comment/Reply: discussion items attached to a post; includes mentions.\n  - Reaction/Vote: simple engagement signals tied to posts or comments.\n  - Follow/Subscription/Bookmark: user-interest signals for topics, authors, or items.\n  - Report: user-submitted complaint about content or behavior.\n  - Moderation Record: decision, rationale, sanctions, and transparency notes.\n  - Notification Record: delivery attempts, status, and user preference references.\n  - Audit Log: immutable trace of sensitive actions and lifecycle transitions.\n  - Metrics/Analytics Event: aggregated counters and event samples (business analytics scope only).\n  - Backup Artifact: point-in-time preservation of business records for disaster recovery.\n\n- Role scope:\n  - Member/Expert: create and manage own content; request deletion; exercise data rights.\n  - Moderator: handle reports; hide/remove content; propose sanctions; manage evidence.\n  - Editor: curate and pin content; manage featured sets; no unilateral personal data access beyond business needs.\n  - Admin: oversee policy application; impose legal holds; access audit and transparency logs.\n\n## 3. Conceptual Data Flow Overview\n```mermaid\ngraph LR\n  subgraph \"Creation\"\n    A1[\"User Creates Draft(Post/Comment)\"] --> A2[\"Validation & Classification\"]\n  end\n  subgraph \"Usage\"\n    B1[\"Publish/Engage(Reads, Reactions)\"] --> B2[\"Edits & Versions\"]\n  end\n  subgraph \"Governance\"\n    C1[\"Report Submitted\"] --> C2[\"Moderation Review\"] --> C3[\"Decision & Sanction\"]\n  end\n  subgraph \"Preservation\"\n    D1[\"Audit Logging\"] --> D2[\"Backups & Metrics\"]\n  end\n  subgraph \"Disposition\"\n    E1[\"User/Delete Requests\"] --> E2[\"Soft Delete/Archive\"] --> E3[\"Permanent Deletion/Anonymization\"]\n  end\n  A2 --> B1\n  B2 -.-> D1\n  B1 --> D2\n  C3 --> D1\n  E1 --> D1\n```\n\n## 4. Lifecycle Policies by Object\nThe following requirements use EARS format where applicable. Timeframes are calendar durations counted from the stated triggering event. “Soft delete” means hidden from ordinary access but recoverable; “Permanent deletion” means irreversible removal or anonymization as specified.\n\n### 4.1 Post Lifecycle\nStates: Draft → Published → Edited (Versioned) → Archived (optional) → Deleted (Soft) → Permanently Deleted.\n\n- Creation and Drafts\n  - WHEN a user saves a post as draft, THE service SHALL retain the draft for 90 days since last edit; IF the draft remains inactive for 90 consecutive days, THEN THE service SHALL mark it for permanent deletion within 7 days.\n  - THE service SHALL allow authors to self-delete drafts at any time; WHEN a draft is self-deleted, THE service SHALL purge it permanently within 7 days.\n\n- Publishing and Editing\n  - WHEN a draft is published, THE service SHALL record a publication timestamp and initial version.\n  - WHEN an author edits a published post, THE service SHALL preserve the immediately prior version for 30 days for rollback and audit purposes, unless a legal or moderation hold requires longer retention.\n  - IF a published post is edited within 10 minutes of publication, THEN THE service SHALL treat the edit as a minor update not requiring separate archival unless the content meaning materially changes per moderation rules.\n\n- Archiving (business visibility management)\n  - WHERE a post is older than 365 days without new engagement (views, comments, or reactions), THE service SHALL be eligible to move it to an archived state where it remains readable but excluded from default feeds.\n  - WHEN a post enters archived state, THE service SHALL maintain all references (comments, reactions) intact.\n\n- Deletion\n  - WHEN an author deletes a published post, THE service SHALL transition it to soft delete immediately, exclude it from public access, and begin a 30-day recovery window for the author.\n  - WHEN the 30-day recovery window elapses without restoration, THE service SHALL permanently delete post body and attachments while retaining minimal non-content metadata (author pseudonymous identifier, deletion timestamp, and content identifier) for 180 days for audit and abuse-prevention, after which THE service SHALL anonymize or delete such metadata unless under legal hold.\n  - IF a post is under active moderation investigation or legal hold at deletion request time, THEN THE service SHALL defer permanent deletion until the hold is lifted and SHALL inform the author of the hold status through standard communication channels.\n\n- Cross-References\n  - WHEN a post is permanently deleted, THE service SHALL remove or anonymize dependent objects per their own policies (e.g., comments authored by others remain but lose parent pointer visibility and show “missing parent” text as defined by business copy; reactions are removed).\n\n### 4.2 Comment/Reply Lifecycle\nStates: Draft → Published → Edited → Deleted (Soft) → Permanently Deleted.\n\n- Drafts and Publishing\n  - THE service SHALL apply the same draft retention rules as posts (90-day inactivity purge).\n  - WHEN a comment is published, THE service SHALL record a publication timestamp and link to the parent post/comment.\n\n- Editing\n  - WHERE editing is permitted by community policy, THE service SHALL allow comment edits within 24 hours of posting; WHEN edited, THE service SHALL keep a prior version for 7 days for moderation audit.\n\n- Deletion\n  - WHEN a commenter deletes their comment, THE service SHALL soft delete immediately and offer a 14-day recovery window.\n  - WHEN the 14-day window elapses, THE service SHALL permanently delete content while retaining minimal non-content metadata for 90 days for audit unless under legal hold.\n  - IF the comment has replies, THEN THE service SHALL display a “comment removed” placeholder behavior at the business content layer and preserve reply visibility.\n\n### 4.3 Reactions and Votes\n- WHEN a user adds or removes a reaction or vote, THE service SHALL apply the change immediately and record an event in audit logs as required.\n- WHEN a user account is deleted, THE service SHALL delete or aggregate reactions and votes such that individual attribution is removed within 7 days.\n- THE service SHALL retain reaction events for 90 days for abuse detection, after which THE service SHALL aggregate or purge individual events, keeping only aggregate counts.\n\n### 4.4 Follows, Subscriptions, and Bookmarks\n- WHEN a user follows a topic or author, THE service SHALL store the preference until the user unfollows or the account is deleted.\n- WHEN a user removes a bookmark, THE service SHALL delete the bookmark record immediately and exclude it from backups after the standard retention window.\n- WHERE an account is deleted, THE service SHALL purge follows/subscriptions/bookmarks within 7 days.\n\n### 4.5 Account Profile and Preferences\n- WHEN an account is created, THE service SHALL store only minimal required profile fields and preferences per data minimization principle.\n- WHEN a user updates profile fields or preferences, THE service SHALL overwrite prior values and retain a change-audit entry for 180 days.\n- WHEN a user requests account deletion, THE service SHALL begin a 14-day cooling-off period during which sign-in cancels the deletion if the user explicitly revokes the request; after the period, THE service SHALL permanently delete or anonymize personal data except data needed for legal obligations or transparency logs.\n\n## 5. Report/Moderation Lifecycle and Evidence Retention\nStates: Reported → Triaged → Under Review → Decision → Sanction (if any) → Appeal → Finalized.\n\n- Report Intake\n  - WHEN a report is submitted, THE service SHALL timestamp, classify, and place it into the moderation queue.\n  - THE service SHALL preserve report details and referenced content snapshot at the time of report for evidentiary purposes.\n\n- Review and Decision\n  - WHEN a moderator opens a report, THE service SHALL record reviewer identity (role), actions taken, and time spent for transparency.\n  - WHEN a decision is issued, THE service SHALL store the decision, rationale, and associated policy references.\n\n- Evidence Retention\n  - THE service SHALL retain report records, content snapshots used as evidence, and moderation decisions for 2 years from finalization for audit and transparency, unless stricter statutory requirements apply.\n  - IF a sanction includes account suspension or permanent ban, THEN THE service SHALL retain the minimal identifiers necessary to enforce sanctions for the sanction duration plus 2 years.\n\n- Appeals\n  - WHEN an appeal is filed within the window defined by governance policy, THE service SHALL lock evidence from deletion until appeal closure.\n  - WHEN an appeal concludes, THE service SHALL update retention start to the appeal closure date.\n\n- Interaction with User Deletions\n  - IF the reported content’s author requests deletion, THEN THE service SHALL keep evidence under legal/moderation hold until the case is finalized, then apply standard deletion rules.\n\nReference: See the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 6. Logs, Metrics, and Backups: Retention and Disposal Principles\n- Audit and Security Logs\n  - THE service SHALL retain authentication, authorization, and sensitive action audit logs for 180 days at minimum and up to 1 year where required by internal policy.\n  - WHERE logs contain personal identifiers, THE service SHALL pseudonymize identifiers within 30 days unless strict identity is required for ongoing investigations.\n\n- Transparency Logs\n  - THE service SHALL retain public-facing transparency records of moderation actions for 2 years, with personal data minimized and pseudonymized where possible.\n\n- Operational Metrics and Analytics\n  - THE service SHALL retain granular metrics and event samples for 90 days; after 90 days THE service SHALL keep only aggregated, non-identifying statistics for longitudinal analysis.\n\n- Notification Delivery Logs\n  - THE service SHALL retain notification delivery attempts and outcomes for 90 days to support troubleshooting and compliance with opt-in/opt-out proofs.\n\n- Backups (Business-Level Principles)\n  - THE service SHALL maintain daily recovery points sufficient to restore to a business-acceptable point-in-time; WHERE monthly full retention is applied, THE service SHALL retain monthly recovery points for 3 months and daily recovery points for 30 days.\n  - IF a user exercises deletion rights, THEN THE service SHALL ensure that deleted personal data ages out of backup media within 35 days after deletion processed, acknowledging backup immutability windows.\n  - THE service SHALL document and publish the effective backup retention windows for audit.\n\n- Disposal\n  - WHEN retention expires and no legal or moderation hold exists, THE service SHALL dispose of logs, metrics, and backups in a manner that is irreversible and documented via audit entries.\n\n## 7. Anonymization and Pseudonymization Requirements\n- Pseudonymization\n  - WHEN storing data for audit or transparency, THE service SHALL replace direct personal identifiers with stable pseudonymous identifiers sufficient for role-based review but insufficient for public re-identification.\n  - WHERE cross-record correlation is necessary for abuse detection, THE service SHALL use rotating pseudonymous identifiers that change at most every 90 days while maintaining internal linkage.\n\n- Anonymization\n  - WHEN permanent deletion is required but business analytics retains value, THE service SHALL anonymize records by removing or irreversibly altering personal identifiers and quasi-identifiers so that re-identification is not reasonably possible.\n  - IF anonymization cannot guarantee non-reidentifiability for a dataset, THEN THE service SHALL opt for full deletion.\n\n- Re-identification Prohibition\n  - THE service SHALL prohibit any attempt to reverse pseudonymization or anonymization, and SHALL record violations as security incidents.\n\n- Documentation\n  - THE service SHALL maintain a data dictionary that maps data classes to anonymization/pseudonymization strategies at a business-description level for audit review.\n\n## 8. User-Requested Deletion and Recovery\n- Content Deletion by Author\n  - WHEN an author deletes own content (posts or comments), THE service SHALL begin the applicable recovery window (30 days for posts, 14 days for comments) and provide a self-service restoration option during that window.\n  - WHEN content is restored during the window, THE service SHALL reinstate all visible links and engagement counts except those already purged by separate user actions.\n\n- Account Deletion\n  - WHEN a verified user submits an account deletion request, THE service SHALL acknowledge the request within 24 hours, start a 14-day cooling-off period, and communicate the scheduled deletion date.\n  - WHEN the cooling-off period ends without revocation, THE service SHALL delete or anonymize personal data within 15 additional days and notify the user of completion if notification channels remain valid.\n  - WHERE legal obligations require retention (e.g., moderation transparency, fraud prevention), THE service SHALL retain only the minimal data necessary and SHALL document the legal basis.\n\n- Exceptions and Holds\n  - IF an active moderation case, payment dispute, or legal hold exists, THEN THE service SHALL defer deletion until closure and SHALL inform the user about the deferral reason and expected next steps.\n\n- Recovery Portal\n  - THE service SHALL provide a history of user-initiated deletions within the active recovery window and SHALL allow one-click restoration by the content owner.\n  - WHERE recovery would violate a moderation decision (e.g., content removed for policy breach), THE service SHALL block restoration and display the applicable policy reference in user-facing communications.\n\n## 9. Legal Hold and Exceptions\n- WHEN an Admin establishes a legal hold for specific subjects or data classes, THE service SHALL freeze deletion and anonymization actions for affected records until the hold is explicitly lifted.\n- THE service SHALL record the hold’s scope, reason (business-level reference), start/end timestamps, and approver role in the audit log and SHALL review active holds every 90 days.\n\n## 10. Retention Matrix (Business Summary)\n\n| Data Category | State/Trigger | Retention Policy | Deletion Type | Recovery Window | Notes |\n|---|---|---|---|---|---|\n| Draft Posts/Comments | Last edit inactive | Delete after 90 days inactivity + purge within 7 days | Permanent | N/A | User can self-delete anytime |\n| Published Post Versions | Edit event | Prior version kept 30 days | Auto purge after 30 days | N/A | Longer if under hold |\n| Posts (Author-deleted) | Soft deleted | Recovery 30 days; then delete content; metadata 180 days | Permanent (content), anonymize metadata | 30 days | Defer if under hold |\n| Comments (Author-deleted) | Soft deleted | Recovery 14 days; then delete content; metadata 90 days | Permanent (content), anonymize metadata | 14 days | Placeholder remains |\n| Reactions/Votes | Event created | Keep raw 90 days; keep aggregates indefinitely | Aggregate only | N/A | Remove attribution on account deletion (7 days) |\n| Follows/Bookmarks | Preference removed | Immediate deletion | Permanent | N/A | Purge within 7 days on account deletion |\n| Account Profiles | Deletion requested | 14-day cooling; delete/anonymize within +15 days | Permanent/Anonymize | N/A | Minimal retention if required by law |\n| Reports & Evidence | Finalization/Appeal close | 2 years | N/A | N/A | Extend under legal requirements |\n| Audit/Security Logs | Log creation | 180 days up to 1 year | Permanent | N/A | Pseudonymize in 30 days unless needed |\n| Transparency Logs | Action published | 2 years | N/A | N/A | Personal data minimized |\n| Metrics/Analytics | Event creation | Granular 90 days; aggregates thereafter | Aggregate | N/A | Non-identifying aggregates |\n| Notification Logs | Event creation | 90 days | Permanent | N/A | Proof of consent history |\n| Backups | Recovery point creation | Daily 30 days; Monthly 3 months | Secure destruction | N/A | Deleted data ages out ≤35 days |\n\n## 11. Error Handling and Edge Cases (Business)\n- Conflicts and Holds\n  - IF a user requests deletion while a legal or moderation hold exists, THEN THE service SHALL process the request to the extent possible and queue the remainder until the hold is lifted, with user notification per communications policy.\n\n- Referential Integrity\n  - WHEN a parent post is permanently deleted, THE service SHALL ensure that child comments remain visible if policy allows, with a clear placeholder and without broken navigation.\n\n- Partial Failures\n  - IF a deletion workflow partially completes, THEN THE service SHALL mark the item as “deletion pending” and retry within 24 hours until completion or hold.\n\n- Race Conditions\n  - WHEN simultaneous restore and delete actions occur within a recovery window, THE service SHALL prioritize the most recent, explicitly confirmed user action and record the decision in the audit log.\n\n- Attachments and Embedded Media\n  - WHEN content is deleted, THE service SHALL apply the same retention schedule to associated attachments and embedded media unless under hold.\n\n## 12. Auditability and Policy Governance\n- Lifecycle Event Logging\n  - THE service SHALL record lifecycle transitions (create, publish, edit, archive, delete, restore, hold apply/release) with actor role, timestamp, and reason, in an immutable audit trail accessible to Admins for compliance review.\n\n- Policy Versioning\n  - THE service SHALL maintain a versioned registry of lifecycle and retention rules; WHEN rules change, THE service SHALL apply new rules prospectively and SHALL not retroactively shorten required legal retention unless permitted by law.\n\n- Reviews and Certification\n  - THE service SHALL review lifecycle and retention practices at least annually and after major regulatory updates, certifying compliance status at the business level.\n\n- Minimization and Purpose Limitation\n  - THE service SHALL collect and retain only data necessary for the stated purpose and duration, as further detailed in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## 13. Success Criteria\n- Verifiability\n  - WHEN auditors review samples, THE service SHALL demonstrate that items followed the stated retention timelines within ±2 days for dated windows and without exception where no holds existed.\n\n- User Experience Timing\n  - WHEN users delete content, THE service SHALL remove content from user-facing views within 1 minute and complete background cleanup according to this policy.\n\n- Backup Aging\n  - WHEN users exercise deletion rights, THE service SHALL verify that personal data no longer appears in restore points older than 35 days after deletion completion.\n\n- Transparency\n  - THE service SHALL produce a quarterly report summarizing counts of deletions, holds, appeals, and restoration events without exposing personal data.\n\n---\nAlignment Note: These business rules are designed to be testable and auditable. Technical choices to implement these rules (e.g., storage layers, job scheduling, cryptographic methods) are at the full discretion of the development team and must remain consistent with linked policy documents."},"step":0,"total":13,"completed":5,"created_at":"2025-08-12T04:19:15.722Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"사용자 커뮤니케이션 전반을 비즈니스 레벨에서 표준화하여 일관된 경험을 보장하기 위함.","filename":"11-pol-econ-board-notifications-and-communications.md","documentType":"requirement","outline":["알림 유형(실시간/배치/다이제스트)과 트리거 이벤트","채널(앱 내/이메일 등)과 빈도·레이트 한도","구독·팔로우·주제 다이제스트 정책","수신 동의/거부 및 선호 설정","콘텐츠 톤·메시지 구성 원칙","실패·지연 시 재시도/폴백 원칙"],"audience":"development team","keyQuestions":["어떤 이벤트에 어떤 알림을 어떤 채널로 보낼 것인가","이용자 통제권과 빈도 관리 정책은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["EARS 형식 요구사항 포함","기술 구현 세부 금지"],"content":"# Notifications and Communications Requirements — pol-econ-board\n\nThis document defines business requirements for user communications and notifications in pol-econ-board. It specifies what events generate notifications, which channels are used, how frequency and preferences are controlled, and how failures are handled. It describes WHAT the system should do, not HOW to build it. All technical implementation decisions (architecture, APIs, database design) belong to the development team.\n\n## 1) Scope and Principles\n\n- Coverage: In-app notifications, email communications, and batch/digest messages related to user activity, content interactions, moderation, editorial operations, and account/security events.\n- Exclusions: UI layouts, transport implementations, infrastructure, and provider-specific details.\n- Goals: Timely, relevant, controllable, and compliant communications that respect user consent and reduce noise.\n\nEARS Requirements (Principles)\n- THE communications policy for pol-econ-board SHALL prioritize 사용자 통제권(옵트인/옵트아웃, 선호 설정), 관련성, 적시성, 최소한의 침해성.\n- THE communications policy SHALL distinguish 거래성(Transactional)과 마케팅·커뮤니티 성장 목적(Non-transactional) 메시지 범주.\n- THE communications service SHALL support 사용자 현지 시간대 기반 스케줄링을 기본으로 하며 기본 시간대는 Asia/Seoul로 간주.\n\n## 2) Notification Taxonomy and Trigger Events\n\nCategories\n- Account & Security (transactional): sign-up verification, password reset, role change, email change confirmation, device/session revocation confirmation.\n- Engagement (community interactions): mention, direct reply to user’s post/comment, new post by followed author, new post in followed topic, expert Q&A invitations, content featured notification, new follower.\n- Moderation & Governance: content reported about user, moderation action taken (warning/suspension), report assigned to moderator, SLA reminder for open reports, appeal outcome.\n- Editorial Operations: draft submitted for review, review decision, scheduled publish reminder, featured/curated selection, special topic program updates.\n- Digests & Summaries: daily/weekly topic digest, author digest, personalized activity summary.\n\nRepresentative Triggers (Event-driven)\n- WHEN 사용자가 언급(mention)되었을 때, THE notification service SHALL 생성하고 대상 사용자에게 전달할 알림 레코드를 만든다.\n- WHEN 사용자의 댓글에 새 답글이 등록되었을 때, THE notification service SHALL 대상 사용자에게 상호작용 알림을 준비한다.\n- WHEN 사용자가 팔로우하는 주제에 새 게시글이 발행되었을 때, THE notification service SHALL 해당 사용자의 선호 설정과 빈도 한도를 검토하여 전달 여부를 결정한다.\n- WHEN 사용자가 팔로우하는 작성자가 새 게시글을 발행했을 때, THE notification service SHALL 동일한 작성자 이벤트를 10분 이내 다건 발생 시 하나로 응집한다.\n- WHEN 전문가 전용 Q&A에 답변 요청이 배정되었을 때, THE notification service SHALL 전문가 대상 실시간 알림을 생성한다.\n- WHEN 사용자의 콘텐츠가 신고되어 중재 절차가 시작되었을 때, THE notification service SHALL 사용자에게 절차 개시를 알림하되 상세 식별정보는 최소화한다.\n- WHEN 중재자가 새로운 신고 티켓을 배정받았을 때, THE notification service SHALL 중재자 역할에 맞는 우선순위 알림을 발송한다.\n- WHEN 초안이 리뷰 큐에 제출되었을 때, THE notification service SHALL 담당 에디터에게 검토 요청 알림을 발송한다.\n- WHEN 리뷰 결정이 \"승인\" 또는 \"수정 요청\"으로 기록되었을 때, THE notification service SHALL 작성자에게 결과를 통지한다.\n- WHEN 계정 보안 이벤트(비밀번호 재설정 요청, 이메일 변경 확인)가 발생했을 때, THE notification service SHALL 거래성 알림을 지연 없이 발송한다.\n- WHEN 주간 다이제스트 스케줄 시간이 도래했을 때, THE notification service SHALL 각 사용자의 구독 항목을 집계해 요약 메시지를 생성한다.\n\nUbiquitous Rules\n- THE notification service SHALL 태그 분류(계정/보안, 상호작용, 중재, 에디토리얼, 다이제스트)를 모든 알림에 부여한다.\n- THE notification service SHALL 모든 알림에 고유 식별자, 생성 시각(사용자 시간대 변환 정보 포함), 카테고리, 우선순위, 관련 리소스 참조를 포함한다.\n\n## 3) Channels, Frequency, and Rate Limits\n\nChannels\n- In-app: notification center and badges.\n- Email: transactional and digest communications.\n\nChannel Assignment\n- WHERE 거래성 이벤트(계정/보안), THE notification service SHALL In-app + Email을 기본 채널로 사용한다.\n- WHERE 상호작용 이벤트(멘션/답글), THE notification service SHALL In-app을 기본으로 하고 Email은 사용자 선호가 활성화된 경우에만 사용한다.\n- WHERE 다이제스트 범주, THE notification service SHALL Email 우선으로 하고 In-app에는 요약 카드만 제공한다.\n- WHERE 중재자 운영 이벤트, THE notification service SHALL In-app 우선 알림과 이메일 둘 다를 지원한다.\n\nFrequency and Rate Limits (per user)\n- THE notification service SHALL 적용되는 전역 상한: In-app 생성 최대 200/일, Email 발송 최대 20/일.\n- WHERE 상호작용 이벤트, THE notification service SHALL 동일 게시물/스레드에 대한 알림을 10분 응집 창으로 코얼레싱한다.\n- WHERE 팔로우 기반 신규 게시글, THE notification service SHALL 동일 작성자 이벤트를 10분 내 묶어 1건으로 발송한다.\n- WHERE 다이제스트, THE notification service SHALL 빈도를 Daily 또는 Weekly로 제한하며 동시 활성화를 허용하지 않는다.\n- WHILE 사용자가 DND(방해 금지) 시간대를 설정한 상태, THE notification service SHALL 거래성 알림을 제외한 모든 알림의 실시간 발송을 연기한다.\n\nPerformance Expectations\n- THE notification service SHALL In-app 실시간 알림을 95% 케이스에서 3초 이내, 99.9%에서 10초 이내로 표시 가능한 상태로 만든다.\n- THE notification service SHALL 거래성 Email을 95% 케이스에서 2분 이내 송신 큐에 반영한다.\n\n## 4) Subscription, Follow, and Digest Policies\n\nFollow-based Notifications\n- WHEN 사용자가 주제 또는 작성자를 팔로우했을 때, THE notification service SHALL 기본 알림 수준을 \"In-app 실시간\"으로 설정한다.\n- WHERE 사용자가 팔로우 해제, THE notification service SHALL 해당 소스에서 발생하는 향후 알림을 즉시 중단한다.\n\nDigest Composition\n- THE notification service SHALL 다이제스트에 최대 10개 하이라이트 항목(상호작용/팔로우 기반 콘텐츠)을 포함한다.\n- WHERE Daily Digest, THE notification service SHALL 사용자 현지 시간 07:00–09:00 사이 임의 시간 윈도우에서 전송한다.\n- WHERE Weekly Digest, THE notification service SHALL 사용자 현지 시간 월요일 08:00–10:00 사이 전송한다.\n- THE notification service SHALL 동일 기간에 다이제스트와 개별 알림의 중복을 방지하기 위해 다이제스트에서 이미 In-app으로 소비된 항목을 제외한다.\n\nCoalescing and Deduplication\n- THE notification service SHALL 같은 유형의 이벤트가 10분 내 N>1건 발생 시 카운트 업 방식의 단일 알림으로 노출한다.\n- IF 동일 리소스에 대한 동일 수신자 중복 생성 조건이 감지되면, THEN THE notification service SHALL 후행 알림을 억제한다.\n\n## 5) Consent Management and Preference Settings\n\nConsent Boundaries\n- THE notification service SHALL 거래성 메시지는 서비스 이용 계약 이행을 위해 기본 허용으로 간주한다.\n- THE notification service SHALL 마케팅·커뮤니티 성장 목적 메시지는 명시적 옵트인이 있을 때만 발송한다.\n\nPreference Model\n- THE notification service SHALL 카테고리별(계정/보안, 상호작용, 팔로우, 중재, 에디토리얼, 다이제스트) × 채널별(In-app, Email) 온/오프 토글을 제공한다.\n- WHERE 사용자 설정이 미지정, THE notification service SHALL 합리적 기본값을 적용한다: 상호작용 In-app=ON, Email=OFF; 팔로우 In-app=ON, Email=OFF; 다이제스트 Email=Weekly ON; 계정/보안 Email=ON.\n- THE notification service SHALL DND 시간대(예: 22:00–08:00 현지)와 Snooze(예: 2h/8h/24h) 기능을 지원한다.\n- THE notification service SHALL 작성자/게시물/주제 단위의 Mute(개별 소스 차단)를 지원한다.\n\nUser Control Actions\n- WHEN 사용자가 이메일 하단의 구독 해지 링크를 사용했을 때, THE notification service SHALL 해당 메시지 범주에 대한 Email 발송을 즉시 중단한다.\n- WHEN 사용자가 모든 마케팅 메시지 거부를 활성화했을 때, THE notification service SHALL 마케팅 범주 전 채널 발송을 금지한다.\n- WHEN 사용자가 선호를 변경했을 때, THE notification service SHALL 변경 즉시 이후 이벤트에 적용한다.\n\n## 6) Message Composition and Tone Guidelines\n\nContent Principles\n- THE notification service SHALL 메시지 제목(최대 80자), 요약(최대 140자), 본문 핵심 문장을 제공한다.\n- THE notification service SHALL 정치/경제 주제 특성상 사실 중심, 중립적, 비煽情 톤을 유지한다.\n- THE notification service SHALL 개인정보 최소화 원칙을 준수하며 민감 데이터(이메일 주소 전체, 전화번호 등)를 포함하지 않는다.\n\nCopy Patterns (Examples)\n- Mention: \"You were mentioned in 'Title' by Author\" with direct link.\n- Reply: \"New reply to your comment in 'Title'\" with anchor link.\n- Moderation notice: \"Your post was temporarily hidden pending review\" with policy reference.\n- Digest: \"Your weekly highlights in Topics you follow\" with item counts.\n\nAccessibility and Localization\n- THE notification service SHALL 사용자 선호 언어에 맞춘 로컬라이제이션을 적용하고 기본 언어는 en-US로 한다.\n- THE notification service SHALL 링크 텍스트는 의미 있는 설명으로 제공한다.\n\nBrand Safety\n- IF 금칙어·과도한 주장·오해 소지가 포함될 경우, THEN THE notification service SHALL 전송을 보류하고 검토 대상으로 표기한다.\n\n## 7) Delivery Performance, Retry, and Fallback\n\nDelivery Expectations\n- THE notification service SHALL 이벤트 발생 후 1초 이내 생성, 3초 이내 In-app 표시 가능 상태를 목표로 한다(95%).\n- THE notification service SHALL Email 전송은 2분 이내 큐잉(95%), 10분 이내 다이제스트 큐잉(95%)을 보장한다.\n\nRetry and Fallback\n- IF Email 전송 실패가 발생했을 경우, THEN THE notification service SHALL 5분, 30분, 120분 간격으로 최대 3회 재시도한다.\n- IF 모든 Email 재시도가 실패했을 경우, THEN THE notification service SHALL In-app 알림만 유지하고 이메일 재시도 실패 사실을 내부적으로 기록한다.\n- IF In-app 표시가 지연 조건(예: DND)인 경우, THEN THE notification service SHALL DND 만료 즉시 표시한다.\n\nQuiet Hours\n- WHERE DND가 설정된 사용자, THE notification service SHALL 거래성 이벤트(보안·계정)만 조용 시간에도 발송한다.\n\nAggregation Windows\n- THE notification service SHALL 코얼레싱 창 기본값 10분을 유지하며 이벤트 유형별로 조정 가능하도록 정책화한다.\n\n## 8) Role-specific Rules and Governance Alignment\n\nMember\n- THE notification service SHALL 멘션/답글/팔로우 콘텐츠 알림을 기본 In-app으로 제공한다.\n- WHERE 제재 통지, THE notification service SHALL In-app + Email로 통지한다.\n\nExpert\n- THE notification service SHALL Q&A 요청, 피처링 소식, 팔로워 급증 요약을 제공한다.\n\nModerator\n- THE notification service SHALL 신고 배정, SLA 임계 초과, 이의 제기 도착 알림을 우선순위 높게 표시한다.\n- THE notification service SHALL 하루 최대 Email 40건 상한을 두고 코호트로 배분한다.\n\nEditor\n- THE notification service SHALL 리뷰 대기 초안, 발행 예정 리마인더, 피처링 큐 업데이트를 제공한다.\n\nAdmin\n- THE notification service SHALL 역할 변경 승인 요청, 규정 업데이트 공지, 투명성 보고 준비 알림을 제공한다.\n\nGovernance Links\n- THE notification service SHALL 중재 통지의 메시지 구성에서 커뮤니티 규칙 인용 요약을 포함한다.\n\n## 9) Error Handling and User Recovery (communications context)\n\nCommon Errors and Responses\n- IF 수신 거부 상태에서 해당 범주 메시지 발송 요청이 도달하면, THEN THE notification service SHALL 발송을 거부하고 사용자 설정을 우선한다.\n- IF 알림 생성에 필요한 참조 리소스가 삭제·비공개로 전환되었으면, THEN THE notification service SHALL 알림을 생성하지 않는다.\n- IF 사용자가 소스(작성자/주제)를 Mute 했으면, THEN THE notification service SHALL 해당 소스의 알림을 생성하지 않는다.\n- IF 속도 제한을 초과할 조건이면, THEN THE notification service SHALL 추가 알림을 억제하고 다이제스트로 이동을 고려한다.\n\nUser Recovery\n- THE notification service SHALL 알림 센터에서 알림 읽음/삭제/모두 읽음/소스 음소거 관리 기능을 제공한다.\n- THE notification service SHALL 이메일 최하단에 카테고리별 구독 관리 링크를 포함한다.\n\n## 10) Data Retention and Auditability (communications context)\n\nRetention\n- THE notification service SHALL In-app 알림을 180일 보존한다.\n- THE notification service SHALL 다이제스트 생성 기록을 365일 보존한다.\n\nAuditability\n- THE notification service SHALL 각 발송 시도에 대해 수신자, 카테고리, 채널, 결과 상태, 시각을 비즈니스 로깅으로 기록한다.\n- THE notification service SHALL 사용자 요청 시 통지 내역 다운로드를 제공한다(최근 90일).\n\nPrivacy\n- THE notification service SHALL 데이터 최소 수집·전송 원칙을 따른다.\n\n## 11) Mermaid Flow Diagram (end-to-end)\n\n```mermaid\ngraph LR\n  subgraph \"Event Sources\"\n    E1[\"User Interaction(Event)\"] --> E2[\"Content Lifecycle(Event)\"]\n    E3[\"Moderation(Event)\"] --> E4[\"Editorial(Event)\"]\n  end\n\n  subgraph \"Policy & Preferences\"\n    P1[\"Classify Category\"] --> P2[\"Check Consent & Preferences\"]\n    P2 --> P3{\"Within Rate Limits?\"}\n    P3 -->|\"Yes\"| P4[\"Apply Coalescing(10m)\"]\n    P3 -->|\"No\"| P5[\"Suppress or Defer\"]\n  end\n\n  subgraph \"Delivery Orchestration\"\n    D1{\"Select Channels\"} --> D2[\"Create Notification Record\"]\n    D2 --> D3[\"Queue In-App\"]\n    D2 --> D4[\"Queue Email\"]\n    D4 --> D5{\"Email Success?\"}\n    D5 -->|\"Yes\"| D6[\"Mark Delivered\"]\n    D5 -->|\"No\"| D7[\"Retry(5m,30m,120m)\"]\n    D7 --> D8{\"Succeeded?\"}\n    D8 -->|\"Yes\"| D6\n    D8 -->|\"No\"| D9[\"Fallback In-app Only\"]\n  end\n\n  subgraph \"User Experience\"\n    U1[\"Notification Center\"] --> U2[\"Email Inbox\"]\n    U3[\"Manage Preferences\"] --> U4[\"Snooze/Mute/DND\"]\n  end\n\n  subgraph \"Observability\"\n    O1[\"Log Attempt\"] --> O2[\"Metrics & KPIs\"]\n  end\n\n  E1 --> P1\n  E2 --> P1\n  E3 --> P1\n  E4 --> P1\n  P4 --> D1\n  P5 -.-> D1\n  D3 --> U1\n  D4 --> U2\n  U3 -.-> P2\n  O1 -.-> O2\n```\n\n## 12) Success Criteria and KPIs (business-level)\n\n- THE notification service SHALL 사용자당 불만족 신고율(스팸 표시/수신 거부) 월간 0.5% 미만을 목표로 한다.\n- THE notification service SHALL 거래성 이메일 첫 시도 성공률 98% 이상, 24시간 내 최종 성공률 99.5% 이상을 유지한다.\n- THE notification service SHALL 다이제스트 오픈률 20% 이상, 멘션 알림 In-app 확인률 70% 이상을 목표로 한다.\n\n## 13) Related Documents\n\n- For end-to-end feature behaviors, see the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- For user-perceived performance targets, refer to the [Non-Functional Requirements for pol-econ-board](./08-pol-econ-board-non-functional-requirements.md).\n\nCompliance Statement\n- This document provides business requirements only. All technical implementation decisions belong to developers. Developers have full autonomy over architecture, APIs, and database design."},"step":0,"total":13,"completed":6,"created_at":"2025-08-12T04:19:17.526Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"핵심 기능을 업무 관점으로 완전·명확하게 규정하여 개발·QA 기준으로 사용하기 위함.","filename":"04-pol-econ-board-functional-requirements.md","documentType":"requirement","outline":["게시글 관리(작성/수정/삭제/버전)","댓글/대댓글/멘션","카테고리·태그·주제 팔로우","투표/리액션/추천","북마크/읽음 상태/저장","검색/정렬/필터","신고/차단 및 자동화 규칙","초안/검토/발행 워크플로","공지/고정글/특집 큐레이션 연계","피드/타임라인/구독","알림 트리거 연결","레이트리밋/이용제한 정책","접근성/다국어(비즈니스 관점)","수용 기준 및 예외 사항"],"audience":"development team","keyQuestions":["사용자가 수행할 수 있는 모든 업무 기능은 무엇이며 제약은 무엇인가","각 기능의 입력 검증/처리 로직/출력 기대치는 무엇인가","성능·보안·감사 요구와의 연계는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","06-pol-econ-board-user-flows.md","07-pol-econ-board-community-governance-and-moderation.md","11-pol-econ-board-notifications-and-communications.md"],"constraints":["EARS 형식으로 상세 요구사항 기술","성능 기대치(사용자 체감 기준) 포함","UI/설계/기술 구현 세부 금지"],"content":"# pol-econ-board Functional Requirements\n\nThis document defines the complete, business-level functional requirements of the pol-econ-board service for development and QA usage. It specifies WHAT the system shall do in measurable, testable terms using EARS format where applicable. It intentionally excludes technical implementation details such as APIs, database schemas, and infrastructure design. Developers retain full autonomy on how to implement these requirements.\n\nFor authentication, authorization, and role details, align with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md). For process visualizations, see complementary flows in the [User Flows Guide](./06-pol-econ-board-user-flows.md). For moderation standards and sanctions, adhere to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md). For messaging specifics, align triggers in this document with the [Notifications and Communications Standard](./11-pol-econ-board-notifications-and-communications.md).\n\n## 1) Purpose and Scope\n- Define the full set of functional capabilities required to operate a moderated, expertise-forward political and economic discussion platform.\n- Establish business rules, validation, processing logic, outputs, performance expectations, error handling, and role-based access constraints.\n- Cover member-generated content, expert contributions, editorial curation, moderation workflows, personalization, search, and notifications.\n\n## 2) Terminology and Global Conventions\n- Timezone: All business time windows and SLAs are expressed in Asia/Seoul (KST) by default; user-facing times SHALL respect the user’s configured local timezone where preferences exist.\n- Counting windows: Unless otherwise stated, rate-limits use rolling 60-minute windows for per-hour metrics and rolling 24-hour windows for daily metrics.\n- Content policy baseline: All content requirements here operate under and defer to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md).\n- Performance baseline: Unless specified otherwise, simple actions (create/edit/delete/like/bookmark/follow) SHALL complete within 2 seconds for the user; discovery actions (search/filter/sort) SHALL return within 1 second for common queries and within 3 seconds for complex queries on typical load.\n- Draft vs. published: “Draft” is private to its author (and to reviewers where applicable). “Published” is visible per visibility rules. “Hidden” indicates system- or moderator-suppressed visibility.\n- Version: Each published edit creates an immutable version record that can be viewed in history comparisons.\n- Visibility levels (business): public; limited (followers or invited audiences where configured); staff-only (moderators/editors/admins).\n\n## 3) Role Context (Business Perspective)\n- member: May create and manage own posts and comments, react, follow, bookmark, report, and block. Subject to rate-limits and community policy.\n- expert: All member privileges, plus expert badge display, expert-only topic proposals, long-form research/insight posts, expert Q&A participation, and expert recommendation signals.\n- moderator: Reviews reports, hides/deletes content per policy, recommends sanctions, manages dispute resolution, and maintains transparency logs.\n- editor: Curates categories, manages featured content, announcements, and pins; collaborates with moderators on policy violations.\n- admin: Full oversight, role management, policy/configuration, legal requests workflows, and service-level metrics.\n\nRole-based constraints for each feature are specified within the relevant sections below. The complete role model and JWT principles are defined in the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n\n---\n\n## 4) Functional Requirements (EARS)\n\n### 4.1) Post Management (Create/Edit/Delete/Version)\nBusiness fields for a Post (business-level, not schema):\n- Title (4–120 characters), Body (min 20 characters for published posts), Attachments (0–10 files; each ≤ 25 MB; allowed types: image, PDF, CSV; videos only when explicitly enabled), Category (one), Tags (0–5), Visibility, Source links (0–10, valid URL), Content warnings (0–3 from predefined list), Estimated reading time (auto-calculated), Language (e.g., Korean, English).\n- Prohibited: doxxing, hate speech, incitement, spam, unsubstantiated claims presented as facts without sources in “analysis/research” contexts (policy-specific definitions in governance document).\n\nValidation and creation\n- WHEN a user submits a new post as draft, THE system SHALL validate title length 4–120 characters, body length ≥ 20 characters, and allowed attachment count/size/types.\n- WHEN a user saves a draft, THE system SHALL persist the draft within 2 seconds and return the draft identifier and last-saved timestamp.\n- WHEN a user attempts to publish, THE system SHALL require Category and enforce at least one source link for “analysis/research” post types.\n- WHERE the user role is member, THE system SHALL allow publishing up to 10 posts per 24 hours.\n- WHERE the user role is expert, THE system SHALL allow publishing up to 20 posts per 24 hours and permit “long-form” flag up to 20,000 characters body.\n- WHERE the user role is moderator or editor, THE system SHALL allow internal/staff-only posts without public visibility for operational notices.\n\nEditing and versioning\n- WHEN an author edits a published post, THE system SHALL create a new immutable version and retain prior versions for comparison.\n- WHERE edits occur within 10 minutes of publication, THE system SHALL allow “silent update” without feed bump; after 10 minutes, feed bump SHALL occur unless staff marks “no-bump”.\n- WHILE a post is draft, THE system SHALL allow unlimited edits and autosave at least every 30 seconds of active typing.\n\nDeletion and restoration\n- WHEN an author deletes own post, THE system SHALL soft-delete it and hide from public while retaining for 30 days for potential restoration.\n- IF a soft-deleted post is restored within 30 days, THEN THE system SHALL reinstate its visibility and maintain version history continuity.\n- IF a post is under active investigation (flagged), THEN THE system SHALL prevent author deletion until moderation completes or staff overrides.\n\nIntegrity and policy checks\n- WHEN a post contains more than 3 external links, THE system SHALL flag it for automated spam review without blocking publication unless thresholds are exceeded (see §4.7).\n- WHERE content includes media attachments, THE system SHALL require a text alternative (caption/alt-text) per accessibility requirements (§4.13).\n- IF a post violates rate-limits or is under sanction, THEN THE system SHALL deny publishing with a clear reason and next eligible time.\n\nOutputs\n- THE system SHALL return identifiers, timestamps (created/updated/published), current visibility, version number, and moderation status upon create/edit/publish actions.\n\nPerformance\n- THE post save or publish operation SHALL complete within 2 seconds under nominal load for text-only posts; within 5 seconds when up to 10 attachments are included.\n\n### 4.2) Comments, Replies, Mentions\nScope\n- Comments support one level of replies (reply-to-comment). Mentions use “@handle” of users with public mentionability.\n\nValidation and creation\n- WHEN a user submits a comment, THE system SHALL validate length 1–5,000 characters and disallow empty or media-only comments.\n- WHERE the role is member or expert, THE system SHALL allow up to 60 comments per 24 hours.\n- WHEN a reply is created, THE system SHALL associate it with the parent comment and the post thread.\n- WHEN a user mentions another user, THE system SHALL validate that the target user permits mentions and is not blocked by the author.\n\nEditing and deletion\n- WHERE the author is the comment owner, THE system SHALL allow edits for 15 minutes with edit marker displayed thereafter.\n- WHEN the author deletes a comment, THE system SHALL soft-delete and replace with a placeholder indicating removal.\n\nAbuse and policy\n- IF a comment contains prohibited content as defined by policy, THEN THE system SHALL route it to moderation queues and may auto-hide according to §4.7 thresholds.\n\nNotifications\n- WHEN a user is mentioned, THE system SHALL enqueue a mention notification per preferences (§4.11).\n\nPerformance\n- THE comment create/edit/delete operation SHALL complete within 1 second for text-only content.\n\n### 4.3) Categories, Tags, Topic Follow\nCategories and tags\n- WHEN a post is published, THE system SHALL require exactly one Category from the controlled list managed by editors.\n- WHERE tags are provided, THE system SHALL allow up to 5 free-form tags validated against profanity/ban lists.\n\nTopic follow\n- WHEN a user follows a topic (category/tag or editor-curated topic), THE system SHALL add it to the user’s subscription list.\n- WHERE a user follows a topic, THE system SHALL prioritize content from that topic in personalized feeds (§4.10).\n- IF a followed topic is deprecated, THEN THE system SHALL notify users and suggest alternatives.\n\n### 4.4) Votes, Reactions, Recommendations\nVote and reaction types\n- Votes support “Agree” and “Disagree”. Reactions support “Insightful”, “Question”, “Source requested”, and “Appreciation”.\n\nConstraints\n- WHERE a user is authenticated, THE system SHALL allow one vote per post per user and allow updating the choice; reactions are one per type per user per post.\n- WHERE the actor is expert, THE system SHALL allow an “Expert Recommend” marker distinct from general reactions.\n- IF a post is archived or hidden, THEN THE system SHALL block new votes/reactions while preserving counts.\n\nOutputs and display rules (business)\n- WHEN counts are requested for display, THE system SHALL provide totals and expert-specific counts to enable separate labeling.\n\nPerformance\n- THE system SHALL record a vote or reaction within 1 second and reflect updated counts within 2 seconds in dependent views.\n\n### 4.5) Bookmarks, Read State, Saved Items\n- WHEN a user bookmarks a post, THE system SHALL store it in the user’s bookmarks and allow foldering into up to 20 named collections.\n- WHILE a user scrolls through a post, THE system SHALL track read progress and mark as “read” when ≥ 80% of body is viewed.\n- WHEN a user saves a post for offline reading (business concept), THE system SHALL store a snapshot of the text and metadata for later retrieval; media may be excluded depending on rights.\n- WHERE the user requests export of saved items, THE system SHALL prepare an export within 10 seconds for up to 100 items.\n\n### 4.6) Search, Sort, Filter\nInputs and validation\n- WHEN a user searches, THE system SHALL accept queries up to 200 characters, with logical operators AND/OR and quoted phrases.\n- WHERE filters are applied, THE system SHALL support Category, Tags, Author, Role (expert only), Date range, Content type (post/comment), Minimum reaction score, and Moderation status (staff roles only).\n- WHERE sorting is applied, THE system SHALL support Newest, Oldest, Most reacted, Most agreed.\n\nProcessing\n- WHEN a search is executed, THE system SHALL return results with total matches, paginated in pages of 20 items for posts and 50 items for comments.\n\nPerformance\n- THE system SHALL return common query results within 1 second and complex multi-filter queries within 3 seconds under typical load.\n\n### 4.7) Reporting, Blocking, and Automation Rules\nReporting\n- WHEN a user reports content, THE system SHALL require a reason category (e.g., Misinformation, Harassment, Hate, Spam, Off-topic, Illegal) and an optional note up to 500 characters.\n- WHERE a single content item receives ≥ 5 reports within 1 hour, THE system SHALL flag it for expedited review.\n\nAuto-hide thresholds\n- WHERE reports >= 20 from distinct users within 3 hours OR a weighted score threshold is exceeded (expert reports count as 2), THE system SHALL auto-hide the content pending review.\n- IF auto-hide is triggered, THEN THE system SHALL notify the author and provide an appeal link to the dispute workflow.\n\nBlocking\n- WHEN a user blocks another user, THE system SHALL hide the blocker’s view of the blockee’s content and prevent mentions and direct interactions between them.\n\nStaff workflows\n- WHEN content is auto-hidden or reported beyond thresholds, THE system SHALL place it into the moderation queue with metadata: report counts by category, timestamps, involved users, and preliminary risk assessment.\n\nRate-limits on reporting\n- WHERE the user files reports, THE system SHALL limit to 30 reports per 24 hours.\n\n### 4.8) Draft, Review, Publish Workflow\nStates\n- Draft → Submitted for Review (optional) → Published → Updated (versioned) → Archived/Hidden.\n\nRules\n- WHERE the author is expert and the post is marked as “long-form research”, THE system SHALL require either editor review or source completeness check before publication.\n- WHERE the post includes a “content warning”, THE system SHALL display a preface and require user confirmation before viewing full content.\n- WHEN an editor rejects a submission, THE system SHALL return reasons and allow resubmission after corrections.\n- WHEN a post is archived, THE system SHALL remove it from feeds while retaining searchability for staff and author.\n\nSLA\n- WHERE review is required, THE system SHALL complete first review within 24 hours under normal operations.\n\n### 4.9) Announcements, Pinned Posts, Special Curation\n- WHERE the actor is editor or admin, THE system SHALL allow creating “Announcement” posts visible to all users.\n- WHEN a post is pinned in a section by an editor, THE system SHALL keep it at the top of that section for a configurable duration (1–14 days).\n- WHERE a post is featured in a curated collection, THE system SHALL annotate it with the collection label and ensure it appears in that collection’s feed.\n- IF a pinned item expires, THEN THE system SHALL unpin it automatically and record the unpin event in audit logs.\n\n### 4.10) Feeds, Timelines, Subscriptions\nPersonalization\n- WHERE a user follows topics or authors, THE system SHALL prioritize their content in the user’s home feed while ensuring at least 30% diversity from non-followed but relevant topics.\n- WHERE the actor is unauthenticated, THE system SHALL show a general feed based on overall quality and recency.\n\nOrdering and freshness\n- WHEN building feeds, THE system SHALL prefer recency within the past 72 hours and decay older items unless they are featured or actively discussed.\n\nIntegrity\n- IF a post is hidden or under sanction, THEN THE system SHALL exclude it from public feeds while staff views remain available.\n\nPagination\n- THE system SHALL deliver feeds in pages of 20 posts, supporting infinite continuation from the user perspective.\n\nPerformance\n- THE system SHALL generate the first page of a personalized feed within 1.5 seconds under typical load.\n\n### 4.11) Notification Triggers Linkage (Business Events)\n- WHEN a user is mentioned in a post or comment, THE system SHALL trigger a “mention” notification per user preference.\n- WHEN a followed author publishes, THE system SHALL trigger a “new post by followed author” notification subject to frequency limits (max 3 per author per day).\n- WHEN a followed topic has new curated content, THE system SHALL trigger a “topic update” notification; batched in digests where configured.\n- WHEN a user’s post is reported and auto-hidden, THE system SHALL send an “action required” notification with appeal information.\n- WHEN an editor pins or features a user’s post, THE system SHALL notify the author of the feature placement.\n\nNotification delivery channels and templates must follow the [Notifications and Communications Standard](./11-pol-econ-board-notifications-and-communications.md).\n\n### 4.12) Rate-Limiting and Usage Restrictions\nPer-user limits (default)\n- WHERE the role is member, THE system SHALL enforce: up to 10 posts/day; 60 comments/day; 300 reactions/day; 30 reports/day.\n- WHERE the role is expert, THE system SHALL enforce: up to 20 posts/day; 100 comments/day; 500 reactions/day; 50 reports/day.\n- WHERE the role is newly registered (< 7 days), THE system SHALL halve the above limits.\n\nBurst control\n- WHEN a user performs more than 10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds.\n\nAbuse escalations\n- IF repeated rate-limit violations occur 3 times within 24 hours, THEN THE system SHALL place the account under temporary restriction for 24 hours on posting and commenting.\n\n### 4.13) Accessibility and Multilingual (Business)\nAccessibility\n- WHERE content includes images, THE system SHALL require descriptive alt-text 20–250 characters.\n- WHERE content includes audio/video, THE system SHALL require a transcript or captions before publication unless an editor grants an exception for breaking news with a 48-hour remediation window.\n- WHEN presenting color-coded badges or signals in business logic, THE system SHALL include textual equivalents.\n\nLanguage\n- WHERE a post is created, THE system SHALL store its language and allow filtering by language in search and feeds.\n- WHERE multilingual content is supported, THE system SHALL link translations of the same post and allow users to prefer languages in feed preferences.\n\nCross-border periods\n- WHERE sensitive political periods (e.g., elections) are flagged in policy, THE system SHALL apply stricter review rules per the governance document and annotate affected posts with compliance tags.\n\n---\n\n## 5) Process Diagrams (Business Flows)\n\nDraft → Review → Publish\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Write Content\"]\n    B --> C[\"Save Draft\"]\n    C --> D{\"Requires Review?\"}\n  end\n  subgraph \"Review\"\n    E[\"Submit For Review\"] --> F[\"Editor Checks Sources\"]\n    F --> G{\"Approve?\"}\n  end\n  subgraph \"Publication\"\n    H[\"Publish\"] --> I[\"Create Version Record\"]\n    I --> J[\"Distribute To Feeds\"]\n  end\n  D -->|\"Yes\"| E\n  D -->|\"No\"| H\n  G -->|\"Yes\"| H\n  G -->|\"No\"| K[\"Reject With Reasons\"]\n  K --> C\n```\n\nReport → Moderation\n```mermaid\ngraph LR\n  A[\"User Reports Content\"] --> B[\"Collect Reasons\"]\n  B --> C{\"Threshold Met?\"}\n  C -->|\"No\"| D[\"Queue Standard Review\"]\n  C -->|\"Yes\"| E[\"Auto-Hide Content\"]\n  E --> F[\"Notify Author\"]\n  D --> G[\"Moderator Review\"]\n  F --> G\n  G --> H{\"Policy Violation?\"}\n  H -->|\"Yes\"| I[\"Apply Sanction\"]\n  H -->|\"No\"| J[\"Restore Content\"]\n  I --> K[\"Transparency Log\"]\n  J --> K\n```\n\n---\n\n## 6) Acceptance Criteria & Exceptions\nAcceptance criteria are testable business outcomes verifying conformance:\n\nGeneral\n- THE system SHALL persist drafts, posts, comments, and reactions with correct ownership and timestamps, visible in subsequent retrievals within expected performance windows.\n- THE system SHALL prevent actions that exceed limits and provide user-facing reasons and next eligible times.\n\nPosts\n- WHEN publishing valid content, THE system SHALL return published status, version number, and visibility. WHEN invalid, errors identify the field and violated rule (length, attachments, policy keyword triggers) in natural language.\n- WHEN editing published posts, THE system SHALL create a new version and maintain access to prior versions.\n\nComments\n- WHEN submitting valid comments, THE system SHALL append to the thread, increment counts, and notify mentioned users according to preferences.\n\nSearch and feeds\n- WHEN executing typical searches and feed builds, THE system SHALL meet performance targets and return correct ordering and filtering.\n\nReporting and moderation\n- WHEN report thresholds are crossed, THE system SHALL auto-hide content, notify the author, and enqueue for review with required metadata.\n\nNotifications\n- WHEN eligible events occur, THE system SHALL enqueue the corresponding notification respecting opt-in status and frequency limits.\n\nExceptions and overrides\n- WHERE legal hold or compliance requires preservation, THE system SHALL prevent deletion and annotate the hold.\n- WHERE staff override is documented, THE system SHALL record the actor, reason, and timestamp in audit logs.\n- WHERE service-wide incidents necessitate temporary relaxation of limits (e.g., breaking elections news), THE system SHALL allow configured exceptions for a defined window and record the change.\n\n---\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, belong to the development team. The content specifies WHAT the pol-econ-board system must do from a business perspective and does not prescribe HOW to build it."},"step":0,"total":13,"completed":7,"created_at":"2025-08-12T04:19:27.110Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"커뮤니티 운영 원칙과 중재 기준을 합의된 규범으로 문서화하여 일관 집행을 보장하기 위함.","filename":"07-pol-econ-board-community-governance-and-moderation.md","documentType":"requirement","outline":["커뮤니티 규칙과 허용/금지 콘텐츠 정의","정치적 민감 콘텐츠 가이드(사실성·출처·표현 수위)","신고 분류 체계와 처리 SLA","제재 수위표(경고/일시정지/영구 제재)와 트리거","투명성 보고 및 로그 공개 원칙","이의제기·재검토·복구 절차","선거기간 특별정책(국내 법·정책 준수)"],"audience":"development team","keyQuestions":["어떤 콘텐츠가 허용/금지되는가","신고 처리와 제재 집행의 기준과 기한은 무엇인가","이의제기와 복구는 어떻게 진행되는가"],"detailLevel":"detailed specification","relatedDocuments":["04-pol-econ-board-functional-requirements.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 제재/중재 요구사항 정의","정책·규정 준수 관점 강조"],"content":"# Community Governance and Moderation Requirements (pol-econ-board)\n\nThis document defines business requirements for community governance and moderation on pol-econ-board. It describes WHAT the system must do in business terms to ensure consistent enforcement, user transparency, and compliance. All technical implementation decisions (architecture, APIs, database design, and infrastructure) are at the discretion of the development team.\n\n## 1) Document Scope and Principles\n- Purpose: Establish unambiguous rules and processes for content governance, reporting, moderation actions, sanctions, transparency, and appeals, including special rules during election periods.\n- Scope: Business requirements only; no technical specifications. Applies to all user-generated content (UGC) including posts, comments, replies, titles, tags, attachments, profile bios, and display names.\n- Principles:\n  - Legality: Prohibit unlawful content; comply with applicable domestic regulations in the service’s primary jurisdiction.\n  - Truthfulness: Encourage evidence-based discourse; label and curb unverified or manipulative content without suppressing legitimate opinion.\n  - Proportionality: Apply sanctions progressively, proportional to severity and recurrence.\n  - Due process: Provide clear reason codes, timely decisions, and appeal channels.\n  - Transparency: Publish aggregated moderation statistics and provide user-facing case histories.\n\n## 2) User Roles and Governance Responsibilities (Business)\n- member: Can create/report content, block users, and receive sanctions. No authority to sanction others.\n- expert: All member capabilities plus ability to propose expert topics, post in-depth research, answer expert Q&A. Held to higher disclosure standards for affiliations/conflicts.\n- moderator: Operates moderation queue, can hide/remove content, issue warnings and suspensions up to 30 days, manage disputes, and maintain transparency logs.\n- editor: Curates featured content, manages announcements/pinned posts, edits topics/tags. May hide content for editorial quality but cannot issue user sanctions; must escalate policy violations to moderator.\n- admin: Full oversight, manages roles/policies, handles legal requests, may impose permanent sanctions, and approves special election-period configurations.\n\nEARS Requirements (Role Responsibilities)\n- THE governance subsystem SHALL enforce 역할별 권한 한계와 승인 흐름을 기반으로 모든 중재 액션을 기록한다.\n- WHERE 사용자 역할이 \"editor\", THE 시스템 SHALL 제한 사용자 제재 권한을 콘텐츠 임시 숨김으로 한정한다.\n- WHERE 사용자 역할이 \"moderator\", THE 시스템 SHALL 허용된 범위 내 제재(경고, 24h/7d/30d 정지)만 집행 가능하게 한다.\n- WHERE 사용자 역할이 \"admin\", THE 시스템 SHALL 영구 제재와 정책 변경 승인 액션을 허용한다.\n\n## 3) Community Rules: Allowed/Prohibited Content Definitions\nCategories are defined to be applied to any UGC.\n\n3.1 Allowed with Expectations\n- Opinion and Analysis: Allowed with clear subjective framing.\n- Critique of Public Policy/Officials: Allowed; personal data exposure prohibited.\n- Satire or Parody: Allowed when labeled and not misleading as fact.\n\n3.2 Requires Labels/Disclaimers (Mitigation)\n- Unverified Claims: Must include source request label; may be down-ranked until sourced.\n- Polls/Surveys: Must include methodology disclosure label.\n- Financial/Economic Advice: Must include non-advisory disclaimer label.\n\n3.3 Prohibited Content (Immediate Action)\n- Illegal Content: Threats, incitement to violence, doxxing, non-consensual personal information, targeted harassment, explicit discrimination/hate against protected classes, sexual exploitation, and unlawful solicitation.\n- Misinformation with Harm Potential: Fabricated facts presented as truth causing imminent harm (e.g., public safety, election interference tactics).\n- Spam/Manipulation: Mass posting, link farming, bot-like behavior, undisclosed paid political content, astroturfing.\n- Copyright Violation: Unauthorized reproduction where rights holder objection is likely.\n\nEARS Requirements (Content Classification)\n- THE governance subsystem SHALL maintain 표준 위반 코드 목록(예: ILLEGAL_THREAT, HATE_SPEECH, DOXXING, MISINFO_HARM, SPAM, COPYRIGHT, OFF_TOPIC, LOW_QUALITY).\n- WHEN 콘텐츠가 금지 카테고리로 분류되면, THE 시스템 SHALL 즉시 노출을 차단하고 검토 대기 상태로 전환한다.\n- WHEN 콘텐츠가 라벨 필요 카테고리로 분류되면, THE 시스템 SHALL 적절한 라벨/면책을 부착하고 알고리즘 노출을 제한한다.\n- IF 분류가 불확실하면, THEN THE 시스템 SHALL 편향 최소화를 위해 임시 라벨 \"Unverified\"를 적용하고 리뷰 큐로 전달한다.\n\n## 4) Political-Sensitive Content Guidelines (Factuality/Source/Tone)\n4.1 Factuality\n- Assertions of fact must be verifiable by reliable sources (primary records, reputable media, official statistics).\n- Distinguish fact from opinion clearly in the content metadata labels.\n\n4.2 Sourcing\n- For political claims, provide source citations (URL, publication name, date). If missing, content is labeled Unverified until supplied.\n\n4.3 Expression Level\n- Permit robust debate; prohibit dehumanizing language, slurs, calls for violence, and targeted harassment.\n\nEARS Requirements (Political-Sensitive)\n- WHEN 사용자가 정치적 사실 주장 콘텐츠를 게시하면, THE 시스템 SHALL 출처 필드를 지원하고 미기재 시 \"Unverified\" 라벨을 적용한다.\n- WHEN 사용자가 출처를 추가 제출하면, THE 시스템 SHALL 라벨을 \"Sourced\"로 갱신하고 노출 제한을 해제한다 within 1 hour of submission.\n- IF 콘텐츠에 비인간화 표현 또는 폭력 선동이 탐지되면, THEN THE 시스템 SHALL 즉시 숨김 처리하고 고심각도 큐로 보낸다.\n\n## 5) Reporting Taxonomy and Processing SLAs\n5.1 Report Types (Reason Codes)\n- Safety: Threat/Violence, Doxxing, Harassment\n- Integrity: Hate Speech, Misinformation, Copyright\n- Quality: Spam, Off-topic, Low-quality/Noise\n- Election Integrity: Undisclosed paid political content, False procedural claims\n\n5.2 Reporter Credibility Tiers (Business Concept)\n- Tier A: Report accuracy ≥ 80% in last 90 days or verified expert.\n- Tier B: 50–79%.\n- Tier C: <50% or new reporters.\n\n5.3 SLAs and Auto-Actions\n- High Severity (Safety, Election Integrity): auto-hide threshold = 5 unique reports within 60 minutes including ≥2 Tier A, or 1 admin/mod immediate action.\n- Medium Severity (Hate, Misinformation, Copyright): soft-hide threshold = 8 unique reports within 6 hours including ≥2 Tier B+.\n- Low Severity (Spam/Off-topic/Quality): queue-only, no auto-hide; apply rate-limit if 12 reports within 24 hours.\n\nEARS Requirements (Reporting & SLA)\n- WHEN 동일 콘텐츠가 고심각도 사유로 60분 내 5건 이상 신고되고 그중 2건 이상이 Tier A이면, THE 시스템 SHALL 즉시 자동 숨김 처리한다 within 1 minute.\n- WHEN 동일 콘텐츠가 중간 심각도 사유로 6시간 내 8건 이상 신고되고 그중 2건 이상이 Tier B 이상이면, THE 시스템 SHALL 소프트 숨김 처리하고 검토 대기 상태로 전환한다.\n- WHEN 동일 작성자가 24시간 내 3건 이상 스팸 신고가 유효로 판정되면, THE 시스템 SHALL 24시간 게시 제한을 적용한다.\n- THE governance subsystem SHALL 모든 신고에 대해 케이스 ID를 생성하고 생성 시각, 신고 분류, 신고자 티어를 기록한다.\n\n## 6) Moderation Workflow and Automation Rules\n6.1 States\n- Visible, Soft-Hidden (visible to author and direct participants), Hidden (not visible to public), Removed, Restored, Labeled.\n\n6.2 Workflow Summary\n- Intake → Auto-triage (severity, thresholds) → Queue assignment → Decision (label/hide/remove/sanction) → Notify parties → Log & transparency → Appeal handling.\n\nEARS Requirements (Workflow)\n- WHEN 신고가 접수되면, THE 시스템 SHALL 자동 분류와 심각도 평가를 수행하고 해당 큐에 라우팅한다 within 30 seconds.\n- WHILE 콘텐츠가 \"검토 대기\" 상태이면, THE 시스템 SHALL 공개 노출을 제한한다.\n- WHEN 중재 결정이 확정되면, THE 시스템 SHALL 작성자에게 사유 코드와 조치 요약을 통지한다 within 5 minutes of decision.\n- THE governance subsystem SHALL 모든 상태 전이를 감사 가능 로그로 남긴다.\n\n## 7) Sanction Ladder and Triggers\n7.1 Sanction Types\n- Warning (no post restriction)\n- Temporary Suspension: 24 hours, 7 days, 30 days\n- Permanent Suspension\n- Content Removal, Feature Restrictions (e.g., posting, commenting, DM), Shadow-visibility reduction\n\n7.2 Escalation Rules (General)\n- First offense (low/medium severity): Warning + education.\n- Repeated offense within 90 days: escalate one level.\n- High severity (threats, doxxing, hate speech with target): minimum 7-day suspension on first offense; permanent on third within 365 days.\n\n7.3 Special Cases\n- Sockpuppeting to evade sanctions: immediate 30-day suspension; link accounts for enforcement.\n- Undisclosed paid political content: removal + 7-day suspension; repeat → 30-day → permanent.\n\nEARS Requirements (Sanctions)\n- WHEN 동일 위반 코드가 90일 내 2회 발생하면, THE 시스템 SHALL 제재 수위를 한 단계 상향한다.\n- IF 위반 코드가 \"ILLEGAL_THREAT\" 또는 \"DOXXING\"이면, THEN THE 시스템 SHALL 최소 7일 정지를 1차 위반에 적용한다.\n- IF 365일 내 고심각도 위반이 3회 누적되면, THEN THE 시스템 SHALL 영구 제재를 집행한다.\n- WHERE 제재가 적용되면, THE 시스템 SHALL 제재 기간, 적용 범위(게시/댓글/메시지), 만료일을 명시하여 사용자에게 고지한다.\n\n## 8) Transparency Reporting and Logs\n8.1 Public Transparency (Aggregated)\n- Monthly report: number of reports, actions by category, reversal rate, appeal outcomes, median time-to-action.\n\n8.2 User-Facing Case History\n- Users can view their own moderation history: case IDs, timestamps, reason codes, actions, appeal status.\n\nEARS Requirements (Transparency)\n- THE governance subsystem SHALL 월간 투명성 리포트를 생성하여 카테고리별 조치 건수와 중위 처리 시간을 공개한다 by the 10th of the following month.\n- WHEN 사용자 제재가 확정되면, THE 시스템 SHALL 사용자 개인 히스토리에 케이스를 즉시 추가한다 within 1 minute.\n- THE governance subsystem SHALL 익명화된 샘플 케이스를 공개 가능한 형태로 보관한다 subject to data retention policy.\n\n## 9) Appeals, Re-review, and Restoration Procedures\n9.1 Appeal Window and Handling\n- Appeal window: 14 days from action notification (48 hours for election-period takedowns).\n- Acknowledgment: within 24 hours; decision within 7 days (3 days for election-period cases).\n\n9.2 Re-review Outcomes\n- Uphold, Modify (relabel, reduced sanction), or Reverse (restore content/access).\n\nEARS Requirements (Appeals)\n- WHEN 사용자가 제재 통지를 받은 시점부터 14일 내 이의제기를 제출하면, THE 시스템 SHALL 접수 확인을 24시간 내 발송한다.\n- WHEN 이의제기가 접수되면, THE 시스템 SHALL 7일 내 결정을 내려 결과와 근거 코드를 통지한다.\n- IF 이의제기 결과가 \"Reverse\"이면, THEN THE 시스템 SHALL 콘텐츠를 복구하고 노출 제한/제재를 해제한다 within 15 minutes.\n- WHILE 이의제기가 진행 중이면, THE 시스템 SHALL 콘텐츠 상태를 현행 정책에 따라 유지하되 사용자 안내 문구를 표시한다.\n\n## 10) Election-Period Special Policies (Domestic Law Compliance)\n10.1 Activation and Duration\n- Defined election windows per domestic regulations; activated by admin and visibly announced.\n\n10.2 Stricter Standards\n- New accounts (≤7 days): cannot publish political campaign content; can comment with labels.\n- Claims about election procedures must include official source; missing source → immediate soft-hide until provided.\n- Paid political content must be labeled with sponsor identity; undisclosed → removal and sanction per 7.3.\n\nEARS Requirements (Election)\n- WHERE 선거기간이 활성화되면, THE 시스템 SHALL 신규 계정(가입 7일 이하)의 선거 관련 게시 작성 권한을 제한한다.\n- WHEN 선거 절차 관련 주장이 출처 없이 게시되면, THE 시스템 SHALL 즉시 소프트 숨김 처리하고 출처 제출 시까지 제한을 유지한다.\n- WHEN 유료 정치 콘텐츠가 스폰서 표시 없이 탐지되면, THE 시스템 SHALL 즉시 제거하고 제재 규칙 7.3을 적용한다.\n- THE governance subsystem SHALL 선거기간 관련 정책 배너와 가이드에 대한 접근 경로를 모든 사용자에게 노출한다.\n\n## 11) Labels, Disclaimers, and Conflicts of Interest\n11.1 Labels\n- \"Opinion\", \"Analysis\", \"Unverified\", \"Sourced\", \"Satire\", \"Paid Promotion\", \"Sensitive\".\n\n11.2 Disclaimers\n- Economic/financial content: \"Not financial advice\"; polls: methodology; expert posts: affiliation disclosure when relevant.\n\n11.3 Conflicts of Interest (Experts)\n- Experts must disclose material affiliations related to discussed entities.\n\nEARS Requirements (Labels/COI)\n- WHEN 콘텐츠가 라벨 기준을 충족하면, THE 시스템 SHALL 해당 라벨을 콘텐츠 메타데이터에 부착하고 사용자에게 가시적으로 제공한다.\n- WHERE 작성자가 전문가로서 이해상충이 예상되면, THE 시스템 SHALL 공개 게시 전 공개 가능한 소속/후원 정보 입력을 요구한다.\n\n## 12) Performance and Availability Expectations for Moderation\n- Report ingestion: under 2 seconds to acknowledge.\n- Auto-triage classification: under 30 seconds.\n- Auto-hide execution: under 60 seconds from threshold.\n- Moderator decision notification: within 5 minutes of decision.\n\nEARS Requirements (Performance)\n- WHEN 신고가 접수되면, THE 시스템 SHALL 2초 내 접수 완료 상태를 반환한다.\n- WHEN 자동 임계치에 도달하면, THE 시스템 SHALL 60초 내 자동 조치를 완료한다.\n\n## 13) Permission Matrix (Role x Action)\n\n| Action (Business) | member | expert | editor | moderator | admin |\n|---|---|---|---|---|---|\n| Submit report | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View report queue | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Auto-triage override | ❌ | ❌ | ❌ | ✅ (within scope) | ✅ |\n| Hide content (policy) | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Hide content (editorial quality) | ❌ | ❌ | ✅ (temporary) | ✅ | ✅ |\n| Remove content | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Issue warning | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Suspend 24h/7d/30d | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Permanent suspend | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Publish transparency report | ❌ | ❌ | ❌ | ✅ (draft) | ✅ (approve) |\n| Approve election policy activation | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nEARS Requirements (Permissions)\n- WHEN editor가 정책 위반 의심 콘텐츠를 발견하면, THE 시스템 SHALL 정책 위반 제재는 moderator에게 승인을 요구한다.\n- WHERE moderator 권한 범위를 초과하는 제재가 요청되면, THE 시스템 SHALL admin 승인 흐름으로 전환한다.\n\n## 14) Diagrams\n\n14.1 Report Lifecycle\n```mermaid\ngraph LR\n  A[\"Report Submitted\"] --> B[\"Auto-Triage(Classify/Severity)\"]\n  B --> C{\"Auto-Hide Threshold Met?\"}\n  C -->|\"Yes\"| D[\"Auto-Hide Content\"]\n  C -->|\"No\"| E[\"Queue Assignment\"]\n  D --> E\n  E --> F[\"Moderator Review\"]\n  F --> G{\"Decision\"}\n  G -->|\"Label\"| H[\"Apply Labels\"]\n  G -->|\"Hide/Remove\"| I[\"Enforce Action\"]\n  G -->|\"No Action\"| J[\"Close Case\"]\n  H --> K[\"Notify Parties\"]\n  I --> K\n  J --> K\n  K --> L[\"Log & Transparency\"]\n  L --> M[\"Appeal Window\"]\n```\n\n14.2 Appeals Flow\n```mermaid\ngraph LR\n  A[\"Appeal Submitted\"] --> B[\"Acknowledge Receipt\"]\n  B --> C[\"Assign Reviewer(Out-of-band)\"]\n  C --> D[\"Re-review Evidence\"]\n  D --> E{\"Outcome?\"}\n  E -->|\"Uphold\"| F[\"Maintain Action\"]\n  E -->|\"Modify\"| G[\"Adjust Labels/Sanction\"]\n  E -->|\"Reverse\"| H[\"Restore Content/Access\"]\n  F --> I[\"Notify & Log\"]\n  G --> I\n  H --> I\n```\n\n## 15) Glossary of Reason Codes (Examples)\n- ILLEGAL_THREAT: Credible threats of violence or harm.\n- DOXXING: Sharing personal identifiable information without consent.\n- HATE_SPEECH: Dehumanizing or derogatory content targeting protected classes.\n- MISINFO_HARM: Fabricated or misleading facts likely to cause public harm.\n- SPAM: Unsolicited repetitive or promotional content.\n- OFF_TOPIC: Content not relevant to the thread/topic.\n- LOW_QUALITY: Extremely short, noise, or non-substantive posts.\n- COPYRIGHT: Unauthorized reproduction of copyrighted material.\n- ELECTION_UNDISCLOSED: Undisclosed paid political content.\n\n## Data Retention and Security Alignment\n- Align moderation logs, transparency data, and user case histories with data retention durations defined in the Data Lifecycle policy, and privacy constraints defined in Security & Compliance.\n\nEARS Requirements (Alignment)\n- THE governance subsystem SHALL 데이터 보존·삭제 정책을 준수하여 케이스 로그를 보관·파기한다 per the retention schedule.\n- THE governance subsystem SHALL 개인정보 최소 수집 원칙을 준수하여 필요한 범위 내 정보만 기록한다.\n\n## Change Management\n- Policy updates require admin approval and public changelog noting effective dates and material changes.\n\nEARS Requirements (Change Mgmt)\n- WHEN 정책이 갱신되면, THE 시스템 SHALL 발효일과 주요 변경 사유를 사용자 공지 영역에 게시한다 within 24 hours of activation.\n\n---\nThis document specifies business requirements only. Developers retain full autonomy over technical implementation, including architecture, APIs, and database design."},"step":0,"total":13,"completed":8,"created_at":"2025-08-12T04:19:28.231Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"오류/예외 상황에서의 사용자 관점 처리 원칙과 복구 절차를 표준화하기 위함.","filename":"12-pol-econ-board-exception-handling-and-error-scenarios.md","documentType":"requirement","outline":["공통 에러 분류와 사용자 메시지 원칙","인증/인가 관련 오류 처리","콘텐츠 작업 오류(업로드/저장/충돌) 처리","신고/중재 실패 및 재처리","외부 연동 실패 시 처리(로그인 제공자 등)","레이트리밋/스팸 차단에 따른 제한 알림","데이터 무결성/중복 감지와 정정","사용자 복구 절차와 안내"],"audience":"development team","keyQuestions":["대표적인 오류 상황과 기대되는 시스템 반응은 무엇인가","사용자 복구 경로와 재시도 정책은 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["EARS 형식으로 오류 처리 요구사항 작성","사용자 메시지 원칙 명시","API/코드 수준 상세 금지"],"content":"# pol-econ-board Exception Handling and Error Scenarios\n\nThis document defines complete business requirements for how the pol-econ-board service handles exceptions and error scenarios from a user perspective, including recovery procedures. It provides business requirements only. All technical implementation decisions (architecture, APIs, database design, libraries) are at the sole discretion of the development team. The document describes WHAT the system must do, not HOW to build it.\n\n## 1. Purpose and Scope\n- Standardize error taxonomy, user-facing messaging, recovery flows, and cross-cutting policies across authentication, content operations, moderation, external integrations, rate limiting/spam control, and data integrity.\n- Ensure consistent, actionable responses with measurable performance targets and clear remediation guidance.\n- Provide testable requirements using EARS syntax for pass/fail validation.\n\n## 2. Related Documents\n- For role definitions and authentication rules, see the User Roles and Authentication Requirements: [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- For end-to-end functions and validations, see the Functional Requirements: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- For user journeys and diagrams, see the User Flows: [User Flow Diagrams and Journeys](./06-pol-econ-board-user-flows.md).\n\n## 3. Common Error Taxonomy and User Message Principles\n\n### 3.1 Error Categories and Codes\n- Category list (business-level): AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- Error code format: CATEGORY_SUBJECT_REASON (UPPERCASE, underscores). Examples: AUTH_INVALID_CREDENTIALS, CONTENT_VERSION_CONFLICT, RATE_LIMIT_EXCEEDED, INTEGRATION_PROVIDER_UNAVAILABLE, DATA_DUPLICATE_SUBMISSION.\n- Severity levels (business impact): INFO, WARNING, ERROR, CRITICAL.\n\n### 3.2 Standard Error Object (Business-Level)\n- Fields required for user-facing handling and audit. This is not an API schema; it is the business content the response must convey:\n  - errorCode (string; follows code format)\n  - title (short human-readable summary)\n  - message (actionable description with next steps)\n  - userAction (primary recommended action)\n  - supportId (opaque identifier for support/audit; unique per incident)\n  - category (one of categories above)\n  - severity (INFO/WARNING/ERROR/CRITICAL)\n  - retryAfter (optional, seconds or timestamp when retry is allowed/expected)\n\n### 3.3 User Message Principles\n- Clarity: plain language; avoid jargon or stack traces.\n- Actionability: always include the next step the user can take, or when to try again.\n- Non-disclosure: never reveal sensitive details (e.g., which field exactly failed security checks for spam, internal IDs, or validation rules that could be gamed).\n- Consistency: uniform tone and structure across all modules.\n- Localization: messages are localized to the user’s language; dynamic inserts use placeholders; sensitive content is neutral.\n- Accessibility: messages avoid color-only significance and are concise for assistive technologies.\n\n### 3.4 Performance Expectations for Error Responses\n- Perceived immediacy matters. Targets below are user-facing, measured at the boundary of the service response perceived by the client.\n  - Detection-to-display latency: ≤ 1.0 second for synchronous actions, ≤ 5.0 seconds for asynchronous confirmations.\n  - Retryability hint availability: provided within the same response when applicable.\n  - Logging identifier (supportId): always present with errors of severity ERROR or higher.\n\n## 4. Global Cross-Cutting Requirements (EARS)\n- THE pol-econ-board service SHALL classify every error into exactly one category from AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- THE pol-econ-board service SHALL produce a user-facing error payload with fields errorCode, title, message, userAction, category, severity, and supportId for errors of severity ERROR or CRITICAL.\n- THE pol-econ-board service SHALL include retryAfter where a retry is appropriate and bounded.\n- THE pol-econ-board service SHALL present localized messages based on the user’s language preference.\n- THE pol-econ-board service SHALL avoid exposing internal identifiers, stack traces, SQL details, or provider-specific secrets in user-facing messages.\n- THE pol-econ-board service SHALL generate a unique supportId for each error event visible to users and persist an audit log correlated by that identifier.\n- THE pol-econ-board service SHALL display an error to the user within 1 second for synchronous failures.\n- THE pol-econ-board service SHALL record severity at time of error creation using the defined severity scale.\n- THE pol-econ-board service SHALL attach remediation guidance in userAction for all actionable errors.\n- THE pol-econ-board service SHALL suppress duplicate error messages for the same root cause within a single user action.\n- THE pol-econ-board service SHALL provide idempotent handling for user-triggered actions that are retried due to transient failures.\n- WHERE rate limiting applies, THE pol-econ-board service SHALL communicate the next eligible retry time using retryAfter.\n\n## 5. Authentication and Authorization Error Handling\n\n### 5.1 Scenarios\n- Invalid credentials at login.\n- Email not verified.\n- Account locked/suspended.\n- Session expired or token invalid/expired.\n- Refresh token invalid, expired, or revoked.\n- Permission denied due to role/permission mismatch.\n- Forced logout due to device revocation or global sign-out.\n\n### 5.2 EARS Requirements\n- WHEN 로그인 시 잘못된 자격 증명이 제출될 때, THE pol-econ-board service SHALL return AUTH_INVALID_CREDENTIALS with message guiding to check email/password and a link to reset password, without indicating which part is wrong.\n- WHEN 로그인 시 계정 이메일이 미인증 상태일 때, THE pol-econ-board service SHALL return ACCOUNT_EMAIL_UNVERIFIED with an option to resend verification and indicate expected arrival time within 5 minutes.\n- WHEN 계정이 정책 위반으로 잠김 상태일 때, THE pol-econ-board service SHALL return ACCOUNT_LOCKED with message including lock duration or appeal link per policy.\n- WHEN 세션 토큰이 만료되었을 때, THE pol-econ-board service SHALL attempt a silent renewal using a valid refresh context and, upon failure, present SESSION_EXPIRED requiring re-authentication.\n- IF 갱신 토큰이 만료되었거나 철회되었을 경우, THEN THE pol-econ-board service SHALL clear session context and present AUTH_REAUTHENTICATION_REQUIRED with userAction \"Sign in again\".\n- WHEN 권한이 부족한 사용자가 제한된 리소스에 접근할 때, THE pol-econ-board service SHALL return PERM_FORBIDDEN with a message indicating the action is not permitted for the user’s role.\n- WHEN 관리자에 의해 모든 디바이스에서 로그아웃이 수행되었을 때, THE pol-econ-board service SHALL present SESSION_REVOKED and require re-authentication before any protected action.\n- WHERE 다단계 인증이 정책상 필요한 구간일 때, THE pol-econ-board service SHALL present AUTH_STEP_UP_REQUIRED with guidance to complete additional checks.\n- THE pol-econ-board service SHALL limit login attempts to prevent enumeration and return AUTH_ATTEMPT_LIMIT with a cooldown window not exceeding 15 minutes.\n\n### 5.3 Token Refresh and Failure Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Session Lifecycle\"\n    A[\"Protected Action\"] --> B[\"Access Token Validation\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Proceed Action\"]\n    C -->|\"No\"| E[\"Attempt Silent Refresh\"]\n    E --> F{\"Refresh Succeeds?\"}\n    F -->|\"Yes\"| D\n    F -->|\"No\"| G[\"Present SESSION_EXPIRED\"]\n  end\n  G --> H[\"User Re-authenticates\"]\n  H --> D\n```\n\n## 6. Content Operation Errors (Upload/Save/Conflict)\n\n### 6.1 Scenarios\n- Draft auto-save failure.\n- Publish validation errors (missing required fields, policy constraints).\n- Attachment upload failures (size/type/timeout/corrupted file).\n- Version conflicts due to concurrent edits.\n- Storage quota exceeded for attachments.\n- Network interruption during save/publish.\n\n### 6.2 EARS Requirements\n- WHEN 초안 자동저장이 실패할 때, THE pol-econ-board service SHALL display CONTENT autosave failure within 1 second and queue a background retry up to 3 attempts within 2 minutes.\n- WHEN 게시 요청이 필수 비즈니스 규칙 검증에 실패할 때, THE pol-econ-board service SHALL return VALIDATION_FAILED with a list of violated business rules summarized in user language and preserve the user’s data.\n- WHEN 첨부 업로드가 허용 크기 또는 형식을 초과할 때, THE pol-econ-board service SHALL return UPLOAD_POLICY_REJECTED specifying the allowed limits without exposing internal thresholds that can be gamed beyond published policy.\n- WHEN 업로드가 네트워크 일시 오류로 실패할 때, THE pol-econ-board service SHALL return UPLOAD_TRANSIENT_FAILURE with userAction to retry and SHALL allow up to 3 retries with exponential backoff not exceeding 60 seconds total.\n- WHEN 동시 편집으로 버전 충돌이 감지될 때, THE pol-econ-board service SHALL return CONTENT_VERSION_CONFLICT and provide options to reload latest, keep local copy, or create a new revision.\n- WHEN 저장 또는 게시 중 연결이 중단되었을 때, THE pol-econ-board service SHALL guarantee idempotent processing such that repeated submission does not create duplicates.\n- WHERE 사용자 저장소 제한이 정책상 설정되어 있을 때, THE pol-econ-board service SHALL return UPLOAD_QUOTA_EXCEEDED with guidance on freeing space or upgrading if applicable.\n\n### 6.3 Save Conflict Resolution Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Edit and Save\"\n    A[\"User Edits Content\"] --> B[\"Submit Save\"]\n    B --> C[\"Validate Business Rules\"]\n    C --> D[\"Check Latest Version\"]\n    D --> E{\"Conflict?\"}\n    E -->|\"No\"| F[\"Persist Changes\"]\n    E -->|\"Yes\"| G[\"Return CONTENT_VERSION_CONFLICT\"]\n  end\n  G --> H[\"Offer Options\"]\n  H --> I[\"Reload Latest\"]\n  H --> J[\"Keep Local Copy\"]\n  H --> K[\"Create New Revision\"]\n  I --> F\n  J -.-> F\n  K --> F\n```\n\n## 7. Report/Moderation Failures and Reprocessing\n\n### 7.1 Scenarios\n- Report submission transient failure.\n- Moderation queue backlog causing SLA risk.\n- Temporary moderation action later reversed.\n- Appeal submission failure.\n\n### 7.2 EARS Requirements\n- WHEN 신고 제출이 일시적으로 실패할 때, THE pol-econ-board service SHALL return REPORT_SUBMISSION_FAILED with userAction to retry and preserve the report details locally for 24 hours.\n- WHILE 중재 큐 적체가 SLA 위험 수준일 때, THE pol-econ-board service SHALL surface MODERATION_DELAY_NOTICE to reporters with an updated expected resolution window.\n- IF 중재 결과가 재검토에서 뒤집힐 조건이 충족될 경우, THEN THE pol-econ-board service SHALL issue MODERATION_ACTION_REVERSED notices to impacted users and restore content state where applicable.\n- WHEN 이의제기 제출이 검증 오류로 실패할 때, THE pol-econ-board service SHALL return VALIDATION_FAILED with specific missing elements (e.g., required rationale) described in user language.\n- THE pol-econ-board service SHALL maintain a transparency log entry for moderation errors with supportId correlation.\n\n## 8. External Integration Failures\n\n### 8.1 Scenarios\n- Third-party login provider unavailable or timeout.\n- Email delivery provider error or rate limit.\n- Webhook/partner feed delays.\n\n### 8.2 EARS Requirements\n- WHEN 외부 로그인 제공자가 응답하지 않거나 오류를 반환할 때, THE pol-econ-board service SHALL return INTEGRATION_PROVIDER_UNAVAILABLE with userAction to try an alternative method or try again later and SHALL not block native email login.\n- WHEN 이메일 인증 메시지 발송이 실패할 때, THE pol-econ-board service SHALL return NOTIFICATION_DELIVERY_FAILED with option to resend and guidance to check spam folders.\n- WHEN 파트너 연동 데이터가 지연될 때, THE pol-econ-board service SHALL present INTEGRATION_DELAY_NOTICE with an estimated refresh time window not exceeding 60 minutes.\n- IF 외부 연동의 오류가 지속적으로 발생하는 경우, THEN THE pol-econ-board service SHALL degrade gracefully by disabling dependent optional features and informing users via banner-level message.\n\n## 9. Rate Limit and Spam Blocking Notifications\n\n### 9.1 Scenarios\n- Short-term throttling due to bursts.\n- Behavioral spam patterns detected.\n- Automated challenge required to continue.\n\n### 9.2 EARS Requirements\n- WHEN 단기간 요청 폭주로 임계치를 초과할 때, THE pol-econ-board service SHALL return RATE_LIMIT_EXCEEDED with retryAfter indicating the earliest retry time and SHALL not consume quota on refused retries after notification.\n- WHEN 스팸 의심 패턴이 감지될 때, THE pol-econ-board service SHALL return SPAM_SUSPECTED and limit posting or messaging features for a cooldown period while offering appeal instructions.\n- WHERE 자동 챌린지가 정책상 허용되는 경우, THE pol-econ-board service SHALL present CHALLENGE_REQUIRED and restore normal limits upon challenge success.\n- THE pol-econ-board service SHALL avoid permanently blocking a user on a first offense absent clear abuse signals and SHALL provide a path to remediation or appeal.\n\n## 10. Data Integrity, Duplicate Detection, and Correction\n\n### 10.1 Scenarios\n- Double submissions due to retries/back button.\n- Duplicate posts/comments within short interval.\n- Orphan references to deleted content.\n\n### 10.2 EARS Requirements\n- WHEN 동일한 사용자 액션이 짧은 시간 내 반복 제출될 때, THE pol-econ-board service SHALL enforce idempotent processing and return DATA_DUPLICATE_SUBMISSION referencing the original successful action via a user-safe reference.\n- WHEN 중복 게시물 내용이 정책 기준과 시간 창(예: 5분) 내로 감지될 때, THE pol-econ-board service SHALL return CONTENT_DUPLICATE_DETECTED and offer userAction to edit, merge, or discard.\n- IF 참조 무결성 위반이 감지될 경우, THEN THE pol-econ-board service SHALL return DATA_INTEGRITY_ERROR and guide the user to refresh or navigate to valid resources, while recording the condition for backend reconciliation.\n- THE pol-econ-board service SHALL prevent publishing content that violates referential integrity rules and SHALL present a corrective checklist.\n\n## 11. User Recovery Procedures and Guidance\n\n### 11.1 Recovery Center (Business-Level)\n- Centralized, role-aware recovery page that consolidates recent failed actions with status and next steps (no UI spec implied).\n\n### 11.2 EARS Requirements\n- THE pol-econ-board service SHALL provide a recovery center summarizing the last 20 failed actions per user with timestamps and userAction.\n- THE pol-econ-board service SHALL allow resubmission of eligible failed actions from the recovery center where safe and idempotent.\n- WHERE 사용자 권한이 필요한 복구가 포함되는 경우, THE pol-econ-board service SHALL verify permissions and show PERM_FORBIDDEN if insufficient.\n- IF 동일 실패가 3회 연속 반복될 경우, THEN THE pol-econ-board service SHALL prompt the user with alternative actions or support contact.\n- THE pol-econ-board service SHALL include the supportId and a copyable diagnostics summary in the recovery center.\n\n## 12. Error Category to Message Examples\n\nThe following examples illustrate business content; development teams retain freedom over technical formatting.\n\n| Category | Example Code | Title | Example User Message | Primary User Action |\n|----------|--------------|-------|----------------------|---------------------|\n| AUTH | AUTH_INVALID_CREDENTIALS | Sign-in failed | We couldn’t sign you in. Check your email and password, then try again. | Reset password or try again |\n| ACCOUNT | ACCOUNT_EMAIL_UNVERIFIED | Email not verified | Your email is not verified. We sent a new verification message. | Open email and verify |\n| SESSION | SESSION_EXPIRED | Session expired | Your session ended. Please sign in again to continue. | Sign in again |\n| PERM | PERM_FORBIDDEN | Action not permitted | Your account does not have permission to perform this action. | Review permissions |\n| CONTENT | CONTENT_VERSION_CONFLICT | Edit conflict detected | Another edit was saved while you were editing. Review the latest version. | Review and resolve |\n| UPLOAD | UPLOAD_TRANSIENT_FAILURE | Upload interrupted | The upload was interrupted. You can retry safely. | Retry upload |\n| RATE_LIMIT | RATE_LIMIT_EXCEEDED | Too many requests | You’ve reached the limit. Try again in a few minutes. | Try again later |\n| SPAM | SPAM_SUSPECTED | Posting temporarily limited | We detected unusual activity. Posting is limited for a short time. | Follow instructions or appeal |\n| INTEGRATION | INTEGRATION_PROVIDER_UNAVAILABLE | Provider unavailable | A login provider is temporarily unavailable. Try another method. | Try another method |\n| DATA | DATA_DUPLICATE_SUBMISSION | Duplicate submission | It looks like this was already submitted. | View previous result |\n\n## 13. Success Criteria and Monitoring (Business-Level)\n- THE pol-econ-board service SHALL achieve ≥ 99% of synchronous error displays within 1 second, measured at the client boundary.\n- THE pol-econ-board service SHALL include supportId in 100% of ERROR/CRITICAL cases and maintain auditable logs.\n- THE pol-econ-board service SHALL ensure that 95% of transient upload failures succeed within 3 total retries.\n- THE pol-econ-board service SHALL provide retryAfter for 100% of rate limit responses.\n- THE pol-econ-board service SHALL maintain transparency logs for moderation error reversals with monthly summaries.\n\n## 14. Glossary (Business Terms)\n- supportId: User-visible opaque identifier used to correlate an incident with audit logs.\n- retryAfter: User-understandable indicator for when a retry is allowed or expected.\n- Idempotent processing: Repeating the same user action does not create additional side effects.\n- Severity: Business impact classification guiding priority and user communications.\n\n## 15. Additional EARS Requirements by Area (Comprehensive)\n\n### 15.1 Messaging and Localization\n- THE pol-econ-board service SHALL ensure messages are written at a reading level accessible to the general public and avoid legal jargon except where mandated.\n- WHERE localization is available for a language, THE pol-econ-board service SHALL deliver error messages in that language with placeholders correctly substituted.\n- IF message rendering fails, THEN THE pol-econ-board service SHALL fall back to a default language and preserve the supportId.\n\n### 15.2 Logging and Privacy\n- THE pol-econ-board service SHALL log sufficient context to diagnose user-visible errors while redacting personal data that is not necessary for diagnosis.\n- WHERE privacy regulations require minimization, THE pol-econ-board service SHALL avoid logging content bodies for private messages and log only metadata sufficient for audit.\n\n### 15.3 Retries and Backoff (Business Policy)\n- THE pol-econ-board service SHALL cap automated retries to prevent cascading failures and user confusion, not exceeding 3 attempts within 2 minutes for content saves and uploads.\n- THE pol-econ-board service SHALL surface retry exhaustion clearly and provide a definitive next step.\n\n### 15.4 Accessibility and Inclusivity\n- THE pol-econ-board service SHALL avoid using color-only or icon-only indications for errors.\n- THE pol-econ-board service SHALL include concise text alternatives for all alerts.\n\n## 16. Appendix: Sample Flow for Rate Limit Handling (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Request Handling\"\n    A[\"User Action\"] --> B[\"Check Rate Quota\"]\n    B --> C{\"Exceeded?\"}\n    C -->|\"No\"| D[\"Proceed\"]\n    C -->|\"Yes\"| E[\"Return RATE_LIMIT_EXCEEDED\"]\n  end\n  E --> F[\"Show Retry Time(retryAfter)\"]\n  F --> G{\"Challenge Allowed?\"}\n  G -->|\"Yes\"| H[\"Present CHALLENGE_REQUIRED\"]\n  G -->|\"No\"| I[\"Wait Cooldown\"]\n  H --> J{\"Challenge Passed?\"}\n  J -->|\"Yes\"| D\n  J -->|\"No\"| I\n```\n\n---\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, are under the full autonomy of the development team. The scope is limited to defining user-visible behaviors, rules, and recovery paths for error scenarios in pol-econ-board."},"step":0,"total":13,"completed":9,"created_at":"2025-08-12T04:19:35.154Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"역할과 권한, 인증/세션 정책을 비즈니스 관점에서 완전하게 정의하여 권한 관리의 기준으로 삼기 위함.","filename":"03-pol-econ-board-user-roles-and-authentication.md","documentType":"requirement","outline":["인증 요구사항 개요","회원가입/로그인/로그아웃/이메일 인증/비밀번호 재설정","세션 및 토큰 관리(JWT) 원칙","역할 정의 및 권한 설명","권한 매트릭스(역할×액션)","정책: 비밀번호 규칙·로그인 시도 제한·계정 정지/해제·디바이스 로그아웃","감사 및 보안 고려(비즈니스 관점)"],"audience":"development team","keyQuestions":["어떤 역할이 존재하며 각 역할이 수행/제한되는 액션은 무엇인가","인증 흐름과 세션 만료/갱신 정책은 무엇인가","보안 및 감사 요구는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["01-pol-econ-board-service-overview.md","07-pol-econ-board-community-governance-and-moderation.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 요구사항 명시","권한 매트릭스 포함","JWT 기반 토큰 관리 원칙 포함","API/DB 세부 명시 금지"],"content":"# 03-pol-econ-board-user-roles-and-authentication\n\n## Scope and Intent\nThis document defines business requirements for authentication, authorization, and role-based access control of the service prefix \"pol-econ-board\". It specifies WHAT the system must do from a business perspective, not HOW to implement it. All technical implementation decisions (architecture, APIs, database design, libraries, infrastructure) are at the discretion of the development team.\n\n## Authentication Requirements Overview\n- THE system SHALL support account lifecycle: registration, email verification, login, logout, password change, password reset, and session/device management.\n- THE system SHALL support role-based authorization for roles: guest (unauthenticated), member, expert, moderator, editor, admin.\n- THE system SHALL use JWT for access control with short-lived access tokens and longer-lived refresh tokens.\n- THE system SHALL record key authentication and authorization events for audit and security monitoring.\n\n## Registration, Login, Logout, Email Verification, Password Reset\n\n### Registration\n- WHEN a user attempts to register with email and password, THE system SHALL validate input according to password policy and email format.\n- WHEN registration succeeds, THE system SHALL issue a verification step requiring email ownership confirmation prior to granting posting or interaction privileges.\n- WHERE invitation-based or role elevation flows are used (e.g., expert), THE system SHALL allow registration as member first and perform role elevation after verification and review.\n\nInput validation (business rules):\n- THE system SHALL require email in valid format with domain part containing at least one dot and TLD of 2–24 letters.\n- THE system SHALL reject disposable or blocked domains maintained by policy list.\n- THE system SHALL require password length ≥ 10 characters and include at least 2 of the following classes: uppercase, lowercase, number, symbol. Passphrases ≥ 16 characters with spaces allowed SHALL be accepted as an alternative.\n- THE system SHALL reject passwords found in a maintained common-passwords list (top N thousand) and passwords equal to email local part or display name.\n\n### Email Verification\n- WHEN a registration is submitted, THE system SHALL send a verification message containing a one-time token.\n- THE system SHALL set verification tokens to expire in 30 minutes and be single-use.\n- WHILE an account is unverified, THE system SHALL permit only read access to public content and allow profile completion but SHALL block posting, commenting, voting, reporting, and following.\n- IF a verification token is expired or invalid, THEN THE system SHALL present a clear error and SHALL allow requesting a new token up to 3 times per 24 hours.\n\n### Login\n- WHEN a user submits email and password, THE system SHALL validate credentials and respond within 2 seconds at the 95th percentile under normal load.\n- IF credentials are valid and the account is in good standing, THEN THE system SHALL create a session and issue access and refresh tokens containing role and permissions.\n- IF the account is suspended, THEN THE system SHALL deny login and present the suspension reason and duration when policy allows disclosure.\n- IF multi-factor verification is enabled by policy or user preference, THEN THE system SHALL require second-factor confirmation before issuing tokens.\n\n### Logout\n- WHEN a user initiates logout, THE system SHALL invalidate the active access token and detach it from the corresponding refresh token chain for that device.\n- WHEN the user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens associated with the account within 60 seconds.\n\n### Password Reset and Change\n- WHEN a user requests password reset, THE system SHALL send a one-time reset token that expires in 30 minutes and is invalidated upon use.\n- WHEN a user completes password reset, THE system SHALL invalidate all existing sessions and refresh tokens and require login with the new password.\n- WHEN a user changes password from a logged-in state, THE system SHALL prompt for current password re-authentication and SHALL invalidate all refresh tokens while allowing the current access token to expire within its normal lifetime unless policy requires immediate revocation.\n\n## Session and Token Management (JWT) Principles\n- THE system SHALL use JWT-based access tokens with a lifetime of 20 minutes and refresh tokens with a lifetime of 14 days.\n- THE system SHALL rotate refresh tokens on each use and SHALL invalidate the previous token immediately after rotation.\n- THE system SHALL embed in JWT payload at minimum: userId, role, a permissions array, issued-at time, and expiration time. Optional claims may include trust level, verified status, and badges when relevant to business logic.\n- IF a user’s role or permissions change, THEN THE system SHALL invalidate all active refresh tokens within 60 seconds and require token re-issuance under the new role.\n- WHERE device-level session tracking is enabled, THE system SHALL allow users to view active device sessions (device name, approximate location, last activity) and revoke individual sessions.\n- IF suspicious activity is detected on a session (impossible travel, abnormal IP velocity as per policy), THEN THE system SHALL flag the session for additional verification and MAY require step-up authentication.\n- WHERE client storage policy applies, THE system SHALL support secure storage of tokens with preference for httpOnly cookie; localStorage MAY be used where acceptable by policy. Developers retain discretion on exact mechanism.\n\n## Role Definitions and Permission Descriptions\nThe service recognizes the following roles. Each role’s permissions are described in business terms. JWT payloads MUST include the role and a permissions array reflecting granted actions.\n\n### Guest (Unauthenticated)\n- Read-only access to public content and search public posts.\n- Cannot create content, vote, react, report, or follow.\n\n### Member\n- General member registered with real name or alias. Can create/edit/delete own posts and comments, report content, bookmark, follow topics/users, vote/react, and manage notifications. Subject to community moderation.\n- Typical JWT permissions: [\"post:create\", \"post:edit:own\", \"post:delete:own\", \"comment:create\", \"comment:edit:own\", \"comment:delete:own\", \"report:create\", \"bookmark:create\", \"follow:create\", \"vote:create\", \"notify:manage\", \"profile:edit\"]\n\n### Expert\n- Elevated after expertise verification in politics/economics. Includes member permissions plus expert badge display, propose expert-only topics, publish deep-dive research/insight posts, and participate in expert Q&A.\n- Typical JWT permissions: member permissions + [\"topic:propose:expert\", \"post:create:insight\", \"qa:expert:participate\", \"badge:expert\"]\n\n### Moderator\n- Community operations. Access report queue, temporarily hide/delete content, request user sanctions (warning/suspension), mediate disputes, manage transparency logs.\n- Typical JWT permissions: member permissions + [\"report:queue:read\", \"content:hide\", \"content:delete\", \"sanction:request\", \"dispute:mediate\", \"transparency:manage\"]\n\n### Editor\n- Content quality and curation. Edit tags/topics, manage announcements/pinned posts, operate featured selections for home/sections, collaborate with moderators on policy violations.\n- Typical JWT permissions: member permissions + [\"topic:edit\", \"curation:feature\", \"announcement:manage\", \"pin:manage\"]\n\n### Admin\n- Organization-wide operations. Full access to all resources, role management, policy/settings changes, legal request workflow, service health/metrics oversight, audit review.\n- Typical JWT permissions: all permissions including [\"role:manage\", \"policy:manage\", \"sanction:execute\", \"audit:read\", \"system:metrics:read\", \"legal:request:manage\", \"session:revoke:any\"]\n\n## Permission Matrix (Role × Action)\n\n| Action (Business term) | Guest | Member | Expert | Moderator | Editor | Admin |\n|---|---|---|---|---|---|---|\n| View public content | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Search public posts | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create standard post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create deep-dive insight post | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit own post (within policy window) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Edit own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Vote/React on content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Report content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Bookmark content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Follow topic/user | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Propose expert-only topic | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit topics/tags | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Curate featured collections | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Manage announcements/pinned posts | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Access report queue | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Temporarily hide content | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Delete content (moderation remove) | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Issue user warning (execute) | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Request user suspension | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Execute user suspension | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Manage transparency logs | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Manage roles | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Change policies/settings | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Access audit logs | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View service health metrics | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Initiate legal request workflow | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View own sessions | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke own sessions (single/all) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke other users’ sessions | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nNotes:\n- Moderator actions that execute irreversible sanctions are restricted to admin. Moderators can request sanctions with documented reasons.\n- Expert adds publishing and proposal capabilities beyond member.\n\n## Policies: Password Rules, Login Attempt Limits, Account Suspension/Unlock, Device Logout\n\n### Password Rules\n- THE system SHALL enforce minimum password length of 10 and complexity as defined above.\n- THE system SHALL permit passphrases ≥ 16 characters without complexity requirements.\n- IF a password is found in a banned list, THEN THE system SHALL reject it with guidance to choose a stronger password.\n\n### Login Attempt Limits and Abuse Prevention\n- THE system SHALL allow up to 5 failed login attempts per account per rolling 15 minutes before temporary lockout.\n- IF the threshold is exceeded, THEN THE system SHALL lock the account for 15 minutes and SHALL send an advisory notice to the account email.\n- WHERE suspicious velocity or credential stuffing is detected, THE system SHALL apply adaptive throttling and MAY require additional verification.\n- THE system SHALL reset failure counters upon successful login.\n\n### Account Suspension and Unlock\n- WHEN a moderator submits a suspension request with reason and proposed duration, THE system SHALL route it for admin execution and log the decision.\n- WHEN an admin executes a suspension, THE system SHALL immediately revoke all sessions and block new sessions until the suspension ends or is lifted.\n- IF the suspension period expires, THEN THE system SHALL automatically restore login capability and flag the account for post-suspension review where policy requires.\n- WHERE an appeal is in progress per governance policy, THE system SHALL maintain the current enforcement state until the appeal outcome.\n\n### Device Logout and Session Visibility\n- THE system SHALL provide users a list of active sessions including device label, approximate location (city/country), and last activity timestamp.\n- WHEN a user revokes a specific session, THE system SHALL invalidate the corresponding refresh token and any derived access tokens within 60 seconds.\n- WHEN a user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens as noted earlier.\n\n## Error Handling and Recovery (Auth-specific)\n- IF login fails due to invalid credentials, THEN THE system SHALL present a generic failure message without disclosing whether email exists.\n- IF login fails due to unverified email, THEN THE system SHALL allow immediate resend of verification up to the daily resend limit.\n- IF login is blocked due to account suspension, THEN THE system SHALL present suspension status and policy-based guidance.\n- IF password reset token is invalid or expired, THEN THE system SHALL explain the issue and allow requesting a new token subject to rate limits.\n- IF token refresh fails due to reuse or rotation violation, THEN THE system SHALL revoke the refresh token family and require re-authentication.\n\nAll user-facing errors SHALL include a short, clear message and an optional reference code for support.\n\n## Performance and Rate-Limiting Expectations\n- THE system SHALL complete credential validation and token issuance within 2 seconds at the 95th percentile under normal load.\n- THE system SHALL deliver verification and reset emails within 60 seconds at the 95th percentile under normal load.\n- THE system SHALL support at least 10 token refreshes per user per hour without degradation, subject to normal rate-limits.\n- WHERE global traffic protection is necessary, THE system SHALL enforce per-IP and per-account rate limits for registration, login, verification, and reset actions as per policy thresholds.\n\n## Audit and Security Considerations (Business Perspective)\n- THE system SHALL maintain audit records for: registration, verification, login success/failure, logout, token refresh, token revocation, password change/reset, role/permission change, suspension requests and executions.\n- THE system SHALL ensure audit records include: actor (userId or system), action, timestamp, high-level context (e.g., device label, approximate location), and outcome (success/failure).\n- WHERE privacy laws apply, THE system SHALL align event retention with data lifecycle policy and ensure user data minimization.\n- THE system SHALL enable authorized reviewers (admin; limited moderator scope) to access relevant audit views while honoring least-privilege.\n- IF anomalous authentication patterns are detected, THEN THE system SHALL generate security alerts for review and MAY trigger protective measures (e.g., step-up authentication, temporary locks).\n\n## Mermaid Diagram: Authentication and Token Flow\n```mermaid\ngraph LR\n  subgraph \"User Authentication Flow\"\n    A[\"Start(Login)\"] --> B[\"Validate Input\"]\n    B --> C{\"Credentials Valid?\"}\n    C -->|\"Yes\"| D[\"Check Account State\"]\n    C -->|\"No\"| E[\"Show Generic Failure\"]\n    D --> F{\"MFA Required?\"}\n    F -->|\"Yes\"| G[\"Perform Second Factor\"]\n    F -->|\"No\"| H[\"Issue Tokens\"]\n    G --> I{\"Success?\"}\n    I -->|\"Yes\"| H\n    I -->|\"No\"| E\n  end\n\n  subgraph \"Token Management\"\n    H --> J[\"Access Token(20m)\"]\n    H --> K[\"Refresh Token(14d)\"]\n    K --> L[\"Rotate On Use\"]\n    L --> M{\"Rotation Valid?\"}\n    M -->|\"Yes\"| N[\"Issue New Pair\"]\n    M -->|\"No\"| O[\"Revoke Family & Re-auth\"]\n  end\n\n  subgraph \"Security Responses\"\n    D --> P{\"Suspended?\"}\n    P -->|\"Yes\"| Q[\"Deny Login & Notify\"]\n    P -->|\"No\"| F\n    K -.-> R[\"Revoke All Sessions\"]\n  end\n```\n\n## EARS-Formatted Detailed Requirements\n\n### Ubiquitous Requirements\n- THE authentication service SHALL require email verification before enabling content creation or interaction actions.\n- THE authorization service SHALL enforce role-based permissions as defined in the Permission Matrix.\n- THE token service SHALL issue access tokens with 20-minute lifetime and refresh tokens with 14-day lifetime.\n- THE security service SHALL maintain audit logs for all authentication and authorization events listed in this document.\n\n### Event-driven Requirements\n- WHEN a user registers, THE system SHALL send a verification message containing a single-use token that expires in 30 minutes.\n- WHEN a user logs in successfully, THE system SHALL bind the session to a device identifier and record last activity time.\n- WHEN a user logs out, THE system SHALL invalidate the active session within 60 seconds.\n- WHEN a refresh token is presented, THE system SHALL rotate it and invalidate the prior token.\n- WHEN a role is elevated (e.g., member → expert), THE system SHALL revoke existing refresh tokens and require re-authentication.\n- WHEN a moderator submits a sanction request, THE system SHALL route it for admin decision and log the outcome.\n\n### State-driven Requirements\n- WHILE an account remains unverified, THE system SHALL restrict the account to read-only public access and profile completion.\n- WHILE an account is under active suspension, THE system SHALL block login and token issuance.\n- WHILE an appeal is pending per governance policy, THE system SHALL preserve the current enforcement state.\n\n### Unwanted Behavior Requirements\n- IF a login attempt fails, THEN THE system SHALL present a generic error without confirming account existence.\n- IF failed login attempts exceed 5 within 15 minutes, THEN THE system SHALL lock the account for 15 minutes and log the event.\n- IF a refresh token reuse is detected, THEN THE system SHALL revoke the entire token family and require re-authentication.\n- IF impossible travel or anomalous activity is detected, THEN THE system SHALL require step-up verification before issuing tokens.\n- IF a password reset token is expired or invalid, THEN THE system SHALL deny the reset and allow a new request within policy limits.\n\n### Optional Features Requirements\n- WHERE multi-factor authentication is enabled, THE system SHALL require a second factor during login and sensitive actions.\n- WHERE device session visibility is enabled, THE system SHALL display active sessions and allow revocation by the user.\n- WHERE organization policy mandates httpOnly cookies, THE system SHALL store tokens in secure cookies rather than other storage options.\n\n## Business Rules and Validation Details\n- Email format: must include \"@\" and a domain containing at least one dot; TLD length 2–24; reject blocked domains.\n- Password: minimum length 10; at least 2 character classes unless passphrase ≥ 16; reject common and personal-info-based passwords.\n- Account names/display names: prohibited from impersonating public figures or organizations per governance policy.\n- Verification/resets: tokens are single-use, expire in 30 minutes, and are rate-limited to 3 sends per 24 hours per account.\n- Sensitive changes (email, password): require re-authentication within the past 5 minutes.\n\n## Data Minimization and Privacy (Business-Level)\n- THE system SHALL collect only data necessary for authentication and authorization (email, password hash, role, permissions, verification state, session metadata). Additional attributes (badge, trust level) SHALL be limited to business needs.\n- THE system SHALL allow users to view and manage their sessions and SHALL honor deletion requests per data lifecycle policy.\n\n## Success Criteria and KPIs (Auth Scope)\n- Email verification completion rate ≥ 90% within 24 hours of registration under normal operations.\n- 95th percentile login response time ≤ 2 seconds.\n- Password reset email delivery 95th percentile ≤ 60 seconds.\n- Security alert false-positive rate ≤ 5% after tuning.\n\n## Dependencies and References\n- Community sanctions, appeals, and transparency follow the rules defined in the governance documentation.\n- Privacy, data rights, and legal compliance requirements follow the security and compliance documentation.\n\n## Closing Statement\nThis document states business requirements only for authentication and authorization in the pol-econ-board service. All technical implementation decisions, including architecture, API shapes, database design, cryptography choices, and infrastructure, are the responsibility of the development team."},"step":0,"total":13,"completed":10,"created_at":"2025-08-12T04:19:38.180Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"수익화/성장 전략과 운영 모델을 명확히 하여 비즈니스 관점의 의사결정을 지원하기 위함.","filename":"02-pol-econ-board-business-model.md","documentType":"business-model","outline":["왜 존재해야 하는가(시장 공백/사용자 페인포인트)","수익 모델(광고/스폰서십/프리미엄 멤버십/데이터 리포트)","사용자 획득 및 성장 전략(콘텐츠·커뮤니티·파트너)","운영 모델과 비용 구조(인력/도구/프로세스)","규제·정책 리스크와 대응 원칙","성공 지표와 모니터링(재무/사용자/콘텐츠 품질)"],"audience":"business stakeholders","keyQuestions":["지속 가능한 수익과 성장 경로는 무엇인가","핵심 비용 항목과 운영 리스크는 무엇이며 어떻게 완화하는가","어떤 KPI로 성과를 관리하는가"],"detailLevel":"moderate detail","constraints":["수익 및 비용 항목은 비즈니스 수준으로 정의","정량 KPI 예시 포함","기술 구현 세부 금지"],"content":"# pol-econ-board Business Model\n\n## Executive Summary\npol-econ-board is a community platform for evidence-based political and economic discourse that connects Members with verified Experts, supported by professional Editors and Moderators, and overseen by Admins. The business model blends four revenue pillars—contextual Ads, ethical Sponsorships, Premium Memberships, and aggregate Data Reports—balanced with strong governance to sustain trust. Growth is driven by an expert-led content engine, transparent moderation, and partner distribution. The operating model prioritizes lightweight fixed costs with scalable variable costs and explicit SLAs for content quality and compliance.\n\nThis document defines business requirements only. All technical implementation decisions belong to the development team; the document describes what the system should do, not how to build it.\n\n## Why This Service Should Exist (Market Gap & Pain Points)\n- Information noise and polarization degrade the quality of political/economic discussion; users lack credible, verifiable expert insights.\n- Traditional forums underinvest in moderation, producing low trust, high toxicity, and regulatory risk.\n- Media outlets offer one-to-many publishing but lack interactive, moderated expert–member engagement loops.\n- Professionals and institutions need synthesized sentiment/insights but face high discovery and verification costs.\n\nDifferentiation\n- Verified Experts who produce deep research and answer Q&A, increasing trust and retention.\n- Transparent Community Governance led by Moderators with auditable actions and appeal paths.\n- Editorial Quality Control by Editors to spotlight high-signal content and thematic series.\n- Evidence and Attribution norms for sources, with labeling standards that reduce misinformation risk.\n\nPrimary Users & Roles\n- Members: participate in discussions, create posts/comments, follow topics, react/vote, report content, manage preferences.\n- Experts: everything a Member can do plus publish long-form research/insights, propose expert-only topics, and join expert Q&A.\n- Moderators: enforce community rules, handle reports, apply temporary actions, propose sanctions, and maintain transparency logs.\n- Editors: curate topics, manage features, create announcements and sticky posts, and run special series.\n- Admins: system-wide operations, role management, policy updates, legal request handling, and metrics oversight.\n\n## Revenue Model\nRevenue Pillars\n1) Contextual Advertising (Ads)\n- Inventory: in-feed display, topic page banners, newsletter placements, and contextually relevant sponsor tags.\n- Targeting: context and topic-based only; no sale of personally identifiable profiles; privacy-first measurements.\n- Frequency & Load: ad-light defaults to preserve trust.\n- Exclusions: political campaign/advocacy ads restricted per policy and law; see Risk section.\n\n2) Sponsorships\n- Thematic sponsorship of premium series, events (e.g., AMAs), and newsletters.\n- Strict labeling and separation between sponsored and editorial content.\n- Pre-approval workflow across Editor and Moderator functions for policy fit.\n\n3) Premium Memberships\n- Benefits: reduced or ad-free experience per tier, priority in expert Q&A, exclusive long-form content, advanced topic digests, bookmarks and reading lists at higher quotas, and early access to features.\n- Pricing & Terms: monthly and annual options, free trial, and limited-time promotions.\n- Eligibility: available to authenticated users; gift/corporate licenses for institutions.\n\n4) Data & Insight Reports\n- Aggregated, anonymized trend reports on topics, engagement, and sentiment indices; no export of personal data.\n- Audience: institutions (universities, think tanks, media, finance) and power users.\n- Distribution: one-off reports and recurring subscriptions with quarterly refreshes.\n\nRevenue Policy Requirements (EARS)\n- THE pol-econ-board service SHALL display no more than 1 ad slot per 10 content units in default feeds.\n- THE pol-econ-board service SHALL cap ad frequency at 2 impressions per user per publisher per day by default.\n- WHERE a Premium tier includes \"ad-free\", THE pol-econ-board service SHALL suppress all paid ad placements for that user during the active subscription period.\n- WHEN a post is sponsored, THE pol-econ-board service SHALL render a prominent \"Sponsored\" label and link to an explanation page at the start of the content unit.\n- IF a sponsorship conflicts with policy categories (e.g., political campaign advocacy), THEN THE pol-econ-board service SHALL block the sponsorship from publication and notify Editors and Moderators for review.\n- THE pol-econ-board service SHALL provide access to Data Reports only as aggregated and anonymized content without exposing personal data or individual-level behavioral traces.\n- WHEN a Premium subscription lapses, THE pol-econ-board service SHALL revert the user to the free tier benefits within 1 hour.\n\nPricing and Unit Economics (Business-Level Assumptions)\n- Ads: eCPM range USD 1.5–6.0 depending on placement and seasonality; ad-light policy expected to reduce fill but improve retention.\n- Sponsorships: USD 8k–30k per themed series per month; AMAs USD 3k–10k per event; newsletter footer USD 1k–5k per send.\n- Premium: USD 6.99/month or USD 69/year; free trial 14 days; early annual adoption discount up to 20%.\n- Data Reports: USD 1.5k–5k per report; institutional annual subscriptions USD 12k–40k.\n\nRevenue Stream Diagram\n```mermaid\ngraph LR\n  subgraph \"Audience\"\n    A[\"Members\"]\n    B[\"Experts\"]\n    C[\"Institutions\"]\n  end\n  subgraph \"Monetization Products\"\n    D[\"Contextual Ads\"]\n    E[\"Sponsorships\"]\n    F[\"Premium Memberships\"]\n    G[\"Data & Insight Reports\"]\n  end\n  subgraph \"Revenue\"\n    H[\"Ad Revenue\"]\n    I[\"Sponsorship Revenue\"]\n    J[\"Subscription Revenue\"]\n    K[\"Report Sales\"]\n  end\n  A --> D\n  A --> F\n  B --> E\n  C --> G\n  D --> H\n  E --> I\n  F --> J\n  G --> K\n```\n\n## User Acquisition & Growth Strategy\nContent Engine\n- Expert-led long-form content and Q&A cadences establish authority and drive organic growth.\n- Editors curate high-signal threads and produce weekly analytical digests for shareability.\n- Topic follow mechanics create recurring engagement loops for Members and Experts.\n\nCommunity & Network Effects\n- Reputation and badges for Experts reinforce credibility; transparency logs foster trust.\n- Member referrals and co-reading (followed topics) increase cross-pollination across sub-communities.\n- Moderation that is visible and timely reduces churn stemming from toxicity.\n\nPartnerships\n- Universities and think tanks for expert onboarding and content syndication.\n- Media partners for co-publishing and backlinks; podcasts/webinars for distribution.\n- Professional associations to drive institutional subscriptions for Data Reports.\n\nGrowth Requirements (EARS)\n- THE pol-econ-board service SHALL publish at least 2 expert long-form pieces per week during the first 6 months post-launch.\n- THE pol-econ-board service SHALL provide a referral mechanism that attributes new sign-ups to existing Members for reward calculation.\n- WHERE a user follows a topic, THE pol-econ-board service SHALL include the topic in weekly digests and real-time alerts per user preference settings.\n- WHEN an Expert publishes a new piece, THE pol-econ-board service SHALL trigger eligible notifications to followers within 5 minutes.\n- IF a reported item exceeds the toxicity threshold, THEN THE pol-econ-board service SHALL reduce its distribution pending moderation.\n\nGrowth Flywheel Diagram\n```mermaid\ngraph LR\n  A[\"Expert Content\"] --> B[\"Search & Social Traffic\"]\n  B --> C[\"Member Sign-Ups\"]\n  C --> D[\"Engagement & Retention\"]\n  D --> E[\"Premium Conversion\"]\n  E --> F[\"Revenue\"]\n  F --> G[\"Expert Incentives\"]\n  G --> A\n```\n\n## Operating Model & Cost Structure\nPeople (Core Team, phased)\n- Editorial & Curation: 1 Lead Editor, 1–2 Editors (phase 1); scale to 3–5 as content volume grows.\n- Moderation & Trust: 1 Lead Moderator, 2–4 Moderators; part-time experts for sensitive topics during election periods.\n- Community & Growth: 1 Community Manager, 1 Growth PMM; contractor support for campaigns.\n- Partnerships & Sales: 1 Partnerships Lead, 1 Sponsorship Sales, 1 Account Manager.\n- Data & Insights: 1 Analyst for report production; scale to 2–3 with institutional demand.\n- Compliance & Policy: shared counsel or part-time compliance officer; election-period escalation rota.\n\nTools (Business-Level)\n- Content planning, sponsorship CRM, analytics and attribution, billing and subscription management, moderation queue and transparency ledger, and brand safety review tools.\n\nProcesses & SLAs\n- Editorial Calendar: weekly planning and monthly thematic cycles.\n- Sponsorship Review: brand fit and policy compliance approval before booking confirmation.\n- Moderation SLA: actionable reports triaged within 4 hours during business hours; severe harm flagged within 60 minutes.\n- Transparency: public monthly summary of moderation actions and sponsorship disclosures.\n\nCosts (Business-Level Estimates)\n- Fixed: core salaries, counsel retainer, basic tools/licenses, brand and PR.\n- Variable: content production stipends, sponsorship fulfillment assets, payment processing fees, promotional spend, translation and transcription.\n\nIllustrative Cost Structure (Phase 1–2)\n| Category | Monthly Estimate (USD) | Notes |\n|---------|-------------------------|-------|\n| Editorial & Moderation | 45k–85k | Staffing and stipends |\n| Community & Growth | 20k–40k | Campaigns and tools |\n| Partnerships & Sales | 25k–50k | Base plus commission |\n| Data & Insights | 12k–25k | Analyst and tooling |\n| Compliance & Legal | 8k–20k | Counsel retainer and audits |\n| Tools & Services | 10k–25k | Analytics, CRM, billing |\n| Marketing & PR | 20k–60k | Launch, sponsorship promotion |\n| Contingency (10%) | 14k–30k | Risk buffer |\n\nOperational Requirements (EARS)\n- THE pol-econ-board service SHALL enforce sponsorship labeling on all sponsored units without exception.\n- THE pol-econ-board service SHALL provide exportable booking confirmations and insertion orders for Sponsorships in human-readable formats.\n- WHEN a moderation report is categorized as severe harm, THE pol-econ-board service SHALL route it to priority handling with a target response within 60 minutes during coverage hours.\n- WHERE a campaign includes performance guarantees, THE pol-econ-board service SHALL provide delivery and pacing dashboards to business stakeholders.\n\n## Regulatory & Policy Risks and Response Principles\nRisk Categories (Business-Level)\n- Political Advertising Compliance: restrictions on campaign/advocacy ads; jurisdictional differences, especially during election windows.\n- Privacy & Data Protection: PIPA (Korea), GDPR, and similar regimes governing consent, minimization, and data subject rights.\n- Defamation, Misinformation, and Harmful Content: liability exposure from user-generated claims; need for source labeling and editorial standards.\n- Copyright & Fair Use: use of excerpts, charts, and external media.\n- Market Integrity: sensitive financial claims and investment advice; require disclaimers and expert verification.\n\nMitigation Principles\n- Clear guidelines on prohibited categories and required disclosures.\n- Strong, documented moderation process with appeal and transparency.\n- Data minimization for monetization; aggregate-only insights for external reports.\n- Election-period special policies with heightened review and cooling-off rules.\n\nCompliance Requirements (EARS)\n- THE pol-econ-board service SHALL maintain a publicly accessible policy page describing sponsorship disclosure and prohibited categories.\n- WHEN an election period policy is active, THE pol-econ-board service SHALL apply additional review steps to content tagged as political campaign-related before amplification.\n- IF a data subject requests access, THEN THE pol-econ-board service SHALL provide a human-readable summary of stored personal data and processing purposes within 30 days, aligned with applicable law.\n- WHERE a Data Report is generated, THE pol-econ-board service SHALL ensure outputs meet aggregation thresholds that prevent re-identification (e.g., minimum cohort size of 100).\n- IF a copyright complaint is received with required particulars, THEN THE pol-econ-board service SHALL de-list the content pending review and notify the uploader and complainant.\n\n## Success Metrics & Monitoring\nFinancial KPIs\n- Revenue Mix: Ads 25–40%, Sponsorships 25–35%, Premium 20–35%, Data Reports 10–20% by month 18.\n- MRR: USD 150k+ by month 18; growth 8–12% MoM during months 6–12, 5–8% thereafter.\n- ARPU (paid): USD 8–12 monthly; Churn (paid): < 4% monthly.\n\nUser & Growth KPIs\n- MAU: 250k by month 18; DAU/MAU: 18–27%.\n- Activation: ≥ 35% of new sign-ups reach first follow and first interaction within 7 days.\n- D30 Retention: ≥ 25% Members; ≥ 40% Experts.\n- Premium Conversion: 2.0–3.5% of active Members by month 12; annual plan share ≥ 35% of paid subs.\n\nContent Quality & Safety KPIs\n- Expert Ratio: ≥ 20% of front-page content from Experts.\n- Moderation SLA: ≥ 90% of severe reports handled within 60 minutes during coverage hours; ≥ 80% of general reports within 4 hours.\n- Transparency: monthly report published 100% of months.\n- Takedown Accuracy: appeal uphold rate between 10–25% (indicates neither over- nor under-enforcement extremes).\n\nSponsorship & Ads Performance KPIs\n- Sponsorship Fulfillment: ≥ 95% delivery to booked impressions/placements; labeled 100% of time.\n- Ad User Experience: average ads per session ≤ 3; complaint rate < 0.05% of sessions.\n\nData Report KPIs\n- Institutional Accounts: 20–60 by month 18; renewal rate ≥ 75%.\n- Report Production SLA: deliver quarterly updates within 10 business days of quarter close.\n\nMonitoring & Cadence\n- Weekly dashboards for growth and engagement; monthly financial close; quarterly planning reviews.\n- Named owners for each KPI: Growth PMM (acquisition), Lead Editor (content quality), Lead Moderator (safety), Partnerships Lead (sponsorship), Analyst (reports), Finance (revenue/margin).\n\nKPI Table (Illustrative Targets)\n| KPI | Phase 1 (0–6 mo) | Phase 2 (6–12 mo) | Phase 3 (12–18 mo) |\n|-----|-------------------|-------------------|--------------------|\n| MAU | 50k | 150k | 250k |\n| DAU/MAU | 15–20% | 18–25% | 20–27% |\n| Paid Conversion | 0.8–1.5% | 1.5–2.5% | 2.0–3.5% |\n| MRR | 20–40k | 60–110k | 150k+ |\n| Expert Content Share | 10% | 15% | 20% |\n| Severe Report SLA | 80% | 85% | 90% |\n\n## Business Requirements (EARS) Summary\nMonetization\n- THE pol-econ-board service SHALL limit default ad load to ad-light parameters and enforce frequency capping as defined in this document.\n- WHEN a user upgrades to Premium, THE pol-econ-board service SHALL immediately apply premium entitlements and persist them for the subscription term.\n- WHERE sponsorship units are booked, THE pol-econ-board service SHALL guarantee visible disclosure at the start of the unit and in any listings.\n\nGrowth & Content\n- THE pol-econ-board service SHALL maintain a weekly editorial cadence with at least 2 expert long-form pieces and 1 digest.\n- WHEN a user follows a topic, THE pol-econ-board service SHALL include it in digests and notifications, respecting user preferences.\n\nSafety & Compliance\n- THE pol-econ-board service SHALL maintain public policy documentation and update transparency logs monthly.\n- IF content is flagged as high risk during election periods, THEN THE pol-econ-board service SHALL require elevated review before promotion.\n\nData & Reporting\n- WHERE Data Reports are offered, THE pol-econ-board service SHALL use aggregation thresholds to prevent re-identification and exclude personal data.\n- WHEN an institutional subscription lapses, THE pol-econ-board service SHALL revoke access to new report releases while preserving prior entitlements per contract terms.\n\n## Scope of This Document\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, encryption, and infrastructure) are at the discretion of the development team. This document specifies what the system should do from a business perspective, including measurable policies, SLAs, and KPIs, and does not prescribe how to implement them.\n\n\nReferences\n- For overall vision and scope, see the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md).\n- For governance and moderation standards, see the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- For security and compliance principles, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md)."},"step":0,"total":13,"completed":11,"created_at":"2025-08-12T04:19:54.208Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"성능/가용성/확장성 등 비기능 요구를 사용자 체감 기준으로 명확히 하기 위함.","filename":"08-pol-econ-board-non-functional-requirements.md","documentType":"requirement","outline":["성능 기대치(응답 시간/처리량/동시성)","가용성 및 복구 목표(RTO/RPO 개념)","확장성·유연성 기대","관측가능성 요구(로그/지표/경보) 비즈니스 기준","개인정보 최소 수집/보관 원칙 연계","알림·배치 작업 시간 제약 기대","용량 계획 가이드와 성장 가정"],"audience":"development team","keyQuestions":["사용자가 체감하는 성능 기준은 무엇인가","장애/복구/확장 관점의 기대 수준은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["01-pol-econ-board-service-overview.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["정량적·검증 가능한 기준 제시","기술 구현 세부 금지"],"content":"# pol-econ-board Non-Functional Requirements\n\nThis document defines measurable, testable non-functional requirements for the pol-econ-board service from a user-perceived perspective. It describes WHAT the system must achieve in terms of performance, availability, scalability, observability, privacy-by-design, time windows, and capacity planning. It does not prescribe HOW to implement these requirements. All technical implementation decisions (architecture, APIs, data models, infrastructure) belong to the development team.\n\n## 1. Scope, Principles, and Assumptions\n\n### 1.1 Scope and Intent\n- THE document SHALL specify business-level, verifiable criteria that govern the quality attributes of pol-econ-board.\n- THE document SHALL avoid implementation details and focus on user-perceived outcomes and operational expectations.\n- THE document SHALL be used by development, QA, operations, and product to plan, build, validate, and operate the service.\n\n### 1.2 Related Documents\n- For product context and priorities, see the [Service Overview for Pol-Econ Board](./01-pol-econ-board-service-overview.md).\n- For legal, privacy, and security controls, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n### 1.3 Definitions (Business-Level)\n- SLO: Service Level Objective, a target performance or availability level measured over a time window.\n- Error Budget: The permissible amount of unavailability or SLO violation within the SLO window.\n- RTO: Recovery Time Objective (time to restore service after a disruption).\n- RPO: Recovery Point Objective (maximum acceptable data loss measured in time).\n- P50/P95/P99: Percentile distribution for response times (server-side processing), excluding end-user network and device rendering time.\n- KST: Korea Standard Time (Asia/Seoul), the primary business timezone for scheduling.\n\n### 1.4 Service Boundaries and Assumptions\n- THE service SHALL primarily target users located in Korea and operate scheduling windows in KST.\n- WHERE third-party providers are involved (e.g., email), THE service SHALL measure its own hand-off times and treat provider delays separately for SLO calculations.\n- THE baseline usage assumptions and capacity planning in this document SHALL be revisited quarterly and on major product changes.\n\n## 2. Performance Expectations (Response Time, Throughput, Concurrency)\n\nAll performance requirements are expressed as user-perceived server-side processing times measured at the service boundary, unless stated otherwise. Tables define default targets; EARS-formatted requirements follow for testable statements.\n\n### 2.1 Core Response Time SLOs (Per Request)\n\n| User Journey (Server-Side) | P50 Target | P95 Target | P99 Target | Notes |\n|----------------------------|------------|------------|------------|-------|\n| Read timeline/feed         | 150 ms     | 500 ms     | 900 ms     | Includes personalization and filtering.\n| View a post with comments  | 180 ms     | 600 ms     | 1000 ms    | For initial page of comments only.\n| Create/edit post save      | 200 ms     | 700 ms     | 1200 ms    | Excludes large media uploads; see 2.5.\n| Post publish action        | 220 ms     | 750 ms     | 1200 ms    | Moderation hooks may add queueing; see 2.4.\n| Add comment/reply          | 150 ms     | 500 ms     | 900 ms     | Idempotent to avoid duplicates.\n| Search (keyword/tag)       | 250 ms     | 800 ms     | 1500 ms    | Includes typo-tolerance and sorting.\n| Login (credential verify)  | 200 ms     | 600 ms     | 1000 ms    | Excludes email verification roundtrips.\n| Notification fetch (in-app)| 120 ms     | 350 ms     | 700 ms     | For last 50 notifications.\n| Moderation queue load      | 200 ms     | 700 ms     | 1200 ms    | For standard filters applied.\n\n#### EARS Requirements: Response Time\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions (Section 8), THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident (Section 5.4) and execute throttling/deferral policies (Section 7 and Section 9) as applicable.\n\n### 2.2 Throughput and Concurrency Targets\n\n| Metric | Baseline Target | Peak Target (Burst ≤ 10 min) | Notes |\n|-------|------------------|-------------------------------|-------|\n| Read requests per second (RPS) | 350 RPS | 900 RPS | Mix of feed, post, and notification fetch.\n| Write requests per second (RPS) | 70 RPS  | 200 RPS | Posts, edits, comments, reactions, reports.\n| Concurrent authenticated sessions | 6,000 | 15,000 | Active sessions during national events.\n| Concurrent content creators | 800 | 2,000 | Members, experts, editors, moderators combined.\n\n#### EARS Requirements: Throughput and Concurrency\n- THE service SHALL sustain the baseline throughput and concurrency targets continuously during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet the peak targets without violating P95 response SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling and present clear user messaging (Section 9.3).\n\n### 2.3 Data Consistency Windows\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second for posts and comments in the same region.\n- WHERE global counters, aggregates, and ranking feeds are displayed, THE service SHALL allow eventual consistency with a maximum staleness of 3 seconds under normal conditions and 10 seconds under peak bursts.\n- IF a moderation action hides content, THEN THE service SHALL reflect the hidden state across all user-visible endpoints within 5 seconds.\n\n### 2.4 Queueing and Background Work\n- THE service SHALL separate user-facing acknowledgement from heavy background processing, ensuring that acknowledgements meet the response time SLOs while background tasks complete within defined deadlines (Section 7).\n- IF background processing exceeds deadlines, THEN THE service SHALL notify operators through alerts and inform impacted users through non-intrusive in-app messages when relevant.\n\n### 2.5 Media Handling (Business-Level)\n- WHERE users upload large attachments, THE service SHALL provide progress feedback and SHALL acknowledge the upload request within 1 second, with final processing completed within 2 minutes for files up to 100 MB.\n- IF media processing fails, THEN THE service SHALL preserve the draft state and allow retry without data loss.\n\n## 3. Availability and Recovery Targets (RTO/RPO)\n\n### 3.1 Availability SLOs by Business Tier\n\n| Tier | Description | Monthly Availability Target | Error Budget |\n|------|-------------|-----------------------------|--------------|\n| P0 | Authentication, read feed/post, submit content, moderation hide/unhide | 99.90% | 43.2 minutes downtime/month |\n| P1 | Search, notifications fetch, reactions, bookmarks | 99.50% | 3.6 hours downtime/month |\n| P2 | Batch digests, analytics exports, editorial curation updates | 99.00% | 7.3 hours downtime/month |\n\n#### EARS Requirements: Availability\n- THE service SHALL meet the monthly availability targets by tier as defined in the table.\n- WHEN maintenance is required, THE service SHALL schedule it within the maintenance window (Sundays 02:00–05:00 KST) and SHALL not breach P0 availability.\n- IF unplanned downtime occurs, THEN THE service SHALL prioritize restoration of P0 functions before P1 and P2.\n\n### 3.2 Recovery Objectives\n\n| Tier | RTO (Restore Service) | RPO (Acceptable Data Loss) | Notes |\n|------|------------------------|----------------------------|-------|\n| P0 | 30 minutes | 5 minutes | Auth, read, submit, moderation state.\n| P1 | 60 minutes | 15 minutes | Search indices, notifications, reactions.\n| P2 | 180 minutes | 60 minutes | Batch jobs, exports, curation.\n\n#### EARS Requirements: Recovery\n- THE service SHALL restore P0 capabilities within 30 minutes of a major incident and limit data loss to 5 minutes.\n- WHERE partial restoration is possible, THE service SHALL restore read-only access first if full write capability cannot be immediately recovered.\n- IF RTO or RPO targets are at risk, THEN THE service SHALL communicate status to operators and publish a user-facing status update within 15 minutes of detection and every 30 minutes thereafter until resolved.\n\n### 3.3 Error Budget and Release Policy\n- THE service SHALL define monthly error budgets per tier equal to 100% minus the availability target.\n- IF the P0 error budget is exhausted within the month, THEN THE service SHALL pause non-urgent feature launches and focus on reliability until budget recovers the following month.\n\n## 4. Scalability and Flexibility Expectations\n\n#### EARS Requirements: Scalability and Updates\n- THE service SHALL scale to maintain P95 response targets across baseline and peak loads defined in Section 2.2.\n- WHERE traffic grows beyond peak targets for two consecutive weeks, THE service SHALL raise capacity planning actions within 5 business days (Section 8).\n- THE service SHALL perform updates with zero user-visible downtime for P0 functions; brief degradations for P1/P2 are acceptable within respective error budgets.\n- WHERE a gradual rollout is required, THE service SHALL support audience-based enablement by role (member, expert, moderator, editor, admin) and by percentage-based cohorts.\n\n## 5. Observability Requirements (Business Criteria)\n\n### 5.1 Business Event Logging\n- THE service SHALL log key business events: authentication successes/failures, content creation/edits/deletions, moderation actions, policy violations, notification dispatches, and user preference changes.\n- WHERE events include personal data, THE service SHALL minimize logged identifiers and apply redaction per compliance policy in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- IF logging fails, THEN THE service SHALL not block user actions and SHALL record a compensating audit entry indicating the gap.\n\n### 5.2 Metrics and SLO Monitoring\n- THE service SHALL continuously measure request rates, success/error ratios, latency percentiles, queue backlogs, and notification delivery latencies for each tier.\n- WHEN P95 latency or availability deviates from targets for 10 minutes, THE service SHALL raise a warning; for 20 minutes, THE service SHALL raise a critical alert.\n\n### 5.3 Alerting and Response Expectations\n\n| Severity | Trigger (Examples) | Operator Response Time (KST) | User Communication |\n|----------|---------------------|------------------------------|--------------------|\n| P0-Critical | P0 unavailability > 5 min; P95 latency breach > 20 min; security incident indicators | Acknowledge ≤ 5 min, Mitigation start ≤ 15 min, 24/7 | Status page update ≤ 15 min; 30-min cadence thereafter |\n| P1-High | P1 unavailability > 20 min; repeated retries on notifications | Acknowledge ≤ 15 min, Business hours (07:00–23:00 KST) | Status page update if user impact material |\n| P2-Medium | Batch delays > 2 hours; digest backlog | Acknowledge ≤ 4 hours, Business hours | Optional update in release notes |\n\n#### EARS Requirements: Alerting and Response\n- THE service SHALL dispatch alerts according to the severity matrix and SHALL meet the operator response times stated.\n- IF a P0 incident is declared, THEN THE service SHALL publish a status page update within 15 minutes and maintain updates at least every 30 minutes until resolution.\n\n### 5.4 Incident Management Flow\n- THE service SHALL follow a consistent detect → triage → mitigate → recover → review cycle with operator and user communications.\n\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"SLO Monitor(Deviations)\"] --> B{\"P0/P1/P2?\"}\n  end\n  subgraph \"Triage\"\n    C[\"Assign Severity\"] --> D[\"Notify On-call\"]\n  end\n  subgraph \"Mitigation\"\n    E[\"Throttling/Feature Toggle\"] --> F[\"Partial Restore(Read-first)\"]\n  end\n  subgraph \"Recovery\"\n    G[\"Full Service Restore\"] --> H[\"Backlog Drain\"]\n  end\n  subgraph \"Communication\"\n    I[\"Status Page Update\"] --> J[\"Postmortem(Within 5 Business Days)\"]\n  end\n  B -->|\"P0\"| C\n  B -->|\"P1/P2\"| C\n  D --> E\n  E --> F\n  F --> G\n  G --> H\n  C -.-> I\n  G -.-> I\n  H -.-> J\n```\n\n## 6. Privacy by Design and Data Minimization (Business Link)\n- THE service SHALL collect only the minimum personal data necessary to provide features, following the principles defined in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- WHERE personal data is processed for analytics or diagnostics, THE service SHALL prefer aggregated or pseudonymized forms aligned to approved business purposes.\n- IF a user opts out of certain data processing, THEN THE service SHALL honor preferences within 24 hours across all processing pipelines.\n\n## 7. Notification and Batch Time Windows\n\n### 7.1 Real-time Notifications (In-App)\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99 after the triggering event under normal conditions.\n- IF delivery exceeds 60 seconds for more than 1% of notifications in a 15-minute window, THEN THE service SHALL raise a warning and prioritize notification pipelines.\n\n### 7.2 Email/Scheduled Digests\n- THE service SHALL send daily digests between 07:00–09:00 KST on user-selected days, and weekly digests between 08:00–10:00 KST on user-selected weekdays.\n- WHERE users change preferences, THE service SHALL reflect changes in the next eligible digest cycle.\n\n### 7.3 Batch and Heavy Processing Windows\n- THE service SHALL run heavy batch processes (e.g., re-indexing, large exports) primarily between 02:00–05:00 KST.\n- WHERE batch tasks risk impacting P0 workloads, THE service SHALL defer or throttle them to preserve P0 SLOs.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and, where user-facing, inform affected users with a revised completion window within 60 minutes.\n\n## 8. Capacity Planning Guide and Growth Assumptions\n\n### 8.1 Baseline Assumptions (Quarter 1–2)\n\n| Metric | Value | Notes |\n|--------|-------|-------|\n| MAU | 120,000 | General audience during initial adoption.\n| DAU | 36,000 | 30% of MAU.\n| Peak concurrent sessions | 12,000 | Major news cycles, debates.\n| Daily posts | 8,000 | Includes expert insights and editor features.\n| Daily comments | 80,000 | High engagement threads.\n| Daily reactions/bookmarks | 400,000 | Lightweight interactions.\n| Storage growth | 60 GB/day | Posts, comments, logs, and media references.\n\n### 8.2 Scaling Triggers and Actions\n- THE service SHALL review capacity monthly and after significant product launches or public events.\n- WHEN P95 latency approaches targets within 10% for two consecutive weeks, THE service SHALL initiate capacity increase planning within 5 business days.\n- WHERE storage growth exceeds plan by 25% over a month, THE service SHALL adjust retention and archiving policies according to data lifecycle standards.\n\n### 8.3 Fair-Use and Backpressure\n- THE service SHALL protect overall user experience by applying fair-use limits during bursts, prioritizing P0 traffic, and transparently communicating delays for non-critical actions.\n\n## 9. Reliability and Rate Limiting Expectations\n\n### 9.1 Idempotency and Duplicate Prevention (Business-Level)\n- THE service SHALL treat repeated submissions of the same post/comment within 30 seconds as a single action and avoid duplicates while returning a single confirmation to the user.\n\n### 9.2 Eventual Consistency and User Feedback\n- THE service SHALL surface non-blocking indicators when background processing is pending and SHALL ensure final consistency within deadlines (Section 2.3 and 7.3).\n\n### 9.3 Rate Limiting and User Messaging\n- WHERE users exceed fair-use thresholds (e.g., reports, comments, reactions), THE service SHALL return a clear message indicating temporary limits and the expected retry horizon.\n- IF limits are applied erroneously, THEN THE service SHALL automatically lift them within 5 minutes after the triggering condition is cleared.\n\n## 10. Non-Functional Acceptance Criteria (Testable)\n\n- THE service SHALL achieve P95 and P99 response time targets in Section 2.1 for the defined user journeys during synthetic load tests matching Section 8 assumptions.\n- THE service SHALL sustain throughput and concurrency targets in Section 2.2 for at least 8 continuous hours without breaching P95 SLOs.\n- THE service SHALL meet monthly availability targets in Section 3.1 and recovery objectives in Section 3.2 across two consecutive months prior to general release.\n- THE service SHALL meet notification timeliness in Section 7 with at least 99% of in-app notifications delivered within 15 seconds under normal conditions.\n- THE service SHALL satisfy observability requirements, including alerting within thresholds (Section 5.2–5.3) and incident communications timelines.\n- THE service SHALL demonstrate adherence to data minimization commitments in Section 6 through audit of sampled events and stored logs.\n\n## 11. Constraints and Out-of-Scope\n- THE document provides business requirements only. All technical implementation decisions belong to the development team, including architecture, APIs, and data models.\n- UI/UX specifications, screen design, and styling are out of scope.\n- Detailed encryption algorithms, provider selections, and infrastructure topology are out of scope.\n\n## 12. Appendix: Glossary\n- Availability: The proportion of time that a service is usable by users, within agreed functionality thresholds.\n- Business Hours: 07:00–23:00 KST for operational staffing expectations, unless otherwise noted.\n- Consistency Window: The time allowed for data to become visible across all parts of the service after a change.\n- Maintenance Window: A reserved time for planned changes with minimized user impact.\n- Percentile Latency: A statistical measure where P95 indicates 95% of requests are at or below the specified time.\n\n---\n\n### Consolidated EARS Requirements Index\n\nPerformance\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions, THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\nThroughput and Concurrency\n- THE service SHALL sustain baseline throughput and concurrency during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet peak targets without violating P95 SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling with clear messaging.\n\nConsistency and Background Work\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second.\n- WHERE aggregates and rankings are displayed, THE service SHALL limit staleness to 3 seconds (10 seconds at peak).\n- IF moderation hides content, THEN THE service SHALL reflect the state across endpoints within 5 seconds.\n- THE service SHALL acknowledge user-facing actions quickly and complete heavy work in background within deadlines.\n\nAvailability and Recovery\n- THE service SHALL meet monthly availability targets by tier (P0 99.90%, P1 99.50%, P2 99.00%).\n- WHEN maintenance is needed, THE service SHALL schedule it Sundays 02:00–05:00 KST without breaching P0.\n- IF unplanned downtime occurs, THEN THE service SHALL restore P0 before P1/P2.\n- THE service SHALL restore P0 within 30 minutes and limit data loss to 5 minutes; P1 and P2 per table.\n- WHERE partial restore is possible, THE service SHALL enable read-only first.\n- IF RTO/RPO are at risk, THEN THE service SHALL publish status updates within 15 minutes and every 30 minutes thereafter.\n- THE service SHALL pause non-urgent launches if the P0 error budget is exhausted in a month.\n\nScalability and Updates\n- THE service SHALL scale to maintain P95 targets at baseline and peak.\n- WHERE traffic exceeds peaks for two weeks, THE service SHALL raise capacity planning within 5 business days.\n- THE service SHALL perform updates with zero user-visible downtime for P0; controlled degradations for P1/P2 within error budgets.\n- WHERE gradual rollout is required, THE service SHALL support audience and cohort-based enablement.\n\nObservability and Alerts\n- THE service SHALL log key business events with data minimization.\n- WHERE logging fails, THE service SHALL not block actions and SHALL audit the gap.\n- THE service SHALL measure core metrics continuously and alert on deviations (10 min warn, 20 min critical).\n- THE service SHALL meet operator response times by severity and publish timely user communications for P0.\n\nPrivacy and Data Minimization\n- THE service SHALL collect the minimum personal data necessary and favor aggregated or pseudonymized forms for secondary purposes.\n- IF a user opts out, THEN THE service SHALL honor preferences within 24 hours.\n\nNotifications and Batch\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99.\n- IF delivery exceeds 60 seconds for >1% in 15 minutes, THEN THE service SHALL raise a warning and prioritize pipelines.\n- THE service SHALL schedule digests within the defined morning windows in KST and reflect preference changes in the next cycle.\n- THE service SHALL run heavy batches primarily 02:00–05:00 KST and defer/throttle to protect P0.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and inform users with a revised window within 60 minutes.\n\nCapacity Planning and Fair Use\n- THE service SHALL review capacity monthly and after major events.\n- WHEN P95 latency is within 10% of the target for two weeks, THE service SHALL plan capacity increases within 5 business days.\n- WHERE storage growth exceeds plan by 25% in a month, THE service SHALL adjust retention/archiving per data lifecycle standards.\n- THE service SHALL apply fair-use limits during bursts and communicate delays for non-critical actions.\n\nReliability and Limits\n- THE service SHALL treat repeated submissions within 30 seconds as a single action to prevent duplicates.\n- THE service SHALL surface pending indicators for background processing and ensure final consistency within deadlines.\n- IF fair-use limits are applied erroneously, THEN THE service SHALL lift them within 5 minutes of clearing conditions.\n"},"step":0,"total":13,"completed":12,"created_at":"2025-08-12T04:20:02.115Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeWrite","file":{"reason":"현실적인 사용자 관점의 시나리오를 제시하여 요구사항 검증과 테스트 기준을 제공하기 위함.","filename":"05-pol-econ-board-user-stories.md","documentType":"user-story","outline":["페르소나 정의(일반 회원/전문가/중재자/에디터/관리자)","핵심 시나리오(성공 경로)","보조·엣지 시나리오","오남용·남용 방지 시나리오","완료 정의(DoD) 및 수용 기준"],"audience":"development team","keyQuestions":["주요 사용자 여정에서 기대 행동과 결과는 무엇인가","엣지/실패 시나리오에서의 시스템 반응은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["자연어 중심의 사용자 관점 기술","측정 가능한 수용 기준 포함"],"content":"# pol-econ-board User Stories and Acceptance Criteria\n\nThis document provides realistic user stories for the pol-econ-board service so backend developers can implement business behavior with no ambiguity. Stories are grouped by persona and include measurable acceptance criteria using EARS (Easy Approach to Requirements Syntax). This document describes what the system should do from a user perspective; technical implementation details (architecture, APIs, database) are explicitly out of scope and at the discretion of the development team.\n\n## Document Intent and Scope\n- Purpose: Define complete, testable user stories and acceptance criteria for the primary personas using pol-econ-board.\n- Scope: Business behaviors only (inputs, validations, processing rules, outputs/notifications, timing expectations). No UI/UX specifications, no API or database schemas.\n- System Name in EARS: \"pol-econ-board\".\n- Related documents for deeper process and requirement details:\n  - See the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n  - See the [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md).\n\n## Personas\n\n| Persona | Description | Primary Goals | Key Constraints |\n|--------|-------------|---------------|-----------------|\n| Member | A registered community participant using a real name or alias. Can create/manage own posts and comments, bookmark, follow topics, vote/react, report, configure notifications. | Express opinions, discover credible content, participate in discourse, manage own content and preferences. | Must follow community rules; subject to moderation and rate limits. |\n| Expert | A verified domain expert with elevated capabilities. Inherits Member capabilities plus expert features (badge, expert topics, in-depth insights, expert Q&A). | Publish authoritative insights, propose expert topics, engage in expert Q&A, build trust. | Expert status requires verification; reputation-sensitive workflows. |\n| Moderator | Community operator responsible for rule enforcement. Can triage reports, temporarily hide/remove content, request sanctions, coordinate dispute resolution, maintain transparency logs. | Keep the community safe, fair, and compliant; resolve disputes within SLA. | Must adhere to policy thresholds and audit requirements. |\n| Editor | Content quality curator. Can edit topics/labels, manage featured collections, announcements, and pinned content; collaborates with moderators on policy issues. | Elevate quality content, maintain taxonomy consistency, manage editorial programming. | Cannot override policy enforcement; follows curation guidelines. |\n| Admin | System-wide operator. Full access to manage roles, policies, settings, legal requests, and transparency/audit; oversees health and metrics. | Govern system operations, ensure compliance and stability. | Must maintain auditability and separation of duties; sensitive operations require elevated verification. |\n\n## Story Mapping Overview (Epics by Persona)\n- Member Epics: Account onboarding, discovery & following, content authoring, interaction (comment/reaction/vote), personal library (bookmarks/reads), reporting & blocking, notifications & preferences.\n- Expert Epics: Expert verification, expert topic proposals, in-depth publications, expert Q&A participation, reputation signals.\n- Moderator Epics: Report intake & triage, actioning (hide/remove/warn/suspend requests), appeals handling, transparency log updates.\n- Editor Epics: Taxonomy management, featured/collections, announcements & sticky posts, cross-functional curation with policy alignment.\n- Admin Epics: Role & policy management, legal request workflows, audit & transparency oversight, system-wide settings.\n\n---\n\n## Core Scenarios (Happy Paths)\n\n### Member Core Scenarios\n\n1) Member Registration and Email Verification\n- User Story: As a Member, I want to register and verify my email so that I can participate in the community.\n- Acceptance Criteria (EARS):\n  - WHEN a prospective user submits valid registration details, THE pol-econ-board SHALL create a pending account and send a verification message within 5 minutes.\n  - WHEN the user follows the verification instruction within 24 hours, THE pol-econ-board SHALL activate the account and allow login immediately.\n  - IF the verification window expires, THEN THE pol-econ-board SHALL require a new verification to proceed.\n\n2) Member Login and Session Continuity\n- User Story: As a Member, I want to log in and remain signed in securely so that I can use the service without frequent interruptions.\n- Acceptance Criteria (EARS):\n  - WHEN valid credentials are submitted, THE pol-econ-board SHALL grant access and establish a session within 2 seconds under normal load.\n  - WHILE the session is active and within policy limits, THE pol-econ-board SHALL preserve user state across navigations and support silent session renewal.\n  - IF credentials are invalid or the account is inactive, THEN THE pol-econ-board SHALL deny access and provide a non-revealing reason aligned to security policy.\n\n3) Topic Following and Personalized Feed\n- User Story: As a Member, I want to follow topics and receive a personalized feed so that I can discover relevant political/economic content.\n- Acceptance Criteria (EARS):\n  - WHEN a member follows a topic, THE pol-econ-board SHALL add the topic to the member’s followed list and adjust feed composition immediately.\n  - WHILE the member has followed topics, THE pol-econ-board SHALL prioritize relevant content and present at least 20 items per page sorted by recency and relevance.\n  - IF the member unfollows a topic, THEN THE pol-econ-board SHALL remove it from the followed list and reflect the change in the next feed refresh.\n\n4) Post Drafting and Publication\n- User Story: As a Member, I want to draft and publish posts so that I can share my views.\n- Acceptance Criteria (EARS):\n  - WHEN a member saves a draft with valid required fields, THE pol-econ-board SHALL store the draft and return a stable identifier within 2 seconds.\n  - WHEN a member submits a valid draft for publication, THE pol-econ-board SHALL publish it and make it discoverable in feeds and search within 10 seconds.\n  - WHERE content exceeds policy limits (e.g., max length or restricted tags), THE pol-econ-board SHALL block publication and present policy-aligned guidance.\n\n5) Commenting and Mentions\n- User Story: As a Member, I want to comment and mention others so that I can engage in discussion.\n- Acceptance Criteria (EARS):\n  - WHEN a comment meets validation rules, THE pol-econ-board SHALL post it under the target content within 2 seconds and notify the content owner per preferences.\n  - WHERE a mention is included and the mentioned user permits mentions, THE pol-econ-board SHALL add the mention and trigger a notification.\n  - IF the target content is removed or locked, THEN THE pol-econ-board SHALL prevent new comments with a clear policy-aligned reason.\n\n6) Reactions and Voting\n- User Story: As a Member, I want to react or vote on content so that I can signal support or evaluation.\n- Acceptance Criteria (EARS):\n  - WHEN a member submits a valid reaction or vote, THE pol-econ-board SHALL record it once per member per content and update aggregate counts within 1 second.\n  - WHERE the content owner has disabled reactions or the item is archived, THE pol-econ-board SHALL prevent new reactions and communicate the state.\n  - IF duplicate or conflicting votes are attempted, THEN THE pol-econ-board SHALL keep the most recent valid state and avoid double counting.\n\n7) Bookmarking and Reading History\n- User Story: As a Member, I want to bookmark content and track reading history so that I can revisit important items.\n- Acceptance Criteria (EARS):\n  - WHEN a bookmark request is submitted, THE pol-econ-board SHALL add the item to the member’s bookmarks and confirm within 1 second.\n  - WHILE a member reads a post for at least 10 seconds or reaches 80% of content length, THE pol-econ-board SHALL mark the item as read.\n  - IF a bookmarked item is deleted or made private, THEN THE pol-econ-board SHALL retain a placeholder record with accessible metadata limitations.\n\n8) Reporting Content and Blocking Users\n- User Story: As a Member, I want to report problematic content and block certain users so that I can maintain a safe experience.\n- Acceptance Criteria (EARS):\n  - WHEN a member submits a report with a valid category and context, THE pol-econ-board SHALL enqueue the report with a timestamp and acknowledgment within 2 seconds.\n  - WHEN a member blocks another user, THE pol-econ-board SHALL prevent content and notification delivery from the blocked user to the blocker, effective immediately.\n  - IF the member tries to interact with blocked users or content, THEN THE pol-econ-board SHALL prevent the action and state the block rule.\n\n9) Notification Preferences\n- User Story: As a Member, I want to configure what notifications I receive so that I only get relevant updates.\n- Acceptance Criteria (EARS):\n  - WHEN a member updates notification preferences, THE pol-econ-board SHALL apply the changes to future notifications within 1 minute.\n  - WHERE digest mode is selected, THE pol-econ-board SHALL aggregate eligible events and deliver a summary at the configured schedule.\n  - IF a channel is disabled by the member, THEN THE pol-econ-board SHALL suppress non-mandatory notifications to that channel.\n\n### Expert Core Scenarios\n\n1) Expert Verification\n- User Story: As an Expert candidate, I want to submit credentials so that I can be verified and gain expert capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN a candidate submits required verification data, THE pol-econ-board SHALL record the application and notify reviewers within 5 minutes.\n  - WHILE the application is under review, THE pol-econ-board SHALL expose status to the applicant and allow supplemental evidence submission.\n  - IF the application is approved, THEN THE pol-econ-board SHALL assign the expert role and display the expert badge on new and existing content within 10 minutes.\n\n2) Expert Topic Proposal\n- User Story: As an Expert, I want to propose an expert topic so that specialized discussions can be curated.\n- Acceptance Criteria (EARS):\n  - WHEN an expert submits a topic proposal with required metadata, THE pol-econ-board SHALL route it for editorial review and return a tracking identifier.\n  - IF the proposal is approved, THEN THE pol-econ-board SHALL create the topic, set the proposer as a lead contributor, and publish guidelines.\n  - WHERE the proposal is rejected, THE pol-econ-board SHALL record a rationale and make it visible to the proposer.\n\n3) In-depth Insight Publication\n- User Story: As an Expert, I want to publish in-depth insights so that readers can access authoritative analysis.\n- Acceptance Criteria (EARS):\n  - WHEN an expert submits a compliant in-depth post, THE pol-econ-board SHALL publish it with expert labeling and include it in expert feeds.\n  - WHERE editorial curation flags the post, THE pol-econ-board SHALL hold publication pending review and notify the expert within 10 minutes.\n  - IF an in-depth post is updated, THEN THE pol-econ-board SHALL version the content and expose version history to authorized roles.\n\n4) Expert Q&A Participation\n- User Story: As an Expert, I want to answer questions tagged to my expertise so that I can contribute effectively.\n- Acceptance Criteria (EARS):\n  - WHEN an expert posts an answer to a tagged question, THE pol-econ-board SHALL mark it as expert-answered and notify the asker.\n  - WHERE multiple experts answer, THE pol-econ-board SHALL order answers by freshness and relevance and allow reactions/votes.\n  - IF the question is closed by policy, THEN THE pol-econ-board SHALL prevent new answers and indicate closure reason.\n\n### Moderator Core Scenarios\n\n1) Report Intake and Triage\n- User Story: As a Moderator, I want to triage incoming reports so that I can act within SLA.\n- Acceptance Criteria (EARS):\n  - WHEN a new report arrives, THE pol-econ-board SHALL place it in the triage queue with severity and category metadata immediately.\n  - WHILE a moderator is handling a report, THE pol-econ-board SHALL lock it to that moderator to prevent conflicting actions.\n  - IF the report lacks sufficient context, THEN THE pol-econ-board SHALL request more information from the reporter where appropriate.\n\n2) Provisional Hide and Removal\n- User Story: As a Moderator, I want to hide or remove policy-violating content so that the community stays safe.\n- Acceptance Criteria (EARS):\n  - WHEN a moderator applies a provisional hide under defined rules, THE pol-econ-board SHALL hide the content from public view within 1 minute and log the action.\n  - WHERE removal is warranted, THE pol-econ-board SHALL remove the content, preserve necessary evidence for audit, and notify involved parties.\n  - IF a moderator reverses an action after review, THEN THE pol-econ-board SHALL restore visibility and update transparency logs.\n\n3) Sanction Requests and Enforcement\n- User Story: As a Moderator, I want to request user sanctions so that repeat or severe violations are deterred.\n- Acceptance Criteria (EARS):\n  - WHEN a sanction request meets policy thresholds, THE pol-econ-board SHALL route it for the appropriate approval and record SLA timers.\n  - WHERE the sanction is approved, THE pol-econ-board SHALL apply the sanction (e.g., warning or suspension) and restrict affected actions immediately.\n  - IF the sanction period elapses, THEN THE pol-econ-board SHALL lift restrictions automatically and log the completion.\n\n4) Appeals Handling\n- User Story: As a Moderator, I want to process appeals so that users have a fair review channel.\n- Acceptance Criteria (EARS):\n  - WHEN a user submits an appeal within the allowed window, THE pol-econ-board SHALL acknowledge receipt and place it in an appeals queue.\n  - WHILE an appeal is pending, THE pol-econ-board SHALL pause further escalations on the underlying case where policy allows.\n  - IF the appeal is upheld, THEN THE pol-econ-board SHALL reverse actions and notify all parties; ELSE THE pol-econ-board SHALL provide rationale and next steps.\n\n### Editor Core Scenarios\n\n1) Taxonomy Management\n- User Story: As an Editor, I want to manage categories and tags so that content remains organized.\n- Acceptance Criteria (EARS):\n  - WHEN an editor updates a category or tag, THE pol-econ-board SHALL validate uniqueness and policy compliance and apply changes within 2 minutes.\n  - WHERE a category is deprecated, THE pol-econ-board SHALL migrate attached content to a designated alternative and log the mapping.\n  - IF a change would break existing references, THEN THE pol-econ-board SHALL block it and propose safe alternatives.\n\n2) Featured Collections and Pinning\n- User Story: As an Editor, I want to curate featured collections and pin announcements so that key content is highlighted.\n- Acceptance Criteria (EARS):\n  - WHEN an editor creates a featured collection with valid items, THE pol-econ-board SHALL publish the collection and expose it to eligible feeds.\n  - WHERE pinning limits are reached, THE pol-econ-board SHALL reject new pins and indicate current allocations.\n  - IF a pinned item is later removed, THEN THE pol-econ-board SHALL unpin it and update any dependent presentations.\n\n### Admin Core Scenarios\n\n1) Role and Permission Management\n- User Story: As an Admin, I want to assign roles and manage permissions so that users have appropriate capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN an admin assigns or revokes a role, THE pol-econ-board SHALL reflect the change in authorization decisions within 1 minute.\n  - WHERE conflicting role changes occur, THE pol-econ-board SHALL apply deterministic precedence per policy and log the resolution.\n  - IF an assignment fails required checks, THEN THE pol-econ-board SHALL reject it with a policy-aligned reason.\n\n2) Legal Request Handling\n- User Story: As an Admin, I want to process legal requests so that the service remains compliant.\n- Acceptance Criteria (EARS):\n  - WHEN a lawful request is recorded with required metadata, THE pol-econ-board SHALL freeze affected data changes as mandated and start fulfillment timers.\n  - WHERE disclosure is authorized, THE pol-econ-board SHALL produce the required artifacts and update the request status.\n  - IF the request is withdrawn or expires, THEN THE pol-econ-board SHALL lift holds and record the closure.\n\n---\n\n## Secondary and Edge Scenarios\n\n1) Draft Autosave and Recovery\n- User Story: As a Member, I want drafts to autosave so that I do not lose work.\n- Acceptance Criteria (EARS):\n  - WHILE a user is editing and changes are detected, THE pol-econ-board SHALL autosave at least every 30 seconds or on significant edits.\n  - IF a session ends unexpectedly, THEN THE pol-econ-board SHALL offer the most recent autosaved draft upon return.\n\n2) Version Conflicts on Edit\n- User Story: As a Member, I want safe edits when others have interacted so that I do not lose changes.\n- Acceptance Criteria (EARS):\n  - WHEN a member tries to edit a post with a newer server version, THE pol-econ-board SHALL detect the conflict and require user confirmation to proceed with merge or overwrite.\n  - IF the user cancels, THEN THE pol-econ-board SHALL preserve both the current server version and the local changes as a new draft.\n\n3) Comment Thread Locking\n- User Story: As a Moderator, I want to lock threads during review so that the discussion does not escalate.\n- Acceptance Criteria (EARS):\n  - WHEN a thread is locked, THE pol-econ-board SHALL prevent new comments and reactions and display the locked state to authorized viewers.\n  - IF the lock is lifted, THEN THE pol-econ-board SHALL restore normal interaction immediately.\n\n4) Rate Limits and Cooldowns\n- User Story: As a Member, I want clear rate limits so that I can pace my activity.\n- Acceptance Criteria (EARS):\n  - WHEN a member exceeds defined action limits, THE pol-econ-board SHALL block further attempts for the cooldown period and indicate the remaining wait time.\n  - WHERE elevated abuse risk is detected, THE pol-econ-board SHALL apply stricter temporary limits consistent with policy.\n\n5) Soft-Deleted Content References\n- User Story: As a Member, I want stable references so that links do not break unexpectedly.\n- Acceptance Criteria (EARS):\n  - WHEN content is soft-deleted, THE pol-econ-board SHALL maintain a placeholder with non-sensitive metadata to preserve discussion context where policy allows.\n  - IF hard deletion is required by policy, THEN THE pol-econ-board SHALL remove references and indicate unavailability.\n\n6) Appeal Window Boundary\n- User Story: As a Member, I want predictable appeal windows so that I can respond in time.\n- Acceptance Criteria (EARS):\n  - WHEN an action triggers an appealable decision, THE pol-econ-board SHALL show the appeal window and deadline and accept appeals until the exact cutoff.\n  - IF an appeal arrives after the deadline, THEN THE pol-econ-board SHALL reject it and provide information about next permitted steps.\n\n7) Notification Delivery Guarantees\n- User Story: As a Member, I want reliable notifications so that I do not miss important updates.\n- Acceptance Criteria (EARS):\n  - WHEN a notification-triggering event occurs, THE pol-econ-board SHALL enqueue delivery within 1 minute and attempt delivery according to channel preferences.\n  - IF delivery fails, THEN THE pol-econ-board SHALL retry per policy and record the outcome for user-visible status.\n\n8) Expert Status Revocation\n- User Story: As an Admin, I want to revoke expert status when required so that trust is maintained.\n- Acceptance Criteria (EARS):\n  - WHEN expert status is revoked, THE pol-econ-board SHALL remove the badge from existing and new content and update permissions immediately.\n  - WHERE prior content references expert status, THE pol-econ-board SHALL preserve historical accuracy in audit contexts while removing public-facing badges.\n\n---\n\n## Abuse and Misuse Prevention Scenarios\n\n1) Spam Posting and Mass Mentions\n- Story: As the Community, we need to prevent spam postings and mass mentions so that signal quality is preserved.\n- Acceptance Criteria (EARS):\n  - WHEN posting frequency or content patterns match spam heuristics, THE pol-econ-board SHALL throttle or block submission and require additional verification.\n  - WHERE mass mentions exceed policy thresholds, THE pol-econ-board SHALL block the operation and indicate limits.\n\n2) Coordinated Brigading and Vote Manipulation\n- Story: As the Community, we need to mitigate brigading and manipulation so that votes remain credible.\n- Acceptance Criteria (EARS):\n  - WHEN correlated abnormal voting is detected, THE pol-econ-board SHALL flag affected tallies for review and temporarily exclude suspicious signals from public counts.\n  - IF accounts are confirmed to be abusive, THEN THE pol-econ-board SHALL invalidate their related interactions and apply sanctions as per policy.\n\n3) Harassment and Doxxing Prevention\n- Story: As the Community, we need to prevent harassment and doxxing so that users feel safe.\n- Acceptance Criteria (EARS):\n  - WHEN content includes prohibited personal information or targeted harassment patterns, THE pol-econ-board SHALL block or remove the content and escalate to moderation.\n  - WHERE repeated harassment originates from an account, THE pol-econ-board SHALL escalate sanctions per severity ladder.\n\n4) Report Abuse and False Reporting\n- Story: As the Community, we need to prevent false reporting abuse so that moderation remains efficient.\n- Acceptance Criteria (EARS):\n  - WHEN reporting patterns from an account are repeatedly invalid, THE pol-econ-board SHALL limit reporting privileges temporarily and inform the user.\n  - IF a user’s report is validated again within a defined period, THEN THE pol-econ-board SHALL restore normal privileges.\n\n5) Election-Period Policy Safeguards\n- Story: As the Community, we need stricter safeguards during sensitive election periods so that legal and policy risks are minimized.\n- Acceptance Criteria (EARS):\n  - WHERE the system is in an election-period state, THE pol-econ-board SHALL apply heightened content checks and shorter moderation SLA for flagged items.\n  - WHEN content about elections lacks required sourcing, THE pol-econ-board SHALL hold publication pending source verification per policy.\n\n---\n\n## Definition of Done (DoD) and General Acceptance Criteria\n\n- DoD for User Stories:\n  - THE pol-econ-board SHALL meet all EARS acceptance criteria listed for the story.\n  - THE pol-econ-board SHALL include complete input validation rules, clear error states, and reversible outcomes where policy allows.\n  - THE pol-econ-board SHALL log business events necessary for audit and transparency in a user-meaningful way.\n  - THE pol-econ-board SHALL meet performance expectations stated (e.g., typical responses within 1–2 seconds; publication and indexing within stated time windows).\n  - THE pol-econ-board SHALL deliver user-facing messages that are policy-aligned and non-revealing of sensitive internals.\n\n- Cross-cutting Acceptance Criteria (applies to all stories unless noted):\n  - WHEN an operation succeeds, THE pol-econ-board SHALL provide a durable identifier for the resulting entity.\n  - IF an operation fails, THEN THE pol-econ-board SHALL provide a reason code and a recoverable next step where applicable.\n  - WHILE permissions are being changed, THE pol-econ-board SHALL ensure authorization decisions are consistent and atomic from the user perspective.\n  - WHERE data retention or legal holds apply, THE pol-econ-board SHALL respect retention windows and display appropriate availability states.\n\n---\n\n## Visual Flows (Representative)\n\n### Post Creation, Review, and Publication (Member → Editor/Moderator Interactions)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Submit For Publication\"]\n  end\n  subgraph \"Editorial/Policy Checks\"\n    D[\"Policy Validation\"] --> E{\"Compliant?\"}\n  end\n  subgraph \"Outcomes\"\n    F[\"Publish Post\"]\n    G[\"Hold For Review\"]\n    H[\"Reject With Guidance\"]\n  end\n  C --> D\n  E -->|\"Yes\"| F\n  E -->|\"Needs Review\"| G\n  E -->|\"No\"| H\n```\n\n### Report Intake and Moderation Action\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    R1[\"Member Submits Report\"] --> R2[\"Categorize & Timestamp\"]\n    R2 --> R3[\"Queue For Triage\"]\n  end\n  subgraph \"Triage\"\n    T1[\"Assign To Moderator\"] --> T2{\"Sufficient Context?\"}\n  end\n  subgraph \"Action\"\n    A1[\"Provisional Hide\"]\n    A2[\"Remove & Preserve Evidence\"]\n    A3[\"No Action\"]\n  end\n  R3 --> T1\n  T2 -->|\"Yes\"| A1\n  T2 -->|\"Yes\"| A2\n  T2 -->|\"No\"| A3\n```\n\n---\n\n## References and Consistency Statement\n- This user stories document is consistent with and should be read alongside the following:\n  - The [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md) for detailed business rules and validations.\n  - The [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md) for step-by-step process diagrams and exceptions.\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, are the responsibility of the development team. The document defines WHAT the system must do in business terms, not HOW to implement it."},"step":0,"total":13,"completed":13,"created_at":"2025-08-12T04:20:16.882Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"서비스의 존재 이유, 대상 사용자, 핵심 가치와 범위 등 전반을 한눈에 제시하기 위함.","filename":"01-pol-econ-board-service-overview.md","documentType":"service-overview","outline":["서비스 비전과 목표","문제 정의와 기회","대상 사용자와 핵심 가치 제안","핵심 기능 요약","범위 및 비범위(Out of Scope)","경쟁 환경과 차별화 요소","성공 지표(KPI)와 목표 수준","단계적 로드맵(베타→정식→확장)"],"audience":"business stakeholders","keyQuestions":["이 서비스가 해결하는 문제와 제공 가치가 무엇인가","누가 주요 사용자이며 어떤 사용 사례가 핵심인가","성공을 어떻게 정의하고 측정할 것인가","초기와 중장기 로드맵은 무엇인가"],"detailLevel":"moderate detail","constraints":["비즈니스 요구 중심으로 작성","기술 구현 세부(아키텍처, API, DB) 금지"],"content":"# pol-econ-board Service Overview\n\n## Service Vision and Objectives\npol-econ-board is a trust-focused political and economic discussion and analysis community that enables informed conversations, expert insights, and transparent moderation. The service exists to reduce noise, polarization, and misinformation by combining community participation with clear governance and role-based accountability.\n\nObjectives (12–18 months horizon):\n- Establish a reliable forum for policy and market discourse with measurable trust signals and transparent moderation.\n- Attract qualified experts and elevate high-quality insights to inform public understanding and decision-making.\n- Build a sustainable, scalable business with diversified revenue streams and strong user retention.\n\nGuiding principles:\n- Truth and verifiability over virality.\n- Community participation with accountability.\n- Transparency in moderation and policy enforcement.\n- Measurable outcomes and continuously improved operations.\n\n## Problem Definition and Opportunity\n- Information overload: Political and economic content is high-volume but low-signal. Users struggle to find reliable, contextualized analysis.\n- Trust deficit: Anonymous or low-accountability forums enable misinformation and low-quality discourse.\n- Expert–public gap: Experts lack structured ways to share insights with context and receive meaningful feedback.\n- Fragmented experiences: Insights, debate, curation, and policy enforcement are spread across disparate platforms without consistent standards.\n\nOpportunity:\n- Provide a specialized, moderated environment that privileges sourced, contextual analysis and civil debate.\n- Create a tiered role system (member, expert, moderator, editor, admin) to align incentives and responsibilities.\n- Offer transparent governance, auditable decisions, and topic-focused discovery to increase user confidence and time-on-platform.\n\n## Target Users and Core Value Proposition\nPrimary personas and value delivered:\n- Members (general participants):\n  - Value: Access to high-signal discussions, topic follow for personalization, bookmarking, reactions, and clear rules for safe participation.\n  - Use cases: Post viewpoints with sources, ask questions, follow topics/experts, receive notifications, report problematic content.\n- Experts (verified domain specialists):\n  - Value: Credibility badge, dedicated long-form analysis and research formats, expert Q&A, topic leadership, and influence.\n  - Use cases: Publish research notes, host Q&A threads, propose expert topics, respond to member questions.\n- Moderators (community governance):\n  - Value: Efficient intake queue, policy-aligned actions (hide, remove, warning/suspension requests), transparent records.\n  - Use cases: Process reports, apply sanctions per policy, manage appeals, maintain a transparency log.\n- Editors (content quality):\n  - Value: Curate features, manage tags/topics, headline and topic hygiene, special coverage packages and featured placements.\n  - Use cases: Tag and topic grooming, curated home/section features, announcements and pinning.\n- Admins (operational owners):\n  - Value: End-to-end oversight, policy configuration, role assignments, legal/compliance workflows, and audit visibility.\n  - Use cases: Manage roles and policies, oversee indicators and risk, respond to lawful requests.\n\nCore value proposition:\n- High-signal community powered by verified expertise and transparent governance.\n- Clear norms, predictable enforcement, and visible trust indicators.\n- Topic-centric discovery with measurable quality and relevance.\n\n## Business Model (Why/How/What)\n### Why This Service Exists\n- Address the trust and quality gap in political/economic discourse with an accountability-first community.\n- Serve a growing audience seeking reliable analysis and expert commentary without the noise of general-purpose social platforms.\n\n### Revenue Strategy\n- Advertising and sponsorships: Brand-safe placements in featured sections and expert channels.\n- Premium membership: Ad-light experience, advanced filters, expert AMAs access, early access to curated reports.\n- Sponsored expert series: Cohort-based expert columns or Q&A programs, clearly labeled.\n- Data-rich summaries and reports (business-level packaging): Periodic, curated digests for professionals.\n\n### Growth Plan\n- Supply-side seeding: Onboard a core cohort of verified experts and editors to set quality bar.\n- Community credibility: Transparency logs, clear sanctions policy, and measurable content quality indicators.\n- Partnerships: Think tanks, universities, and reputable media for co-produced series.\n- Retention loops: Topic follow, expert follow, personalized digests, and earned status for positive contributions.\n\n### Success Metrics\n- Trust and safety: Low reversal rate in moderation decisions, timely SLA adherence.\n- Engagement: Repeat sessions/week, quality reactions, follow actions, save/bookmark rates.\n- Expert participation: Number of active experts and expert-originated threads per week.\n- Monetization: Premium conversion rate, sponsorship bookings, ad yield.\n\n## Core Features Summary\nThis section states what the service must do at a business level. Detailed logic appears in other requirements documents. EARS format is used for applicable items.\n\nContent creation and management:\n- THE service SHALL allow members to create, edit, and delete their own posts and comments within policy-compliant boundaries.\n- WHEN a user publishes content, THE service SHALL record topic tags, sources (if provided), and attribution for later policy checks and discovery.\n- WHERE the user is an expert, THE service SHALL enable long-form analyses and expert Q&A threads with expert badges.\n- IF content is reported, THEN THE service SHALL route it to the moderation queue and apply configured timelines for action.\n- WHILE content is under review, THE service SHALL optionally restrict visibility according to policy.\n\nDiscovery and curation:\n- THE service SHALL provide topic follow, expert follow, and curated features to surface relevant content.\n- WHEN users follow topics or experts, THE service SHALL generate personalized feeds and digests subject to user preferences.\n- WHERE editors curate features, THE service SHALL support announcements, pinned posts, and special packages.\n\nReactions and community signals:\n- THE service SHALL support reactions, voting, and bookmarking to quantify engagement and relevance.\n- WHEN a user reacts or votes, THE service SHALL update engagement signals used for ranking and curation.\n- IF abnormal engagement patterns are detected, THEN THE service SHALL flag items for review (anti-gaming).\n\nReporting and governance:\n- THE service SHALL provide a report feature with clear categories (e.g., misinformation, harassment, spam, off-topic).\n- WHEN reports are submitted, THE service SHALL acknowledge receipt and communicate outcomes per policy.\n- WHERE sanctions are applied, THE service SHALL log the action to a transparency record with reason codes.\n\nNotifications (business-level):\n- WHEN followed experts or topics publish, THE service SHALL notify followers subject to frequency limits and user consent.\n- IF the system detects notification fatigue, THEN THE service SHALL throttle non-critical notifications.\n\nRole-based capabilities (high level):\n- WHERE the user is a moderator, THE service SHALL provide tools to hide/remove content, warn, and request suspensions per policy.\n- WHERE the user is an editor, THE service SHALL manage tags/topics, featured lists, and announcements.\n- WHERE the user is an admin, THE service SHALL manage roles, policies, and compliance workflows.\n\nPerformance experience (business expectation):\n- WHEN users perform common actions (login, open feed, view post), THE service SHALL respond within a user-perceived 1–2 seconds for typical conditions.\n- WHERE complex searches and filters are executed, THE service SHALL return initial results within 3 seconds for common queries.\n\n## Scope and Out of Scope\nIn scope (business outcomes):\n- Account registration, login/logout, email verification, password reset.\n- Role-based permissions: member, expert, moderator, editor, admin.\n- Posts, comments, replies, mentions, reactions, votes, bookmarks.\n- Topic/tag management, topic/expert follow, curated features.\n- Reporting, moderation workflow, sanctions policy, transparency logs.\n- Personalized feeds and configurable notifications.\n\nOut of scope (initial phases):\n- Real-time audio/video debates and live streaming.\n- Direct monetization between users (tips, paywalled posts) before compliance readiness.\n- Public API for third-party integrations in Beta/GA.\n- Frontend design specifications (layouts, colors, interactions).\n\nBoundary requirements (EARS):\n- THE service SHALL avoid collecting unnecessary personal data beyond business needs.\n- IF a feature introduces legal/compliance implications, THEN THE service SHALL require policy and compliance review before launch.\n- WHERE experimental features are enabled, THE service SHALL be opt-in and reversible at the cohort level.\n\n## Competitive Landscape and Differentiation\nCompetitive sets:\n- General social networks: Broad reach but low context, volatile quality.\n- Traditional forums: Community-led but uneven moderation and limited expert validation.\n- Publisher comment sections and Q&A: Limited interaction depth, weak governance transparency.\n\nDifferentiators:\n- Verified expert participation with visible credentials and specialized formats.\n- Transparent governance with clear reason codes, SLAs, and public transparency records.\n- Topic- and expert-centric discovery that privileges sourced, contextual contributions.\n- Role separation (moderator vs. editor) to balance policy enforcement and content quality.\n\n## Success Metrics (KPIs) and Target Levels\nTimeframes reference post-General Availability (GA). Targets define success thresholds that inform go/no-go decisions and iteration priorities.\n\nEngagement and growth:\n- THE service SHALL achieve 25–35% 28-day retention for new registered members by Month 6 post-GA.\n- THE service SHALL achieve at least 4 sessions/week median among retained members by Month 6 post-GA.\n- THE service SHALL reach 150–250 active experts with 400+ expert-originated threads/month by Month 6 post-GA.\n\nQuality and trust:\n- THE service SHALL maintain a moderation decision reversal rate under 5% monthly.\n- THE service SHALL process 90% of standard reports within 24 hours and 99% within 72 hours.\n- THE service SHALL keep repeat sanctions (within 90 days) under 10% of sanctioned accounts.\n\nMonetization:\n- THE service SHALL achieve 2.0–3.5% premium conversion among MAUs by Month 12 post-GA.\n- THE service SHALL secure at least two sponsorship packages per month by Month 6 post-GA.\n\nReliability and responsiveness (user-perceived):\n- THE service SHALL serve core feed and post views within 1–2 seconds p50 and under 4 seconds p95 for typical conditions.\n\n## Phased Roadmap (Beta → GA → Expansion)\nPrinciples:\n- Deliver trust and quality foundations first (roles, governance, transparency).\n- Validate expert and editor workflows alongside member value loops (follow, digest, reactions).\n- Use measurable gates to progress phases.\n\nPhase 1: Private Beta (target window: Q4 2025)\n- Cohort: ~1,000 members, 50–75 experts, 5–8 moderators, 3–5 editors.\n- Scope highlights: Core posting/comments, topic follow, expert badges and long-form posts, reporting and basic moderation queue, limited notifications.\n- Gates (must meet to exit):\n  - THE service SHALL achieve at least 30% weekly active rate among Beta cohort for four consecutive weeks.\n  - THE service SHALL process 95% of reports within 48 hours during Beta.\n  - THE service SHALL onboard minimum 50 verified experts with ≥2 posts each.\n\nPhase 2: Public Beta (target window: Q1–Q2 2026)\n- Scope highlights: Transparency logs, editor curation packages, expanded notification controls, improved discovery filters, sanctions and appeals process.\n- Gates:\n  - THE service SHALL demonstrate moderation reversal rate under 7% across two consecutive months.\n  - THE service SHALL reach 20–25% 28-day retention for new sign-ups in Public Beta.\n  - THE service SHALL sustain p95 perceived response under 4 seconds for feeds and posts under typical conditions.\n\nPhase 3: General Availability (GA) (target window: Q3 2026)\n- Scope highlights: Premium membership v1, sponsorship placements, expert Q&A programs, expanded governance reporting.\n- Gates:\n  - THE service SHALL reach 25–35% 28-day retention within three months post-GA.\n  - THE service SHALL onboard 150+ active experts with ongoing production.\n  - THE service SHALL meet monetization targets (≥2 sponsorships/month steady state).\n\nPhase 4: Expansion (post-GA, ongoing)\n- Possible directions: Regional topic verticals, institutional partnerships, digest products for professionals, advanced trust signals.\n- Governance maturity: More granular sanctions matrix and election-period policies aligned with local regulations.\n\n### Visual: Trust-Centric Content Lifecycle (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A1[\"Draft Content\"] --> A2[\"Add Sources/Tags\"]\n    A2 --> A3[\"Publish\"]\n  end\n\n  subgraph \"Community & Signals\"\n    B1[\"Topic/Expert Follow\"] --> B2[\"Reactions/Votes/Bookmarks\"]\n    B2 --> B3[\"Personalized Feeds/Digests\"]\n  end\n\n  subgraph \"Governance\"\n    C1[\"Reports Submitted\"] --> C2[\"Moderation Queue\"]\n    C2 --> C3{\"Action Needed?\"}\n    C3 -->|\"Yes\"| C4[\"Hide/Remove/Warn\"]\n    C3 -->|\"No\"| C5[\"Maintain Visibility\"]\n    C4 --> C6[\"Transparency Log\"]\n    C5 --> C6\n  end\n\n  A3 --> B1\n  B2 -.-> C1\n```\n\n## Document Scope and Implementation Ownership\nThis document defines business objectives, scope, and measurable outcomes. It does not prescribe technical implementations. All technical decisions—including architecture, APIs, data models, and infrastructure—are owned by the development team. The document describes what the service should do, not how to build it.\n\n## Related Documents\n- See the [Business Model and Monetization Strategy](./02-pol-econ-board-business-model.md) for deeper business assumptions and revenue details.\n- See the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for role definitions and authorization policies.\n- See the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for comprehensive feature-level requirements.\n- See the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for rules, sanctions, and transparency requirements.\n- See the [Non-Functional Requirements Guide](./08-pol-econ-board-non-functional-requirements.md) for performance and reliability expectations.\n- See the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) for business-level notification rules.\n"},"plan":"Document type: service-overview for prefix pol-econ-board\nAudience: business stakeholders; purpose: present why the service exists, who it serves, what value and scope it offers, how it succeeds, and phased delivery plan.\nRequired sections per outline:\n1) Service Vision and Objectives\n2) Problem Definition and Opportunity\n3) Target Users and Core Value Proposition\n4) Core Features Summary (business-level, EARS where applicable)\n5) Scope and Out of Scope\n6) Competitive Landscape and Differentiation\n7) Success Metrics (KPIs) and Target Levels\n8) Phased Roadmap (Beta → GA → Expansion)\nIntegration: Reference related requirement documents with descriptive links and relative paths.\nConstraints: Business-level only; no tech implementation; ensure EARS formatting for applicable requirements and valid Mermaid diagrams.\n","review":"Quality gates for enhancement:\n- Length: Standard document ≥ 2,000 characters; expand where necessary without adding technical implementation details.\n- Section completeness: Must fully cover all items in the outline (Vision/Goals; Problem/Opportunity; Target Users & Value; Core Features; Scope/In/Out; Competition & Differentiation; KPIs & Targets; Phased Roadmap).\n- Content specificity: Convert vague statements to EARS format where applicable (use WHEN/WHILE/IF/THEN/WHERE/THE/SHALL keywords; all descriptive text in en-US).\n- Prohibited content: No API specs, no database schemas, no architectural details, no frontend UI specs.\n- Business orientation: Focus on business needs, user scenarios, measurable expectations, policies, and success metrics.\n- Roles alignment: Member, expert, moderator, editor, admin capabilities referenced only at business level.\n- Links: Use descriptive link text; link only to documents that exist in the provided file list; use relative paths.\n- Mermaid validation: All node labels in double quotes; no spaces between brackets/braces and quotes; correct arrow syntax using -->, -.->, ==>; subgraphs titled with double quotes; no nested quotes.\n- Authentication/business rules: If mentioned, describe in natural language only; defer technical decisions to developers explicitly at the end.\n- Performance requirements: Express in user-perceived terms with measurable thresholds.\n- Locale and tone: en-US business-professional language throughout.\n- Final content: Self-contained, immediately usable by backend developers as business requirements context; no meta-commentary about the document itself.\n","content":"# pol-econ-board Service Overview\n\n## Service Vision and Objectives\npol-econ-board is a trust-focused political and economic discussion and analysis community that enables informed conversations, expert insights, and transparent moderation. The service exists to reduce noise, polarization, and misinformation by combining community participation with clear governance and role-based accountability.\n\nObjectives (12–18 months horizon):\n- Establish a reliable forum for policy and market discourse with measurable trust signals and transparent moderation.\n- Attract qualified experts and elevate high-quality insights to inform public understanding and decision-making.\n- Build a sustainable, scalable business with diversified revenue streams and strong user retention.\n\nGuiding principles:\n- Truth and verifiability over virality.\n- Community participation with accountability.\n- Transparency in moderation and policy enforcement.\n- Measurable outcomes and continuously improved operations.\n\n## Problem Definition and Opportunity\n- Information overload: Political and economic content is high-volume but low-signal. Users struggle to find reliable, contextualized analysis.\n- Trust deficit: Anonymous or low-accountability forums enable misinformation and low-quality discourse.\n- Expert–public gap: Experts lack structured ways to share insights with context and receive meaningful feedback.\n- Fragmented experiences: Insights, debate, curation, and policy enforcement are spread across disparate platforms without consistent standards.\n\nOpportunity:\n- Provide a specialized, moderated environment that privileges sourced, contextual analysis and civil debate.\n- Create a tiered role system (member, expert, moderator, editor, admin) to align incentives and responsibilities.\n- Offer transparent governance, auditable decisions, and topic-focused discovery to increase user confidence and time-on-platform.\n\n## Target Users and Core Value Proposition\nPrimary personas and value delivered:\n- Members (general participants):\n  - Value: Access to high-signal discussions, topic follow for personalization, bookmarking, reactions, and clear rules for safe participation.\n  - Use cases: Post viewpoints with sources, ask questions, follow topics/experts, receive notifications, report problematic content.\n- Experts (verified domain specialists):\n  - Value: Credibility badge, dedicated long-form analysis and research formats, expert Q&A, topic leadership, and influence.\n  - Use cases: Publish research notes, host Q&A threads, propose expert topics, respond to member questions.\n- Moderators (community governance):\n  - Value: Efficient intake queue, policy-aligned actions (hide, remove, warning/suspension requests), transparent records.\n  - Use cases: Process reports, apply sanctions per policy, manage appeals, maintain a transparency log.\n- Editors (content quality):\n  - Value: Curate features, manage tags/topics, headline and topic hygiene, special coverage packages and featured placements.\n  - Use cases: Tag and topic grooming, curated home/section features, announcements and pinning.\n- Admins (operational owners):\n  - Value: End-to-end oversight, policy configuration, role assignments, legal/compliance workflows, and audit visibility.\n  - Use cases: Manage roles and policies, oversee indicators and risk, respond to lawful requests.\n\nCore value proposition:\n- High-signal community powered by verified expertise and transparent governance.\n- Clear norms, predictable enforcement, and visible trust indicators.\n- Topic-centric discovery with measurable quality and relevance.\n\n## Business Model (Why/How/What)\n### Why This Service Exists\n- Address the trust and quality gap in political/economic discourse with an accountability-first community.\n- Serve a growing audience seeking reliable analysis and expert commentary without the noise of general-purpose social platforms.\n\n### Revenue Strategy\n- Advertising and sponsorships: Brand-safe placements in featured sections and expert channels.\n- Premium membership: Ad-light experience, advanced filters, expert AMAs access, early access to curated reports.\n- Sponsored expert series: Cohort-based expert columns or Q&A programs, clearly labeled.\n- Data-rich summaries and reports (business-level packaging): Periodic, curated digests for professionals.\n\n### Growth Plan\n- Supply-side seeding: Onboard a core cohort of verified experts and editors to set quality bar.\n- Community credibility: Transparency logs, clear sanctions policy, and measurable content quality indicators.\n- Partnerships: Think tanks, universities, and reputable media for co-produced series.\n- Retention loops: Topic follow, expert follow, personalized digests, and earned status for positive contributions.\n\n### Success Metrics\n- Trust and safety: Low reversal rate in moderation decisions, timely SLA adherence.\n- Engagement: Repeat sessions/week, quality reactions, follow actions, save/bookmark rates.\n- Expert participation: Number of active experts and expert-originated threads per week.\n- Monetization: Premium conversion rate, sponsorship bookings, ad yield.\n\n## Core Features Summary\nBusiness-level capability statements using EARS for testability.\n\nContent creation and management:\n- THE service SHALL allow members to create, edit, and delete their own posts and comments within policy-compliant boundaries.\n- WHEN a user publishes content, THE service SHALL record topic tags, sources (if provided), and attribution for later policy checks and discovery.\n- WHERE the user is an expert, THE service SHALL enable long-form analyses and expert Q&A threads with expert badges.\n- IF content is reported, THEN THE service SHALL route it to the moderation queue and apply configured timelines for action.\n- WHILE content is under review, THE service SHALL optionally restrict visibility according to policy.\n\nDiscovery and curation:\n- THE service SHALL provide topic follow, expert follow, and curated features to surface relevant content.\n- WHEN users follow topics or experts, THE service SHALL generate personalized feeds and digests subject to user preferences.\n- WHERE editors curate features, THE service SHALL support announcements, pinned posts, and special packages.\n\nReactions and community signals:\n- THE service SHALL support reactions, voting, and bookmarking to quantify engagement and relevance.\n- WHEN a user reacts or votes, THE service SHALL update engagement signals used for ranking and curation.\n- IF abnormal engagement patterns are detected, THEN THE service SHALL flag items for review (anti-gaming).\n\nReporting and governance:\n- THE service SHALL provide a report feature with clear categories (e.g., misinformation, harassment, spam, off-topic).\n- WHEN reports are submitted, THE service SHALL acknowledge receipt and communicate outcomes per policy.\n- WHERE sanctions are applied, THE service SHALL log the action to a transparency record with reason codes.\n\nNotifications (business-level):\n- WHEN followed experts or topics publish, THE service SHALL notify followers subject to frequency limits and user consent.\n- IF the system detects notification fatigue, THEN THE service SHALL throttle non-critical notifications.\n\nRole-based capabilities (high level):\n- WHERE the user is a moderator, THE service SHALL provide tools to hide/remove content, warn, and request suspensions per policy.\n- WHERE the user is an editor, THE service SHALL manage tags/topics, featured lists, and announcements.\n- WHERE the user is an admin, THE service SHALL manage roles, policies, and compliance workflows.\n\nPerformance experience (business expectation):\n- WHEN users perform common actions (login, open feed, view post), THE service SHALL respond within a user-perceived 1–2 seconds for typical conditions.\n- WHERE complex searches and filters are executed, THE service SHALL return initial results within 3 seconds for common queries.\n\n## Scope and Out of Scope\nIn scope (business outcomes):\n- Account registration, login/logout, email verification, password reset.\n- Role-based permissions: member, expert, moderator, editor, admin.\n- Posts, comments, replies, mentions, reactions, votes, bookmarks.\n- Topic/tag management, topic/expert follow, curated features.\n- Reporting, moderation workflow, sanctions policy, transparency logs.\n- Personalized feeds and configurable notifications.\n\nOut of scope (initial phases):\n- Real-time audio/video debates and live streaming.\n- Direct monetization between users (tips, paywalled posts) before compliance readiness.\n- Public API for third-party integrations in Beta/GA.\n- Frontend design specifications (layouts, colors, interactions).\n\nBoundary requirements (EARS):\n- THE service SHALL avoid collecting unnecessary personal data beyond business needs.\n- IF a feature introduces legal/compliance implications, THEN THE service SHALL require policy and compliance review before launch.\n- WHERE experimental features are enabled, THE service SHALL be opt-in and reversible at the cohort level.\n\n## Competitive Landscape and Differentiation\nCompetitive sets:\n- General social networks: Broad reach but low context, volatile quality.\n- Traditional forums: Community-led but uneven moderation and limited expert validation.\n- Publisher comment sections and Q&A: Limited interaction depth, weak governance transparency.\n\nDifferentiators:\n- Verified expert participation with visible credentials and specialized formats.\n- Transparent governance with clear reason codes, SLAs, and public transparency records.\n- Topic- and expert-centric discovery that privileges sourced, contextual contributions.\n- Role separation (moderator vs. editor) to balance policy enforcement and content quality.\n\n## Success Metrics (KPIs) and Target Levels\nTimeframes reference post-General Availability (GA). Targets define success thresholds that inform go/no-go decisions and iteration priorities.\n\nEngagement and growth:\n- THE service SHALL achieve 25–35% 28-day retention for new registered members by Month 6 post-GA.\n- THE service SHALL achieve at least 4 sessions/week median among retained members by Month 6 post-GA.\n- THE service SHALL reach 150–250 active experts with 400+ expert-originated threads/month by Month 6 post-GA.\n\nQuality and trust:\n- THE service SHALL maintain a moderation decision reversal rate under 5% monthly.\n- THE service SHALL process 90% of standard reports within 24 hours and 99% within 72 hours.\n- THE service SHALL keep repeat sanctions (within 90 days) under 10% of sanctioned accounts.\n\nMonetization:\n- THE service SHALL achieve 2.0–3.5% premium conversion among MAUs by Month 12 post-GA.\n- THE service SHALL secure at least two sponsorship packages per month by Month 6 post-GA.\n\nReliability and responsiveness (user-perceived):\n- THE service SHALL serve core feed and post views within 1–2 seconds p50 and under 4 seconds p95 for typical conditions.\n\n## Phased Roadmap (Beta → GA → Expansion)\nPrinciples:\n- Deliver trust and quality foundations first (roles, governance, transparency).\n- Validate expert and editor workflows alongside member value loops (follow, digest, reactions).\n- Use measurable gates to progress phases.\n\nPhase 1: Private Beta (target window: Q4 2025)\n- Cohort: ~1,000 members, 50–75 experts, 5–8 moderators, 3–5 editors.\n- Scope highlights: Core posting/comments, topic follow, expert badges and long-form posts, reporting and basic moderation queue, limited notifications.\n- Gates (must meet to exit):\n  - THE service SHALL achieve at least 30% weekly active rate among Beta cohort for four consecutive weeks.\n  - THE service SHALL process 95% of reports within 48 hours during Beta.\n  - THE service SHALL onboard minimum 50 verified experts with ≥2 posts each.\n\nPhase 2: Public Beta (target window: Q1–Q2 2026)\n- Scope highlights: Transparency logs, editor curation packages, expanded notification controls, improved discovery filters, sanctions and appeals process.\n- Gates:\n  - THE service SHALL demonstrate moderation reversal rate under 7% across two consecutive months.\n  - THE service SHALL reach 20–25% 28-day retention for new sign-ups in Public Beta.\n  - THE service SHALL sustain p95 perceived response under 4 seconds for feeds and posts under typical conditions.\n\nPhase 3: General Availability (GA) (target window: Q3 2026)\n- Scope highlights: Premium membership v1, sponsorship placements, expert Q&A programs, expanded governance reporting.\n- Gates:\n  - THE service SHALL reach 25–35% 28-day retention within three months post-GA.\n  - THE service SHALL onboard 150+ active experts with ongoing production.\n  - THE service SHALL meet monetization targets (≥2 sponsorships/month steady state).\n\nPhase 4: Expansion (post-GA, ongoing)\n- Possible directions: Regional topic verticals, institutional partnerships, digest products for professionals, advanced trust signals.\n- Governance maturity: More granular sanctions matrix and election-period policies aligned with local regulations.\n\n### Visual: Trust-Centric Content Lifecycle (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A1[\"Draft Content\"] --> A2[\"Add Sources/Tags\"]\n    A2 --> A3[\"Publish\"]\n  end\n\n  subgraph \"Community & Signals\"\n    B1[\"Topic/Expert Follow\"] --> B2[\"Reactions/Votes/Bookmarks\"]\n    B2 --> B3[\"Personalized Feeds/Digests\"]\n  end\n\n  subgraph \"Governance\"\n    C1[\"Reports Submitted\"] --> C2[\"Moderation Queue\"]\n    C2 --> C3{\"Action Needed?\"}\n    C3 -->|\"Yes\"| C4[\"Hide/Remove/Warn\"]\n    C3 -->|\"No\"| C5[\"Maintain Visibility\"]\n    C4 --> C6[\"Transparency Log\"]\n    C5 --> C6\n  end\n\n  A3 --> B1\n  B2 -.-> C1\n```\n\n## Document Scope and Implementation Ownership\nBusiness requirements and objectives are defined in natural language without prescribing technical implementations. All technical decisions—including architecture, APIs, data models, and infrastructure—belong to the development team. The content specifies what the service should do, not how to build it.\n\n## Related Documents\n- Review the [Business Model and Monetization Strategy](./02-pol-econ-board-business-model.md) for business assumptions and revenue details.\n- Review the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for role definitions and authorization policies.\n- Review the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for comprehensive feature-level requirements.\n- Review the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for rules, sanctions, and transparency requirements.\n- Review the [Non-Functional Requirements Guide](./08-pol-econ-board-non-functional-requirements.md) for performance and reliability expectations.\n- Review the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) for business-level notification rules.\n","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:21:49.636Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"전체 문서 지도를 제공하여 이해관계자가 빠르게 필요한 문서로 이동할 수 있도록 하기 위함.","filename":"00-toc.md","documentType":"service-overview","outline":["문서 목적","문서 목록 및 간단 설명","문서 간 관계 및 읽기 순서","용어 및 약어 가이드"],"audience":"general","keyQuestions":["어떤 문서가 포함되어 있으며 무엇을 다루는가","각 문서의 읽기 순서는 무엇인가"],"detailLevel":"high-level overview","constraints":["문서 링크는 설명형 링크 텍스트를 사용할 것","개발자 노트는 본 문서 맨 하단에 블록인용 형식으로만 포함"],"content":"# pol-econ-board Documentation Index\n\n## Document Purpose\nThis index provides a complete, navigable map of the pol-econ-board documentation set. It enables any stakeholder to quickly locate the appropriate document, understand its scope, and follow a recommended reading sequence. The index also clarifies how documents relate to each other across business objectives, requirements, governance, and compliance.\n\n## Document List and Brief Descriptions\n- [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) — Summarizes vision, goals, target users, value proposition, scope, differentiation, success metrics (KPI), and phased roadmap from beta to expansion. Focused on business context and why the service should exist.\n- [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md) — Defines monetization (e.g., ads, sponsorships, premium membership, data reports), user acquisition and growth strategies, operating model and cost structure, regulatory risks, and performance monitoring metrics.\n- [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) — Specifies authentication flows (register/login/logout/email verification/password reset), JWT-based session policies, complete role definitions and permissions (member, expert, moderator, editor, admin), permission matrix, and security/audit expectations in business terms.\n- [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) — Details business functionality: posts, comments, categorization/tags/follows, votes/reactions, bookmarks, search/sort/filter, reporting and blocking workflows, draft/review/publish workflows, notices and featured curation, feeds and subscriptions, notifications triggers, rate limits, and cross-cutting acceptance criteria.\n- [User Stories and Acceptance Criteria](./05-pol-econ-board-user-stories.md) — Presents personas (general member, expert, moderator, editor, admin), key success scenarios, edge cases, misuse/abuse prevention, and Definition of Done with measurable acceptance criteria.\n- [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md) — Visualizes major workflows with Mermaid diagrams (left-to-right orientation), including account creation/authentication, authoring and publishing, reporting to moderation and appeal, notification settings and delivery, and exception branches with rollbacks.\n- [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) — Defines community rules, allowed/forbidden content, sensitive political content guardrails, report taxonomy and SLA, sanction ladders and triggers, transparency reporting, appeal/review/restore procedures, and special election-period policies.\n- [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) — Establishes measurable performance expectations (response times, throughput, concurrency), availability and recovery objectives (RTO/RPO concepts), scalability, observability requirements, data minimization principles, scheduling expectations, and capacity planning guidance.\n- [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) — Outlines privacy principles and consent management, data subject rights processing, age/identity and sensitive periods policy (if required), legal compliance (e.g., PIPA), auditability and transparency requirements, abuse/spam/bot mitigation with rate limiting, and security incident communication.\n- [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) — Describes conceptual data flows, content lifecycles (draft/publish/edit/archive/delete), moderation evidence retention, logs/metrics/backups retention and disposal, anonymization/pseudonymization business needs, and user-initiated deletion and recovery channels.\n- [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) — Standardizes notification types (real-time, batch, digest), trigger events, channels (in-app, email), frequency and rate limits, subscription/follow/digest policies, consent and preference management, tone and message composition, and retry/fallback rules.\n- [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) — Catalogs error classes and messaging principles, auth and authorization failures, content operation errors (upload/save/conflict), moderation workflow failures, external integration errors, rate-limiting and spam controls, data integrity and deduplication handling, and user recovery procedures.\n\n## Document Relationships and Recommended Reading Order\nThe documents are organized to move from context and strategy to detailed requirements and operational policies. The recommended path for most readers is: Overview → Business Model → Roles & Auth → Functional Requirements → User Flows → Governance → Non-Functional → Security & Compliance → Data Lifecycle → Notifications → Exceptions.\n\n```mermaid\ngraph LR\n  subgraph \"Context & Strategy\"\n    A1[\"Service Overview\"] --> A2[\"Business Model\"]\n  end\n\n  subgraph \"Core Requirements\"\n    B1[\"User Roles & Authentication\"] --> B2[\"Functional Requirements\"]\n    B2 --> B3[\"User Flows\"]\n  end\n\n  subgraph \"Operations & Governance\"\n    C1[\"Community Governance & Moderation\"]\n    C2[\"Notifications & Communications\"]\n  end\n\n  subgraph \"Quality & Compliance\"\n    D1[\"Non-Functional Requirements\"]\n    D2[\"Security & Compliance\"]\n    D3[\"Data Lifecycle & Retention\"]\n    D4[\"Exception Handling & Errors\"]\n  end\n\n  A2 --> B1\n  B3 --> C1\n  B3 --> C2\n  B2 --> D1\n  D1 --> D2\n  D2 --> D3\n  B2 --> D4\n```\n\nRole-specific shortcuts:\n- Product and business stakeholders: Start with [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) and [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md). Then review [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) and [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Backend developers and QA: Begin with [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) and [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md), followed by [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md), then consult governance, NFRs, compliance, data lifecycle, notifications, and error handling.\n- Moderation and editorial teams: Focus on [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) and [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md), then reference [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) and [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## Terms and Acronyms Guide\nThe following glossary standardizes key terms used across documents.\n\n| Term/Acronym | Definition | Where Used |\n|--------------|------------|------------|\n| pol-econ-board | The service prefix and identifier for this project focused on political and economic discourse. | All documents |\n| EARS | Easy Approach to Requirements Syntax; used for unambiguous, testable requirement statements. | Requirements documents (03, 04, 07, 08, 09, 11, 12) |\n| JWT | JSON Web Token used for access and refresh tokens to manage user sessions. | 03, 06, 09 |\n| RBAC | Role-Based Access Control; authorization model using roles like member, expert, moderator, editor, admin. | 03, 04 |\n| SLA | Service Level Agreement; specified response and processing time targets for moderation and other workflows. | 07, 08 |\n| KPI | Key Performance Indicator; success metrics such as MAU/DAU, retention rate, and content quality measures. | 01, 02 |\n| NFR | Non-Functional Requirements; performance, availability, scalability, observability expectations. | 08 |\n| PIPA | Personal Information Protection Act (Korea); core privacy regulation relevant to data handling. | 09, 10 |\n| RTO/RPO | Recovery Time Objective / Recovery Point Objective; targets for continuity and recovery. | 08, 10 |\n| MAU/DAU | Monthly/ Daily Active Users; common usage metrics. | 01, 02 |\n| Sanction Ladder | Progressive discipline model: warning → suspension → permanent action, based on policy triggers. | 07 |\n| Digest | Aggregated periodic notification summarizing content updates. | 11 |\n| Transparency Log | Public or internal record of moderation and policy enforcement actions. | 07, 09 |\n| Data Subject Rights | Rights to access, rectify, delete, and port personal data. | 09, 10 |\n| Rate Limiting | Business rules that cap actions per user/time window to prevent abuse. | 04, 08, 09, 11 |\n\nAdditional role definitions used throughout:\n- member — Registered user (real name or alias) with permissions to create, edit, and delete own posts/comments, report content, bookmark, follow, vote/react, and manage notifications; subject to community rules and potential sanctions.\n- expert — Verified political/economic domain expert; inherits member permissions and can publish deeper research/insights, propose expert-only topics, and participate in expert Q&A with a trust badge.\n- moderator — Community operator handling report queues, temporary hide/delete, proposing user sanctions (warning/suspension), dispute mediation, and transparency log oversight.\n- editor — Content quality owner managing topics/tags, special curation, announcements/pins, and featuring operations; collaborates with moderators on policy violations.\n- admin — Organization-level operator with access to all resources for audits, role management, policy/config changes, legal request workflows, service health, and metrics governance.\n\n> *Developer Note: This document defines **business requirements only**. All technical implementations (architecture, APIs, database design, etc.) are at the discretion of the development team.*"},"plan":"Follow the provided outline: 1) Document Purpose: concise explanation of the index’s role. 2) Document List and Brief Descriptions: enumerate all existing documents with descriptive links and summaries. 3) Document Relationships and Recommended Reading Order: narrative plus a Mermaid LR diagram grouping documents into subgraphs and showing recommended sequence. 4) Terms and Acronyms Guide: a glossary table and role definitions. Place the Developer Note at the very end, blockquote only, no bold/italics, 2 sentences.","review":"Enhance 00-toc.md to meet: minimum length (≥2,000 chars), complete sections per outline, descriptive link text only, correct Mermaid syntax (all labels in double quotes, no spaces between brackets and quotes, correct arrows), business-focused natural language (no APIs/DB), no UI details, no questions, EARS only where applicable (not required for ToC). Include developer autonomy note at the very end as a blockquote, with no bold or headings, 2–3 sentences max, and in en-US. Ensure links reference existing files with descriptive titles. Avoid meta-commentary beyond section content.","content":"# pol-econ-board Documentation Index\n\n## Document Purpose\nProvides a complete, navigable map of the pol-econ-board documentation set so stakeholders can quickly locate the appropriate document, understand its scope, and follow a recommended reading sequence. Clarifies how documents relate across business objectives, requirements, governance, and compliance.\n\n## Document List and Brief Descriptions\n- [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) — Summarizes vision, goals, target users, value proposition, scope, differentiation, success metrics (KPI), and a phased roadmap from beta to expansion with business context and justification.\n- [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md) — Defines monetization pillars (ads, sponsorships, premium membership, data/insight reports), user acquisition and growth strategies, operating model and cost structure, regulatory risks, and KPI monitoring.\n- [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) — Specifies registration, login, logout, email verification, password reset, JWT-based session policies, full role definitions (member, expert, moderator, editor, admin), permission matrix, and audit/security expectations in business terms.\n- [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) — Details business functionality: posts, comments, categories/tags/follows, votes/reactions, bookmarks, search/sort/filter, reporting and blocking, draft/review/publish workflows, notices and featured curation, feeds and subscriptions, notification triggers, rate limits, and acceptance criteria.\n- [User Stories and Acceptance Criteria](./05-pol-econ-board-user-stories.md) — Presents personas (member, expert, moderator, editor, admin), key success scenarios, edge cases, misuse/abuse prevention, and Definition of Done with measurable acceptance criteria.\n- [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md) — Visualizes major workflows (left-to-right Mermaid): account creation/authentication, authoring and publishing, reporting to moderation and appeal, notification settings and delivery, and exception branches with rollbacks.\n- [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) — Defines community rules, allowed/forbidden content, political-sensitivity guardrails, report taxonomy and SLA, sanction ladders and triggers, transparency reporting, appeal/review/restore procedures, and election-period policies.\n- [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) — Establishes measurable performance expectations (response times, throughput, concurrency), availability and recovery targets (RTO/RPO concepts), scalability, observability, data minimization, scheduling windows, and capacity planning.\n- [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) — Outlines privacy principles and consent, data subject rights processing, age/identity and sensitive periods policy (if required), legal compliance (e.g., PIPA), auditability and transparency, abuse/spam/bot mitigation with rate limiting, and incident communication.\n- [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) — Describes conceptual data flows; lifecycles for posts/comments (draft/publish/edit/archive/delete); moderation evidence retention; logs/metrics/backups retention and disposal; anonymization/pseudonymization; user-initiated deletion and recovery.\n- [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) — Standardizes notification types (real-time, batch, digest), triggers, channels (in-app, email), frequency/rate limits, subscription/follow/digest policies, consent and preferences, composition guidelines, and retry/fallback.\n- [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) — Catalogs error classes and messaging principles; auth and authorization failures; content operation errors (upload/save/conflict); moderation workflow failures; external integration errors; rate-limiting and spam controls; data integrity and deduplication; and user recovery procedures.\n\n## Document Relationships and Recommended Reading Order\nDocuments progress from context and strategy to detailed requirements and operational policies. Recommended path: Overview → Business Model → Roles & Auth → Functional Requirements → User Flows → Governance → Non-Functional → Security & Compliance → Data Lifecycle → Notifications → Exceptions.\n\n```mermaid\ngraph LR\n  subgraph \"Context & Strategy\"\n    A1[\"Service Overview\"] --> A2[\"Business Model\"]\n  end\n\n  subgraph \"Core Requirements\"\n    B1[\"User Roles & Authentication\"] --> B2[\"Functional Requirements\"]\n    B2 --> B3[\"User Flows\"]\n  end\n\n  subgraph \"Operations & Governance\"\n    C1[\"Community Governance & Moderation\"]\n    C2[\"Notifications & Communications\"]\n  end\n\n  subgraph \"Quality & Compliance\"\n    D1[\"Non-Functional Requirements\"]\n    D2[\"Security & Compliance\"]\n    D3[\"Data Lifecycle & Retention\"]\n    D4[\"Exception Handling & Errors\"]\n  end\n\n  A2 --> B1\n  B3 --> C1\n  B3 --> C2\n  B2 --> D1\n  D1 --> D2\n  D2 --> D3\n  B2 --> D4\n```\n\nRole-specific shortcuts:\n- Product and business stakeholders: Start with the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) and the [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md), then review the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) and the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Backend developers and QA: Begin with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) and the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md), followed by the [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md), then consult governance, NFRs, compliance, data lifecycle, notifications, and error handling.\n- Moderation and editorial teams: Focus on the [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) and the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md), then reference the [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) and the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## Terms and Acronyms Guide\nThe glossary standardizes key terms used across documents.\n\n| Term/Acronym | Definition | Where Used |\n|--------------|------------|------------|\n| pol-econ-board | Service prefix and identifier for this project focused on political and economic discourse. | All documents |\n| EARS | Easy Approach to Requirements Syntax; unambiguous, testable requirement statements. | Requirements documents (03, 04, 07, 08, 09, 11, 12) |\n| JWT | JSON Web Token used for access and refresh tokens to manage user sessions. | 03, 06, 09 |\n| RBAC | Role-Based Access Control; roles include member, expert, moderator, editor, admin. | 03, 04 |\n| SLA | Service Level Agreement; time targets for moderation and other workflows. | 07, 08 |\n| KPI | Key Performance Indicator; metrics like MAU/DAU, retention rate, and content quality measures. | 01, 02 |\n| NFR | Non-Functional Requirements; performance, availability, scalability, observability expectations. | 08 |\n| PIPA | Personal Information Protection Act (Korea); privacy regulation relevant to data handling. | 09, 10 |\n| RTO/RPO | Recovery Time Objective / Recovery Point Objective; continuity and recovery targets. | 08, 10 |\n| MAU/DAU | Monthly/Daily Active Users. | 01, 02 |\n| Sanction Ladder | Progressive discipline model: warning → suspension → permanent action. | 07 |\n| Digest | Aggregated periodic notification summarizing content updates. | 11 |\n| Transparency Log | Record of moderation and policy enforcement actions. | 07, 09 |\n| Data Subject Rights | Rights to access, rectify, delete, and port personal data. | 09, 10 |\n| Rate Limiting | Business rules that cap actions per user/time window to prevent abuse. | 04, 08, 09, 11 |\n\nRole definitions used throughout:\n- member — Registered user (real name or alias) with permissions to create, edit, and delete own posts/comments; report content; bookmark; follow; vote/react; and manage notifications; subject to community rules and potential sanctions.\n- expert — Verified political/economic domain expert; inherits member permissions and can publish deeper research/insights, propose expert-only topics, and participate in expert Q&A with a trust badge.\n- moderator — Community operator handling report queues; temporarily hide/delete content; propose user sanctions (warning/suspension); mediate disputes; and oversee transparency logs.\n- editor — Content quality owner managing topics/tags; special curation; announcements/pins; and featuring operations; collaborates with moderators on policy violations.\n- admin — Organization-level operator with access to all resources for audits; role management; policy/config changes; legal request workflows; service health; and metrics governance.\n\n> Developer Note: This document defines business requirements only for the pol-econ-board documentation set. All technical implementation decisions (architecture, APIs, database design, and infrastructure) are at the discretion of the development team.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:21:51.642Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"개인정보/법규 준수 및 오남용 방지 정책을 비즈니스 관점에서 규정하기 위함.","filename":"09-pol-econ-board-security-and-compliance.md","documentType":"requirement","outline":["개인정보 보호 원칙과 동의 관리","데이터 권리(열람/정정/삭제/이동) 처리 프로세스","연령/본인확인 및 민감 시기 정책(필요 시)","법률·정책 준수(국내 PIPA 등)와 유관 요청 대응","감사 추적 및 투명성 요구","오남용/스팸/봇 방지 정책과 레이트리밋 원칙","보안 이벤트 커뮤니케이션"],"audience":"development team","keyQuestions":["개인정보 및 법적 요구는 무엇이며 어떻게 충족하는가","오남용 방지와 투명성 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["07-pol-econ-board-community-governance-and-moderation.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["법/정책은 비즈니스 해석 수준으로 기술","API/암호화 상세 구현 금지"],"content":"# 09-pol-econ-board Security and Compliance Requirements\n\n## Document Purpose and Scope\nThis document specifies business-level security, privacy, compliance, abuse prevention, and incident communication requirements for the pol-econ-board service. It defines WHAT the system must do from a compliance perspective, not HOW to implement it. It is written for backend developers and stakeholders who need precise, testable requirements free of technical implementation details.\n\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, encryption choices, third-party tools) belong to the development team. The document describes expected system behaviors, policies, and service levels in natural language using EARS.\n\n## Definitions and Personal Data Scope\n- Personal Data: Any information relating to an identified or identifiable natural person (e.g., name, email, IP address, device identifiers, content authored by a user when it can be linked to them).\n- Sensitive Data: Government-issued IDs, financial account numbers, precise geolocation, political opinions, health data, and any special categories as defined by applicable law.\n- Processing: Any operation performed on personal data (collection, storage, use, disclosure, transfer, deletion).\n- Controller (Business Role): The service operator (admin role) determining purposes and means of processing.\n- Processor (Operational Role): Vendors executing processing on behalf of the controller.\n\n## Privacy Principles and Consent Management\n### Principles\n- Lawfulness, fairness, transparency\n- Purpose limitation and data minimization\n- Accuracy\n- Storage limitation and retention schedules\n- Integrity and confidentiality\n- Accountability and auditability\n\n### Requirements (EARS)\n- THE service SHALL present clear privacy notices at each point of personal data collection describing purposes, categories, and retention periods.\n- THE service SHALL collect only the minimum data necessary to provide stated features and comply with law.\n- THE service SHALL maintain a registry of processing activities including purposes, data categories, recipient categories, and retention periods.\n- WHEN a user registers, THE service SHALL obtain explicit consent for optional processing (e.g., marketing communications) separate from essential processing.\n- WHEN consent is required by law, THE service SHALL record consent with timestamp, user identifier, consent scope, and source context.\n- WHEN a user withdraws consent, THE service SHALL cease the corresponding processing within 24 hours and update the consent registry.\n- WHEN processing purposes change materially, THE service SHALL notify users prior to changes and request renewed consent where required.\n- WHERE cookies or trackers are used for analytics or marketing, THE service SHALL obtain opt-in consent before activation and provide per-category controls.\n- WHILE executing essential service features, THE service SHALL permit processing without optional consents strictly limited to essential purposes specified in notices.\n- IF a user declines optional tracking, THEN THE service SHALL honor the choice across sessions within the same account and device context.\n- THE service SHALL provide granular preference controls for marketing, newsletter digests, and topic-based communications.\n- THE service SHALL publish contact details for privacy inquiries and complaints, including an email contact and postal address where applicable.\n\n## Data Subject Rights Processing (Access/Rectification/Deletion/Portability)\n### Process Overview\nData rights requests (DSAR) are accepted via authenticated channels and must be acknowledged, verified, processed, and recorded within defined SLAs. Actions include access copy, rectification, deletion, portability export, and processing restriction where applicable.\n\n### Requirements (EARS)\n- WHEN a user submits a rights request, THE service SHALL acknowledge receipt within 1 hour via the user’s preferred contact channel.\n- THE service SHALL require identity verification for all rights requests before actioning them.\n- WHEN identity verification succeeds, THE service SHALL begin processing within 1 business day.\n- THE service SHALL fulfill access and portability requests within 14 calendar days unless legally permitted extensions apply (one additional 14-day extension for complex cases).\n- THE service SHALL fulfill rectification requests within 7 calendar days after verification.\n- THE service SHALL fulfill deletion requests within 7 calendar days except where retention is required by law or for dispute resolution per published policies.\n- IF legal retention obligations prevent immediate deletion, THEN THE service SHALL restrict processing to storage-only and inform the user of the legal basis and retention duration.\n- THE service SHALL provide access copies limited to the requesting user’s data and exclude third-party personal data unless law permits disclosure.\n- WHERE portability applies, THE service SHALL provide a structured, commonly used, machine-readable export of the user’s data and metadata relevant to their content and account settings.\n- THE service SHALL log each request with request type, timestamps, verification outcome, action taken, and final resolution status for audit purposes.\n- IF a request is manifestly unfounded or excessive, THEN THE service SHALL decline with justification and provide an appeal path.\n- THE service SHALL provide an appeal path with review by a moderator or admin independent from the initial handler.\n- WHEN a deletion request completes, THE service SHALL remove the user’s profile data and pseudonymize authored public content where policy requires content continuity.\n\n### Verification and Fraud Prevention\n- THE service SHALL prevent abuse of rights processes by limiting concurrent open requests per user to 3 and by rate-limiting submissions to 1 per 24 hours per request type.\n- IF verification fails after 2 attempts, THEN THE service SHALL close the request with status \"verification_failed\" and provide retry guidance after 7 days.\n\n## Age/Identity Verification and Sensitive Period Policies\n### Context\nPolitical and economic discourse may involve heightened risk periods (elections, regulatory windows). Age and identity verification may be required by law for specific features or content.\n\n### Requirements (EARS)\n- WHERE age-based restrictions apply, THE service SHALL require date-of-birth declaration at registration and provide guardian consent workflows for users under 14 years old.\n- IF a user is identified as under 14 years old without guardian consent, THEN THE service SHALL suspend data processing beyond essential safety operations and request consent.\n- WHERE real-name verification is mandated for specific publishing features by applicable law, THE service SHALL require identity verification before enabling those features.\n- WHILE an election-sensitive period is active as defined by policy, THE service SHALL enable heightened review workflows for flagged political content per community governance policies.\n- THE service SHALL provide clear notices about additional processing involved in identity or age verification and retain verification evidence only for the minimum period necessary for compliance.\n\n## Legal/Policy Compliance and Third-party Requests\n### Scope\nCovers compliance with Korea’s PIPA and other applicable local regulations for the service’s operating jurisdictions, as well as handling of official requests from authorities or litigants.\n\n### Requirements (EARS)\n- THE service SHALL maintain up-to-date records of applicable laws and guidance relevant to privacy and platform governance in operating jurisdictions.\n- WHEN the service receives a lawful request for user information, THE service SHALL verify legal validity and scope before disclosure and document the decision process.\n- IF a request is overbroad, THEN THE service SHALL seek to narrow scope and refuse disclosure beyond lawful requirements.\n- THE service SHALL notify affected users of disclosure requests unless legally prohibited or risk of harm is identified.\n- THE service SHALL preserve relevant data upon receipt of a valid preservation notice and limit access to authorized personnel only.\n- THE service SHALL publish jurisdiction-specific policies for cross-border transfers and apply appropriate safeguards consistent with law.\n- WHEN policies or laws change materially, THE service SHALL update internal procedures and staff training within 30 days.\n\n## Audit Trail and Transparency Requirements\n### Auditability\n- THE service SHALL record administrative and moderation actions with actor role, target resource, action type, timestamp, and reason codes.\n- THE service SHALL protect audit logs from tampering via controlled access and integrity controls under developer-chosen mechanisms.\n- THE service SHALL retain audit logs for 2 years unless law requires longer retention.\n\n### Transparency\n- THE service SHALL publish a transparency report at least quarterly summarizing content moderation actions, government requests, privacy incidents, and DSAR statistics.\n- THE service SHALL provide category-level metrics without exposing personal data.\n\n### Requirements (EARS)\n- WHEN any admin or moderator performs a content action, THE service SHALL require a reason code from a standardized taxonomy.\n- WHEN DSARs are processed, THE service SHALL update the transparency dataset with count and average resolution time within 7 days of closure.\n- IF audit logs reach 80% of planned capacity, THEN THE service SHALL trigger capacity review and retention optimization according to published retention rules.\n\n## Abuse/Spam/Bot Prevention and Rate Limiting Principles\n### Philosophy\nBalance community participation with platform integrity, using measurable thresholds and fair appeal mechanisms. Thresholds apply per role with stricter limits for new or flagged accounts.\n\n### Default Thresholds by Role\n| Action | member | expert | moderator | editor | admin |\n|--------|--------|--------|-----------|--------|-------|\n| Post creations per hour | 5 | 8 | 12 | 8 | 20 |\n| Comments per 10 minutes | 30 | 40 | 60 | 40 | 80 |\n| Follows per hour | 20 | 30 | 60 | 30 | 80 |\n| Reports filed per hour | 10 | 15 | 40 | 40 | 80 |\n| DMs/invites per hour (if enabled) | 10 | 15 | 40 | 20 | 80 |\n\nAdditional States:\n- New accounts (<72 hours since registration) use 50% of the above limits.\n- Flagged accounts (policy or security risk) use 25% of the above limits until review.\n\n### Requirements (EARS)\n- THE service SHALL enforce the default thresholds by role and state as listed in the table for posting, commenting, following, reporting, and messaging actions.\n- WHILE an account is in new state (<72 hours), THE service SHALL apply the \"new\" thresholds automatically.\n- WHILE an account is in flagged state, THE service SHALL apply the \"flagged\" thresholds and require manual review by a moderator within 72 hours.\n- WHEN rate limit is exceeded, THE service SHALL block the action and display the remaining wait time before the next allowed action.\n- IF automated signals indicate bot-like behavior (e.g., actions at constant intervals or high burstiness), THEN THE service SHALL require an interactive challenge before allowing further actions.\n- THE service SHALL provide an appeal path for rate-limit or restriction decisions and resolve appeals within 7 calendar days.\n- WHERE abuse is detected across IP/device clusters, THE service SHALL apply graduated restrictions at the cluster level while permitting legitimate users to request review.\n\n## Security Event Communication\n### Severity Levels\n- Low: No personal data involved; limited functionality impact.\n- Medium: Limited personal data exposure or moderate functionality impact.\n- High: Confirmed or likely personal data breach affecting a meaningful subset of users or sustained service degradation.\n- Critical: Large-scale personal data breach or service-wide impact.\n\n### Requirements (EARS)\n- WHEN a personal data breach is confirmed at Medium severity or higher, THE service SHALL notify affected users without undue delay and within 24 hours of confirmation, including incident overview, data types affected, protective steps, and contact details.\n- THE service SHALL notify the competent authority in jurisdictions where required within statutory time limits (target within 72 hours for reportable incidents).\n- WHEN a High or Critical incident occurs, THE service SHALL publish public status updates at least every 6 hours until containment and provide a post-incident report within 14 days.\n- IF incident investigation identifies specific compromised credentials or sessions, THEN THE service SHALL invalidate the affected sessions and require re-authentication for impacted users.\n- THE service SHALL maintain an incident communication playbook specifying roles, approval steps, and message templates consistent with these timeframes.\n\n## Roles and Responsibilities for Compliance\n### Role Capabilities\n| Compliance Action | member | expert | moderator | editor | admin |\n|-------------------|--------|--------|-----------|--------|-------|\n| Submit DSAR | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View own DSAR status | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Approve/deny DSAR | ❌ | ❌ | ✅ (review) | ❌ | ✅ (final) |\n| View audit logs | ❌ | ❌ | ✅ (limited) | ✅ (content ops) | ✅ (full) |\n| Modify retention schedules | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Apply account restrictions | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Publish transparency metrics | ❌ | ❌ | ❌ | ✅ (content metrics) | ✅ (full) |\n| Handle legal requests | ❌ | ❌ | ❌ | ❌ | ✅ |\n\n### Requirements (EARS)\n- THE service SHALL restrict DSAR approval authority to admin with optional moderator review as a prerequisite.\n- WHEN a moderator applies a restriction, THE service SHALL record the reason code and notify the user with appeal instructions.\n- THE service SHALL limit audit log visibility for moderators and editors to their operational scope and exclude sensitive personal data fields.\n- THE service SHALL require dual control (two-person review) for changes to retention schedules and transparency report publication.\n\n## Performance and Service Level Expectations\n### User-Perceived Performance\n- THE service SHALL provide DSAR portal responses (status retrieval) within 2 seconds under normal load.\n- THE service SHALL deliver consent preference changes and reflect them in processing decisions within 5 minutes.\n- THE service SHALL deliver incident notification emails or in-app messages within 15 minutes of the communication decision.\n\n### Operational SLAs\n- THE service SHALL maintain availability for DSAR submission endpoints 99.9% monthly, excluding planned maintenance announced 48 hours in advance.\n- THE service SHALL ensure audit log write operations succeed for 99.99% of eligible actions measured monthly.\n\n## Visual Process Diagrams (Mermaid)\n### DSAR Processing Flow\n```mermaid\ngraph LR\n  subgraph \"User Submission\"\n    A[\"Submit DSAR\"] --> B[\"Acknowledge(1h)\"]\n  end\n  subgraph \"Verification\"\n    C[\"Verify Identity\"] --> D{\"Verified?\"}\n  end\n  subgraph \"Processing\"\n    E[\"Assign Handler\"] --> F[\"Process Request\"] --> G{\"Type?\"}\n    G -->|\"Access/Portability\"| H[\"Assemble Export\"]\n    G -->|\"Rectification\"| I[\"Apply Corrections\"]\n    G -->|\"Deletion\"| J[\"Delete/Restrict\"]\n  end\n  subgraph \"Closure\"\n    K[\"Quality Review\"] --> L[\"Respond & Close\"]\n  end\n  B --> C\n  D -->|\"Yes\"| E\n  D -->|\"No\"| M[\"Close: verification_failed\"]\n  H --> K\n  I --> K\n  J --> K\n  E --> F\n  F --> G\n  K --> L\n```\n\n### Abuse Detection and Rate Limit Flow\n```mermaid\ngraph LR\n  A[\"User Action\"] --> B[\"Check Thresholds\"] --> C{\"Exceeded?\"}\n  C -->|\"No\"| D[\"Allow Action\"]\n  C -->|\"Yes\"| E[\"Block & Show Wait Time\"] --> F{\"Bot-like?\"}\n  F -->|\"No\"| G[\"Log Event\"]\n  F -->|\"Yes\"| H[\"Challenge User\"] --> I{\"Pass?\"}\n  I -->|\"Yes\"| D\n  I -->|\"No\"| J[\"Apply Restriction\"] --> K[\"Queue Review(72h)\"]\n```\n\n## References to Related Documents\n- Refer to the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md) for content policy, enforcement triggers, and appeal processes.\n- Refer to the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, observability, and capacity expectations that underpin compliance operations.\n\n## Compliance Notes\n- This document interprets laws and policies at a business-requirements level and deliberately omits technical implementation details, APIs, encryption specifics, and vendor selections.\n"},"plan":"Write an implementation-ready requirements document for pol-econ-board (service prefix) focused on security, privacy, compliance, abuse prevention, and incident communications. Structure by: 1) purpose/scope; 2) definitions; 3) privacy principles, legal bases, consent and preferences; 4) data rights (DSAR) workflow and SLAs; 5) age/identity and sensitive period policies; 6) legal/policy compliance (PIPA) and official requests; 7) vendor/processor management and cross-border transfer; 8) audit trail and transparency; 9) abuse/spam/bot prevention and rate limiting; 10) incident communications; 11) roles & responsibilities; 12) performance/SLAs; 13) training & DPIA; 14) cookie/tracker governance incl. GPC; 15) alignment with data lifecycle; 16) Mermaid flows (DSAR, abuse/rate limit, incident comms). Use EARS throughout, reference related documents with descriptive links, and keep content strictly at business requirements level.","review":"Enhance for completeness, EARS specificity, and Mermaid compliance. Enforce: 1) minimum detailed length (5,000+ chars) with all outline sections fully developed; 2) natural-language business requirements only (no API/DB/crypto details); 3) EARS format for all actionable requirements, with measurable SLAs; 4) Mermaid: all labels double-quoted, no spaces between brackets/braces and quotes, correct arrows; 5) descriptive internal links; 6) inclusion of legal bases, vendor/processor management, cross-border transfers, cookie/tracker governance (incl. GPC), staff training, DPIA triggers; 7) consent/preference log retention; 8) role-based responsibilities and permission limits; 9) performance targets for DSAR, consent propagation, and incident comms; 10) avoid phrases like \"This document...\" while preserving a clear scope statement; 11) align with PIPA and election-period sensitivities; 12) ensure no prohibited technical specs; 13) ensure consistency with related governance and NFR docs.","content":"# 09-pol-econ-board Security and Compliance Requirements\n\n## Purpose and Scope\nSpecifies business-level security, privacy, legal-compliance, abuse prevention, and incident communication requirements for the pol-econ-board service. All statements define WHAT must occur from a compliance perspective in measurable, testable terms using EARS. Technical implementation decisions (architecture, APIs, database schemas, encryption choices, vendor tools) belong to the development team.\n\nProvides business requirements only. All technical implementation decisions are at the discretion of developers. Describes WHAT the system shall do, not HOW to build it.\n\n## Definitions and Scope of Personal Data\n- Personal Data: Information relating to an identified or identifiable natural person (e.g., name, email, IP address, device identifiers, account identifiers, and authored content when linkable to a person).\n- Sensitive Data: Government-issued IDs, financial account numbers, precise geolocation, political opinions, health data, and other special categories defined by applicable law.\n- Processing: Any operation on personal data (collection, storage, use, disclosure, transfer, deletion).\n- Controller (Business Role): Service operator (admin role) determining purposes and means of processing.\n- Processor (Operational Role): Third parties processing on behalf of the controller.\n\n## Privacy Principles, Legal Bases, and Consent Management\n### Core Principles\n- Lawfulness, fairness, transparency\n- Purpose limitation and data minimization\n- Accuracy\n- Storage limitation and retention schedules\n- Integrity and confidentiality\n- Accountability and auditability\n\n### Legal Bases (Business-Level)\n- Contract necessity: providing core service functions (e.g., account, content hosting, moderation safety).\n- Legal obligation: fulfilling statutory duties (e.g., responding to lawful requests, retention for compliance).\n- Legitimate interests: protecting platform integrity, fraud prevention, product analytics using minimized/aggregated signals (balancing test documented).\n- Consent: optional communications, marketing, non-essential analytics/trackers, or features that require opt-in.\n\n### Consent and Preference Governance (EARS)\n- THE service SHALL present clear privacy notices at each point of personal data collection describing purposes, categories, recipients, and retention periods.\n- THE service SHALL collect only the minimum data necessary for stated purposes and legal compliance.\n- THE service SHALL maintain a registry of processing activities including purposes, data categories, recipient categories, geographic locations, and retention periods.\n- WHEN a user registers, THE service SHALL obtain explicit consent for optional processing (e.g., marketing communications) separate from essential processing.\n- WHEN consent is required by law, THE service SHALL record consent with timestamp, user identifier, consent scope, and source context.\n- WHEN a user withdraws consent, THE service SHALL cease the corresponding processing within 24 hours and update the consent registry.\n- WHEN processing purposes change materially, THE service SHALL notify users prior to changes and request renewed consent where required.\n- WHERE cookies or trackers are used for analytics or marketing, THE service SHALL obtain opt-in consent before activation and provide per-category controls.\n- WHILE executing essential service features, THE service SHALL permit processing without optional consents strictly limited to essential purposes specified in privacy notices.\n- IF a user declines optional tracking, THEN THE service SHALL honor the choice across sessions within the same account and device context.\n- THE service SHALL provide granular preference controls for marketing, newsletter digests, and topic-based communications at category×channel level.\n- THE service SHALL retain consent and preference change logs for at least 2 years for auditability.\n- WHERE Global Privacy Control (GPC) or equivalent browser signals are detected, THE service SHALL treat the signal as an opt-out for non-essential processing for that browser session and associated account context.\n\n## Data Subject Rights (Access, Rectification, Deletion, Portability)\n### Process Overview\nData rights requests (DSAR) are accepted via authenticated channels, acknowledged, verified, processed, and recorded within defined SLAs. Actions include access copy, rectification, deletion, portability export, restriction of processing, and objection where applicable.\n\n### Requirements (EARS)\n- WHEN a user submits a rights request, THE service SHALL acknowledge receipt within 1 hour via the user’s preferred contact channel.\n- THE service SHALL require identity verification for all rights requests before actioning them.\n- WHEN identity verification succeeds, THE service SHALL begin processing within 1 business day.\n- THE service SHALL fulfill access and portability requests within 14 calendar days, with one 14-day extension for complex cases where permitted by law.\n- THE service SHALL fulfill rectification requests within 7 calendar days after verification.\n- THE service SHALL fulfill deletion requests within 7 calendar days except where retention is required by law or for dispute resolution per published policies.\n- IF legal retention obligations prevent immediate deletion, THEN THE service SHALL restrict processing to storage-only and inform the user of the legal basis and retention duration.\n- THE service SHALL provide access copies limited to the requesting user’s data and exclude third-party personal data unless law permits disclosure.\n- WHERE portability applies, THE service SHALL provide a structured, commonly used, machine-readable export of the user’s data and metadata relevant to their content and account settings.\n- THE service SHALL log each request with request type, timestamps, verification outcome, action taken, and final resolution status for audit purposes.\n- IF a request is manifestly unfounded or excessive, THEN THE service SHALL decline with justification and provide an appeal path.\n- THE service SHALL provide an appeal path with review by a moderator or admin independent from the initial handler.\n- WHEN a deletion request completes, THE service SHALL remove the user’s profile data and pseudonymize authored public content where policy requires content continuity.\n- THE service SHALL limit concurrent open DSARs per user to 3 and rate-limit submissions to 1 per 24 hours per request type to prevent abuse.\n- IF identity verification fails after 2 attempts, THEN THE service SHALL close the request with status \"verification_failed\" and provide retry guidance after 7 days.\n\n### DSAR Evidence, Channels, and Status\n- THE service SHALL surface DSAR status and processing timestamps in a user-accessible portal with history of the last 12 months of DSAR events.\n- THE service SHALL provide downloadable records of completed DSAR responses for 90 days after closure.\n\n## Age/Identity Verification and Sensitive Period Policies\n### Context\nPolitical and economic discourse may involve heightened risk periods (elections, regulatory windows). Age and identity verification may be required by law for specific features or content.\n\n### Requirements (EARS)\n- WHERE age-based restrictions apply, THE service SHALL require date-of-birth declaration at registration and provide guardian consent workflows for users under 14 years old.\n- IF a user is identified as under 14 years old without guardian consent, THEN THE service SHALL suspend data processing beyond essential safety operations and request consent.\n- WHERE real-name verification is mandated for specific publishing features by applicable law, THE service SHALL require identity verification before enabling those features.\n- WHILE an election-sensitive period is active as defined by policy, THE service SHALL enable heightened review workflows for flagged political content per community governance policies.\n- THE service SHALL provide clear notices about additional processing involved in identity or age verification and retain verification evidence only for the minimum period necessary for compliance.\n\n## Legal/Policy Compliance and Official Requests\n### Scope\nCovers compliance with Korea’s Personal Information Protection Act (PIPA) and other applicable local regulations for the service’s operating jurisdictions, as well as handling of official requests from authorities or litigants.\n\n### Requirements (EARS)\n- THE service SHALL maintain up-to-date records of applicable laws, regulatory guidance, and policy interpretations relevant to privacy and platform governance in operating jurisdictions.\n- WHEN a lawful request for user information is received, THE service SHALL verify legal validity and scope before disclosure and document the decision process.\n- IF a request is overbroad, THEN THE service SHALL seek to narrow scope and refuse disclosure beyond lawful requirements.\n- THE service SHALL notify affected users of disclosure requests unless legally prohibited or risk of harm is identified.\n- THE service SHALL preserve relevant data upon receipt of a valid preservation notice and limit access to authorized personnel only.\n- THE service SHALL publish jurisdiction-specific policies for cross-border transfers and apply appropriate safeguards consistent with law.\n- WHEN policies or laws change materially, THE service SHALL update internal procedures and staff training within 30 days.\n\n## Vendor and Processor Management\n- THE service SHALL maintain a vendor inventory listing processors, processing purposes, data categories processed, jurisdictions, and retention dependencies.\n- THE service SHALL execute data processing agreements (DPAs) with processors before processing begins and review them annually.\n- WHEN a new processor is onboarded, THE service SHALL perform a privacy and security assessment and record the outcome in the processing registry.\n- IF a processor fails to meet obligations or suffers a relevant incident, THEN THE service SHALL assess risk, implement mitigations, and notify affected users and/or authorities where required.\n\n## Cross-Border Transfer Governance\n- WHERE personal data is transferred cross-border, THE service SHALL identify transfer mechanisms compliant with applicable law (e.g., contractual safeguards) and record them in the processing registry.\n- THE service SHALL disclose cross-border transfer destinations and safeguards in privacy notices.\n\n## Audit Trail and Transparency Requirements\n### Auditability\n- THE service SHALL record administrative and moderation actions with actor role, target resource, action type, timestamp, and standardized reason codes.\n- THE service SHALL protect audit logs from tampering via controlled access and integrity controls under developer-chosen mechanisms.\n- THE service SHALL retain audit logs for 2 years unless law requires longer retention.\n\n### Transparency\n- THE service SHALL publish a transparency report at least quarterly summarizing content moderation actions, government requests, privacy incidents, and DSAR statistics.\n- THE service SHALL provide category-level metrics without exposing personal data.\n- WHEN any admin or moderator performs a content action, THE service SHALL require a reason code from a standardized taxonomy.\n- WHEN DSARs are processed, THE service SHALL update the transparency dataset with count and average resolution time within 7 days of closure.\n- IF audit logs reach 80% of planned capacity, THEN THE service SHALL trigger capacity review and retention optimization according to published retention rules.\n\n## Abuse/Spam/Bot Prevention and Rate Limiting Principles\n### Philosophy\nBalance community participation with platform integrity, using measurable thresholds and fair appeal mechanisms. Thresholds apply per role with stricter limits for new or flagged accounts.\n\n### Default Thresholds by Role\n| Action | member | expert | moderator | editor | admin |\n|--------|--------|--------|-----------|--------|-------|\n| Post creations per hour | 5 | 8 | 12 | 8 | 20 |\n| Comments per 10 minutes | 30 | 40 | 60 | 40 | 80 |\n| Follows per hour | 20 | 30 | 60 | 30 | 80 |\n| Reports filed per hour | 10 | 15 | 40 | 40 | 80 |\n| DMs/invites per hour (if enabled) | 10 | 15 | 40 | 20 | 80 |\n\nAdditional states:\n- New accounts (<72 hours since registration) use 50% of the above limits.\n- Flagged accounts (policy or security risk) use 25% of the above limits until review.\n\n### Requirements (EARS)\n- THE service SHALL enforce the default thresholds by role and state as listed in the table for posting, commenting, following, reporting, and messaging actions.\n- WHILE an account is in new state (<72 hours), THE service SHALL apply the \"new\" thresholds automatically.\n- WHILE an account is in flagged state, THE service SHALL apply the \"flagged\" thresholds and require manual review by a moderator within 72 hours.\n- WHEN a rate limit is exceeded, THE service SHALL block the action and display the remaining wait time before the next allowed action.\n- IF automated signals indicate bot-like behavior (e.g., actions at constant intervals or high burstiness), THEN THE service SHALL require an interactive challenge before allowing further actions.\n- THE service SHALL provide an appeal path for rate-limit or restriction decisions and resolve appeals within 7 calendar days.\n- WHERE abuse is detected across IP/device clusters, THE service SHALL apply graduated restrictions at the cluster level while permitting legitimate users to request review.\n\n## Security Event Communication\n### Severity Levels (Business)\n- Low: No personal data involved; limited functionality impact.\n- Medium: Limited personal data exposure or moderate functionality impact.\n- High: Confirmed or likely personal data breach affecting a meaningful subset of users or sustained service degradation.\n- Critical: Large-scale personal data breach or service-wide impact.\n\n### Requirements (EARS)\n- WHEN a personal data breach is confirmed at Medium severity or higher, THE service SHALL notify affected users without undue delay and within 24 hours of confirmation, including incident overview, data types affected, protective steps, and contact details.\n- THE service SHALL notify the competent authority in jurisdictions where required within statutory time limits (target within 72 hours for reportable incidents).\n- WHEN a High or Critical incident occurs, THE service SHALL publish public status updates at least every 6 hours until containment and provide a post-incident report within 14 days.\n- IF incident investigation identifies compromised credentials or sessions, THEN THE service SHALL invalidate the affected sessions and require re-authentication for impacted users.\n- THE service SHALL maintain an incident communication playbook specifying roles, approval steps, and message templates consistent with these timeframes.\n- THE service SHALL record incident timelines, decisions, and messages in an immutable audit trail for at least 2 years.\n\n## Roles and Responsibilities for Compliance\n### Role Capabilities\n| Compliance Action | member | expert | moderator | editor | admin |\n|-------------------|--------|--------|-----------|--------|-------|\n| Submit DSAR | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View own DSAR status | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Approve/deny DSAR | ❌ | ❌ | ✅ (review) | ❌ | ✅ (final) |\n| View audit logs | ❌ | ❌ | ✅ (limited) | ✅ (content ops) | ✅ (full) |\n| Modify retention schedules | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Apply account restrictions | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Publish transparency metrics | ❌ | ❌ | ❌ | ✅ (content metrics) | ✅ (full) |\n| Handle legal requests | ❌ | ❌ | ❌ | ❌ | ✅ |\n\n### Requirements (EARS)\n- THE service SHALL restrict DSAR approval authority to admin with optional moderator review as a prerequisite.\n- WHEN a moderator applies a restriction, THE service SHALL record the reason code and notify the user with appeal instructions.\n- THE service SHALL limit audit log visibility for moderators and editors to their operational scope and exclude sensitive personal data fields.\n- THE service SHALL require dual control (two-person review) for changes to retention schedules and transparency report publication.\n\n## Performance and Service Level Expectations\n### User-Perceived Performance (KST as business reference)\n- THE service SHALL provide DSAR portal responses (status retrieval) within 2 seconds under normal load.\n- THE service SHALL deliver consent preference changes and reflect them in processing decisions within 5 minutes.\n- THE service SHALL deliver incident notification emails or in-app messages within 15 minutes of the communication decision.\n\n### Operational SLAs\n- THE service SHALL maintain availability for DSAR submission endpoints 99.9% monthly, excluding planned maintenance announced 48 hours in advance.\n- THE service SHALL ensure audit log write operations succeed for 99.99% of eligible actions measured monthly.\n- THE service SHALL acknowledge lawful request intake within 1 business day and record action status changes within 1 hour of each transition.\n\n## Training, Awareness, and Governance\n- THE service SHALL conduct annual privacy and security training for moderators, editors, and admins, with completion tracking.\n- WHEN material policy changes occur, THE service SHALL issue targeted training updates within 30 days.\n- THE service SHALL designate a compliance owner for privacy and governance workflows and publish contact details for inquiries.\n\n## Risk Assessments (PIA/DPIA Triggers)\n- WHERE processing introduces high risk to individuals (e.g., new large-scale profiling, sensitive political categories, identity verification expansions), THE service SHALL conduct a privacy impact assessment prior to launch and record mitigations.\n- WHEN residual risks remain high, THE service SHALL seek legal/compliance consultation before proceeding.\n\n## Cookie and Tracker Governance\n- THE service SHALL categorize trackers into essential, analytics, and marketing; essential operates without consent strictly for service provision.\n- WHEN a user opts out of analytics/marketing trackers, THE service SHALL honor the choice for at least 6 months unless earlier preference changes are recorded.\n- THE service SHALL display per-category controls and an easily accessible consent management interface on every page.\n- WHERE applicable signals like GPC are present, THE service SHALL treat them as an opt-out for non-essential categories in that context.\n\n## Data Minimization and Retention Alignment\n- THE service SHALL align privacy retention with the business policies defined in the [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md), favoring pseudonymization and aggregation wherever feasible.\n- THE service SHALL ensure that deletion or anonymization outcomes propagate to dependent systems and analytics aggregates according to published windows.\n\n## Visual Process Diagrams (Mermaid)\n### DSAR Processing Flow\n```mermaid\ngraph LR\n  subgraph \"User Submission\"\n    A[\"Submit DSAR\"] --> B[\"Acknowledge(1h)\"]\n  end\n  subgraph \"Verification\"\n    C[\"Verify Identity\"] --> D{\"Verified?\"}\n  end\n  subgraph \"Processing\"\n    E[\"Assign Handler\"] --> F[\"Process Request\"] --> G{\"Type?\"}\n    G -->|\"Access/Portability\"| H[\"Assemble Export\"]\n    G -->|\"Rectification\"| I[\"Apply Corrections\"]\n    G -->|\"Deletion\"| J[\"Delete/Restrict\"]\n  end\n  subgraph \"Closure\"\n    K[\"Quality Review\"] --> L[\"Respond & Close\"]\n  end\n  B --> C\n  D -->|\"Yes\"| E\n  D -->|\"No\"| M[\"Close: verification_failed\"]\n  H --> K\n  I --> K\n  J --> K\n  E --> F\n  F --> G\n  K --> L\n```\n\n### Abuse Detection and Rate Limit Flow\n```mermaid\ngraph LR\n  A[\"User Action\"] --> B[\"Check Thresholds\"] --> C{\"Exceeded?\"}\n  C -->|\"No\"| D[\"Allow Action\"]\n  C -->|\"Yes\"| E[\"Block & Show Wait Time\"] --> F{\"Bot-like?\"}\n  F -->|\"No\"| G[\"Log Event\"]\n  F -->|\"Yes\"| H[\"Challenge User\"] --> I{\"Pass?\"}\n  I -->|\"Yes\"| D\n  I -->|\"No\"| J[\"Apply Restriction\"] --> K[\"Queue Review(72h)\"]\n```\n\n### Incident Communication Flow\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"Identify Incident\"] --> B[\"Classify Severity\"]\n  end\n  subgraph \"Notification\"\n    C[\"Authority Notify(≤72h)\"]\n    D[\"User Notify(≤24h)\"]\n    E[\"Status Update(6h cadence)\"]\n  end\n  subgraph \"Containment & Postmortem\"\n    F[\"Contain & Invalidate Sessions\"] --> G[\"Post-Incident Report(≤14d)\"]\n  end\n  B --> C\n  B --> D\n  D --> E\n  C --> F\n  E --> F\n  F --> G\n```\n\n## References to Related Documents\n- See the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md) for content policy definitions, enforcement triggers, and appeal processes.\n- See the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, observability, and capacity expectations that underpin compliance operations.\n- See the [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) for lifecycle stages, preservation, and disposal rules.\n\n## Compliance Notes\nInterprets laws and policies at a business-requirements level and deliberately omits technical implementation details, APIs, encryption specifics, and vendor selections. Developers retain full autonomy over how to implement these requirements.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:03.362Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"현실적인 사용자 관점의 시나리오를 제시하여 요구사항 검증과 테스트 기준을 제공하기 위함.","filename":"05-pol-econ-board-user-stories.md","documentType":"user-story","outline":["페르소나 정의(일반 회원/전문가/중재자/에디터/관리자)","핵심 시나리오(성공 경로)","보조·엣지 시나리오","오남용·남용 방지 시나리오","완료 정의(DoD) 및 수용 기준"],"audience":"development team","keyQuestions":["주요 사용자 여정에서 기대 행동과 결과는 무엇인가","엣지/실패 시나리오에서의 시스템 반응은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["자연어 중심의 사용자 관점 기술","측정 가능한 수용 기준 포함"],"content":"# pol-econ-board User Stories and Acceptance Criteria\n\nThis document provides realistic user stories for the pol-econ-board service so backend developers can implement business behavior with no ambiguity. Stories are grouped by persona and include measurable acceptance criteria using EARS (Easy Approach to Requirements Syntax). This document describes what the system should do from a user perspective; technical implementation details (architecture, APIs, database) are explicitly out of scope and at the discretion of the development team.\n\n## Document Intent and Scope\n- Purpose: Define complete, testable user stories and acceptance criteria for the primary personas using pol-econ-board.\n- Scope: Business behaviors only (inputs, validations, processing rules, outputs/notifications, timing expectations). No UI/UX specifications, no API or database schemas.\n- System Name in EARS: \"pol-econ-board\".\n- Related documents for deeper process and requirement details:\n  - See the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n  - See the [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md).\n\n## Personas\n\n| Persona | Description | Primary Goals | Key Constraints |\n|--------|-------------|---------------|-----------------|\n| Member | A registered community participant using a real name or alias. Can create/manage own posts and comments, bookmark, follow topics, vote/react, report, configure notifications. | Express opinions, discover credible content, participate in discourse, manage own content and preferences. | Must follow community rules; subject to moderation and rate limits. |\n| Expert | A verified domain expert with elevated capabilities. Inherits Member capabilities plus expert features (badge, expert topics, in-depth insights, expert Q&A). | Publish authoritative insights, propose expert topics, engage in expert Q&A, build trust. | Expert status requires verification; reputation-sensitive workflows. |\n| Moderator | Community operator responsible for rule enforcement. Can triage reports, temporarily hide/remove content, request sanctions, coordinate dispute resolution, maintain transparency logs. | Keep the community safe, fair, and compliant; resolve disputes within SLA. | Must adhere to policy thresholds and audit requirements. |\n| Editor | Content quality curator. Can edit topics/labels, manage featured collections, announcements, and pinned content; collaborates with moderators on policy issues. | Elevate quality content, maintain taxonomy consistency, manage editorial programming. | Cannot override policy enforcement; follows curation guidelines. |\n| Admin | System-wide operator. Full access to manage roles, policies, settings, legal requests, and transparency/audit; oversees health and metrics. | Govern system operations, ensure compliance and stability. | Must maintain auditability and separation of duties; sensitive operations require elevated verification. |\n\n## Story Mapping Overview (Epics by Persona)\n- Member Epics: Account onboarding, discovery & following, content authoring, interaction (comment/reaction/vote), personal library (bookmarks/reads), reporting & blocking, notifications & preferences.\n- Expert Epics: Expert verification, expert topic proposals, in-depth publications, expert Q&A participation, reputation signals.\n- Moderator Epics: Report intake & triage, actioning (hide/remove/warn/suspend requests), appeals handling, transparency log updates.\n- Editor Epics: Taxonomy management, featured/collections, announcements & sticky posts, cross-functional curation with policy alignment.\n- Admin Epics: Role & policy management, legal request workflows, audit & transparency oversight, system-wide settings.\n\n---\n\n## Core Scenarios (Happy Paths)\n\n### Member Core Scenarios\n\n1) Member Registration and Email Verification\n- User Story: As a Member, I want to register and verify my email so that I can participate in the community.\n- Acceptance Criteria (EARS):\n  - WHEN a prospective user submits valid registration details, THE pol-econ-board SHALL create a pending account and send a verification message within 5 minutes.\n  - WHEN the user follows the verification instruction within 24 hours, THE pol-econ-board SHALL activate the account and allow login immediately.\n  - IF the verification window expires, THEN THE pol-econ-board SHALL require a new verification to proceed.\n\n2) Member Login and Session Continuity\n- User Story: As a Member, I want to log in and remain signed in securely so that I can use the service without frequent interruptions.\n- Acceptance Criteria (EARS):\n  - WHEN valid credentials are submitted, THE pol-econ-board SHALL grant access and establish a session within 2 seconds under normal load.\n  - WHILE the session is active and within policy limits, THE pol-econ-board SHALL preserve user state across navigations and support silent session renewal.\n  - IF credentials are invalid or the account is inactive, THEN THE pol-econ-board SHALL deny access and provide a non-revealing reason aligned to security policy.\n\n3) Topic Following and Personalized Feed\n- User Story: As a Member, I want to follow topics and receive a personalized feed so that I can discover relevant political/economic content.\n- Acceptance Criteria (EARS):\n  - WHEN a member follows a topic, THE pol-econ-board SHALL add the topic to the member’s followed list and adjust feed composition immediately.\n  - WHILE the member has followed topics, THE pol-econ-board SHALL prioritize relevant content and present at least 20 items per page sorted by recency and relevance.\n  - IF the member unfollows a topic, THEN THE pol-econ-board SHALL remove it from the followed list and reflect the change in the next feed refresh.\n\n4) Post Drafting and Publication\n- User Story: As a Member, I want to draft and publish posts so that I can share my views.\n- Acceptance Criteria (EARS):\n  - WHEN a member saves a draft with valid required fields, THE pol-econ-board SHALL store the draft and return a stable identifier within 2 seconds.\n  - WHEN a member submits a valid draft for publication, THE pol-econ-board SHALL publish it and make it discoverable in feeds and search within 10 seconds.\n  - WHERE content exceeds policy limits (e.g., max length or restricted tags), THE pol-econ-board SHALL block publication and present policy-aligned guidance.\n\n5) Commenting and Mentions\n- User Story: As a Member, I want to comment and mention others so that I can engage in discussion.\n- Acceptance Criteria (EARS):\n  - WHEN a comment meets validation rules, THE pol-econ-board SHALL post it under the target content within 2 seconds and notify the content owner per preferences.\n  - WHERE a mention is included and the mentioned user permits mentions, THE pol-econ-board SHALL add the mention and trigger a notification.\n  - IF the target content is removed or locked, THEN THE pol-econ-board SHALL prevent new comments with a clear policy-aligned reason.\n\n6) Reactions and Voting\n- User Story: As a Member, I want to react or vote on content so that I can signal support or evaluation.\n- Acceptance Criteria (EARS):\n  - WHEN a member submits a valid reaction or vote, THE pol-econ-board SHALL record it once per member per content and update aggregate counts within 1 second.\n  - WHERE the content owner has disabled reactions or the item is archived, THE pol-econ-board SHALL prevent new reactions and communicate the state.\n  - IF duplicate or conflicting votes are attempted, THEN THE pol-econ-board SHALL keep the most recent valid state and avoid double counting.\n\n7) Bookmarking and Reading History\n- User Story: As a Member, I want to bookmark content and track reading history so that I can revisit important items.\n- Acceptance Criteria (EARS):\n  - WHEN a bookmark request is submitted, THE pol-econ-board SHALL add the item to the member’s bookmarks and confirm within 1 second.\n  - WHILE a member reads a post for at least 10 seconds or reaches 80% of content length, THE pol-econ-board SHALL mark the item as read.\n  - IF a bookmarked item is deleted or made private, THEN THE pol-econ-board SHALL retain a placeholder record with accessible metadata limitations.\n\n8) Reporting Content and Blocking Users\n- User Story: As a Member, I want to report problematic content and block certain users so that I can maintain a safe experience.\n- Acceptance Criteria (EARS):\n  - WHEN a member submits a report with a valid category and context, THE pol-econ-board SHALL enqueue the report with a timestamp and acknowledgment within 2 seconds.\n  - WHEN a member blocks another user, THE pol-econ-board SHALL prevent content and notification delivery from the blocked user to the blocker, effective immediately.\n  - IF the member tries to interact with blocked users or content, THEN THE pol-econ-board SHALL prevent the action and state the block rule.\n\n9) Notification Preferences\n- User Story: As a Member, I want to configure what notifications I receive so that I only get relevant updates.\n- Acceptance Criteria (EARS):\n  - WHEN a member updates notification preferences, THE pol-econ-board SHALL apply the changes to future notifications within 1 minute.\n  - WHERE digest mode is selected, THE pol-econ-board SHALL aggregate eligible events and deliver a summary at the configured schedule.\n  - IF a channel is disabled by the member, THEN THE pol-econ-board SHALL suppress non-mandatory notifications to that channel.\n\n### Expert Core Scenarios\n\n1) Expert Verification\n- User Story: As an Expert candidate, I want to submit credentials so that I can be verified and gain expert capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN a candidate submits required verification data, THE pol-econ-board SHALL record the application and notify reviewers within 5 minutes.\n  - WHILE the application is under review, THE pol-econ-board SHALL expose status to the applicant and allow supplemental evidence submission.\n  - IF the application is approved, THEN THE pol-econ-board SHALL assign the expert role and display the expert badge on new and existing content within 10 minutes.\n\n2) Expert Topic Proposal\n- User Story: As an Expert, I want to propose an expert topic so that specialized discussions can be curated.\n- Acceptance Criteria (EARS):\n  - WHEN an expert submits a topic proposal with required metadata, THE pol-econ-board SHALL route it for editorial review and return a tracking identifier.\n  - IF the proposal is approved, THEN THE pol-econ-board SHALL create the topic, set the proposer as a lead contributor, and publish guidelines.\n  - WHERE the proposal is rejected, THE pol-econ-board SHALL record a rationale and make it visible to the proposer.\n\n3) In-depth Insight Publication\n- User Story: As an Expert, I want to publish in-depth insights so that readers can access authoritative analysis.\n- Acceptance Criteria (EARS):\n  - WHEN an expert submits a compliant in-depth post, THE pol-econ-board SHALL publish it with expert labeling and include it in expert feeds.\n  - WHERE editorial curation flags the post, THE pol-econ-board SHALL hold publication pending review and notify the expert within 10 minutes.\n  - IF an in-depth post is updated, THEN THE pol-econ-board SHALL version the content and expose version history to authorized roles.\n\n4) Expert Q&A Participation\n- User Story: As an Expert, I want to answer questions tagged to my expertise so that I can contribute effectively.\n- Acceptance Criteria (EARS):\n  - WHEN an expert posts an answer to a tagged question, THE pol-econ-board SHALL mark it as expert-answered and notify the asker.\n  - WHERE multiple experts answer, THE pol-econ-board SHALL order answers by freshness and relevance and allow reactions/votes.\n  - IF the question is closed by policy, THEN THE pol-econ-board SHALL prevent new answers and indicate closure reason.\n\n### Moderator Core Scenarios\n\n1) Report Intake and Triage\n- User Story: As a Moderator, I want to triage incoming reports so that I can act within SLA.\n- Acceptance Criteria (EARS):\n  - WHEN a new report arrives, THE pol-econ-board SHALL place it in the triage queue with severity and category metadata immediately.\n  - WHILE a moderator is handling a report, THE pol-econ-board SHALL lock it to that moderator to prevent conflicting actions.\n  - IF the report lacks sufficient context, THEN THE pol-econ-board SHALL request more information from the reporter where appropriate.\n\n2) Provisional Hide and Removal\n- User Story: As a Moderator, I want to hide or remove policy-violating content so that the community stays safe.\n- Acceptance Criteria (EARS):\n  - WHEN a moderator applies a provisional hide under defined rules, THE pol-econ-board SHALL hide the content from public view within 1 minute and log the action.\n  - WHERE removal is warranted, THE pol-econ-board SHALL remove the content, preserve necessary evidence for audit, and notify involved parties.\n  - IF a moderator reverses an action after review, THEN THE pol-econ-board SHALL restore visibility and update transparency logs.\n\n3) Sanction Requests and Enforcement\n- User Story: As a Moderator, I want to request user sanctions so that repeat or severe violations are deterred.\n- Acceptance Criteria (EARS):\n  - WHEN a sanction request meets policy thresholds, THE pol-econ-board SHALL route it for the appropriate approval and record SLA timers.\n  - WHERE the sanction is approved, THE pol-econ-board SHALL apply the sanction (e.g., warning or suspension) and restrict affected actions immediately.\n  - IF the sanction period elapses, THEN THE pol-econ-board SHALL lift restrictions automatically and log the completion.\n\n4) Appeals Handling\n- User Story: As a Moderator, I want to process appeals so that users have a fair review channel.\n- Acceptance Criteria (EARS):\n  - WHEN a user submits an appeal within the allowed window, THE pol-econ-board SHALL acknowledge receipt and place it in an appeals queue.\n  - WHILE an appeal is pending, THE pol-econ-board SHALL pause further escalations on the underlying case where policy allows.\n  - IF the appeal is upheld, THEN THE pol-econ-board SHALL reverse actions and notify all parties; ELSE THE pol-econ-board SHALL provide rationale and next steps.\n\n### Editor Core Scenarios\n\n1) Taxonomy Management\n- User Story: As an Editor, I want to manage categories and tags so that content remains organized.\n- Acceptance Criteria (EARS):\n  - WHEN an editor updates a category or tag, THE pol-econ-board SHALL validate uniqueness and policy compliance and apply changes within 2 minutes.\n  - WHERE a category is deprecated, THE pol-econ-board SHALL migrate attached content to a designated alternative and log the mapping.\n  - IF a change would break existing references, THEN THE pol-econ-board SHALL block it and propose safe alternatives.\n\n2) Featured Collections and Pinning\n- User Story: As an Editor, I want to curate featured collections and pin announcements so that key content is highlighted.\n- Acceptance Criteria (EARS):\n  - WHEN an editor creates a featured collection with valid items, THE pol-econ-board SHALL publish the collection and expose it to eligible feeds.\n  - WHERE pinning limits are reached, THE pol-econ-board SHALL reject new pins and indicate current allocations.\n  - IF a pinned item is later removed, THEN THE pol-econ-board SHALL unpin it and update any dependent presentations.\n\n### Admin Core Scenarios\n\n1) Role and Permission Management\n- User Story: As an Admin, I want to assign roles and manage permissions so that users have appropriate capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN an admin assigns or revokes a role, THE pol-econ-board SHALL reflect the change in authorization decisions within 1 minute.\n  - WHERE conflicting role changes occur, THE pol-econ-board SHALL apply deterministic precedence per policy and log the resolution.\n  - IF an assignment fails required checks, THEN THE pol-econ-board SHALL reject it with a policy-aligned reason.\n\n2) Legal Request Handling\n- User Story: As an Admin, I want to process legal requests so that the service remains compliant.\n- Acceptance Criteria (EARS):\n  - WHEN a lawful request is recorded with required metadata, THE pol-econ-board SHALL freeze affected data changes as mandated and start fulfillment timers.\n  - WHERE disclosure is authorized, THE pol-econ-board SHALL produce the required artifacts and update the request status.\n  - IF the request is withdrawn or expires, THEN THE pol-econ-board SHALL lift holds and record the closure.\n\n---\n\n## Secondary and Edge Scenarios\n\n1) Draft Autosave and Recovery\n- User Story: As a Member, I want drafts to autosave so that I do not lose work.\n- Acceptance Criteria (EARS):\n  - WHILE a user is editing and changes are detected, THE pol-econ-board SHALL autosave at least every 30 seconds or on significant edits.\n  - IF a session ends unexpectedly, THEN THE pol-econ-board SHALL offer the most recent autosaved draft upon return.\n\n2) Version Conflicts on Edit\n- User Story: As a Member, I want safe edits when others have interacted so that I do not lose changes.\n- Acceptance Criteria (EARS):\n  - WHEN a member tries to edit a post with a newer server version, THE pol-econ-board SHALL detect the conflict and require user confirmation to proceed with merge or overwrite.\n  - IF the user cancels, THEN THE pol-econ-board SHALL preserve both the current server version and the local changes as a new draft.\n\n3) Comment Thread Locking\n- User Story: As a Moderator, I want to lock threads during review so that the discussion does not escalate.\n- Acceptance Criteria (EARS):\n  - WHEN a thread is locked, THE pol-econ-board SHALL prevent new comments and reactions and display the locked state to authorized viewers.\n  - IF the lock is lifted, THEN THE pol-econ-board SHALL restore normal interaction immediately.\n\n4) Rate Limits and Cooldowns\n- User Story: As a Member, I want clear rate limits so that I can pace my activity.\n- Acceptance Criteria (EARS):\n  - WHEN a member exceeds defined action limits, THE pol-econ-board SHALL block further attempts for the cooldown period and indicate the remaining wait time.\n  - WHERE elevated abuse risk is detected, THE pol-econ-board SHALL apply stricter temporary limits consistent with policy.\n\n5) Soft-Deleted Content References\n- User Story: As a Member, I want stable references so that links do not break unexpectedly.\n- Acceptance Criteria (EARS):\n  - WHEN content is soft-deleted, THE pol-econ-board SHALL maintain a placeholder with non-sensitive metadata to preserve discussion context where policy allows.\n  - IF hard deletion is required by policy, THEN THE pol-econ-board SHALL remove references and indicate unavailability.\n\n6) Appeal Window Boundary\n- User Story: As a Member, I want predictable appeal windows so that I can respond in time.\n- Acceptance Criteria (EARS):\n  - WHEN an action triggers an appealable decision, THE pol-econ-board SHALL show the appeal window and deadline and accept appeals until the exact cutoff.\n  - IF an appeal arrives after the deadline, THEN THE pol-econ-board SHALL reject it and provide information about next permitted steps.\n\n7) Notification Delivery Guarantees\n- User Story: As a Member, I want reliable notifications so that I do not miss important updates.\n- Acceptance Criteria (EARS):\n  - WHEN a notification-triggering event occurs, THE pol-econ-board SHALL enqueue delivery within 1 minute and attempt delivery according to channel preferences.\n  - IF delivery fails, THEN THE pol-econ-board SHALL retry per policy and record the outcome for user-visible status.\n\n8) Expert Status Revocation\n- User Story: As an Admin, I want to revoke expert status when required so that trust is maintained.\n- Acceptance Criteria (EARS):\n  - WHEN expert status is revoked, THE pol-econ-board SHALL remove the badge from existing and new content and update permissions immediately.\n  - WHERE prior content references expert status, THE pol-econ-board SHALL preserve historical accuracy in audit contexts while removing public-facing badges.\n\n---\n\n## Abuse and Misuse Prevention Scenarios\n\n1) Spam Posting and Mass Mentions\n- Story: As the Community, we need to prevent spam postings and mass mentions so that signal quality is preserved.\n- Acceptance Criteria (EARS):\n  - WHEN posting frequency or content patterns match spam heuristics, THE pol-econ-board SHALL throttle or block submission and require additional verification.\n  - WHERE mass mentions exceed policy thresholds, THE pol-econ-board SHALL block the operation and indicate limits.\n\n2) Coordinated Brigading and Vote Manipulation\n- Story: As the Community, we need to mitigate brigading and manipulation so that votes remain credible.\n- Acceptance Criteria (EARS):\n  - WHEN correlated abnormal voting is detected, THE pol-econ-board SHALL flag affected tallies for review and temporarily exclude suspicious signals from public counts.\n  - IF accounts are confirmed to be abusive, THEN THE pol-econ-board SHALL invalidate their related interactions and apply sanctions as per policy.\n\n3) Harassment and Doxxing Prevention\n- Story: As the Community, we need to prevent harassment and doxxing so that users feel safe.\n- Acceptance Criteria (EARS):\n  - WHEN content includes prohibited personal information or targeted harassment patterns, THE pol-econ-board SHALL block or remove the content and escalate to moderation.\n  - WHERE repeated harassment originates from an account, THE pol-econ-board SHALL escalate sanctions per severity ladder.\n\n4) Report Abuse and False Reporting\n- Story: As the Community, we need to prevent false reporting abuse so that moderation remains efficient.\n- Acceptance Criteria (EARS):\n  - WHEN reporting patterns from an account are repeatedly invalid, THE pol-econ-board SHALL limit reporting privileges temporarily and inform the user.\n  - IF a user’s report is validated again within a defined period, THEN THE pol-econ-board SHALL restore normal privileges.\n\n5) Election-Period Policy Safeguards\n- Story: As the Community, we need stricter safeguards during sensitive election periods so that legal and policy risks are minimized.\n- Acceptance Criteria (EARS):\n  - WHERE the system is in an election-period state, THE pol-econ-board SHALL apply heightened content checks and shorter moderation SLA for flagged items.\n  - WHEN content about elections lacks required sourcing, THE pol-econ-board SHALL hold publication pending source verification per policy.\n\n---\n\n## Definition of Done (DoD) and General Acceptance Criteria\n\n- DoD for User Stories:\n  - THE pol-econ-board SHALL meet all EARS acceptance criteria listed for the story.\n  - THE pol-econ-board SHALL include complete input validation rules, clear error states, and reversible outcomes where policy allows.\n  - THE pol-econ-board SHALL log business events necessary for audit and transparency in a user-meaningful way.\n  - THE pol-econ-board SHALL meet performance expectations stated (e.g., typical responses within 1–2 seconds; publication and indexing within stated time windows).\n  - THE pol-econ-board SHALL deliver user-facing messages that are policy-aligned and non-revealing of sensitive internals.\n\n- Cross-cutting Acceptance Criteria (applies to all stories unless noted):\n  - WHEN an operation succeeds, THE pol-econ-board SHALL provide a durable identifier for the resulting entity.\n  - IF an operation fails, THEN THE pol-econ-board SHALL provide a reason code and a recoverable next step where applicable.\n  - WHILE permissions are being changed, THE pol-econ-board SHALL ensure authorization decisions are consistent and atomic from the user perspective.\n  - WHERE data retention or legal holds apply, THE pol-econ-board SHALL respect retention windows and display appropriate availability states.\n\n---\n\n## Visual Flows (Representative)\n\n### Post Creation, Review, and Publication (Member → Editor/Moderator Interactions)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Submit For Publication\"]\n  end\n  subgraph \"Editorial/Policy Checks\"\n    D[\"Policy Validation\"] --> E{\"Compliant?\"}\n  end\n  subgraph \"Outcomes\"\n    F[\"Publish Post\"]\n    G[\"Hold For Review\"]\n    H[\"Reject With Guidance\"]\n  end\n  C --> D\n  E -->|\"Yes\"| F\n  E -->|\"Needs Review\"| G\n  E -->|\"No\"| H\n```\n\n### Report Intake and Moderation Action\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    R1[\"Member Submits Report\"] --> R2[\"Categorize & Timestamp\"]\n    R2 --> R3[\"Queue For Triage\"]\n  end\n  subgraph \"Triage\"\n    T1[\"Assign To Moderator\"] --> T2{\"Sufficient Context?\"}\n  end\n  subgraph \"Action\"\n    A1[\"Provisional Hide\"]\n    A2[\"Remove & Preserve Evidence\"]\n    A3[\"No Action\"]\n  end\n  R3 --> T1\n  T2 -->|\"Yes\"| A1\n  T2 -->|\"Yes\"| A2\n  T2 -->|\"No\"| A3\n```\n\n---\n\n## References and Consistency Statement\n- This user stories document is consistent with and should be read alongside the following:\n  - The [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md) for detailed business rules and validations.\n  - The [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md) for step-by-step process diagrams and exceptions.\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, are the responsibility of the development team. The document defines WHAT the system must do in business terms, not HOW to implement it."},"plan":"Structure per outline: 1) Personas (member, expert, moderator, editor, admin). 2) Core scenarios (successful paths) per persona with EARS acceptance criteria and measurable performance. 3) Secondary/edge scenarios including failures and recovery. 4) Abuse/misuse prevention scenarios. 5) Definition of Done (DoD) and cross-cutting acceptance criteria. Include representative Mermaid diagrams (LR orientation, subgraphs) for complex flows: publishing, moderation, verification, notification preferences. Ensure links to related requirements and flows documents using descriptive titles.","review":"Enhance for completeness and implementation readiness. Requirements: 1) Use EARS for all applicable acceptance criteria (WHEN/WHILE/IF/THEN/WHERE, with THE and SHALL). 2) Expand any brief sections to cover full workflows, inputs, validations, outputs, timing and performance expectations. 3) Include user-facing error handling and recovery paths. 4) Ensure business rules are specific, measurable, and unambiguous; remove vague language. 5) Validate Mermaid diagrams: every label in double quotes, no spaces between brackets/braces and quotes, proper arrows (--> or -.-> or ==>), labeled edges with -->|\"Label\"| syntax, no nested double quotes. Prefer graph LR and subgraphs. 6) Add missing business processes aligned to related functional documents: search/filter, author follow/unfollow, edit/delete own content, scheduled publishing, transparency reporting, election-period rules, device/session management, notification preferences, expert COI disclosures. 7) Maintain business-only scope: no APIs, DB schemas, or technical architecture. 8) Use descriptive link texts in en-US and relative paths only. 9) Keep developer autonomy note implicit in content (no extra developer notes beyond business-scope statement). 10) Document must be self-contained, 5,000–30,000+ characters, targeting backend developers, in en-US.","content":"# pol-econ-board User Stories and Acceptance Criteria\n\nUser stories define complete, testable behaviors for pol-econ-board in business terms using EARS. All statements specify WHAT the system must do; all technical implementation decisions (architecture, APIs, database design) remain at the discretion of the development team.\n\n## Personas\n\n| Persona | Description | Primary Goals | Key Constraints | Anti-Goals |\n|--------|-------------|---------------|-----------------|-----------|\n| Member | Registered participant (real name or alias). Can create/manage own posts and comments, bookmark, follow topics/authors, vote/react, report, configure notifications. | Express opinions, discover credible content, manage personal library, receive relevant updates. | Must follow community rules; subject to rate limits and moderation; new-account restrictions. | Cannot moderate other users; cannot bypass policy checks; cannot view staff-only content. |\n| Expert | Verified political/economic domain expert; inherits Member capabilities with expert features (badge, expert topics, in-depth insights, expert Q&A). | Publish authoritative analysis, lead expert topics, answer community questions, build reputation. | Verification required; disclosure of affiliations when relevant; higher quality bar. | Cannot override policy enforcement; cannot edit others’ content without policy-based role. |\n| Moderator | Community operator enforcing rules. Triage reports, hide/remove content, request sanctions, manage disputes, maintain transparency logs. | Keep community safe and compliant; meet moderation SLAs; ensure due process. | Must follow sanction ladder and audit requirements; limited to permitted actions. | Cannot execute permanent bans without admin approval; cannot alter editorial curation. |\n| Editor | Content quality curator. Manage taxonomy (categories/tags), featured collections, announcements, pinned items; collaborate with moderators for policy violations. | Elevate high-signal content, maintain taxonomy hygiene, run curated programs. | Subject to pin/feature quotas; cannot issue user sanctions alone. | Cannot remove content for policy reasons without moderation; cannot change roles. |\n| Admin | System-wide operator. Manage roles/policies/settings, legal requests, transparency/audit oversight, system health indicators. | Govern operations, ensure compliance, publish transparency. | Separation of duties; sensitive actions require verification; audit logging for all admin actions. | Cannot skip transparency/audit requirements; cannot disable appeals process without policy basis. |\n\n## Core Scenarios (Happy Paths)\n\n### Member Core Scenarios\n\n1) Registration and Email Verification\n- User Story: As a Member, register and verify email to participate.\n- Acceptance Criteria (EARS):\n  - WHEN valid registration details are submitted, THE pol-econ-board SHALL create a pending account and send a verification message within 5 minutes.\n  - WHEN verification is completed within 24 hours, THE pol-econ-board SHALL activate the account and allow login immediately.\n  - IF the verification window expires, THEN THE pol-econ-board SHALL require a new verification before enabling login.\n\n2) Login, Session Continuity, and Device Awareness\n- User Story: As a Member, log in securely and maintain session without frequent interruptions.\n- Acceptance Criteria (EARS):\n  - WHEN valid credentials are submitted, THE pol-econ-board SHALL grant access and establish a session within 2 seconds under normal load.\n  - WHILE the session remains within policy limits, THE pol-econ-board SHALL preserve state and support silent token renewal.\n  - WHERE device session visibility is enabled, THE pol-econ-board SHALL list active sessions with device label, approximate location, and last activity.\n  - WHEN a user chooses log out from all devices, THE pol-econ-board SHALL revoke all active sessions within 60 seconds and confirm completion.\n\n3) Topic and Author Following with Personalized Feed\n- User Story: As a Member, follow topics and authors to personalize discovery.\n- Acceptance Criteria (EARS):\n  - WHEN a topic or author is followed, THE pol-econ-board SHALL update the subscription list and adjust feed composition on the next refresh.\n  - WHILE followed items exist, THE pol-econ-board SHALL present at least 20 items per page prioritized by recency and relevance.\n  - IF a topic or author is unfollowed, THEN THE pol-econ-board SHALL remove it from the subscription list and reflect the change on next feed build.\n\n4) Post Drafting, Editing Window, and Publication\n- User Story: As a Member, draft, edit, and publish posts.\n- Acceptance Criteria (EARS):\n  - WHEN a draft with valid required fields is saved, THE pol-econ-board SHALL persist it and return a stable identifier within 2 seconds.\n  - WHEN a valid draft is submitted for publication, THE pol-econ-board SHALL publish it and include it in feeds and search within 10 seconds subject to policy checks.\n  - WHERE a post is edited within 10 minutes of publication, THE pol-econ-board SHALL apply a silent update without feed bump; otherwise apply normal bump.\n  - IF content exceeds policy limits (length, restricted tags, missing required sources), THEN THE pol-econ-board SHALL block publication and enumerate the violated rules in user language.\n\n5) Commenting and Mentions\n- User Story: As a Member, comment and @mention others for discussion.\n- Acceptance Criteria (EARS):\n  - WHEN a comment meets validation rules, THE pol-econ-board SHALL post it within 2 seconds and notify recipients per preferences.\n  - WHERE a mention is included and the target permits mentions, THE pol-econ-board SHALL tag the mention and trigger a notification.\n  - IF the target content is removed or locked, THEN THE pol-econ-board SHALL prevent new comments and provide a policy-aligned reason.\n\n6) Reactions and Voting\n- User Story: As a Member, react or vote to signal evaluation.\n- Acceptance Criteria (EARS):\n  - WHEN a valid reaction or vote is submitted, THE pol-econ-board SHALL record it once per user per item and update aggregate counts within 1 second.\n  - WHERE reactions are disabled or the item is archived, THE pol-econ-board SHALL prevent new reactions and indicate the state.\n  - IF a conflicting vote is attempted, THEN THE pol-econ-board SHALL keep the most recent valid state without double counting.\n\n7) Bookmarks and Reading History\n- User Story: As a Member, bookmark and track reading to revisit items.\n- Acceptance Criteria (EARS):\n  - WHEN a bookmark request is submitted, THE pol-econ-board SHALL create it and confirm within 1 second.\n  - WHILE a post is read for ≥ 10 seconds or ≥ 80% of length, THE pol-econ-board SHALL mark it as read.\n  - IF a bookmarked item is deleted or made private, THEN THE pol-econ-board SHALL retain a placeholder with permitted metadata.\n\n8) Reporting Content and Blocking Users\n- User Story: As a Member, report problematic content and block users for safety.\n- Acceptance Criteria (EARS):\n  - WHEN a report with valid category and context is submitted, THE pol-econ-board SHALL enqueue it with timestamp and return acknowledgment within 2 seconds.\n  - WHEN a user is blocked, THE pol-econ-board SHALL immediately prevent delivery of their content and notifications to the blocker.\n  - IF interaction with blocked users or content is attempted, THEN THE pol-econ-board SHALL prevent the action and state the block rule.\n\n9) Notification Preferences and Quiet Hours\n- User Story: As a Member, configure notifications to limit noise.\n- Acceptance Criteria (EARS):\n  - WHEN notification preferences are updated, THE pol-econ-board SHALL apply changes to future notifications within 1 minute.\n  - WHERE digest mode is selected, THE pol-econ-board SHALL aggregate eligible events and deliver per configured schedule.\n  - IF a channel is disabled, THEN THE pol-econ-board SHALL suppress non-mandatory notifications to that channel and confirm suppression.\n  - WHERE quiet hours are enabled, THE pol-econ-board SHALL defer non-critical notifications until quiet hours end.\n\n10) Search, Sort, and Filter\n- User Story: As a Member, find relevant content efficiently.\n- Acceptance Criteria (EARS):\n  - WHEN a search query up to 200 characters is submitted with optional filters (category, tag, author, role=expert, date range, min reaction), THE pol-econ-board SHALL return a results page within 1 second for common queries and within 3 seconds for complex filters.\n  - WHERE sorting is applied, THE pol-econ-board SHALL support Newest, Oldest, Most reacted, and Most agreed orderings.\n  - IF filters are invalid (e.g., inverted date range), THEN THE pol-econ-board SHALL reject the request and present corrective guidance.\n\n11) Edit and Delete Own Content\n- User Story: As a Member, manage posts and comments responsibly.\n- Acceptance Criteria (EARS):\n  - WHEN a published post is edited, THE pol-econ-board SHALL create a new version and maintain prior versions in history accessible to authorized roles.\n  - WHEN own post is deleted, THE pol-econ-board SHALL soft-delete immediately and preserve a 30-day restoration window.\n  - WHEN own comment is deleted, THE pol-econ-board SHALL soft-delete and preserve a 14-day restoration window, leaving a placeholder.\n\n12) Account Security: Password Reset and Email Change\n- User Story: As a Member, recover access and maintain up-to-date contact.\n- Acceptance Criteria (EARS):\n  - WHEN a password reset is requested, THE pol-econ-board SHALL send a single-use token and accept a new password within 30 minutes.\n  - WHEN email change is initiated, THE pol-econ-board SHALL require re-authentication and verification of the new email before updating contact.\n\n### Expert Core Scenarios\n\n1) Expert Verification Lifecycle\n- User Story: As an Expert candidate, submit credentials to gain expert capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN required verification data is submitted, THE pol-econ-board SHALL record the application and notify reviewers within 5 minutes.\n  - WHILE under review, THE pol-econ-board SHALL expose status and allow supplemental evidence.\n  - IF approved, THEN THE pol-econ-board SHALL assign the expert role and display the badge on new and existing content within 10 minutes.\n\n2) Conflict of Interest (COI) Disclosure\n- User Story: As an Expert, disclose affiliations to maintain trust.\n- Acceptance Criteria (EARS):\n  - WHEN a post discusses entities with potential COI, THE pol-econ-board SHALL require affiliation disclosure before publication.\n  - IF disclosure is missing for flagged contexts, THEN THE pol-econ-board SHALL hold publication and request disclosure.\n\n3) Expert Topic Proposal and Leadership\n- User Story: As an Expert, propose specialized topics and lead content.\n- Acceptance Criteria (EARS):\n  - WHEN a topic proposal with required metadata is submitted, THE pol-econ-board SHALL route it for editorial review and return a tracking ID.\n  - IF approved, THEN THE pol-econ-board SHALL create the topic, assign the proposer as lead contributor, and publish guidelines.\n  - WHERE rejected, THE pol-econ-board SHALL record rationale visible to the proposer.\n\n4) In-depth Insight Publication and Versioning\n- User Story: As an Expert, publish in-depth insights with expert labeling.\n- Acceptance Criteria (EARS):\n  - WHEN a compliant expert post is submitted, THE pol-econ-board SHALL publish it with expert labeling and include it in expert feeds.\n  - WHERE curation flags the post, THE pol-econ-board SHALL hold publication pending review and notify within 10 minutes.\n  - IF updated after publication, THEN THE pol-econ-board SHALL version the content and expose version history to authorized roles.\n\n5) Expert Q&A Participation\n- User Story: As an Expert, answer tagged questions effectively.\n- Acceptance Criteria (EARS):\n  - WHEN posting an answer to a tagged question, THE pol-econ-board SHALL mark it expert-answered and notify the asker.\n  - WHERE multiple experts answer, THE pol-econ-board SHALL order by freshness and relevance and allow reactions/votes.\n  - IF the question is closed by policy, THEN THE pol-econ-board SHALL prevent new answers and indicate closure reason.\n\n### Moderator Core Scenarios\n\n1) Report Intake and Triage\n- User Story: As a Moderator, triage incoming reports to act within SLA.\n- Acceptance Criteria (EARS):\n  - WHEN a new report arrives, THE pol-econ-board SHALL place it in the triage queue with severity and category metadata immediately.\n  - WHILE a moderator handles a report, THE pol-econ-board SHALL lock it to that moderator to prevent conflicting actions.\n  - IF the report lacks sufficient context, THEN THE pol-econ-board SHALL request more information from the reporter.\n\n2) Provisional Hide, Removal, and Restoration\n- User Story: As a Moderator, hide or remove violating content and restore if appropriate.\n- Acceptance Criteria (EARS):\n  - WHEN a provisional hide is applied under rules, THE pol-econ-board SHALL hide the content within 1 minute and log the action.\n  - WHERE removal is warranted, THE pol-econ-board SHALL remove content, preserve audit evidence, and notify involved parties.\n  - IF an action is reversed after review, THEN THE pol-econ-board SHALL restore visibility and update transparency logs.\n\n3) Sanction Requests and Enforcement\n- User Story: As a Moderator, request sanctions to deter violations.\n- Acceptance Criteria (EARS):\n  - WHEN a sanction request meets thresholds, THE pol-econ-board SHALL route it for approval and start SLA timers.\n  - WHERE a sanction is approved, THE pol-econ-board SHALL apply it and restrict affected actions immediately.\n  - IF the sanction period elapses, THEN THE pol-econ-board SHALL lift restrictions automatically and log completion.\n\n4) Appeals Handling\n- User Story: As a Moderator, process appeals to ensure fairness.\n- Acceptance Criteria (EARS):\n  - WHEN an appeal is submitted within the window, THE pol-econ-board SHALL acknowledge receipt and place it in an appeals queue.\n  - WHILE an appeal is pending, THE pol-econ-board SHALL pause further escalations where policy allows.\n  - IF the appeal is upheld, THEN THE pol-econ-board SHALL reverse actions and notify parties; ELSE THE pol-econ-board SHALL provide rationale and next steps.\n\n5) Election-Period Triage\n- User Story: As a Moderator, apply heightened standards during election periods.\n- Acceptance Criteria (EARS):\n  - WHERE the system is in election-period state, THE pol-econ-board SHALL prioritize flagged items and shorten internal review timers according to policy.\n  - WHEN content about elections lacks required sourcing, THE pol-econ-board SHALL hold publication pending verification.\n\n### Editor Core Scenarios\n\n1) Taxonomy Management and Deprecation\n- User Story: As an Editor, manage categories, tags, and deprecations.\n- Acceptance Criteria (EARS):\n  - WHEN a category/tag update is submitted, THE pol-econ-board SHALL validate uniqueness and policy compliance and apply changes within 2 minutes.\n  - WHERE a category is deprecated, THE pol-econ-board SHALL migrate attached content to a designated alternative and log mappings.\n  - IF a change would break references, THEN THE pol-econ-board SHALL block it and propose safe alternatives.\n\n2) Featured Collections, Pinning, and Rotation\n- User Story: As an Editor, curate featured sets and manage pins.\n- Acceptance Criteria (EARS):\n  - WHEN a featured collection with valid items is created, THE pol-econ-board SHALL publish it and expose it to eligible feeds.\n  - WHERE pinning limits are reached, THE pol-econ-board SHALL reject new pins and indicate current allocations.\n  - IF a pinned item expires or is removed, THEN THE pol-econ-board SHALL unpin it and update dependent placements.\n\n3) Scheduled Publishing and Announcements\n- User Story: As an Editor, schedule posts and publish announcements.\n- Acceptance Criteria (EARS):\n  - WHEN a scheduled publish time in Asia/Seoul is set, THE pol-econ-board SHALL publish within the scheduled minute barring policy holds.\n  - WHERE an announcement is created by authorized roles, THE pol-econ-board SHALL display it to all users and log publish/unpublish events.\n\n### Admin Core Scenarios\n\n1) Role and Permission Management\n- User Story: As an Admin, assign roles and manage permissions appropriately.\n- Acceptance Criteria (EARS):\n  - WHEN a role is assigned or revoked, THE pol-econ-board SHALL reflect the change in authorization decisions within 1 minute.\n  - WHERE conflicting role changes occur, THE pol-econ-board SHALL apply deterministic precedence per policy and log resolution.\n  - IF assignment checks fail, THEN THE pol-econ-board SHALL reject the change with a policy-aligned reason.\n\n2) Legal Request and Transparency Reporting\n- User Story: As an Admin, process legal requests and publish transparency data.\n- Acceptance Criteria (EARS):\n  - WHEN a lawful request is recorded with required metadata, THE pol-econ-board SHALL freeze affected data changes and start fulfillment timers.\n  - WHERE disclosure is authorized, THE pol-econ-board SHALL produce required artifacts and update status.\n  - IF the request is withdrawn or expires, THEN THE pol-econ-board SHALL lift holds and record closure.\n  - WHEN the monthly transparency report is due, THE pol-econ-board SHALL publish aggregated moderation metrics by the policy deadline.\n\n---\n\n## Secondary and Edge Scenarios\n\n1) Draft Autosave and Recovery\n- Acceptance Criteria (EARS):\n  - WHILE editing and changes are detected, THE pol-econ-board SHALL autosave at least every 30 seconds or on significant edits.\n  - IF a session ends unexpectedly, THEN THE pol-econ-board SHALL offer the most recent autosaved draft upon return.\n\n2) Version Conflicts on Edit\n- Acceptance Criteria (EARS):\n  - WHEN an edit conflicts with a newer server version, THE pol-econ-board SHALL detect the conflict and require confirmation to merge or overwrite.\n  - IF the user cancels, THEN THE pol-econ-board SHALL preserve the server version and local changes as a new draft.\n\n3) Comment Thread Locking\n- Acceptance Criteria (EARS):\n  - WHEN a thread is locked, THE pol-econ-board SHALL prevent new comments and reactions and display the locked state to authorized viewers.\n  - IF the lock is lifted, THEN THE pol-econ-board SHALL restore normal interaction immediately.\n\n4) Rate Limits and Cooldowns\n- Acceptance Criteria (EARS):\n  - WHEN defined action limits are exceeded, THE pol-econ-board SHALL block further attempts for the cooldown period and indicate remaining wait time.\n  - WHERE elevated abuse risk is detected, THE pol-econ-board SHALL apply stricter temporary limits consistent with policy.\n\n5) Soft-Deleted Content References\n- Acceptance Criteria (EARS):\n  - WHEN content is soft-deleted, THE pol-econ-board SHALL maintain a placeholder with non-sensitive metadata where policy allows.\n  - IF hard deletion is required by policy, THEN THE pol-econ-board SHALL remove references and indicate unavailability.\n\n6) Appeal Window Boundary\n- Acceptance Criteria (EARS):\n  - WHEN an action triggers an appealable decision, THE pol-econ-board SHALL show the appeal window and accept appeals until the exact cutoff.\n  - IF an appeal arrives after the deadline, THEN THE pol-econ-board SHALL reject it and provide information about next permitted steps.\n\n7) Notification Delivery Guarantees and Quiet Hours\n- Acceptance Criteria (EARS):\n  - WHEN a triggering event occurs, THE pol-econ-board SHALL enqueue notification delivery within 1 minute and attempt delivery according to preferences.\n  - IF delivery fails, THEN THE pol-econ-board SHALL retry per policy and record the outcome for user-visible status.\n  - WHERE quiet hours apply, THE pol-econ-board SHALL defer non-critical deliveries until quiet hours end.\n\n8) Expert Status Revocation\n- Acceptance Criteria (EARS):\n  - WHEN expert status is revoked, THE pol-econ-board SHALL remove the badge from new and existing public views and update permissions immediately.\n  - WHERE prior content references expert status, THE pol-econ-board SHALL preserve historical accuracy in audit contexts while removing public-facing badges.\n\n9) Duplicate Submission Protection and Idempotency\n- Acceptance Criteria (EARS):\n  - WHEN the same action is detected as a retry within 30 seconds, THE pol-econ-board SHALL return the prior success identifier without duplicating side effects.\n  - IF a duplicate post is detected by similarity within 5 minutes, THEN THE pol-econ-board SHALL block publication and offer options to edit, merge, or discard.\n\n10) Offline and Intermittent Connectivity\n- Acceptance Criteria (EARS):\n  - WHEN connectivity is lost during draft editing, THE pol-econ-board SHALL preserve the last confirmed version and surface a reconciliation prompt on restore.\n  - WHEN connectivity resumes, THE pol-econ-board SHALL synchronize pending actions in submission order with idempotency.\n\n---\n\n## Abuse and Misuse Prevention Scenarios\n\n1) Spam Posting and Mass Mentions\n- Acceptance Criteria (EARS):\n  - WHEN posting frequency or content patterns match spam heuristics, THE pol-econ-board SHALL throttle or block submission and require additional verification.\n  - WHERE mass mentions exceed policy thresholds, THE pol-econ-board SHALL block the operation and indicate limits.\n\n2) Coordinated Brigading and Vote Manipulation\n- Acceptance Criteria (EARS):\n  - WHEN correlated abnormal voting is detected, THE pol-econ-board SHALL flag tallies for review and temporarily exclude suspicious signals from public counts.\n  - IF accounts are confirmed abusive, THEN THE pol-econ-board SHALL invalidate related interactions and apply sanctions per policy.\n\n3) Harassment and Doxxing Prevention\n- Acceptance Criteria (EARS):\n  - WHEN content includes prohibited personal information or targeted harassment patterns, THE pol-econ-board SHALL block or remove the content and escalate to moderation.\n  - WHERE repeated harassment originates from an account, THE pol-econ-board SHALL escalate sanctions per severity ladder.\n\n4) False Reporting Abuse\n- Acceptance Criteria (EARS):\n  - WHEN reporting patterns from an account are repeatedly invalid, THE pol-econ-board SHALL limit reporting privileges temporarily and inform the user.\n  - IF a subsequent report is validated within a defined period, THEN THE pol-econ-board SHALL restore normal privileges.\n\n5) Election-Period Safeguards\n- Acceptance Criteria (EARS):\n  - WHERE the system is in election-period state, THE pol-econ-board SHALL apply heightened content checks and shorter moderation SLAs for flagged items.\n  - WHEN election-related content lacks required sourcing, THE pol-econ-board SHALL hold publication pending verification.\n\n6) Sockpuppeting and Evasion\n- Acceptance Criteria (EARS):\n  - WHEN evasion of sanctions via new accounts is detected, THE pol-econ-board SHALL link related accounts for enforcement and apply escalated sanctions per policy.\n\n---\n\n## Definition of Done (DoD) and Cross-Cutting Acceptance Criteria\n\n- DoD per story\n  - THE pol-econ-board SHALL satisfy all EARS acceptance criteria defined for the story.\n  - THE pol-econ-board SHALL implement input validation rules, clear error states, and reversible outcomes where policy allows.\n  - THE pol-econ-board SHALL log business events necessary for audit and transparency with durable identifiers.\n  - THE pol-econ-board SHALL meet performance expectations (e.g., common actions within 1–2 seconds P95; publication/indexing within stated windows).\n  - THE pol-econ-board SHALL present policy-aligned user messages without revealing sensitive internals.\n\n- Cross-cutting criteria\n  - WHEN an operation succeeds, THE pol-econ-board SHALL return a durable identifier referencing the resulting entity.\n  - IF an operation fails, THEN THE pol-econ-board SHALL provide a reason code and a recoverable next step where applicable.\n  - WHILE permissions are being changed, THE pol-econ-board SHALL keep authorization decisions consistent and atomic from the user perspective.\n  - WHERE data retention or legal holds apply, THE pol-econ-board SHALL respect retention windows and display availability states.\n  - WHERE localization applies, THE pol-econ-board SHALL provide messages in the user’s preferred language with consistent terminology.\n  - WHERE accessibility applies, THE pol-econ-board SHALL include textual equivalents for non-text signals in user-facing messages.\n\n---\n\n## Visual Flows (Representative)\n\n### Post Creation, Review, and Publication (Member → Editor/Moderator)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Submit For Publication\"]\n  end\n  subgraph \"Editorial/Policy Checks\"\n    D[\"Policy Validation\"] --> E{\"Compliant?\"}\n  end\n  subgraph \"Outcomes\"\n    F[\"Publish Post\"]\n    G[\"Hold For Review\"]\n    H[\"Reject With Guidance\"]\n  end\n  C --> D\n  E -->|\"Yes\"| F\n  E -->|\"Needs Review\"| G\n  E -->|\"No\"| H\n```\n\n### Report Intake and Moderation Action\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    R1[\"Member Submits Report\"] --> R2[\"Categorize & Timestamp\"]\n    R2 --> R3[\"Queue For Triage\"]\n  end\n  subgraph \"Triage\"\n    T1[\"Assign To Moderator\"] --> T2{\"Sufficient Context?\"}\n  end\n  subgraph \"Action\"\n    A1[\"Provisional Hide\"]\n    A2[\"Remove & Preserve Evidence\"]\n    A3[\"No Action\"]\n  end\n  R3 --> T1\n  T2 -->|\"Yes\"| A1\n  T2 -->|\"Yes\"| A2\n  T2 -->|\"No\"| A3\n```\n\n### Expert Verification and COI Disclosure\n```mermaid\ngraph LR\n  subgraph \"Application\"\n    V1[\"Submit Verification Data\"] --> V2[\"Record & Notify Reviewers\"]\n  end\n  subgraph \"Review\"\n    V3[\"Review Credentials\"] --> V4{\"Approve?\"}\n  end\n  subgraph \"Outcomes\"\n    V5[\"Assign Expert Role\"]\n    V6[\"Request More Evidence\"]\n    V7[\"Reject With Rationale\"]\n  end\n  V2 --> V3\n  V4 -->|\"Yes\"| V5\n  V4 -->|\"No\"| V7\n  V3 --> V6\n```\n\n### Notification Preferences and Quiet Hours\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    P1[\"Open Preferences\"] --> P2[\"Set Categories & Channels\"]\n    P2 --> P3[\"Enable Quiet Hours\"]\n    P2 --> P4[\"Select Digest Frequency\"]\n  end\n  subgraph \"Evaluation\"\n    E1[\"Event Triggered\"] --> E2[\"Check Preferences\"]\n    E2 --> E3{\"Suppress?\"}\n  end\n  subgraph \"Delivery\"\n    D1[\"Queue In-App\"]\n    D2[\"Queue Email\"]\n  end\n  E3 -->|\"Yes\"| E4[\"Defer or Suppress\"]\n  E3 -->|\"No\"| D1\n  E3 -->|\"No\"| D2\n```\n\n---\n\n## Related References\n- Functional feature details: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md)\n- Process diagrams and exceptions: [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md)\n\nBusiness-scope statement: content specifies WHAT pol-econ-board must do from a user perspective; developers retain full autonomy over technical implementation, including architecture, APIs, and database design.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:13.812Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"커뮤니티 운영 원칙과 중재 기준을 합의된 규범으로 문서화하여 일관 집행을 보장하기 위함.","filename":"07-pol-econ-board-community-governance-and-moderation.md","documentType":"requirement","outline":["커뮤니티 규칙과 허용/금지 콘텐츠 정의","정치적 민감 콘텐츠 가이드(사실성·출처·표현 수위)","신고 분류 체계와 처리 SLA","제재 수위표(경고/일시정지/영구 제재)와 트리거","투명성 보고 및 로그 공개 원칙","이의제기·재검토·복구 절차","선거기간 특별정책(국내 법·정책 준수)"],"audience":"development team","keyQuestions":["어떤 콘텐츠가 허용/금지되는가","신고 처리와 제재 집행의 기준과 기한은 무엇인가","이의제기와 복구는 어떻게 진행되는가"],"detailLevel":"detailed specification","relatedDocuments":["04-pol-econ-board-functional-requirements.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 제재/중재 요구사항 정의","정책·규정 준수 관점 강조"],"content":"# Community Governance and Moderation Requirements (pol-econ-board)\n\nThis document defines business requirements for community governance and moderation on pol-econ-board. It describes WHAT the system must do in business terms to ensure consistent enforcement, user transparency, and compliance. All technical implementation decisions (architecture, APIs, database design, and infrastructure) are at the discretion of the development team.\n\n## 1) Document Scope and Principles\n- Purpose: Establish unambiguous rules and processes for content governance, reporting, moderation actions, sanctions, transparency, and appeals, including special rules during election periods.\n- Scope: Business requirements only; no technical specifications. Applies to all user-generated content (UGC) including posts, comments, replies, titles, tags, attachments, profile bios, and display names.\n- Principles:\n  - Legality: Prohibit unlawful content; comply with applicable domestic regulations in the service’s primary jurisdiction.\n  - Truthfulness: Encourage evidence-based discourse; label and curb unverified or manipulative content without suppressing legitimate opinion.\n  - Proportionality: Apply sanctions progressively, proportional to severity and recurrence.\n  - Due process: Provide clear reason codes, timely decisions, and appeal channels.\n  - Transparency: Publish aggregated moderation statistics and provide user-facing case histories.\n\n## 2) User Roles and Governance Responsibilities (Business)\n- member: Can create/report content, block users, and receive sanctions. No authority to sanction others.\n- expert: All member capabilities plus ability to propose expert topics, post in-depth research, answer expert Q&A. Held to higher disclosure standards for affiliations/conflicts.\n- moderator: Operates moderation queue, can hide/remove content, issue warnings and suspensions up to 30 days, manage disputes, and maintain transparency logs.\n- editor: Curates featured content, manages announcements/pinned posts, edits topics/tags. May hide content for editorial quality but cannot issue user sanctions; must escalate policy violations to moderator.\n- admin: Full oversight, manages roles/policies, handles legal requests, may impose permanent sanctions, and approves special election-period configurations.\n\nEARS Requirements (Role Responsibilities)\n- THE governance subsystem SHALL enforce 역할별 권한 한계와 승인 흐름을 기반으로 모든 중재 액션을 기록한다.\n- WHERE 사용자 역할이 \"editor\", THE 시스템 SHALL 제한 사용자 제재 권한을 콘텐츠 임시 숨김으로 한정한다.\n- WHERE 사용자 역할이 \"moderator\", THE 시스템 SHALL 허용된 범위 내 제재(경고, 24h/7d/30d 정지)만 집행 가능하게 한다.\n- WHERE 사용자 역할이 \"admin\", THE 시스템 SHALL 영구 제재와 정책 변경 승인 액션을 허용한다.\n\n## 3) Community Rules: Allowed/Prohibited Content Definitions\nCategories are defined to be applied to any UGC.\n\n3.1 Allowed with Expectations\n- Opinion and Analysis: Allowed with clear subjective framing.\n- Critique of Public Policy/Officials: Allowed; personal data exposure prohibited.\n- Satire or Parody: Allowed when labeled and not misleading as fact.\n\n3.2 Requires Labels/Disclaimers (Mitigation)\n- Unverified Claims: Must include source request label; may be down-ranked until sourced.\n- Polls/Surveys: Must include methodology disclosure label.\n- Financial/Economic Advice: Must include non-advisory disclaimer label.\n\n3.3 Prohibited Content (Immediate Action)\n- Illegal Content: Threats, incitement to violence, doxxing, non-consensual personal information, targeted harassment, explicit discrimination/hate against protected classes, sexual exploitation, and unlawful solicitation.\n- Misinformation with Harm Potential: Fabricated facts presented as truth causing imminent harm (e.g., public safety, election interference tactics).\n- Spam/Manipulation: Mass posting, link farming, bot-like behavior, undisclosed paid political content, astroturfing.\n- Copyright Violation: Unauthorized reproduction where rights holder objection is likely.\n\nEARS Requirements (Content Classification)\n- THE governance subsystem SHALL maintain 표준 위반 코드 목록(예: ILLEGAL_THREAT, HATE_SPEECH, DOXXING, MISINFO_HARM, SPAM, COPYRIGHT, OFF_TOPIC, LOW_QUALITY).\n- WHEN 콘텐츠가 금지 카테고리로 분류되면, THE 시스템 SHALL 즉시 노출을 차단하고 검토 대기 상태로 전환한다.\n- WHEN 콘텐츠가 라벨 필요 카테고리로 분류되면, THE 시스템 SHALL 적절한 라벨/면책을 부착하고 알고리즘 노출을 제한한다.\n- IF 분류가 불확실하면, THEN THE 시스템 SHALL 편향 최소화를 위해 임시 라벨 \"Unverified\"를 적용하고 리뷰 큐로 전달한다.\n\n## 4) Political-Sensitive Content Guidelines (Factuality/Source/Tone)\n4.1 Factuality\n- Assertions of fact must be verifiable by reliable sources (primary records, reputable media, official statistics).\n- Distinguish fact from opinion clearly in the content metadata labels.\n\n4.2 Sourcing\n- For political claims, provide source citations (URL, publication name, date). If missing, content is labeled Unverified until supplied.\n\n4.3 Expression Level\n- Permit robust debate; prohibit dehumanizing language, slurs, calls for violence, and targeted harassment.\n\nEARS Requirements (Political-Sensitive)\n- WHEN 사용자가 정치적 사실 주장 콘텐츠를 게시하면, THE 시스템 SHALL 출처 필드를 지원하고 미기재 시 \"Unverified\" 라벨을 적용한다.\n- WHEN 사용자가 출처를 추가 제출하면, THE 시스템 SHALL 라벨을 \"Sourced\"로 갱신하고 노출 제한을 해제한다 within 1 hour of submission.\n- IF 콘텐츠에 비인간화 표현 또는 폭력 선동이 탐지되면, THEN THE 시스템 SHALL 즉시 숨김 처리하고 고심각도 큐로 보낸다.\n\n## 5) Reporting Taxonomy and Processing SLAs\n5.1 Report Types (Reason Codes)\n- Safety: Threat/Violence, Doxxing, Harassment\n- Integrity: Hate Speech, Misinformation, Copyright\n- Quality: Spam, Off-topic, Low-quality/Noise\n- Election Integrity: Undisclosed paid political content, False procedural claims\n\n5.2 Reporter Credibility Tiers (Business Concept)\n- Tier A: Report accuracy ≥ 80% in last 90 days or verified expert.\n- Tier B: 50–79%.\n- Tier C: <50% or new reporters.\n\n5.3 SLAs and Auto-Actions\n- High Severity (Safety, Election Integrity): auto-hide threshold = 5 unique reports within 60 minutes including ≥2 Tier A, or 1 admin/mod immediate action.\n- Medium Severity (Hate, Misinformation, Copyright): soft-hide threshold = 8 unique reports within 6 hours including ≥2 Tier B+.\n- Low Severity (Spam/Off-topic/Quality): queue-only, no auto-hide; apply rate-limit if 12 reports within 24 hours.\n\nEARS Requirements (Reporting & SLA)\n- WHEN 동일 콘텐츠가 고심각도 사유로 60분 내 5건 이상 신고되고 그중 2건 이상이 Tier A이면, THE 시스템 SHALL 즉시 자동 숨김 처리한다 within 1 minute.\n- WHEN 동일 콘텐츠가 중간 심각도 사유로 6시간 내 8건 이상 신고되고 그중 2건 이상이 Tier B 이상이면, THE 시스템 SHALL 소프트 숨김 처리하고 검토 대기 상태로 전환한다.\n- WHEN 동일 작성자가 24시간 내 3건 이상 스팸 신고가 유효로 판정되면, THE 시스템 SHALL 24시간 게시 제한을 적용한다.\n- THE governance subsystem SHALL 모든 신고에 대해 케이스 ID를 생성하고 생성 시각, 신고 분류, 신고자 티어를 기록한다.\n\n## 6) Moderation Workflow and Automation Rules\n6.1 States\n- Visible, Soft-Hidden (visible to author and direct participants), Hidden (not visible to public), Removed, Restored, Labeled.\n\n6.2 Workflow Summary\n- Intake → Auto-triage (severity, thresholds) → Queue assignment → Decision (label/hide/remove/sanction) → Notify parties → Log & transparency → Appeal handling.\n\nEARS Requirements (Workflow)\n- WHEN 신고가 접수되면, THE 시스템 SHALL 자동 분류와 심각도 평가를 수행하고 해당 큐에 라우팅한다 within 30 seconds.\n- WHILE 콘텐츠가 \"검토 대기\" 상태이면, THE 시스템 SHALL 공개 노출을 제한한다.\n- WHEN 중재 결정이 확정되면, THE 시스템 SHALL 작성자에게 사유 코드와 조치 요약을 통지한다 within 5 minutes of decision.\n- THE governance subsystem SHALL 모든 상태 전이를 감사 가능 로그로 남긴다.\n\n## 7) Sanction Ladder and Triggers\n7.1 Sanction Types\n- Warning (no post restriction)\n- Temporary Suspension: 24 hours, 7 days, 30 days\n- Permanent Suspension\n- Content Removal, Feature Restrictions (e.g., posting, commenting, DM), Shadow-visibility reduction\n\n7.2 Escalation Rules (General)\n- First offense (low/medium severity): Warning + education.\n- Repeated offense within 90 days: escalate one level.\n- High severity (threats, doxxing, hate speech with target): minimum 7-day suspension on first offense; permanent on third within 365 days.\n\n7.3 Special Cases\n- Sockpuppeting to evade sanctions: immediate 30-day suspension; link accounts for enforcement.\n- Undisclosed paid political content: removal + 7-day suspension; repeat → 30-day → permanent.\n\nEARS Requirements (Sanctions)\n- WHEN 동일 위반 코드가 90일 내 2회 발생하면, THE 시스템 SHALL 제재 수위를 한 단계 상향한다.\n- IF 위반 코드가 \"ILLEGAL_THREAT\" 또는 \"DOXXING\"이면, THEN THE 시스템 SHALL 최소 7일 정지를 1차 위반에 적용한다.\n- IF 365일 내 고심각도 위반이 3회 누적되면, THEN THE 시스템 SHALL 영구 제재를 집행한다.\n- WHERE 제재가 적용되면, THE 시스템 SHALL 제재 기간, 적용 범위(게시/댓글/메시지), 만료일을 명시하여 사용자에게 고지한다.\n\n## 8) Transparency Reporting and Logs\n8.1 Public Transparency (Aggregated)\n- Monthly report: number of reports, actions by category, reversal rate, appeal outcomes, median time-to-action.\n\n8.2 User-Facing Case History\n- Users can view their own moderation history: case IDs, timestamps, reason codes, actions, appeal status.\n\nEARS Requirements (Transparency)\n- THE governance subsystem SHALL 월간 투명성 리포트를 생성하여 카테고리별 조치 건수와 중위 처리 시간을 공개한다 by the 10th of the following month.\n- WHEN 사용자 제재가 확정되면, THE 시스템 SHALL 사용자 개인 히스토리에 케이스를 즉시 추가한다 within 1 minute.\n- THE governance subsystem SHALL 익명화된 샘플 케이스를 공개 가능한 형태로 보관한다 subject to data retention policy.\n\n## 9) Appeals, Re-review, and Restoration Procedures\n9.1 Appeal Window and Handling\n- Appeal window: 14 days from action notification (48 hours for election-period takedowns).\n- Acknowledgment: within 24 hours; decision within 7 days (3 days for election-period cases).\n\n9.2 Re-review Outcomes\n- Uphold, Modify (relabel, reduced sanction), or Reverse (restore content/access).\n\nEARS Requirements (Appeals)\n- WHEN 사용자가 제재 통지를 받은 시점부터 14일 내 이의제기를 제출하면, THE 시스템 SHALL 접수 확인을 24시간 내 발송한다.\n- WHEN 이의제기가 접수되면, THE 시스템 SHALL 7일 내 결정을 내려 결과와 근거 코드를 통지한다.\n- IF 이의제기 결과가 \"Reverse\"이면, THEN THE 시스템 SHALL 콘텐츠를 복구하고 노출 제한/제재를 해제한다 within 15 minutes.\n- WHILE 이의제기가 진행 중이면, THE 시스템 SHALL 콘텐츠 상태를 현행 정책에 따라 유지하되 사용자 안내 문구를 표시한다.\n\n## 10) Election-Period Special Policies (Domestic Law Compliance)\n10.1 Activation and Duration\n- Defined election windows per domestic regulations; activated by admin and visibly announced.\n\n10.2 Stricter Standards\n- New accounts (≤7 days): cannot publish political campaign content; can comment with labels.\n- Claims about election procedures must include official source; missing source → immediate soft-hide until provided.\n- Paid political content must be labeled with sponsor identity; undisclosed → removal and sanction per 7.3.\n\nEARS Requirements (Election)\n- WHERE 선거기간이 활성화되면, THE 시스템 SHALL 신규 계정(가입 7일 이하)의 선거 관련 게시 작성 권한을 제한한다.\n- WHEN 선거 절차 관련 주장이 출처 없이 게시되면, THE 시스템 SHALL 즉시 소프트 숨김 처리하고 출처 제출 시까지 제한을 유지한다.\n- WHEN 유료 정치 콘텐츠가 스폰서 표시 없이 탐지되면, THE 시스템 SHALL 즉시 제거하고 제재 규칙 7.3을 적용한다.\n- THE governance subsystem SHALL 선거기간 관련 정책 배너와 가이드에 대한 접근 경로를 모든 사용자에게 노출한다.\n\n## 11) Labels, Disclaimers, and Conflicts of Interest\n11.1 Labels\n- \"Opinion\", \"Analysis\", \"Unverified\", \"Sourced\", \"Satire\", \"Paid Promotion\", \"Sensitive\".\n\n11.2 Disclaimers\n- Economic/financial content: \"Not financial advice\"; polls: methodology; expert posts: affiliation disclosure when relevant.\n\n11.3 Conflicts of Interest (Experts)\n- Experts must disclose material affiliations related to discussed entities.\n\nEARS Requirements (Labels/COI)\n- WHEN 콘텐츠가 라벨 기준을 충족하면, THE 시스템 SHALL 해당 라벨을 콘텐츠 메타데이터에 부착하고 사용자에게 가시적으로 제공한다.\n- WHERE 작성자가 전문가로서 이해상충이 예상되면, THE 시스템 SHALL 공개 게시 전 공개 가능한 소속/후원 정보 입력을 요구한다.\n\n## 12) Performance and Availability Expectations for Moderation\n- Report ingestion: under 2 seconds to acknowledge.\n- Auto-triage classification: under 30 seconds.\n- Auto-hide execution: under 60 seconds from threshold.\n- Moderator decision notification: within 5 minutes of decision.\n\nEARS Requirements (Performance)\n- WHEN 신고가 접수되면, THE 시스템 SHALL 2초 내 접수 완료 상태를 반환한다.\n- WHEN 자동 임계치에 도달하면, THE 시스템 SHALL 60초 내 자동 조치를 완료한다.\n\n## 13) Permission Matrix (Role x Action)\n\n| Action (Business) | member | expert | editor | moderator | admin |\n|---|---|---|---|---|---|\n| Submit report | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View report queue | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Auto-triage override | ❌ | ❌ | ❌ | ✅ (within scope) | ✅ |\n| Hide content (policy) | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Hide content (editorial quality) | ❌ | ❌ | ✅ (temporary) | ✅ | ✅ |\n| Remove content | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Issue warning | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Suspend 24h/7d/30d | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Permanent suspend | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Publish transparency report | ❌ | ❌ | ❌ | ✅ (draft) | ✅ (approve) |\n| Approve election policy activation | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nEARS Requirements (Permissions)\n- WHEN editor가 정책 위반 의심 콘텐츠를 발견하면, THE 시스템 SHALL 정책 위반 제재는 moderator에게 승인을 요구한다.\n- WHERE moderator 권한 범위를 초과하는 제재가 요청되면, THE 시스템 SHALL admin 승인 흐름으로 전환한다.\n\n## 14) Diagrams\n\n14.1 Report Lifecycle\n```mermaid\ngraph LR\n  A[\"Report Submitted\"] --> B[\"Auto-Triage(Classify/Severity)\"]\n  B --> C{\"Auto-Hide Threshold Met?\"}\n  C -->|\"Yes\"| D[\"Auto-Hide Content\"]\n  C -->|\"No\"| E[\"Queue Assignment\"]\n  D --> E\n  E --> F[\"Moderator Review\"]\n  F --> G{\"Decision\"}\n  G -->|\"Label\"| H[\"Apply Labels\"]\n  G -->|\"Hide/Remove\"| I[\"Enforce Action\"]\n  G -->|\"No Action\"| J[\"Close Case\"]\n  H --> K[\"Notify Parties\"]\n  I --> K\n  J --> K\n  K --> L[\"Log & Transparency\"]\n  L --> M[\"Appeal Window\"]\n```\n\n14.2 Appeals Flow\n```mermaid\ngraph LR\n  A[\"Appeal Submitted\"] --> B[\"Acknowledge Receipt\"]\n  B --> C[\"Assign Reviewer(Out-of-band)\"]\n  C --> D[\"Re-review Evidence\"]\n  D --> E{\"Outcome?\"}\n  E -->|\"Uphold\"| F[\"Maintain Action\"]\n  E -->|\"Modify\"| G[\"Adjust Labels/Sanction\"]\n  E -->|\"Reverse\"| H[\"Restore Content/Access\"]\n  F --> I[\"Notify & Log\"]\n  G --> I\n  H --> I\n```\n\n## 15) Glossary of Reason Codes (Examples)\n- ILLEGAL_THREAT: Credible threats of violence or harm.\n- DOXXING: Sharing personal identifiable information without consent.\n- HATE_SPEECH: Dehumanizing or derogatory content targeting protected classes.\n- MISINFO_HARM: Fabricated or misleading facts likely to cause public harm.\n- SPAM: Unsolicited repetitive or promotional content.\n- OFF_TOPIC: Content not relevant to the thread/topic.\n- LOW_QUALITY: Extremely short, noise, or non-substantive posts.\n- COPYRIGHT: Unauthorized reproduction of copyrighted material.\n- ELECTION_UNDISCLOSED: Undisclosed paid political content.\n\n## Data Retention and Security Alignment\n- Align moderation logs, transparency data, and user case histories with data retention durations defined in the Data Lifecycle policy, and privacy constraints defined in Security & Compliance.\n\nEARS Requirements (Alignment)\n- THE governance subsystem SHALL 데이터 보존·삭제 정책을 준수하여 케이스 로그를 보관·파기한다 per the retention schedule.\n- THE governance subsystem SHALL 개인정보 최소 수집 원칙을 준수하여 필요한 범위 내 정보만 기록한다.\n\n## Change Management\n- Policy updates require admin approval and public changelog noting effective dates and material changes.\n\nEARS Requirements (Change Mgmt)\n- WHEN 정책이 갱신되면, THE 시스템 SHALL 발효일과 주요 변경 사유를 사용자 공지 영역에 게시한다 within 24 hours of activation.\n\n---\nThis document specifies business requirements only. Developers retain full autonomy over technical implementation, including architecture, APIs, and database design."},"plan":"Organize as a production-ready requirements document for pol-econ-board:\n1) Scope & Principles\n2) Roles & Governance Responsibilities (with EARS)\n3) Community Rules: Allowed/Restricted/Prohibited (with examples & EARS)\n4) Political-Sensitive Guidelines: factuality, sourcing, tone (with EARS)\n5) Reporting Taxonomy & SLAs: reason codes, reporter tiers, thresholds (with EARS)\n6) Moderation Workflow: states, routing, decisions, notifications, closure codes (with EARS)\n7) Sanction Ladder & Triggers: general/escalation/special cases (with EARS)\n8) Transparency & Logs: public reporting, user history, access (with EARS)\n9) Appeals & Restoration: windows, outcomes, time targets (with EARS)\n10) Election-Period Policies: activation, stricter standards (with EARS)\n11) Labels/Disclaimers/COI: catalog, rules (with EARS)\n12) Performance & Availability for moderation (with EARS)\n13) Permission Matrix (role × action)\n14) Diagrams: report lifecycle, appeals flow, sanction escalation\n15) Reason Codes glossary\n16) Data Retention & Security Alignment (with EARS)\n17) Change Management (with EARS)\n18) Related documents references with descriptive link text\nEnd with autonomy statement (business requirements only).","review":"Enhance for: completeness (≥5,000 chars), EARS compliance for all applicable requirements, clear business rules (no APIs/DB), correct Mermaid syntax (double quotes, proper arrows), role-based permissions, policy/legal compliance emphasis, performance SLAs, error/appeal flows, data retention alignment, links with descriptive text, no meta-commentary except closing autonomy statement. Ensure full English (en-US) text with EARS keywords in English and natural-language descriptions. Remove vague phrases; add measurable thresholds and timelines. Verify diagrams use graph LR, quoted labels, and correct edges.","content":"# Community Governance and Moderation Requirements (pol-econ-board)\n\n## 1) Scope and Principles\n- Purpose: establish unambiguous, enforceable rules and processes for content governance, reporting, moderation actions, sanctions, transparency, and appeals, including special election-period policies aligned to domestic law.\n- Scope: applies to all user-generated content (UGC): posts, comments, replies, titles, tags, attachments, profile bios, display names, and any user-visible metadata or labels.\n- Principles:\n  - Legality: comply with applicable domestic regulations in the primary jurisdiction; prohibit unlawful content and behavior.\n  - Truthfulness: encourage evidence-based discourse; mitigate unverified or manipulative content through labels and distribution controls while preserving legitimate opinion.\n  - Proportionality: apply progressive sanctions proportional to severity and recurrence, with clear thresholds and windows.\n  - Due process: provide reason codes, timelines, and an appeal channel; record audit trails suitable for review.\n  - Transparency: publish aggregated moderation statistics, and provide user-facing case histories and outcomes.\n\nEARS (Foundational)\n- THE governance subsystem SHALL apply these policies consistently across roles, content types, and workflows.\n- THE governance subsystem SHALL maintain a standardized taxonomy for reason codes, decisions, sanctions, and closure statuses.\n\n## 2) Roles and Governance Responsibilities (Business)\n- member: may create and report content, block users, and receive sanctions; cannot sanction others.\n- expert: inherits member; can propose expert topics, publish in-depth research, participate in expert Q&A; must meet higher disclosure standards for affiliations/conflicts.\n- moderator: operates the moderation queue; can hide/remove content; can issue warnings and temporary suspensions up to 30 days; manages disputes; maintains transparency logs.\n- editor: curates featured content; manages announcements/pinned posts; edits topics/tags; may hide content for editorial quality but cannot sanction users; must escalate policy violations to moderators.\n- admin: full oversight; manages roles/policies; handles legal requests; may impose permanent sanctions; approves election-period configurations and policy updates.\n\nEARS (Roles)\n- THE governance subsystem SHALL enforce role-specific authorization boundaries and approval flows for all moderation actions.\n- WHERE the actor role is \"editor\", THE system SHALL restrict enforcement actions to temporary editorial hiding without user sanctions.\n- WHERE the actor role is \"moderator\", THE system SHALL allow warnings and suspensions of 24h/7d/30d and content removal within defined scope only.\n- WHERE the actor role is \"admin\", THE system SHALL allow permanent sanctions, role/policy changes, and election-policy activation.\n- WHEN any role performs a moderation-relevant action, THE system SHALL record actor role, action, target, timestamp, reason code, and outcome in an audit log.\n\n## 3) Community Rules: Allowed/Restricted/Prohibited Content\n3.1 Allowed with Expectations (Examples)\n- Opinion/Analysis framed as subjective perspective, clearly separated from factual assertions.\n- Critique of public policy/officials without doxxing or unlawful exposure of personal data.\n- Satire/Parody labeled to prevent confusion with factual reporting.\n\n3.2 Restricted (Require Labels/Disclaimers or Distribution Mitigation)\n- Unverified claims: require a \"Unverified\" label until a credible source is provided; visibility may be reduced pending sourcing.\n- Polls/Surveys: require methodology disclosure; incomplete disclosures receive \"Methodology Incomplete\" label.\n- Economic/Financial content: require a \"Not financial advice\" disclaimer.\n\n3.3 Prohibited (Immediate Enforcement)\n- Illegal content: threats, incitement to violence, doxxing, non-consensual personal information, targeted harassment, discriminatory hate content, sexual exploitation, unlawful solicitation.\n- Harmful misinformation: fabricated facts presented as truth with potential imminent harm (public safety, election procedure manipulation).\n- Spam/Manipulation: mass posting, link farming, coordinated inauthentic behavior, undisclosed paid political content, astroturfing.\n- Copyright infringement: unauthorized reproduction where rights-holder objection is likely.\n\nEARS (Classification & Mitigation)\n- THE governance subsystem SHALL maintain a canonical reason code set (e.g., ILLEGAL_THREAT, HATE_SPEECH, DOXXING, MISINFO_HARM, SPAM, COPYRIGHT, OFF_TOPIC, LOW_QUALITY, HARASSMENT, ELECTION_PROCEDURE_FALSE).\n- WHEN content is classified as prohibited, THE system SHALL immediately block public exposure and move it to \"Under Review\" state.\n- WHEN content requires labeling, THE system SHALL attach the specified label(s) and reduce algorithmic amplification until criteria are satisfied.\n- IF classification confidence is low, THEN THE system SHALL apply the \"Unverified\" label and route the item to the review queue without permanent action.\n\n## 4) Political-Sensitive Content Guidelines (Factuality, Source, Tone)\n4.1 Factuality\n- Assertions of fact must be verifiable via reliable sources (primary records, reputable media, official statistics). Opinions remain permissible if clearly framed.\n\n4.2 Sourcing\n- Political claims must include source citations (URL, publication, date). Missing sources trigger mitigation labels and reduced promotion.\n\n4.3 Expression Level\n- Robust debate is encouraged; dehumanizing language, slurs, calls for violence, and targeted harassment are prohibited.\n\nEARS (Political-Sensitive)\n- WHEN a user publishes content claiming political facts, THE system SHALL provide source fields and apply \"Unverified\" where absent.\n- WHEN a user adds credible sources to previously unverified content, THE system SHALL update the label to \"Sourced\" and lift exposure limits within 1 hour of submission.\n- IF dehumanizing or violent-incitement expressions are detected, THEN THE system SHALL hide the content immediately and route to the high-severity queue.\n\n## 5) Reporting Taxonomy and Processing SLAs\n5.1 Report Types (Reason Families)\n- Safety: Threat/Violence, Doxxing, Harassment.\n- Integrity: Hate Speech, Misinformation, Copyright.\n- Quality: Spam, Off-topic, Low-quality/Noise.\n- Election Integrity: Undisclosed paid political content, False procedural claims.\n\n5.2 Reporter Credibility Tiers (Business Concept)\n- Tier A: report validity ≥ 80% in the last 90 days or verified expert.\n- Tier B: 50–79%.\n- Tier C: <50% or new reporters.\n\n5.3 Thresholds and SLAs\n- High severity (Safety, Election Integrity): auto-hide when ≥ 5 unique reports in 60 minutes including ≥ 2 Tier A; any single admin/moderator may hide immediately.\n- Medium severity (Hate, Misinformation, Copyright): soft-hide when ≥ 8 unique reports in 6 hours including ≥ 2 Tier B+.\n- Low severity (Spam/Off-topic/Quality): queue-only; apply rate-limit to the author if ≥ 12 valid reports in 24 hours.\n\nEARS (Reporting & SLA)\n- WHEN the same content receives ≥ 5 high-severity reports within 60 minutes including ≥ 2 Tier A, THE system SHALL auto-hide the content within 1 minute.\n- WHEN the same content receives ≥ 8 medium-severity reports within 6 hours including ≥ 2 Tier B+, THE system SHALL soft-hide the content and mark it \"Under Review\".\n- WHEN the same author accrues ≥ 3 valid spam reports within 24 hours, THE system SHALL apply a 24-hour posting restriction.\n- THE governance subsystem SHALL create a unique case ID for every report and record creation time, classification, reporter tier, and affected resource.\n- IF a reporter’s invalid-report ratio exceeds 70% over 30 days, THEN THE system SHALL rate-limit further reports to 5/day for 14 days and inform the reporter.\n\n## 6) Moderation Workflow and Automation Rules\n6.1 States\n- Visible, Labeled, Soft-Hidden (visible to author and direct participants), Hidden (not publicly visible), Removed, Restored, Under Review, Closed.\n\n6.2 Workflow Summary\n- Intake → Auto-triage (severity and thresholds) → Queue assignment (priority, specialization) → Decision (label/hide/remove/sanction) → Notify parties → Transparency logging → Appeal (if any) → Closure.\n\n6.3 Closure Statuses\n- No Action (policy compliant), Action Applied (specify), Reversed on Appeal, Withdrawn (insufficient evidence), Duplicate, Abandoned (reporter non-response where required).\n\nEARS (Workflow)\n- WHEN a report is received, THE system SHALL auto-classify, assess severity, and route to the appropriate queue within 30 seconds.\n- WHILE content is \"Under Review\", THE system SHALL restrict public exposure per state rules (Soft-Hidden or Hidden).\n- WHEN a moderation decision is finalized, THE system SHALL notify the author with reason code(s), action summary, and appeal window within 5 minutes.\n- THE governance subsystem SHALL record every state transition in an auditable log with actor, timestamp, and reason.\n- WHERE conflict-of-interest is detected (moderator is the author or followed party), THE system SHALL reassign the case to a different moderator automatically.\n\n## 7) Sanction Ladder and Triggers\n7.1 Sanction Types\n- Warning (no feature restriction), Content Removal, Feature Restriction (posting/commenting/messaging), Temporary Suspension: 24h, 7d, 30d, Permanent Suspension, Shadow-visibility reduction (distribution dampening without user-facing label where policy allows).\n\n7.2 Escalation Rules (General)\n- First offense (low/medium): warning + policy education.\n- Repeated offense (same code) within 90 days: escalate one level.\n- High severity (threats, doxxing, targeted hate): minimum 7-day suspension at first offense; permanent at the third within 365 days.\n\n7.3 Special Cases\n- Evasion (sockpuppeting) to bypass sanctions: immediate 30-day suspension; link accounts for enforcement.\n- Undisclosed paid political content: content removal + 7-day suspension; repeat → 30-day → permanent.\n- Coordinated manipulation (brigading/botting): feature restrictions for 30 days; repeat → suspension.\n\nEARS (Sanctions)\n- WHEN the same reason code recurs twice within 90 days, THE system SHALL escalate the sanction by one level.\n- IF the reason code is ILLEGAL_THREAT or DOXXING, THEN THE system SHALL apply a minimum 7-day suspension at first offense.\n- IF three high-severity offenses accrue within 365 days, THEN THE system SHALL impose a permanent suspension.\n- WHERE any sanction is applied, THE system SHALL notify the user with duration, affected features, and expiration date/time.\n- WHEN evasion is detected, THE system SHALL link related accounts for consistent enforcement and record linkage rationale.\n\n## 8) Transparency Reporting and Logs\n8.1 Public Transparency (Aggregated)\n- Monthly summary: total reports, actions by category, reversal rates, appeal outcomes, median time-to-action; no personal data.\n\n8.2 User-Facing Case History\n- Authors can view their own moderation history including case IDs, timestamps, reason codes, actions, and appeal status.\n\n8.3 Internal Audit Access\n- Authorized roles may review detailed audit trails for compliance and training.\n\nEARS (Transparency)\n- THE governance subsystem SHALL publish a monthly transparency report with category counts and median processing times by the 10th of the following month.\n- WHEN a user sanction is finalized, THE system SHALL add the case to the user’s history within 1 minute.\n- THE governance subsystem SHALL store anonymized sample cases for public education consistent with data retention policy.\n- WHERE internal audit access is granted, THE system SHALL limit visibility to least-privilege scopes by role.\n\n## 9) Appeals, Re-review, and Restoration\n9.1 Timelines\n- Appeal window: 14 days from action notification (48 hours for election-period takedowns).\n- Acknowledgment: within 24 hours; decision: within 7 days (3 days during election periods).\n\n9.2 Outcomes\n- Uphold, Modify (relabel or reduce sanction), Reverse (restore content/access).\n\nEARS (Appeals)\n- WHEN a user submits an appeal within 14 days of notice, THE system SHALL acknowledge receipt within 24 hours.\n- WHEN an appeal is accepted for review, THE system SHALL issue a decision within 7 days and communicate result + reason codes.\n- IF the outcome is Reverse, THEN THE system SHALL restore content/access and remove exposure limits within 15 minutes.\n- WHILE an appeal is active, THE system SHALL maintain current enforcement state and present a status message to the user.\n- WHERE the original reviewer has a conflict, THE system SHALL assign a different reviewer for the appeal.\n\n## 10) Election-Period Special Policies (Domestic Law Compliance)\n10.1 Activation and Duration\n- Election windows defined per domestic regulations; activation is recorded and announced by admins with effective dates and summary of stricter standards.\n\n10.2 Stricter Standards\n- New accounts (≤ 7 days since registration): cannot publish political campaign content; may comment under policy-compliant labels.\n- Claims about election procedures must include an official source; absent source → immediate soft-hide pending verification.\n- Paid political content must include sponsor identity and labeling; undisclosed → immediate removal and sanction per escalation.\n- Polling blackout and other jurisdictional rules are enforced as policy text configured by admins.\n\nEARS (Election)\n- WHERE an election period is active, THE system SHALL restrict campaign-content publishing for new accounts (≤ 7 days since registration).\n- WHEN election-procedure claims lack official sources, THE system SHALL soft-hide immediately and maintain restriction until sources are added and verified.\n- WHEN paid political content is detected without sponsor disclosure, THE system SHALL remove it and apply the sanction ladder per policy.\n- THE governance subsystem SHALL display an in-product banner linking to the active election policy and user guidance.\n\n## 11) Labels, Disclaimers, and Conflicts of Interest\n11.1 Labels Catalog (non-exhaustive)\n- \"Opinion\", \"Analysis\", \"Unverified\", \"Sourced\", \"Satire\", \"Paid Promotion\", \"Sensitive\", \"Methodology Incomplete\".\n\n11.2 Disclaimers\n- Economic/financial content: \"Not financial advice\".\n- Polls/Surveys: disclosure of methodology, sample size, collection dates.\n- Expert disclosures: affiliation/conflict-of-interest where material.\n\n11.3 COI (Experts)\n- Experts disclose affiliations materially related to discussed entities when posting or answering in their domain.\n\nEARS (Labels & COI)\n- WHEN content meets label criteria, THE system SHALL attach applicable labels to content metadata and present them visibly to users.\n- WHERE an expert author’s conflict is reasonably anticipated, THE system SHALL require entry of affiliation/sponsorship details before public posting.\n- WHEN a required disclaimer is missing, THE system SHALL block publication and prompt for completion.\n\n## 12) Performance and Availability Expectations for Moderation\n- Report acknowledgment: under 2 seconds.\n- Auto-triage classification: under 30 seconds.\n- Auto-hide execution: under 60 seconds from threshold crossing.\n- Decision notice to author: within 5 minutes of decision.\n- Queue coverage: 24/7 for high severity; business hours for medium/low with clear ETAs.\n\nEARS (Performance)\n- WHEN a report is submitted, THE system SHALL return an acknowledgment status within 2 seconds.\n- WHEN an auto-action threshold is reached, THE system SHALL complete the action within 60 seconds.\n- WHERE a case is high severity, THE system SHALL target initial moderator handling within 60 minutes at any time of day.\n\n## 13) Permission Matrix (Role × Action)\n\n| Action (Business) | member | expert | editor | moderator | admin |\n|---|---|---|---|---|---|\n| Submit report | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View report queue | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Auto-triage override | ❌ | ❌ | ❌ | ✅ (within scope) | ✅ |\n| Hide content (policy) | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Hide content (editorial quality) | ❌ | ❌ | ✅ (temporary) | ✅ | ✅ |\n| Remove content | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Issue warning | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Suspend 24h/7d/30d | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Permanent suspend | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Publish transparency report | ❌ | ❌ | ❌ | ✅ (draft) | ✅ (approve) |\n| Approve election policy activation | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nEARS (Permission Rules)\n- WHEN an editor flags suspected policy violations, THE system SHALL require moderator approval for sanctions.\n- WHERE a requested action exceeds moderator limits, THE system SHALL route the request for admin approval.\n\n## 14) Diagrams\n\n14.1 Report Lifecycle\n```mermaid\ngraph LR\n  A[\"Report Submitted\"] --> B[\"Auto-Triage(Classify/Severity)\"]\n  B --> C{\"Auto-Hide Threshold Met?\"}\n  C -->|\"Yes\"| D[\"Auto-Hide Content\"]\n  C -->|\"No\"| E[\"Queue Assignment\"]\n  D --> E\n  E --> F[\"Moderator Review\"]\n  F --> G{\"Decision\"}\n  G -->|\"Label\"| H[\"Apply Labels\"]\n  G -->|\"Hide/Remove\"| I[\"Enforce Action\"]\n  G -->|\"No Action\"| J[\"Close Case\"]\n  H --> K[\"Notify Parties\"]\n  I --> K\n  J --> K\n  K --> L[\"Log & Transparency\"]\n  L --> M[\"Appeal Window\"]\n```\n\n14.2 Appeals Flow\n```mermaid\ngraph LR\n  A[\"Appeal Submitted\"] --> B[\"Acknowledge Receipt\"]\n  B --> C[\"Assign Reviewer(Independent)\"]\n  C --> D[\"Re-review Evidence\"]\n  D --> E{\"Outcome?\"}\n  E -->|\"Uphold\"| F[\"Maintain Action\"]\n  E -->|\"Modify\"| G[\"Adjust Labels/Sanction\"]\n  E -->|\"Reverse\"| H[\"Restore Content/Access\"]\n  F --> I[\"Notify & Log\"]\n  G --> I\n  H --> I\n```\n\n14.3 Sanction Escalation (Decision Aid)\n```mermaid\ngraph LR\n  A[\"Confirmed Violation\"] --> B{\"Severity?\"}\n  B -->|\"Low/Medium\"| C[\"Issue Warning + Education\"]\n  C --> D{\"Repeat Within 90d?\"}\n  D -->|\"Yes\"| E[\"Escalate One Level\"]\n  D -->|\"No\"| F[\"Close Case\"]\n  B -->|\"High\"| G[\"Apply ≥7d Suspension\"]\n  G --> H{\"Third High in 365d?\"}\n  H -->|\"Yes\"| I[\"Permanent Suspension\"]\n  H -->|\"No\"| F\n```\n\n## 15) Glossary of Reason Codes (Examples)\n- ILLEGAL_THREAT: credible threats of violence or harm.\n- DOXXING: publishing personal identifiable information without consent.\n- HATE_SPEECH: dehumanizing or derogatory content targeting protected classes.\n- HARASSMENT: targeted abusive behavior toward an individual or group.\n- MISINFO_HARM: fabricated or misleading facts likely to cause public harm.\n- ELECTION_PROCEDURE_FALSE: false claims about voting procedures or counting.\n- SPAM: unsolicited repetitive or promotional content or link farming.\n- OFF_TOPIC: content unrelated to the thread/topic.\n- LOW_QUALITY: extremely short/noise/non-substantive posts.\n- COPYRIGHT: unauthorized reproduction of copyrighted material.\n- ELECTION_UNDISCLOSED: paid political content without sponsor disclosure.\n\n## 16) Data Retention and Security Alignment\n- Align moderation logs, transparency data, and user case histories with retention windows and privacy constraints defined in the data lifecycle and security/compliance policies.\n\nEARS (Retention & Privacy)\n- THE governance subsystem SHALL retain and dispose of case logs according to the published retention schedule.\n- THE governance subsystem SHALL record only the minimum necessary personal data to execute moderation and transparency obligations.\n- WHERE third-party personal data appears in evidence, THE system SHALL redact or pseudonymize it in public-facing artifacts.\n\n## 17) Change Management\n- Policy updates require admin approval and public changelog entries with effective dates and material change summaries.\n\nEARS (Change Mgmt)\n- WHEN a policy is updated, THE system SHALL publish its effective date and a summary of key changes in the user policy area within 24 hours of activation.\n- WHERE election-period policies are enabled/disabled, THE system SHALL log the activation/deactivation event with actor and timestamps.\n\n## 18) Related Documents\n- For feature-level behaviors and validations, refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n- For privacy, data rights, and lawful processing, refer to the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n---\nThis document provides business requirements only. Developers retain full autonomy over technical implementation, including architecture, APIs, and database design.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:27.121Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"사용자 커뮤니케이션 전반을 비즈니스 레벨에서 표준화하여 일관된 경험을 보장하기 위함.","filename":"11-pol-econ-board-notifications-and-communications.md","documentType":"requirement","outline":["알림 유형(실시간/배치/다이제스트)과 트리거 이벤트","채널(앱 내/이메일 등)과 빈도·레이트 한도","구독·팔로우·주제 다이제스트 정책","수신 동의/거부 및 선호 설정","콘텐츠 톤·메시지 구성 원칙","실패·지연 시 재시도/폴백 원칙"],"audience":"development team","keyQuestions":["어떤 이벤트에 어떤 알림을 어떤 채널로 보낼 것인가","이용자 통제권과 빈도 관리 정책은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["EARS 형식 요구사항 포함","기술 구현 세부 금지"],"content":"# Notifications and Communications Requirements — pol-econ-board\n\nThis document defines business requirements for user communications and notifications in pol-econ-board. It specifies what events generate notifications, which channels are used, how frequency and preferences are controlled, and how failures are handled. It describes WHAT the system should do, not HOW to build it. All technical implementation decisions (architecture, APIs, database design) belong to the development team.\n\n## 1) Scope and Principles\n\n- Coverage: In-app notifications, email communications, and batch/digest messages related to user activity, content interactions, moderation, editorial operations, and account/security events.\n- Exclusions: UI layouts, transport implementations, infrastructure, and provider-specific details.\n- Goals: Timely, relevant, controllable, and compliant communications that respect user consent and reduce noise.\n\nEARS Requirements (Principles)\n- THE communications policy for pol-econ-board SHALL prioritize 사용자 통제권(옵트인/옵트아웃, 선호 설정), 관련성, 적시성, 최소한의 침해성.\n- THE communications policy SHALL distinguish 거래성(Transactional)과 마케팅·커뮤니티 성장 목적(Non-transactional) 메시지 범주.\n- THE communications service SHALL support 사용자 현지 시간대 기반 스케줄링을 기본으로 하며 기본 시간대는 Asia/Seoul로 간주.\n\n## 2) Notification Taxonomy and Trigger Events\n\nCategories\n- Account & Security (transactional): sign-up verification, password reset, role change, email change confirmation, device/session revocation confirmation.\n- Engagement (community interactions): mention, direct reply to user’s post/comment, new post by followed author, new post in followed topic, expert Q&A invitations, content featured notification, new follower.\n- Moderation & Governance: content reported about user, moderation action taken (warning/suspension), report assigned to moderator, SLA reminder for open reports, appeal outcome.\n- Editorial Operations: draft submitted for review, review decision, scheduled publish reminder, featured/curated selection, special topic program updates.\n- Digests & Summaries: daily/weekly topic digest, author digest, personalized activity summary.\n\nRepresentative Triggers (Event-driven)\n- WHEN 사용자가 언급(mention)되었을 때, THE notification service SHALL 생성하고 대상 사용자에게 전달할 알림 레코드를 만든다.\n- WHEN 사용자의 댓글에 새 답글이 등록되었을 때, THE notification service SHALL 대상 사용자에게 상호작용 알림을 준비한다.\n- WHEN 사용자가 팔로우하는 주제에 새 게시글이 발행되었을 때, THE notification service SHALL 해당 사용자의 선호 설정과 빈도 한도를 검토하여 전달 여부를 결정한다.\n- WHEN 사용자가 팔로우하는 작성자가 새 게시글을 발행했을 때, THE notification service SHALL 동일한 작성자 이벤트를 10분 이내 다건 발생 시 하나로 응집한다.\n- WHEN 전문가 전용 Q&A에 답변 요청이 배정되었을 때, THE notification service SHALL 전문가 대상 실시간 알림을 생성한다.\n- WHEN 사용자의 콘텐츠가 신고되어 중재 절차가 시작되었을 때, THE notification service SHALL 사용자에게 절차 개시를 알림하되 상세 식별정보는 최소화한다.\n- WHEN 중재자가 새로운 신고 티켓을 배정받았을 때, THE notification service SHALL 중재자 역할에 맞는 우선순위 알림을 발송한다.\n- WHEN 초안이 리뷰 큐에 제출되었을 때, THE notification service SHALL 담당 에디터에게 검토 요청 알림을 발송한다.\n- WHEN 리뷰 결정이 \"승인\" 또는 \"수정 요청\"으로 기록되었을 때, THE notification service SHALL 작성자에게 결과를 통지한다.\n- WHEN 계정 보안 이벤트(비밀번호 재설정 요청, 이메일 변경 확인)가 발생했을 때, THE notification service SHALL 거래성 알림을 지연 없이 발송한다.\n- WHEN 주간 다이제스트 스케줄 시간이 도래했을 때, THE notification service SHALL 각 사용자의 구독 항목을 집계해 요약 메시지를 생성한다.\n\nUbiquitous Rules\n- THE notification service SHALL 태그 분류(계정/보안, 상호작용, 중재, 에디토리얼, 다이제스트)를 모든 알림에 부여한다.\n- THE notification service SHALL 모든 알림에 고유 식별자, 생성 시각(사용자 시간대 변환 정보 포함), 카테고리, 우선순위, 관련 리소스 참조를 포함한다.\n\n## 3) Channels, Frequency, and Rate Limits\n\nChannels\n- In-app: notification center and badges.\n- Email: transactional and digest communications.\n\nChannel Assignment\n- WHERE 거래성 이벤트(계정/보안), THE notification service SHALL In-app + Email을 기본 채널로 사용한다.\n- WHERE 상호작용 이벤트(멘션/답글), THE notification service SHALL In-app을 기본으로 하고 Email은 사용자 선호가 활성화된 경우에만 사용한다.\n- WHERE 다이제스트 범주, THE notification service SHALL Email 우선으로 하고 In-app에는 요약 카드만 제공한다.\n- WHERE 중재자 운영 이벤트, THE notification service SHALL In-app 우선 알림과 이메일 둘 다를 지원한다.\n\nFrequency and Rate Limits (per user)\n- THE notification service SHALL 적용되는 전역 상한: In-app 생성 최대 200/일, Email 발송 최대 20/일.\n- WHERE 상호작용 이벤트, THE notification service SHALL 동일 게시물/스레드에 대한 알림을 10분 응집 창으로 코얼레싱한다.\n- WHERE 팔로우 기반 신규 게시글, THE notification service SHALL 동일 작성자 이벤트를 10분 내 묶어 1건으로 발송한다.\n- WHERE 다이제스트, THE notification service SHALL 빈도를 Daily 또는 Weekly로 제한하며 동시 활성화를 허용하지 않는다.\n- WHILE 사용자가 DND(방해 금지) 시간대를 설정한 상태, THE notification service SHALL 거래성 알림을 제외한 모든 알림의 실시간 발송을 연기한다.\n\nPerformance Expectations\n- THE notification service SHALL In-app 실시간 알림을 95% 케이스에서 3초 이내, 99.9%에서 10초 이내로 표시 가능한 상태로 만든다.\n- THE notification service SHALL 거래성 Email을 95% 케이스에서 2분 이내 송신 큐에 반영한다.\n\n## 4) Subscription, Follow, and Digest Policies\n\nFollow-based Notifications\n- WHEN 사용자가 주제 또는 작성자를 팔로우했을 때, THE notification service SHALL 기본 알림 수준을 \"In-app 실시간\"으로 설정한다.\n- WHERE 사용자가 팔로우 해제, THE notification service SHALL 해당 소스에서 발생하는 향후 알림을 즉시 중단한다.\n\nDigest Composition\n- THE notification service SHALL 다이제스트에 최대 10개 하이라이트 항목(상호작용/팔로우 기반 콘텐츠)을 포함한다.\n- WHERE Daily Digest, THE notification service SHALL 사용자 현지 시간 07:00–09:00 사이 임의 시간 윈도우에서 전송한다.\n- WHERE Weekly Digest, THE notification service SHALL 사용자 현지 시간 월요일 08:00–10:00 사이 전송한다.\n- THE notification service SHALL 동일 기간에 다이제스트와 개별 알림의 중복을 방지하기 위해 다이제스트에서 이미 In-app으로 소비된 항목을 제외한다.\n\nCoalescing and Deduplication\n- THE notification service SHALL 같은 유형의 이벤트가 10분 내 N>1건 발생 시 카운트 업 방식의 단일 알림으로 노출한다.\n- IF 동일 리소스에 대한 동일 수신자 중복 생성 조건이 감지되면, THEN THE notification service SHALL 후행 알림을 억제한다.\n\n## 5) Consent Management and Preference Settings\n\nConsent Boundaries\n- THE notification service SHALL 거래성 메시지는 서비스 이용 계약 이행을 위해 기본 허용으로 간주한다.\n- THE notification service SHALL 마케팅·커뮤니티 성장 목적 메시지는 명시적 옵트인이 있을 때만 발송한다.\n\nPreference Model\n- THE notification service SHALL 카테고리별(계정/보안, 상호작용, 팔로우, 중재, 에디토리얼, 다이제스트) × 채널별(In-app, Email) 온/오프 토글을 제공한다.\n- WHERE 사용자 설정이 미지정, THE notification service SHALL 합리적 기본값을 적용한다: 상호작용 In-app=ON, Email=OFF; 팔로우 In-app=ON, Email=OFF; 다이제스트 Email=Weekly ON; 계정/보안 Email=ON.\n- THE notification service SHALL DND 시간대(예: 22:00–08:00 현지)와 Snooze(예: 2h/8h/24h) 기능을 지원한다.\n- THE notification service SHALL 작성자/게시물/주제 단위의 Mute(개별 소스 차단)를 지원한다.\n\nUser Control Actions\n- WHEN 사용자가 이메일 하단의 구독 해지 링크를 사용했을 때, THE notification service SHALL 해당 메시지 범주에 대한 Email 발송을 즉시 중단한다.\n- WHEN 사용자가 모든 마케팅 메시지 거부를 활성화했을 때, THE notification service SHALL 마케팅 범주 전 채널 발송을 금지한다.\n- WHEN 사용자가 선호를 변경했을 때, THE notification service SHALL 변경 즉시 이후 이벤트에 적용한다.\n\n## 6) Message Composition and Tone Guidelines\n\nContent Principles\n- THE notification service SHALL 메시지 제목(최대 80자), 요약(최대 140자), 본문 핵심 문장을 제공한다.\n- THE notification service SHALL 정치/경제 주제 특성상 사실 중심, 중립적, 비煽情 톤을 유지한다.\n- THE notification service SHALL 개인정보 최소화 원칙을 준수하며 민감 데이터(이메일 주소 전체, 전화번호 등)를 포함하지 않는다.\n\nCopy Patterns (Examples)\n- Mention: \"You were mentioned in 'Title' by Author\" with direct link.\n- Reply: \"New reply to your comment in 'Title'\" with anchor link.\n- Moderation notice: \"Your post was temporarily hidden pending review\" with policy reference.\n- Digest: \"Your weekly highlights in Topics you follow\" with item counts.\n\nAccessibility and Localization\n- THE notification service SHALL 사용자 선호 언어에 맞춘 로컬라이제이션을 적용하고 기본 언어는 en-US로 한다.\n- THE notification service SHALL 링크 텍스트는 의미 있는 설명으로 제공한다.\n\nBrand Safety\n- IF 금칙어·과도한 주장·오해 소지가 포함될 경우, THEN THE notification service SHALL 전송을 보류하고 검토 대상으로 표기한다.\n\n## 7) Delivery Performance, Retry, and Fallback\n\nDelivery Expectations\n- THE notification service SHALL 이벤트 발생 후 1초 이내 생성, 3초 이내 In-app 표시 가능 상태를 목표로 한다(95%).\n- THE notification service SHALL Email 전송은 2분 이내 큐잉(95%), 10분 이내 다이제스트 큐잉(95%)을 보장한다.\n\nRetry and Fallback\n- IF Email 전송 실패가 발생했을 경우, THEN THE notification service SHALL 5분, 30분, 120분 간격으로 최대 3회 재시도한다.\n- IF 모든 Email 재시도가 실패했을 경우, THEN THE notification service SHALL In-app 알림만 유지하고 이메일 재시도 실패 사실을 내부적으로 기록한다.\n- IF In-app 표시가 지연 조건(예: DND)인 경우, THEN THE notification service SHALL DND 만료 즉시 표시한다.\n\nQuiet Hours\n- WHERE DND가 설정된 사용자, THE notification service SHALL 거래성 이벤트(보안·계정)만 조용 시간에도 발송한다.\n\nAggregation Windows\n- THE notification service SHALL 코얼레싱 창 기본값 10분을 유지하며 이벤트 유형별로 조정 가능하도록 정책화한다.\n\n## 8) Role-specific Rules and Governance Alignment\n\nMember\n- THE notification service SHALL 멘션/답글/팔로우 콘텐츠 알림을 기본 In-app으로 제공한다.\n- WHERE 제재 통지, THE notification service SHALL In-app + Email로 통지한다.\n\nExpert\n- THE notification service SHALL Q&A 요청, 피처링 소식, 팔로워 급증 요약을 제공한다.\n\nModerator\n- THE notification service SHALL 신고 배정, SLA 임계 초과, 이의 제기 도착 알림을 우선순위 높게 표시한다.\n- THE notification service SHALL 하루 최대 Email 40건 상한을 두고 코호트로 배분한다.\n\nEditor\n- THE notification service SHALL 리뷰 대기 초안, 발행 예정 리마인더, 피처링 큐 업데이트를 제공한다.\n\nAdmin\n- THE notification service SHALL 역할 변경 승인 요청, 규정 업데이트 공지, 투명성 보고 준비 알림을 제공한다.\n\nGovernance Links\n- THE notification service SHALL 중재 통지의 메시지 구성에서 커뮤니티 규칙 인용 요약을 포함한다.\n\n## 9) Error Handling and User Recovery (communications context)\n\nCommon Errors and Responses\n- IF 수신 거부 상태에서 해당 범주 메시지 발송 요청이 도달하면, THEN THE notification service SHALL 발송을 거부하고 사용자 설정을 우선한다.\n- IF 알림 생성에 필요한 참조 리소스가 삭제·비공개로 전환되었으면, THEN THE notification service SHALL 알림을 생성하지 않는다.\n- IF 사용자가 소스(작성자/주제)를 Mute 했으면, THEN THE notification service SHALL 해당 소스의 알림을 생성하지 않는다.\n- IF 속도 제한을 초과할 조건이면, THEN THE notification service SHALL 추가 알림을 억제하고 다이제스트로 이동을 고려한다.\n\nUser Recovery\n- THE notification service SHALL 알림 센터에서 알림 읽음/삭제/모두 읽음/소스 음소거 관리 기능을 제공한다.\n- THE notification service SHALL 이메일 최하단에 카테고리별 구독 관리 링크를 포함한다.\n\n## 10) Data Retention and Auditability (communications context)\n\nRetention\n- THE notification service SHALL In-app 알림을 180일 보존한다.\n- THE notification service SHALL 다이제스트 생성 기록을 365일 보존한다.\n\nAuditability\n- THE notification service SHALL 각 발송 시도에 대해 수신자, 카테고리, 채널, 결과 상태, 시각을 비즈니스 로깅으로 기록한다.\n- THE notification service SHALL 사용자 요청 시 통지 내역 다운로드를 제공한다(최근 90일).\n\nPrivacy\n- THE notification service SHALL 데이터 최소 수집·전송 원칙을 따른다.\n\n## 11) Mermaid Flow Diagram (end-to-end)\n\n```mermaid\ngraph LR\n  subgraph \"Event Sources\"\n    E1[\"User Interaction(Event)\"] --> E2[\"Content Lifecycle(Event)\"]\n    E3[\"Moderation(Event)\"] --> E4[\"Editorial(Event)\"]\n  end\n\n  subgraph \"Policy & Preferences\"\n    P1[\"Classify Category\"] --> P2[\"Check Consent & Preferences\"]\n    P2 --> P3{\"Within Rate Limits?\"}\n    P3 -->|\"Yes\"| P4[\"Apply Coalescing(10m)\"]\n    P3 -->|\"No\"| P5[\"Suppress or Defer\"]\n  end\n\n  subgraph \"Delivery Orchestration\"\n    D1{\"Select Channels\"} --> D2[\"Create Notification Record\"]\n    D2 --> D3[\"Queue In-App\"]\n    D2 --> D4[\"Queue Email\"]\n    D4 --> D5{\"Email Success?\"}\n    D5 -->|\"Yes\"| D6[\"Mark Delivered\"]\n    D5 -->|\"No\"| D7[\"Retry(5m,30m,120m)\"]\n    D7 --> D8{\"Succeeded?\"}\n    D8 -->|\"Yes\"| D6\n    D8 -->|\"No\"| D9[\"Fallback In-app Only\"]\n  end\n\n  subgraph \"User Experience\"\n    U1[\"Notification Center\"] --> U2[\"Email Inbox\"]\n    U3[\"Manage Preferences\"] --> U4[\"Snooze/Mute/DND\"]\n  end\n\n  subgraph \"Observability\"\n    O1[\"Log Attempt\"] --> O2[\"Metrics & KPIs\"]\n  end\n\n  E1 --> P1\n  E2 --> P1\n  E3 --> P1\n  E4 --> P1\n  P4 --> D1\n  P5 -.-> D1\n  D3 --> U1\n  D4 --> U2\n  U3 -.-> P2\n  O1 -.-> O2\n```\n\n## 12) Success Criteria and KPIs (business-level)\n\n- THE notification service SHALL 사용자당 불만족 신고율(스팸 표시/수신 거부) 월간 0.5% 미만을 목표로 한다.\n- THE notification service SHALL 거래성 이메일 첫 시도 성공률 98% 이상, 24시간 내 최종 성공률 99.5% 이상을 유지한다.\n- THE notification service SHALL 다이제스트 오픈률 20% 이상, 멘션 알림 In-app 확인률 70% 이상을 목표로 한다.\n\n## 13) Related Documents\n\n- For end-to-end feature behaviors, see the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- For user-perceived performance targets, refer to the [Non-Functional Requirements for pol-econ-board](./08-pol-econ-board-non-functional-requirements.md).\n\nCompliance Statement\n- This document provides business requirements only. All technical implementation decisions belong to developers. Developers have full autonomy over architecture, APIs, and database design."},"plan":"Organize the content as a requirements specification aligned to the provided outline and project context:\n1) Title: Notifications and Communications Requirements — pol-econ-board\n2) Scope and Principles (business-only scope, taxonomy, transactional vs non-transactional, timezone default Asia/Seoul)\n3) Notification Taxonomy and Trigger Events (categories and detailed EARS event-driven rules)\n4) Channels, Frequency, and Rate Limits (assignment logic, quiet hours/DND, coalescing windows, rate limits, performance expectations aligned with NFRs)\n5) Subscription, Follow, and Digest Policies (follow defaults, digest schedule and composition, deduplication/coalescing)\n6) Consent Management and Preference Settings (opt-in/opt-out, category × channel toggles, DND, snooze, mute, unsubscribe behavior)\n7) Message Composition and Tone (structure, character limits, localization, accessibility, brand safety)\n8) Delivery Performance, Retry, and Fallback (targets, retry backoff, bounce handling, fallback rules)\n9) Role-specific Rules and Governance Alignment (member, expert, moderator, editor, admin requirements)\n10) Error Handling and User Recovery in communications context\n11) Data Retention and Auditability (retention windows; audit logs; privacy)\n12) Mermaid Flow Diagram (end-to-end)\n13) Success Criteria and KPIs\n14) Related Documents (descriptive links) and business-only scope statement\nEnsure all sections contain EARS-formatted, testable requirements and maintain consistency with related documents.","review":"Enhance to implementation-ready business requirements using these criteria:\n- Strict EARS format for all applicable requirements (WHEN/WHILE/IF/THEN/WHERE/THE/SHALL kept in English; all other words in en-US).\n- No technical implementation details (no APIs, no database schemas, no architecture).\n- Comprehensive coverage per outline: notification types & triggers; channels & frequency limits; subscription/follow/digest; consent & preferences; message tone & composition; retry/fallback.\n- Align performance targets with Non-Functional Requirements: In-app notifications P95 ≤ 5s, P99 ≤ 15s under normal conditions; email queue timelines as stated.\n- Mermaid diagrams must use double quotes for ALL labels, no spaces between brackets/braces and quotes, and proper arrow syntax (`-->`, `-.->`, `==>`). Prefer LR orientation and subgraphs.\n- Business rules must be specific, measurable, and testable; include error handling and edge cases.\n- Links must use descriptive text, not raw filenames.\n- Include business-only scope statement without meta-document phrasing.\n- Role coverage must include member, expert, moderator, editor, admin.\n- Respect privacy/consent boundaries; distinguish transactional vs non-transactional communications.\n- Length target: 5,000–30,000+ characters; expand where necessary for completeness.","content":"# Notifications and Communications Requirements — pol-econ-board\n\n## 1) Scope and Principles\n- Coverage: In-app notifications, email communications, and batch/digest messages related to user activity, content interactions, moderation/governance, editorial operations, and account/security events.\n- Exclusions: Frontend UI layouts, transport/infrastructure specifics, vendor/protocol details, code or API definitions.\n- Goals: Timely, relevant, controllable, and compliant communications that respect user consent and minimize noise.\n- Timezone: THE notifications program SHALL operate on user-local timezone; WHERE user timezone is unknown, the default SHALL be Asia/Seoul (KST).\n\nEARS Principles\n- THE communications policy for pol-econ-board SHALL prioritize user control (opt-in/opt-out, preferences), relevance, timeliness, and minimal intrusiveness.\n- THE communications policy SHALL distinguish transactional messages (account/security/obligatory) and non-transactional messages (community growth/marketing/editorial digests).\n- THE communications service SHALL support user-local scheduling for batch and digest deliveries with Asia/Seoul as default.\n- THE communications service SHALL maintain compliance with privacy and consent boundaries for all channels and categories.\n\n## 2) Notification Taxonomy and Trigger Events\n\nCategories (business-level)\n- Account & Security (transactional): sign-up verification, password reset, password changed, email change confirmation, device/session revocation confirmation, role change.\n- Engagement (community interactions): mention, direct reply to a user’s post/comment, new post by followed author, new post in followed topic, expert Q&A invitation or assignment, content featured notification, new follower.\n- Moderation & Governance: content reported about user, auto-hide applied, decision issued (warning/suspension), appeal received, appeal outcome, report assigned to moderator, SLA reminder for open reports.\n- Editorial Operations: draft submitted for review, review decision, scheduled publish reminder, featured/curated selection, special topic program updates.\n- Digests & Summaries: daily/weekly topic digest, author digest, personalized activity summary, moderator/editor ops digests (role-scoped).\n\nEvent-driven Requirements (representative and testable)\n- WHEN a user is mentioned in a post or comment, THE notification service SHALL create a mention notification for the mentioned user.\n- WHEN a new reply is posted to a user’s comment, THE notification service SHALL prepare and deliver a reply notification to the original commenter per preferences.\n- WHEN a followed topic publishes a new post, THE notification service SHALL consult the recipient’s category/channel preferences and applicable limits before delivery.\n- WHEN a followed author publishes multiple posts within 10 minutes, THE notification service SHALL coalesce the events into a single notification for that window.\n- WHEN an expert Q&A answer request is assigned to an expert, THE notification service SHALL generate a high-priority real-time notification to the expert.\n- WHEN a user’s content is reported and moderation begins, THE notification service SHALL notify the author that review has started while minimizing sensitive identifiers.\n- WHEN a new report is assigned to a moderator, THE notification service SHALL dispatch a priority notification to the assigned moderator.\n- WHEN a draft is submitted to the review queue, THE notification service SHALL notify the responsible editor of the review request.\n- WHEN a review decision is recorded as approved or changes requested, THE notification service SHALL notify the author of the outcome with reason summary.\n- WHEN a security-sensitive account event occurs (password reset request, email change confirmation), THE notification service SHALL dispatch transactional notifications without delay.\n- WHEN the scheduled weekly digest window arrives, THE notification service SHALL aggregate the user’s followed sources and compile a summary.\n- WHEN a user gains a new follower, THE notification service SHALL create an engagement notification per the recipient’s preferences and rate limits.\n- WHEN a user’s post is featured by editors, THE notification service SHALL inform the author with the feature context.\n\nUbiquitous Rules (classification and envelope)\n- THE notification service SHALL apply a category tag (account/security, engagement, moderation, editorial, digest) to every notification.\n- THE notification service SHALL include a unique identifier, creation timestamp (with user timezone reference), category, priority, and related resource reference in every notification.\n\n## 3) Channels, Frequency, and Rate Limits\n\nChannels\n- In-app: notification center entries and badges (user-visible counters).\n- Email: transactional and digest communications.\n\nChannel Assignment (policy)\n- WHERE the event is transactional (account/security), THE notification service SHALL use In-app + Email as default channels.\n- WHERE the event is engagement (mentions/replies), THE notification service SHALL use In-app by default and use Email only if the user has enabled Email for that category.\n- WHERE the event is digest, THE notification service SHALL use Email for the digest and provide an In-app summary card.\n- WHERE the event targets moderators/editors/admins for operational duties, THE notification service SHALL support both In-app and Email according to their role preferences.\n\nFrequency and Rate Limits (per user unless specified)\n- THE notification service SHALL enforce a global per-user cap of up to 200 In-app notifications/day and up to 20 Emails/day.\n- WHERE engagement events relate to the same post/thread, THE notification service SHALL coalesce events into a single notification within a 10-minute window.\n- WHERE followed-author events occur within 10 minutes, THE notification service SHALL roll up into one notification.\n- WHERE digest delivery is enabled, THE notification service SHALL limit frequency to Daily or Weekly, and SHALL not allow both simultaneously per digest type.\n- WHILE a user has DND (Do Not Disturb) hours configured, THE notification service SHALL defer real-time non-transactional notifications until DND ends; transactional alerts may bypass DND.\n\nPerformance Expectations (aligned with Non-Functional Requirements)\n- THE notification service SHALL make In-app notifications available within 5 seconds at P95 and within 15 seconds at P99 under normal conditions.\n- THE notification service SHALL enqueue transactional Emails within 2 minutes at P95 and digests within 10 minutes at P95 from their scheduled time.\n\nBurst and Abuse Protections\n- WHERE event volume exceeds 50 notifications/hour for a single recipient outside digests, THE notification service SHALL throttle non-critical engagement notifications to protect experience and suggest digest mode.\n- IF a recipient reaches the daily Email cap, THEN THE notification service SHALL defer non-critical Email notifications to the next digest or the next day per user preference.\n\n## 4) Subscription, Follow, and Digest Policies\n\nFollow Defaults\n- WHEN a user follows a topic or author, THE notification service SHALL set the default alert level to “In-app real-time” for that source.\n- WHERE a user unfollows a source, THE notification service SHALL cease future notifications from that source immediately across all channels.\n\nDigest Composition and Scheduling\n- THE notification service SHALL include up to 10 highlight items per digest, prioritizing engagement and followed-source relevance.\n- WHERE the Daily Digest is enabled, THE notification service SHALL deliver between 07:00 and 09:00 user-local time using a randomized slot within the window.\n- WHERE the Weekly Digest is enabled, THE notification service SHALL deliver on Mondays between 08:00 and 10:00 user-local time.\n- THE notification service SHALL exclude items already consumed In-app during the digest period to avoid redundancy.\n\nCoalescing and Deduplication\n- THE notification service SHALL present a single roll-up notification when more than one event of the same type occurs within a 10-minute window, incrementing a count.\n- IF duplicate creation conditions are detected for the same recipient and resource, THEN THE notification service SHALL suppress subsequent duplicates.\n\n## 5) Consent Management and Preference Settings\n\nConsent Boundaries\n- THE notification service SHALL treat transactional messages as permitted under the service contract and essential operations.\n- THE notification service SHALL send non-transactional (marketing/community growth/editorial) messages only with explicit opt-in for the relevant categories.\n\nPreference Model\n- THE notification service SHALL provide category × channel toggles for: account/security, engagement, follows (authors/topics), moderation, editorial, digest; channels: In-app, Email.\n- WHERE no explicit user setting exists, THE notification service SHALL apply rational defaults: engagement In-app=ON, Email=OFF; follows In-app=ON, Email=OFF; digest Email=Weekly ON; account/security Email=ON.\n- THE notification service SHALL support DND windows (e.g., 22:00–08:00 user-local) and Snooze durations (e.g., 2h/8h/24h).\n- THE notification service SHALL support Mute at author/post/topic granularity to block notifications from specific sources.\n\nUser Control Actions\n- WHEN a user uses the unsubscribe link in an Email, THE notification service SHALL immediately stop Email delivery for that message category for the user.\n- WHEN a user opts out of all marketing/community messages, THE notification service SHALL prohibit delivery of such messages across all channels.\n- WHEN a user changes preferences, THE notification service SHALL apply the changes to subsequent events immediately.\n\nProof and Audit of Consent\n- THE notification service SHALL record the timestamp, scope, and channel for opt-ins and opt-outs to support audit and compliance inquiries.\n\n## 6) Message Composition and Tone Guidelines\n\nMessage Structure and Limits\n- THE notification service SHALL provide a title (max 80 characters), a summary (max 140 characters), and a core sentence in the body copy for clarity.\n- THE notification service SHALL avoid including sensitive personal data (full email addresses, phone numbers, exact locations) in notification bodies.\n- THE notification service SHALL use descriptive link text in messages (avoid “click here”).\n\nTone and Content\n- THE notification service SHALL maintain a factual, neutral, and non-inflammatory tone appropriate to political/economic topics.\n- THE notification service SHALL include minimal sufficient context (e.g., post title) and a direct link to the relevant resource.\n\nLocalization and Accessibility\n- THE notification service SHALL localize message content to the user’s preferred language; the baseline default is en-US.\n- THE notification service SHALL provide accessible copy suitable for assistive technologies and avoid color-only or icon-only significance.\n\nBrand Safety and Safety Checks\n- IF prohibited terms, excessive claims, or misleading constructs are detected by policy checks, THEN THE notification service SHALL hold the message for review and mark it as requiring attention.\n\nExamples (business copy patterns)\n- Mention: “You were mentioned in ‘Title’ by Author.”\n- Reply: “New reply to your comment in ‘Title’.”\n- Moderation: “Your post was temporarily hidden pending review.”\n- Digest: “Your weekly highlights in topics you follow.”\n\n## 7) Delivery Performance, Retry, and Fallback\n\nDelivery Targets\n- THE notification service SHALL create notification records within 1 second of event ingestion and make In-app notifications available within 5 seconds at P95 and 15 seconds at P99 under normal conditions.\n- THE notification service SHALL enqueue transactional Email within 2 minutes at P95 and digest Email within 10 minutes at P95.\n\nRetry and Fallback (Email and In-app)\n- IF an Email delivery attempt fails, THEN THE notification service SHALL retry at 5, 30, and 120 minutes for a maximum of 3 attempts.\n- IF all Email retries fail, THEN THE notification service SHALL maintain In-app delivery only and record the failure for audit.\n- IF In-app presentation is deferred due to DND, THEN THE notification service SHALL present immediately upon DND expiration.\n\nBounce and Complaint Handling\n- WHEN hard bounces or repeated complaints are detected for Email, THE notification service SHALL disable Email channel for the affected address and prompt the user to update preferences.\n- WHEN soft bounces persist across all three retries, THE notification service SHALL mark the attempt as failed and retain In-app delivery only.\n\nAggregation Windows\n- THE notification service SHALL use a default coalescing window of 10 minutes and SHALL allow policy-defined adjustments by event type.\n\n## 8) Role-specific Rules and Governance Alignment\n\nMember\n- THE notification service SHALL provide mentions/replies/follow-based content alerts via In-app by default.\n- WHERE sanctions or policy actions affect the user, THE notification service SHALL deliver In-app + Email notices with reason summaries.\n\nExpert\n- THE notification service SHALL provide expert Q&A assignments, feature placements, and significant follower growth summaries.\n\nModerator\n- THE notification service SHALL display report assignments, SLA threshold breaches, and appeal arrivals with high priority.\n- THE notification service SHALL cap moderator Emails at 40/day per moderator and distribute non-urgent notifications in cohorts to avoid overload.\n\nEditor\n- THE notification service SHALL provide alerts for drafts awaiting review, scheduled publish reminders, and featured queue updates.\n\nAdmin\n- THE notification service SHALL provide role change approval requests, policy update announcements, and transparency report preparation notifications.\n\nGovernance Alignment\n- THE notification service SHALL include a concise reference to relevant community rules in moderation-related notices.\n\n## 9) Error Handling and User Recovery (communications context)\n\nCommon Error Scenarios (business handling)\n- IF a send request targets a category that the user has opted out of, THEN THE notification service SHALL refuse delivery and honor user preferences.\n- IF the referenced resource is deleted or private, THEN THE notification service SHALL not create the notification.\n- IF the user has muted the source (author/post/topic), THEN THE notification service SHALL not create the notification for that source.\n- IF rate-limit conditions are exceeded, THEN THE notification service SHALL suppress additional notifications and consider digest deferral.\n\nUser Recovery\n- THE notification service SHALL provide mark-as-read, delete, mark-all-as-read, and source mute controls in the In-app notification center.\n- THE notification service SHALL include category-level subscription management links at the bottom of Emails.\n\n## 10) Data Retention and Auditability (communications context)\n\nRetention Windows\n- THE notification service SHALL retain In-app notifications for 180 days.\n- THE notification service SHALL retain digest creation records for 365 days.\n- THE notification service SHALL retain notification delivery attempt logs for 90 days to support troubleshooting and consent proof.\n\nAuditability and Privacy\n- THE notification service SHALL record for each delivery attempt: recipient reference, category, channel, result state, and timestamp.\n- THE notification service SHALL provide a downloadable user-facing history of notifications for the last 90 days upon request.\n- THE notification service SHALL adhere to data minimization and exclude sensitive personal data from notification payloads and logs.\n\n## 11) Mermaid Flow Diagram (end-to-end)\n```mermaid\ngraph LR\n  subgraph \"Event Sources\"\n    E1[\"User Interaction(Event)\"] --> E2[\"Content Lifecycle(Event)\"]\n    E3[\"Moderation(Event)\"] --> E4[\"Editorial(Event)\"]\n  end\n\n  subgraph \"Policy & Preferences\"\n    P1[\"Classify Category\"] --> P2[\"Check Consent & Preferences\"]\n    P2 --> P3{\"Within Rate Limits?\"}\n    P3 -->|\"Yes\"| P4[\"Apply Coalescing(10m)\"]\n    P3 -->|\"No\"| P5[\"Suppress or Defer\"]\n  end\n\n  subgraph \"Delivery Orchestration\"\n    D1{\"Select Channels\"} --> D2[\"Create Notification Record\"]\n    D2 --> D3[\"Queue In-App\"]\n    D2 --> D4[\"Queue Email\"]\n    D4 --> D5{\"Email Success?\"}\n    D5 -->|\"Yes\"| D6[\"Mark Delivered\"]\n    D5 -->|\"No\"| D7[\"Retry(5m,30m,120m)\"]\n    D7 --> D8{\"Succeeded?\"}\n    D8 -->|\"Yes\"| D6\n    D8 -->|\"No\"| D9[\"Fallback In-app Only\"]\n  end\n\n  subgraph \"User Experience\"\n    U1[\"Notification Center\"] --> U2[\"Email Inbox\"]\n    U3[\"Manage Preferences\"] --> U4[\"Snooze/Mute/DND\"]\n  end\n\n  subgraph \"Observability\"\n    O1[\"Log Attempt\"] --> O2[\"Metrics & KPIs\"]\n  end\n\n  E1 --> P1\n  E2 --> P1\n  E3 --> P1\n  E4 --> P1\n  P4 --> D1\n  P5 -.-> D1\n  D3 --> U1\n  D4 --> U2\n  U3 -.-> P2\n  O1 -.-> O2\n```\n\n## 12) Success Criteria and KPIs (business-level)\n- THE notification service SHALL target monthly complaint rate (spam markings/unsubscribes) under 0.5% per user.\n- THE notification service SHALL maintain first-attempt transactional Email success ≥ 98% and 24-hour final success ≥ 99.5%.\n- THE notification service SHALL target digest open rate ≥ 20% and mention notification In-app view rate ≥ 70%.\n- THE notification service SHALL meet In-app timeliness targets (P95 ≤ 5s, P99 ≤ 15s) for ≥ 99% of business hours.\n\n## 13) Related Documents and Business-only Scope\n- See the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md) for end-to-end feature behaviors and event triggers.\n- Refer to the [Non-Functional Requirements for pol-econ-board](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, and observability expectations.\n\nBusiness-only scope statement: Defines WHAT the system should do in business terms. All technical implementation decisions (architecture, APIs, database design) belong to the development team, which retains full autonomy over HOW to implement these requirements.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:35.277Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"성능/가용성/확장성 등 비기능 요구를 사용자 체감 기준으로 명확히 하기 위함.","filename":"08-pol-econ-board-non-functional-requirements.md","documentType":"requirement","outline":["성능 기대치(응답 시간/처리량/동시성)","가용성 및 복구 목표(RTO/RPO 개념)","확장성·유연성 기대","관측가능성 요구(로그/지표/경보) 비즈니스 기준","개인정보 최소 수집/보관 원칙 연계","알림·배치 작업 시간 제약 기대","용량 계획 가이드와 성장 가정"],"audience":"development team","keyQuestions":["사용자가 체감하는 성능 기준은 무엇인가","장애/복구/확장 관점의 기대 수준은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["01-pol-econ-board-service-overview.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["정량적·검증 가능한 기준 제시","기술 구현 세부 금지"],"content":"# pol-econ-board Non-Functional Requirements\n\nThis document defines measurable, testable non-functional requirements for the pol-econ-board service from a user-perceived perspective. It describes WHAT the system must achieve in terms of performance, availability, scalability, observability, privacy-by-design, time windows, and capacity planning. It does not prescribe HOW to implement these requirements. All technical implementation decisions (architecture, APIs, data models, infrastructure) belong to the development team.\n\n## 1. Scope, Principles, and Assumptions\n\n### 1.1 Scope and Intent\n- THE document SHALL specify business-level, verifiable criteria that govern the quality attributes of pol-econ-board.\n- THE document SHALL avoid implementation details and focus on user-perceived outcomes and operational expectations.\n- THE document SHALL be used by development, QA, operations, and product to plan, build, validate, and operate the service.\n\n### 1.2 Related Documents\n- For product context and priorities, see the [Service Overview for Pol-Econ Board](./01-pol-econ-board-service-overview.md).\n- For legal, privacy, and security controls, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n### 1.3 Definitions (Business-Level)\n- SLO: Service Level Objective, a target performance or availability level measured over a time window.\n- Error Budget: The permissible amount of unavailability or SLO violation within the SLO window.\n- RTO: Recovery Time Objective (time to restore service after a disruption).\n- RPO: Recovery Point Objective (maximum acceptable data loss measured in time).\n- P50/P95/P99: Percentile distribution for response times (server-side processing), excluding end-user network and device rendering time.\n- KST: Korea Standard Time (Asia/Seoul), the primary business timezone for scheduling.\n\n### 1.4 Service Boundaries and Assumptions\n- THE service SHALL primarily target users located in Korea and operate scheduling windows in KST.\n- WHERE third-party providers are involved (e.g., email), THE service SHALL measure its own hand-off times and treat provider delays separately for SLO calculations.\n- THE baseline usage assumptions and capacity planning in this document SHALL be revisited quarterly and on major product changes.\n\n## 2. Performance Expectations (Response Time, Throughput, Concurrency)\n\nAll performance requirements are expressed as user-perceived server-side processing times measured at the service boundary, unless stated otherwise. Tables define default targets; EARS-formatted requirements follow for testable statements.\n\n### 2.1 Core Response Time SLOs (Per Request)\n\n| User Journey (Server-Side) | P50 Target | P95 Target | P99 Target | Notes |\n|----------------------------|------------|------------|------------|-------|\n| Read timeline/feed         | 150 ms     | 500 ms     | 900 ms     | Includes personalization and filtering.\n| View a post with comments  | 180 ms     | 600 ms     | 1000 ms    | For initial page of comments only.\n| Create/edit post save      | 200 ms     | 700 ms     | 1200 ms    | Excludes large media uploads; see 2.5.\n| Post publish action        | 220 ms     | 750 ms     | 1200 ms    | Moderation hooks may add queueing; see 2.4.\n| Add comment/reply          | 150 ms     | 500 ms     | 900 ms     | Idempotent to avoid duplicates.\n| Search (keyword/tag)       | 250 ms     | 800 ms     | 1500 ms    | Includes typo-tolerance and sorting.\n| Login (credential verify)  | 200 ms     | 600 ms     | 1000 ms    | Excludes email verification roundtrips.\n| Notification fetch (in-app)| 120 ms     | 350 ms     | 700 ms     | For last 50 notifications.\n| Moderation queue load      | 200 ms     | 700 ms     | 1200 ms    | For standard filters applied.\n\n#### EARS Requirements: Response Time\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions (Section 8), THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident (Section 5.4) and execute throttling/deferral policies (Section 7 and Section 9) as applicable.\n\n### 2.2 Throughput and Concurrency Targets\n\n| Metric | Baseline Target | Peak Target (Burst ≤ 10 min) | Notes |\n|-------|------------------|-------------------------------|-------|\n| Read requests per second (RPS) | 350 RPS | 900 RPS | Mix of feed, post, and notification fetch.\n| Write requests per second (RPS) | 70 RPS  | 200 RPS | Posts, edits, comments, reactions, reports.\n| Concurrent authenticated sessions | 6,000 | 15,000 | Active sessions during national events.\n| Concurrent content creators | 800 | 2,000 | Members, experts, editors, moderators combined.\n\n#### EARS Requirements: Throughput and Concurrency\n- THE service SHALL sustain the baseline throughput and concurrency targets continuously during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet the peak targets without violating P95 response SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling and present clear user messaging (Section 9.3).\n\n### 2.3 Data Consistency Windows\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second for posts and comments in the same region.\n- WHERE global counters, aggregates, and ranking feeds are displayed, THE service SHALL allow eventual consistency with a maximum staleness of 3 seconds under normal conditions and 10 seconds under peak bursts.\n- IF a moderation action hides content, THEN THE service SHALL reflect the hidden state across all user-visible endpoints within 5 seconds.\n\n### 2.4 Queueing and Background Work\n- THE service SHALL separate user-facing acknowledgement from heavy background processing, ensuring that acknowledgements meet the response time SLOs while background tasks complete within defined deadlines (Section 7).\n- IF background processing exceeds deadlines, THEN THE service SHALL notify operators through alerts and inform impacted users through non-intrusive in-app messages when relevant.\n\n### 2.5 Media Handling (Business-Level)\n- WHERE users upload large attachments, THE service SHALL provide progress feedback and SHALL acknowledge the upload request within 1 second, with final processing completed within 2 minutes for files up to 100 MB.\n- IF media processing fails, THEN THE service SHALL preserve the draft state and allow retry without data loss.\n\n## 3. Availability and Recovery Targets (RTO/RPO)\n\n### 3.1 Availability SLOs by Business Tier\n\n| Tier | Description | Monthly Availability Target | Error Budget |\n|------|-------------|-----------------------------|--------------|\n| P0 | Authentication, read feed/post, submit content, moderation hide/unhide | 99.90% | 43.2 minutes downtime/month |\n| P1 | Search, notifications fetch, reactions, bookmarks | 99.50% | 3.6 hours downtime/month |\n| P2 | Batch digests, analytics exports, editorial curation updates | 99.00% | 7.3 hours downtime/month |\n\n#### EARS Requirements: Availability\n- THE service SHALL meet the monthly availability targets by tier as defined in the table.\n- WHEN maintenance is required, THE service SHALL schedule it within the maintenance window (Sundays 02:00–05:00 KST) and SHALL not breach P0 availability.\n- IF unplanned downtime occurs, THEN THE service SHALL prioritize restoration of P0 functions before P1 and P2.\n\n### 3.2 Recovery Objectives\n\n| Tier | RTO (Restore Service) | RPO (Acceptable Data Loss) | Notes |\n|------|------------------------|----------------------------|-------|\n| P0 | 30 minutes | 5 minutes | Auth, read, submit, moderation state.\n| P1 | 60 minutes | 15 minutes | Search indices, notifications, reactions.\n| P2 | 180 minutes | 60 minutes | Batch jobs, exports, curation.\n\n#### EARS Requirements: Recovery\n- THE service SHALL restore P0 capabilities within 30 minutes of a major incident and limit data loss to 5 minutes.\n- WHERE partial restoration is possible, THE service SHALL restore read-only access first if full write capability cannot be immediately recovered.\n- IF RTO or RPO targets are at risk, THEN THE service SHALL communicate status to operators and publish a user-facing status update within 15 minutes of detection and every 30 minutes thereafter until resolved.\n\n### 3.3 Error Budget and Release Policy\n- THE service SHALL define monthly error budgets per tier equal to 100% minus the availability target.\n- IF the P0 error budget is exhausted within the month, THEN THE service SHALL pause non-urgent feature launches and focus on reliability until budget recovers the following month.\n\n## 4. Scalability and Flexibility Expectations\n\n#### EARS Requirements: Scalability and Updates\n- THE service SHALL scale to maintain P95 response targets across baseline and peak loads defined in Section 2.2.\n- WHERE traffic grows beyond peak targets for two consecutive weeks, THE service SHALL raise capacity planning actions within 5 business days (Section 8).\n- THE service SHALL perform updates with zero user-visible downtime for P0 functions; brief degradations for P1/P2 are acceptable within respective error budgets.\n- WHERE a gradual rollout is required, THE service SHALL support audience-based enablement by role (member, expert, moderator, editor, admin) and by percentage-based cohorts.\n\n## 5. Observability Requirements (Business Criteria)\n\n### 5.1 Business Event Logging\n- THE service SHALL log key business events: authentication successes/failures, content creation/edits/deletions, moderation actions, policy violations, notification dispatches, and user preference changes.\n- WHERE events include personal data, THE service SHALL minimize logged identifiers and apply redaction per compliance policy in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- IF logging fails, THEN THE service SHALL not block user actions and SHALL record a compensating audit entry indicating the gap.\n\n### 5.2 Metrics and SLO Monitoring\n- THE service SHALL continuously measure request rates, success/error ratios, latency percentiles, queue backlogs, and notification delivery latencies for each tier.\n- WHEN P95 latency or availability deviates from targets for 10 minutes, THE service SHALL raise a warning; for 20 minutes, THE service SHALL raise a critical alert.\n\n### 5.3 Alerting and Response Expectations\n\n| Severity | Trigger (Examples) | Operator Response Time (KST) | User Communication |\n|----------|---------------------|------------------------------|--------------------|\n| P0-Critical | P0 unavailability > 5 min; P95 latency breach > 20 min; security incident indicators | Acknowledge ≤ 5 min, Mitigation start ≤ 15 min, 24/7 | Status page update ≤ 15 min; 30-min cadence thereafter |\n| P1-High | P1 unavailability > 20 min; repeated retries on notifications | Acknowledge ≤ 15 min, Business hours (07:00–23:00 KST) | Status page update if user impact material |\n| P2-Medium | Batch delays > 2 hours; digest backlog | Acknowledge ≤ 4 hours, Business hours | Optional update in release notes |\n\n#### EARS Requirements: Alerting and Response\n- THE service SHALL dispatch alerts according to the severity matrix and SHALL meet the operator response times stated.\n- IF a P0 incident is declared, THEN THE service SHALL publish a status page update within 15 minutes and maintain updates at least every 30 minutes until resolution.\n\n### 5.4 Incident Management Flow\n- THE service SHALL follow a consistent detect → triage → mitigate → recover → review cycle with operator and user communications.\n\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"SLO Monitor(Deviations)\"] --> B{\"P0/P1/P2?\"}\n  end\n  subgraph \"Triage\"\n    C[\"Assign Severity\"] --> D[\"Notify On-call\"]\n  end\n  subgraph \"Mitigation\"\n    E[\"Throttling/Feature Toggle\"] --> F[\"Partial Restore(Read-first)\"]\n  end\n  subgraph \"Recovery\"\n    G[\"Full Service Restore\"] --> H[\"Backlog Drain\"]\n  end\n  subgraph \"Communication\"\n    I[\"Status Page Update\"] --> J[\"Postmortem(Within 5 Business Days)\"]\n  end\n  B -->|\"P0\"| C\n  B -->|\"P1/P2\"| C\n  D --> E\n  E --> F\n  F --> G\n  G --> H\n  C -.-> I\n  G -.-> I\n  H -.-> J\n```\n\n## 6. Privacy by Design and Data Minimization (Business Link)\n- THE service SHALL collect only the minimum personal data necessary to provide features, following the principles defined in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- WHERE personal data is processed for analytics or diagnostics, THE service SHALL prefer aggregated or pseudonymized forms aligned to approved business purposes.\n- IF a user opts out of certain data processing, THEN THE service SHALL honor preferences within 24 hours across all processing pipelines.\n\n## 7. Notification and Batch Time Windows\n\n### 7.1 Real-time Notifications (In-App)\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99 after the triggering event under normal conditions.\n- IF delivery exceeds 60 seconds for more than 1% of notifications in a 15-minute window, THEN THE service SHALL raise a warning and prioritize notification pipelines.\n\n### 7.2 Email/Scheduled Digests\n- THE service SHALL send daily digests between 07:00–09:00 KST on user-selected days, and weekly digests between 08:00–10:00 KST on user-selected weekdays.\n- WHERE users change preferences, THE service SHALL reflect changes in the next eligible digest cycle.\n\n### 7.3 Batch and Heavy Processing Windows\n- THE service SHALL run heavy batch processes (e.g., re-indexing, large exports) primarily between 02:00–05:00 KST.\n- WHERE batch tasks risk impacting P0 workloads, THE service SHALL defer or throttle them to preserve P0 SLOs.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and, where user-facing, inform affected users with a revised completion window within 60 minutes.\n\n## 8. Capacity Planning Guide and Growth Assumptions\n\n### 8.1 Baseline Assumptions (Quarter 1–2)\n\n| Metric | Value | Notes |\n|--------|-------|-------|\n| MAU | 120,000 | General audience during initial adoption.\n| DAU | 36,000 | 30% of MAU.\n| Peak concurrent sessions | 12,000 | Major news cycles, debates.\n| Daily posts | 8,000 | Includes expert insights and editor features.\n| Daily comments | 80,000 | High engagement threads.\n| Daily reactions/bookmarks | 400,000 | Lightweight interactions.\n| Storage growth | 60 GB/day | Posts, comments, logs, and media references.\n\n### 8.2 Scaling Triggers and Actions\n- THE service SHALL review capacity monthly and after significant product launches or public events.\n- WHEN P95 latency approaches targets within 10% for two consecutive weeks, THE service SHALL initiate capacity increase planning within 5 business days.\n- WHERE storage growth exceeds plan by 25% over a month, THE service SHALL adjust retention and archiving policies according to data lifecycle standards.\n\n### 8.3 Fair-Use and Backpressure\n- THE service SHALL protect overall user experience by applying fair-use limits during bursts, prioritizing P0 traffic, and transparently communicating delays for non-critical actions.\n\n## 9. Reliability and Rate Limiting Expectations\n\n### 9.1 Idempotency and Duplicate Prevention (Business-Level)\n- THE service SHALL treat repeated submissions of the same post/comment within 30 seconds as a single action and avoid duplicates while returning a single confirmation to the user.\n\n### 9.2 Eventual Consistency and User Feedback\n- THE service SHALL surface non-blocking indicators when background processing is pending and SHALL ensure final consistency within deadlines (Section 2.3 and 7.3).\n\n### 9.3 Rate Limiting and User Messaging\n- WHERE users exceed fair-use thresholds (e.g., reports, comments, reactions), THE service SHALL return a clear message indicating temporary limits and the expected retry horizon.\n- IF limits are applied erroneously, THEN THE service SHALL automatically lift them within 5 minutes after the triggering condition is cleared.\n\n## 10. Non-Functional Acceptance Criteria (Testable)\n\n- THE service SHALL achieve P95 and P99 response time targets in Section 2.1 for the defined user journeys during synthetic load tests matching Section 8 assumptions.\n- THE service SHALL sustain throughput and concurrency targets in Section 2.2 for at least 8 continuous hours without breaching P95 SLOs.\n- THE service SHALL meet monthly availability targets in Section 3.1 and recovery objectives in Section 3.2 across two consecutive months prior to general release.\n- THE service SHALL meet notification timeliness in Section 7 with at least 99% of in-app notifications delivered within 15 seconds under normal conditions.\n- THE service SHALL satisfy observability requirements, including alerting within thresholds (Section 5.2–5.3) and incident communications timelines.\n- THE service SHALL demonstrate adherence to data minimization commitments in Section 6 through audit of sampled events and stored logs.\n\n## 11. Constraints and Out-of-Scope\n- THE document provides business requirements only. All technical implementation decisions belong to the development team, including architecture, APIs, and data models.\n- UI/UX specifications, screen design, and styling are out of scope.\n- Detailed encryption algorithms, provider selections, and infrastructure topology are out of scope.\n\n## 12. Appendix: Glossary\n- Availability: The proportion of time that a service is usable by users, within agreed functionality thresholds.\n- Business Hours: 07:00–23:00 KST for operational staffing expectations, unless otherwise noted.\n- Consistency Window: The time allowed for data to become visible across all parts of the service after a change.\n- Maintenance Window: A reserved time for planned changes with minimized user impact.\n- Percentile Latency: A statistical measure where P95 indicates 95% of requests are at or below the specified time.\n\n---\n\n### Consolidated EARS Requirements Index\n\nPerformance\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions, THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\nThroughput and Concurrency\n- THE service SHALL sustain baseline throughput and concurrency during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet peak targets without violating P95 SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling with clear messaging.\n\nConsistency and Background Work\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second.\n- WHERE aggregates and rankings are displayed, THE service SHALL limit staleness to 3 seconds (10 seconds at peak).\n- IF moderation hides content, THEN THE service SHALL reflect the state across endpoints within 5 seconds.\n- THE service SHALL acknowledge user-facing actions quickly and complete heavy work in background within deadlines.\n\nAvailability and Recovery\n- THE service SHALL meet monthly availability targets by tier (P0 99.90%, P1 99.50%, P2 99.00%).\n- WHEN maintenance is needed, THE service SHALL schedule it Sundays 02:00–05:00 KST without breaching P0.\n- IF unplanned downtime occurs, THEN THE service SHALL restore P0 before P1/P2.\n- THE service SHALL restore P0 within 30 minutes and limit data loss to 5 minutes; P1 and P2 per table.\n- WHERE partial restore is possible, THE service SHALL enable read-only first.\n- IF RTO/RPO are at risk, THEN THE service SHALL publish status updates within 15 minutes and every 30 minutes thereafter.\n- THE service SHALL pause non-urgent launches if the P0 error budget is exhausted in a month.\n\nScalability and Updates\n- THE service SHALL scale to maintain P95 targets at baseline and peak.\n- WHERE traffic exceeds peaks for two weeks, THE service SHALL raise capacity planning within 5 business days.\n- THE service SHALL perform updates with zero user-visible downtime for P0; controlled degradations for P1/P2 within error budgets.\n- WHERE gradual rollout is required, THE service SHALL support audience and cohort-based enablement.\n\nObservability and Alerts\n- THE service SHALL log key business events with data minimization.\n- WHERE logging fails, THE service SHALL not block actions and SHALL audit the gap.\n- THE service SHALL measure core metrics continuously and alert on deviations (10 min warn, 20 min critical).\n- THE service SHALL meet operator response times by severity and publish timely user communications for P0.\n\nPrivacy and Data Minimization\n- THE service SHALL collect the minimum personal data necessary and favor aggregated or pseudonymized forms for secondary purposes.\n- IF a user opts out, THEN THE service SHALL honor preferences within 24 hours.\n\nNotifications and Batch\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99.\n- IF delivery exceeds 60 seconds for >1% in 15 minutes, THEN THE service SHALL raise a warning and prioritize pipelines.\n- THE service SHALL schedule digests within the defined morning windows in KST and reflect preference changes in the next cycle.\n- THE service SHALL run heavy batches primarily 02:00–05:00 KST and defer/throttle to protect P0.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and inform users with a revised window within 60 minutes.\n\nCapacity Planning and Fair Use\n- THE service SHALL review capacity monthly and after major events.\n- WHEN P95 latency is within 10% of the target for two weeks, THE service SHALL plan capacity increases within 5 business days.\n- WHERE storage growth exceeds plan by 25% in a month, THE service SHALL adjust retention/archiving per data lifecycle standards.\n- THE service SHALL apply fair-use limits during bursts and communicate delays for non-critical actions.\n\nReliability and Limits\n- THE service SHALL treat repeated submissions within 30 seconds as a single action to prevent duplicates.\n- THE service SHALL surface pending indicators for background processing and ensure final consistency within deadlines.\n- IF fair-use limits are applied erroneously, THEN THE service SHALL lift them within 5 minutes of clearing conditions.\n"},"plan":"Produce a single comprehensive Non-Functional Requirements (NFR) specification for pol-econ-board aligned to the provided outline:\n- Performance expectations: response times by journey, throughput, concurrency, consistency windows, background work, media handling.\n- Availability and recovery: tiered availability SLOs, error budgets, maintenance windows, RTO/RPO by tier, restoration order, status communications.\n- Scalability & flexibility: scaling triggers, update behavior, gradual rollout cohorts by role and percentage.\n- Observability: business event logging, metrics and SLO monitoring, alerting matrix, incident lifecycle, anti-noise constraints.\n- Privacy by design: minimization, pseudonymization/aggregation, opt-out propagation SLA, linkage to Security & Compliance.\n- Notification & batch windows: in-app real-time timeliness, digest schedules, batch windows with priority of P0 workload.\n- Capacity planning: baseline MAU/DAU, concurrent sessions, content volume, storage growth, scaling triggers, fair-use backpressure.\n- Reliability and rate limiting: idempotency, eventual consistency indicators, user messaging for throttling.\n- Acceptance criteria: measurable pass/fail checks across all NFR domains.\nMaintain descriptive links to [Service Overview for Pol-Econ Board] and [Security and Compliance Requirements]. Ensure all Mermaid diagrams conform to syntax rules. Avoid meta text and technical implementation details.","review":"Enhance to a production-ready non-functional requirements document for pol-econ-board with strict business-level, testable criteria. Apply these rules:\n\n1) Language & Style\n- Use en-US professional tone.\n- ABSOLUTELY avoid self-referential/meta text (no \"this document\", no \"the following sections\").\n- Requirements that can use EARS MUST use EARS with keywords in English (WHEN, WHILE, IF, THEN, WHERE, THE, SHALL). Describe triggers/states/functions in natural language.\n\n2) Scope Alignment\n- Focus only on non-functional requirements: performance, availability, recovery, scalability, observability, privacy-by-design, time windows, capacity planning.\n- Do NOT include APIs, database schemas, or technical architecture details.\n- Maintain business-level, user-perceived metrics and SLAs.\n\n3) Specificity & Testability\n- Provide quantified targets (ms, %, windows, counts). Tie SLOs to measurement windows and percentiles.\n- Include acceptance criteria that an independent QA team can verify.\n- Add error budget framing and release policy guardrails.\n\n4) Roles/Regions/Time\n- Align windows to Asia/Seoul (KST). Consider peak events (elections/news cycles) in load assumptions where relevant.\n\n5) Observability & Incident Mgmt\n- Define logging, metrics, alerting thresholds, response timelines, communications cadence.\n- Add anti-noise controls (alert fatigue), severity mapping, and postmortem timing.\n\n6) Privacy/Data Minimization\n- Reference Security & Compliance for legal foundations; include business-level minimization, pseudonymization, opt-out propagation timelines.\n\n7) Mermaid\n- All Mermaid labels in double quotes; no spaces between bracket/brace and quote; correct arrows (--> / -.-> / ==>); LR orientation; subgraph names quoted.\n\n8) Links\n- Use descriptive link text, relative paths; reference only existing files.\n\n9) Prohibitions\n- No API/DB/infra specifics. No nested double quotes in Mermaid. No developer notes (only 00-toc.md allows one).\n\n10) Completeness & Length\n- Cover the full outline: performance (response/throughput/concurrency), availability & RTO/RPO, scalability/flexibility, observability (logs/metrics/alerts), privacy-by-design, notification & batch windows, capacity planning.\n- 5,000–30,000+ chars; expand sections if needed with concrete, business-level requirements.\n\n11) Clean Up\n- Remove any EARS statements about \"document\" itself; keep EARS for the service behavior.\n- Ensure acceptance criteria consolidate all major SLOs and process expectations.\n","content":"# pol-econ-board Non-Functional Requirements\n\nMeasurable, testable non-functional requirements for pol-econ-board are defined from a user-perceived perspective across performance, availability, recovery, scalability, observability, privacy-by-design, time windows, and capacity planning. Technical implementation decisions (architecture, APIs, data models, infrastructure) belong to the development team.\n\n## 1. Scope, Principles, and Assumptions\n\n### 1.1 Scope and Intent\n- Business-level, verifiable criteria govern quality attributes for pol-econ-board, expressed as user-perceived outcomes and operational expectations.\n- Applicable across development, QA, operations, and product to plan, validate, and operate the service.\n\n### 1.2 Related Documents\n- Product context and priorities: [Service Overview for Pol-Econ Board](./01-pol-econ-board-service-overview.md).\n- Legal, privacy, and security controls: [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n### 1.3 Definitions (Business-Level)\n- SLO: Service Level Objective, a target performance or availability level measured over a time window.\n- Error Budget: The permissible amount of unavailability or SLO violation within the SLO window.\n- RTO: Recovery Time Objective (time to restore service after a disruption).\n- RPO: Recovery Point Objective (maximum acceptable data loss measured in time).\n- P50/P95/P99: Percentile distribution for response times (server-side processing), excluding end-user network and device rendering time.\n- KST: Korea Standard Time (Asia/Seoul), the primary business timezone for scheduling.\n\n### 1.4 Service Boundaries and Assumptions\n- THE service SHALL operate scheduling windows in KST and primarily target users in Korea.\n- WHERE third-party providers are involved (e.g., email), THE service SHALL measure hand-off times independently and treat provider delays separately for SLO calculations.\n- THE baseline usage assumptions and capacity planning in this specification SHALL be revisited quarterly and on major product changes.\n- WHERE national events (election periods, major policy/news cycles) elevate load, THE service SHALL preserve P0 SLOs using fair-use and prioritization policies.\n\n## 2. Performance Expectations (Response Time, Throughput, Concurrency)\n\nAll performance targets are user-perceived server-side processing times measured at the service boundary, unless stated otherwise.\n\n### 2.1 Core Response Time SLOs (Per Request)\n\n| User Journey (Server-Side) | P50 Target | P95 Target | P99 Target | Notes |\n|----------------------------|------------|------------|------------|-------|\n| Read timeline/feed         | 150 ms     | 500 ms     | 900 ms     | Personalization and filtering included.\n| View a post with comments  | 180 ms     | 600 ms     | 1000 ms    | Initial comment page only.\n| Create/edit post save      | 200 ms     | 700 ms     | 1200 ms    | Excludes large media uploads; see 2.5.\n| Post publish action        | 220 ms     | 750 ms     | 1200 ms    | Moderation hooks may add queueing; see 2.4.\n| Add comment/reply          | 150 ms     | 500 ms     | 900 ms     | Idempotent to avoid duplicates.\n| Search (keyword/tag)       | 250 ms     | 800 ms     | 1500 ms    | Typo tolerance and sorting included.\n| Login (credential verify)  | 200 ms     | 600 ms     | 1000 ms    | Excludes email verification roundtrips.\n| Notification fetch (in-app)| 120 ms     | 350 ms     | 700 ms     | Last 50 notifications.\n| Moderation queue load      | 200 ms     | 700 ms     | 1200 ms    | Standard filters applied.\n\n#### EARS Requirements: Response Time\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions (Section 8), THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\n### 2.2 Throughput and Concurrency Targets\n\n| Metric | Baseline Target | Peak Target (Burst ≤ 10 min) | Notes |\n|-------|------------------|-------------------------------|-------|\n| Read requests per second (RPS) | 350 RPS | 900 RPS | Mix of feed, post, and notification fetch.\n| Write requests per second (RPS) | 70 RPS  | 200 RPS | Posts, edits, comments, reactions, reports.\n| Concurrent authenticated sessions | 6,000 | 15,000 | Active sessions during national events.\n| Concurrent content creators | 800 | 2,000 | Members, experts, editors, moderators combined.\n\n#### EARS Requirements: Throughput and Concurrency\n- THE service SHALL sustain the baseline throughput and concurrency targets continuously during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet the peak targets without violating P95 response SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling and present clear user messaging.\n\n### 2.3 Data Consistency Windows\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second for posts and comments in the same region.\n- WHERE global counters, aggregates, and ranking feeds are displayed, THE service SHALL allow eventual consistency with a maximum staleness of 3 seconds under normal conditions and 10 seconds under peak bursts.\n- IF a moderation action hides content, THEN THE service SHALL reflect the hidden state across all user-visible endpoints within 5 seconds.\n\n### 2.4 Queueing and Background Work\n- THE service SHALL separate user-facing acknowledgement from heavy background processing, ensuring acknowledgements meet response time SLOs while background tasks complete within defined deadlines (Section 7).\n- IF background processing exceeds deadlines, THEN THE service SHALL notify operators through alerts and inform impacted users through non-intrusive in-app messages when relevant.\n\n### 2.5 Media Handling (Business-Level)\n- WHERE users upload large attachments, THE service SHALL provide progress feedback and SHALL acknowledge the upload request within 1 second, with final processing completed within 2 minutes for files up to 100 MB.\n- IF media processing fails, THEN THE service SHALL preserve the draft state and allow retry without data loss.\n\n## 3. Availability, Recovery, and Release Guardrails\n\n### 3.1 Availability SLOs by Business Tier\n\n| Tier | Description | Monthly Availability Target | Error Budget |\n|------|-------------|-----------------------------|--------------|\n| P0 | Authentication, read feed/post, submit content, moderation hide/unhide | 99.90% | 43.2 minutes downtime/month |\n| P1 | Search, notifications fetch, reactions, bookmarks | 99.50% | 3.6 hours downtime/month |\n| P2 | Batch digests, analytics exports, editorial curation updates | 99.00% | 7.3 hours downtime/month |\n\n#### EARS Requirements: Availability & Releases\n- THE service SHALL meet the monthly availability targets by tier as defined in the table.\n- WHEN maintenance is required, THE service SHALL schedule it within the maintenance window (Sundays 02:00–05:00 KST) and SHALL not breach P0 availability.\n- IF unplanned downtime occurs, THEN THE service SHALL prioritize restoration of P0 functions before P1 and P2.\n- IF the P0 error budget is exhausted within the month, THEN THE service SHALL pause non-urgent feature launches and focus on reliability until budget recovers the following month.\n- WHERE heightened risk windows exist (e.g., election days), THE service SHALL enforce a release freeze for P0-impacting changes starting 24 hours before the window and ending after stability is confirmed.\n\n### 3.2 Recovery Objectives\n\n| Tier | RTO (Restore Service) | RPO (Acceptable Data Loss) | Notes |\n|------|------------------------|----------------------------|-------|\n| P0 | 30 minutes | 5 minutes | Auth, read, submit, moderation state.\n| P1 | 60 minutes | 15 minutes | Search indices, notifications, reactions.\n| P2 | 180 minutes | 60 minutes | Batch jobs, exports, curation.\n\n#### EARS Requirements: Recovery\n- THE service SHALL restore P0 capabilities within 30 minutes of a major incident and limit data loss to 5 minutes.\n- WHERE partial restoration is possible, THE service SHALL restore read-only access first if full write capability cannot be immediately recovered.\n- IF RTO or RPO targets are at risk, THEN THE service SHALL publish a user-facing status update within 15 minutes of detection and every 30 minutes thereafter until resolved.\n\n## 4. Scalability and Flexibility Expectations\n\n#### EARS Requirements: Scalability and Updates\n- THE service SHALL scale to maintain P95 response targets across baseline and peak loads defined in Section 2.2.\n- WHERE traffic grows beyond peak targets for two consecutive weeks, THE service SHALL raise capacity planning actions within 5 business days (Section 8).\n- THE service SHALL perform updates with zero user-visible downtime for P0 functions; brief degradations for P1/P2 are acceptable within respective error budgets.\n- WHERE a gradual rollout is required, THE service SHALL support audience-based enablement by role (member, expert, moderator, editor, admin) and by percentage-based cohorts.\n- WHERE capacity expansions occur, THE service SHALL pre-warm capacity such that cold-start effects do not exceed P95 latency targets during the first 10 minutes of traffic ramp.\n\n## 5. Observability Requirements (Business Criteria)\n\n### 5.1 Business Event Logging\n- THE service SHALL log key business events: authentication successes/failures, content creation/edits/deletions, moderation actions, policy violations, notification dispatches, and user preference changes.\n- WHERE events include personal data, THE service SHALL minimize logged identifiers and apply redaction per compliance policy in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- IF logging fails, THEN THE service SHALL not block user actions and SHALL record a compensating audit entry indicating the gap.\n\n### 5.2 Metrics and SLO Monitoring\n- THE service SHALL continuously measure request rates, success/error ratios, latency percentiles, queue backlogs, and notification delivery latencies for each tier.\n- WHEN P95 latency or availability deviates from targets for 10 minutes, THE service SHALL raise a warning; for 20 minutes, THE service SHALL raise a critical alert.\n- WHERE alert noise exceeds 10 false-positive P0 alerts in a month, THE service SHALL trigger a tuning review within 5 business days.\n\n### 5.3 Alerting and Response Expectations\n\n| Severity | Trigger (Examples) | Operator Response Time (KST) | User Communication |\n|----------|---------------------|------------------------------|--------------------|\n| P0-Critical | P0 unavailability > 5 min; P95 latency breach > 20 min; security incident indicators | Acknowledge ≤ 5 min, Mitigation start ≤ 15 min, 24/7 | Status page update ≤ 15 min; 30-min cadence thereafter |\n| P1-High | P1 unavailability > 20 min; repeated retries on notifications | Acknowledge ≤ 15 min, Business hours (07:00–23:00 KST) | Status page update if user impact material |\n| P2-Medium | Batch delays > 2 hours; digest backlog | Acknowledge ≤ 4 hours, Business hours | Optional update in release notes |\n\n#### EARS Requirements: Alerting and Response\n- THE service SHALL dispatch alerts according to the severity matrix and SHALL meet the operator response times stated.\n- IF a P0 incident is declared, THEN THE service SHALL publish a status page update within 15 minutes and maintain updates at least every 30 minutes until resolution.\n- WHERE an incident meets criteria for postmortem, THE service SHALL publish an internal post-incident review within 5 business days including contributing factors and follow-up actions.\n\n### 5.4 Incident Management Flow\n- THE service SHALL follow a consistent detect → triage → mitigate → recover → review cycle with operator and user communications.\n\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"SLO Monitor(Deviations)\"] --> B{\"P0/P1/P2?\"}\n  end\n  subgraph \"Triage\"\n    C[\"Assign Severity\"] --> D[\"Notify On-call\"]\n  end\n  subgraph \"Mitigation\"\n    E[\"Throttling/Feature Toggle\"] --> F[\"Partial Restore(Read-first)\"]\n  end\n  subgraph \"Recovery\"\n    G[\"Full Service Restore\"] --> H[\"Backlog Drain\"]\n  end\n  subgraph \"Communication\"\n    I[\"Status Page Update\"] --> J[\"Postmortem(Within 5 Business Days)\"]\n  end\n  B -->|\"P0\"| C\n  B -->|\"P1/P2\"| C\n  D --> E\n  E --> F\n  F --> G\n  G --> H\n  C -.-> I\n  G -.-> I\n  H -.-> J\n```\n\n## 6. Privacy by Design and Data Minimization (Business Link)\n- THE service SHALL collect only the minimum personal data necessary to provide features, following the principles defined in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- WHERE personal data is processed for analytics or diagnostics, THE service SHALL prefer aggregated or pseudonymized forms aligned to approved business purposes.\n- IF a user opts out of certain data processing, THEN THE service SHALL honor preferences within 24 hours across all processing pipelines.\n- WHERE data residency requirements apply by policy or law, THE service SHALL keep personal data within approved jurisdictions for primary storage and processing.\n\n## 7. Notification and Batch Time Windows\n\n### 7.1 Real-time Notifications (In-App)\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99 after the triggering event under normal conditions.\n- IF delivery exceeds 60 seconds for more than 1% of notifications in a 15-minute window, THEN THE service SHALL raise a warning and prioritize notification pipelines.\n\n### 7.2 Email/Scheduled Digests\n- THE service SHALL send daily digests between 07:00–09:00 KST on user-selected days, and weekly digests between 08:00–10:00 KST on user-selected weekdays.\n- WHERE users change preferences, THE service SHALL reflect changes in the next eligible digest cycle.\n\n### 7.3 Batch and Heavy Processing Windows\n- THE service SHALL run heavy batch processes (e.g., re-indexing, large exports) primarily between 02:00–05:00 KST.\n- WHERE batch tasks risk impacting P0 workloads, THE service SHALL defer or throttle them to preserve P0 SLOs.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and, where user-facing, inform affected users with a revised completion window within 60 minutes.\n\n## 8. Capacity Planning Guide and Growth Assumptions\n\n### 8.1 Baseline Assumptions (Quarter 1–2)\n\n| Metric | Value | Notes |\n|--------|-------|-------|\n| MAU | 120,000 | General audience during initial adoption.\n| DAU | 36,000 | 30% of MAU.\n| Peak concurrent sessions | 12,000 | Major news cycles, debates.\n| Daily posts | 8,000 | Includes expert insights and editor features.\n| Daily comments | 80,000 | High engagement threads.\n| Daily reactions/bookmarks | 400,000 | Lightweight interactions.\n| Storage growth | 60 GB/day | Posts, comments, logs, and media references.\n\n### 8.2 Scaling Triggers and Actions\n- THE service SHALL review capacity monthly and after significant product launches or public events.\n- WHEN P95 latency approaches targets within 10% for two consecutive weeks, THE service SHALL initiate capacity increase planning within 5 business days.\n- WHERE storage growth exceeds plan by 25% over a month, THE service SHALL adjust retention and archiving policies according to data lifecycle standards.\n- WHERE traffic ramp events are announced (elections, debates), THE service SHALL stage pre-event load tests and capacity checks at least 5 business days in advance.\n\n### 8.3 Fair-Use and Backpressure\n- THE service SHALL protect overall user experience by applying fair-use limits during bursts, prioritizing P0 traffic, and transparently communicating delays for non-critical actions.\n- WHERE backlogs accumulate for non-P0 tasks, THE service SHALL degrade non-critical features before affecting P0 paths.\n\n## 9. Reliability and Rate Limiting Expectations\n\n### 9.1 Idempotency and Duplicate Prevention (Business-Level)\n- THE service SHALL treat repeated submissions of the same post/comment within 30 seconds as a single action and avoid duplicates while returning a single confirmation to the user.\n\n### 9.2 Eventual Consistency and User Feedback\n- THE service SHALL surface non-blocking indicators when background processing is pending and SHALL ensure final consistency within deadlines (Sections 2.3 and 7.3).\n\n### 9.3 Rate Limiting and User Messaging\n- WHERE users exceed fair-use thresholds (e.g., reports, comments, reactions), THE service SHALL return a clear message indicating temporary limits and the expected retry horizon.\n- IF limits are applied erroneously, THEN THE service SHALL automatically lift them within 5 minutes after the triggering condition is cleared.\n- WHERE rate limiting is applied due to service protection, THE service SHALL avoid consuming quota for refused retries after a RATE_LIMIT_EXCEEDED response.\n\n## 10. Non-Functional Acceptance Criteria (Testable)\n\n- THE service SHALL achieve P95 and P99 response time targets in Section 2.1 for the defined user journeys during synthetic load tests matching Section 8 assumptions.\n- THE service SHALL sustain throughput and concurrency targets in Section 2.2 for at least 8 continuous hours without breaching P95 SLOs.\n- THE service SHALL meet monthly availability targets in Section 3.1 and recovery objectives in Section 3.2 across two consecutive months prior to general release.\n- THE service SHALL meet notification timeliness in Section 7 with at least 99% of in-app notifications delivered within 15 seconds under normal conditions.\n- THE service SHALL satisfy observability requirements including alerting within thresholds (Sections 5.2–5.3) and incident communications timelines.\n- THE service SHALL demonstrate adherence to data minimization commitments in Section 6 through audit of sampled events and stored logs.\n- THE service SHALL pass a chaos test where termination of non-critical services does not breach P0 SLOs for 30 minutes.\n\n## 11. Constraints and Out-of-Scope\n- Business requirements only; technical implementation decisions belong to the development team, including architecture, APIs, and data models.\n- UI/UX specifications, screen design, and styling are out of scope.\n- Detailed encryption algorithms, provider selections, and infrastructure topology are out of scope.\n\n## 12. Appendix: Glossary\n- Availability: The proportion of time a service is usable by users within agreed functionality thresholds.\n- Business Hours: 07:00–23:00 KST for operational staffing expectations, unless otherwise noted.\n- Consistency Window: The time allowed for data to become visible across all parts of the service after a change.\n- Maintenance Window: A reserved time for planned changes with minimized user impact.\n- Percentile Latency: A statistical measure where P95 indicates 95% of requests are at or below the specified time.\n\n---\n\n### Consolidated EARS Requirements Index\n\nPerformance\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions, THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\nThroughput and Concurrency\n- THE service SHALL sustain baseline throughput and concurrency during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet peak targets without violating P95 SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling with clear messaging.\n\nConsistency and Background Work\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second.\n- WHERE aggregates and rankings are displayed, THE service SHALL limit staleness to 3 seconds (10 seconds at peak).\n- IF moderation hides content, THEN THE service SHALL reflect the state across endpoints within 5 seconds.\n- THE service SHALL acknowledge user-facing actions quickly and complete heavy work in background within deadlines.\n\nAvailability, Recovery, Releases\n- THE service SHALL meet monthly availability targets by tier (P0 99.90%, P1 99.50%, P2 99.00%).\n- WHEN maintenance is needed, THE service SHALL schedule it Sundays 02:00–05:00 KST without breaching P0.\n- IF unplanned downtime occurs, THEN THE service SHALL restore P0 before P1/P2.\n- THE service SHALL restore P0 within 30 minutes and limit data loss to 5 minutes; P1 and P2 per table.\n- WHERE partial restore is possible, THE service SHALL enable read-only first.\n- IF RTO/RPO are at risk, THEN THE service SHALL publish status updates within 15 minutes and every 30 minutes thereafter.\n- IF the P0 error budget is exhausted in a month, THEN THE service SHALL pause non-urgent launches until budget recovery.\n- WHERE risk windows exist, THE service SHALL apply release freezes for P0-impacting changes.\n\nScalability and Updates\n- THE service SHALL scale to maintain P95 targets at baseline and peak.\n- WHERE traffic exceeds peaks for two weeks, THE service SHALL raise capacity planning within 5 business days.\n- THE service SHALL perform updates with zero user-visible downtime for P0; controlled degradations for P1/P2 within error budgets.\n- WHERE gradual rollout is required, THE service SHALL support audience and cohort-based enablement.\n- WHERE capacity expansions occur, THE service SHALL pre-warm to avoid cold-start breaches.\n\nObservability and Alerts\n- THE service SHALL log key business events with data minimization.\n- WHERE logging fails, THE service SHALL not block actions and SHALL audit the gap.\n- THE service SHALL measure core metrics continuously and alert on deviations (10 min warn, 20 min critical).\n- THE service SHALL meet operator response times by severity and publish timely user communications for P0.\n- WHERE alert noise exceeds thresholds, THE service SHALL initiate tuning reviews.\n\nPrivacy and Data Minimization\n- THE service SHALL collect the minimum personal data necessary and favor aggregated or pseudonymized forms for secondary purposes.\n- IF a user opts out, THEN THE service SHALL honor preferences within 24 hours.\n- WHERE data residency applies, THE service SHALL keep personal data within approved jurisdictions.\n\nNotifications and Batch\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99.\n- IF delivery exceeds 60 seconds for >1% in 15 minutes, THEN THE service SHALL raise a warning and prioritize pipelines.\n- THE service SHALL schedule digests within the defined morning windows in KST and reflect preference changes in the next cycle.\n- THE service SHALL run heavy batches primarily 02:00–05:00 KST and defer/throttle to protect P0.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and inform users with a revised window within 60 minutes.\n\nCapacity Planning and Fair Use\n- THE service SHALL review capacity monthly and after major events.\n- WHEN P95 latency is within 10% of the target for two weeks, THE service SHALL plan capacity increases within 5 business days.\n- WHERE storage growth exceeds plan by 25% in a month, THE service SHALL adjust retention/archiving per data lifecycle standards.\n- WHERE major events are anticipated, THE service SHALL pre-stage load testing.\n- THE service SHALL apply fair-use limits during bursts and communicate delays for non-critical actions.\n\nReliability and Limits\n- THE service SHALL treat repeated submissions within 30 seconds as a single action to prevent duplicates.\n- THE service SHALL surface pending indicators for background processing and ensure final consistency within deadlines.\n- IF fair-use limits are applied erroneously, THEN THE service SHALL lift them within 5 minutes of clearing conditions.\n- WHERE protective rate limiting is active, THE service SHALL not consume quota for refused retries after notification.\n","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:35.439Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"정보의 생성→사용→보존→삭제 전주기를 비즈니스 레벨에서 규정하기 위함.","filename":"10-pol-econ-board-data-lifecycle-and-retention.md","documentType":"requirement","outline":["데이터 흐름 개요(개념적)","게시물/댓글 라이프사이클(초안/발행/수정/아카이브/삭제)","신고/중재 라이프사이클과 증빙 보존","로그/지표/백업의 보존 기간과 파기 원칙","익명화/가명처리의 비즈니스 요건","사용자 요청 기반 삭제 및 복구 창구"],"audience":"development team","keyQuestions":["핵심 데이터의 라이프사이클 단계와 보존 원칙은 무엇인가","삭제/복구/익명화 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["09-pol-econ-board-security-and-compliance.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["정책은 검증 가능하고 감사 가능해야 함","기술 구현 세부 금지"],"content":"# pol-econ-board Data Lifecycle and Retention Requirements\n\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, storage tiers, batch jobs, etc.) belong to developers. The document specifies WHAT must happen in the data lifecycle, not HOW to build it.\n\n## 1. Scope and Intent\n- Define verifiable and auditable business rules governing how information is created, used, preserved, anonymized, and deleted across its full lifecycle for the pol-econ-board service.\n- Ensure clarity across roles (member, expert, moderator, editor, admin) regarding responsibilities and constraints over data states.\n- Align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) and the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 2. Definitions and Data Classes\n- Core data classes (business-level):\n  - Account Profile: minimal identity and preferences for member/expert/moderator/editor/admin.\n  - Post: authored content including title/body and metadata (topics, tags, visibility).\n  - Comment/Reply: discussion items attached to a post; includes mentions.\n  - Reaction/Vote: simple engagement signals tied to posts or comments.\n  - Follow/Subscription/Bookmark: user-interest signals for topics, authors, or items.\n  - Report: user-submitted complaint about content or behavior.\n  - Moderation Record: decision, rationale, sanctions, and transparency notes.\n  - Notification Record: delivery attempts, status, and user preference references.\n  - Audit Log: immutable trace of sensitive actions and lifecycle transitions.\n  - Metrics/Analytics Event: aggregated counters and event samples (business analytics scope only).\n  - Backup Artifact: point-in-time preservation of business records for disaster recovery.\n\n- Role scope:\n  - Member/Expert: create and manage own content; request deletion; exercise data rights.\n  - Moderator: handle reports; hide/remove content; propose sanctions; manage evidence.\n  - Editor: curate and pin content; manage featured sets; no unilateral personal data access beyond business needs.\n  - Admin: oversee policy application; impose legal holds; access audit and transparency logs.\n\n## 3. Conceptual Data Flow Overview\n```mermaid\ngraph LR\n  subgraph \"Creation\"\n    A1[\"User Creates Draft(Post/Comment)\"] --> A2[\"Validation & Classification\"]\n  end\n  subgraph \"Usage\"\n    B1[\"Publish/Engage(Reads, Reactions)\"] --> B2[\"Edits & Versions\"]\n  end\n  subgraph \"Governance\"\n    C1[\"Report Submitted\"] --> C2[\"Moderation Review\"] --> C3[\"Decision & Sanction\"]\n  end\n  subgraph \"Preservation\"\n    D1[\"Audit Logging\"] --> D2[\"Backups & Metrics\"]\n  end\n  subgraph \"Disposition\"\n    E1[\"User/Delete Requests\"] --> E2[\"Soft Delete/Archive\"] --> E3[\"Permanent Deletion/Anonymization\"]\n  end\n  A2 --> B1\n  B2 -.-> D1\n  B1 --> D2\n  C3 --> D1\n  E1 --> D1\n```\n\n## 4. Lifecycle Policies by Object\nThe following requirements use EARS format where applicable. Timeframes are calendar durations counted from the stated triggering event. “Soft delete” means hidden from ordinary access but recoverable; “Permanent deletion” means irreversible removal or anonymization as specified.\n\n### 4.1 Post Lifecycle\nStates: Draft → Published → Edited (Versioned) → Archived (optional) → Deleted (Soft) → Permanently Deleted.\n\n- Creation and Drafts\n  - WHEN a user saves a post as draft, THE service SHALL retain the draft for 90 days since last edit; IF the draft remains inactive for 90 consecutive days, THEN THE service SHALL mark it for permanent deletion within 7 days.\n  - THE service SHALL allow authors to self-delete drafts at any time; WHEN a draft is self-deleted, THE service SHALL purge it permanently within 7 days.\n\n- Publishing and Editing\n  - WHEN a draft is published, THE service SHALL record a publication timestamp and initial version.\n  - WHEN an author edits a published post, THE service SHALL preserve the immediately prior version for 30 days for rollback and audit purposes, unless a legal or moderation hold requires longer retention.\n  - IF a published post is edited within 10 minutes of publication, THEN THE service SHALL treat the edit as a minor update not requiring separate archival unless the content meaning materially changes per moderation rules.\n\n- Archiving (business visibility management)\n  - WHERE a post is older than 365 days without new engagement (views, comments, or reactions), THE service SHALL be eligible to move it to an archived state where it remains readable but excluded from default feeds.\n  - WHEN a post enters archived state, THE service SHALL maintain all references (comments, reactions) intact.\n\n- Deletion\n  - WHEN an author deletes a published post, THE service SHALL transition it to soft delete immediately, exclude it from public access, and begin a 30-day recovery window for the author.\n  - WHEN the 30-day recovery window elapses without restoration, THE service SHALL permanently delete post body and attachments while retaining minimal non-content metadata (author pseudonymous identifier, deletion timestamp, and content identifier) for 180 days for audit and abuse-prevention, after which THE service SHALL anonymize or delete such metadata unless under legal hold.\n  - IF a post is under active moderation investigation or legal hold at deletion request time, THEN THE service SHALL defer permanent deletion until the hold is lifted and SHALL inform the author of the hold status through standard communication channels.\n\n- Cross-References\n  - WHEN a post is permanently deleted, THE service SHALL remove or anonymize dependent objects per their own policies (e.g., comments authored by others remain but lose parent pointer visibility and show “missing parent” text as defined by business copy; reactions are removed).\n\n### 4.2 Comment/Reply Lifecycle\nStates: Draft → Published → Edited → Deleted (Soft) → Permanently Deleted.\n\n- Drafts and Publishing\n  - THE service SHALL apply the same draft retention rules as posts (90-day inactivity purge).\n  - WHEN a comment is published, THE service SHALL record a publication timestamp and link to the parent post/comment.\n\n- Editing\n  - WHERE editing is permitted by community policy, THE service SHALL allow comment edits within 24 hours of posting; WHEN edited, THE service SHALL keep a prior version for 7 days for moderation audit.\n\n- Deletion\n  - WHEN a commenter deletes their comment, THE service SHALL soft delete immediately and offer a 14-day recovery window.\n  - WHEN the 14-day window elapses, THE service SHALL permanently delete content while retaining minimal non-content metadata for 90 days for audit unless under legal hold.\n  - IF the comment has replies, THEN THE service SHALL display a “comment removed” placeholder behavior at the business content layer and preserve reply visibility.\n\n### 4.3 Reactions and Votes\n- WHEN a user adds or removes a reaction or vote, THE service SHALL apply the change immediately and record an event in audit logs as required.\n- WHEN a user account is deleted, THE service SHALL delete or aggregate reactions and votes such that individual attribution is removed within 7 days.\n- THE service SHALL retain reaction events for 90 days for abuse detection, after which THE service SHALL aggregate or purge individual events, keeping only aggregate counts.\n\n### 4.4 Follows, Subscriptions, and Bookmarks\n- WHEN a user follows a topic or author, THE service SHALL store the preference until the user unfollows or the account is deleted.\n- WHEN a user removes a bookmark, THE service SHALL delete the bookmark record immediately and exclude it from backups after the standard retention window.\n- WHERE an account is deleted, THE service SHALL purge follows/subscriptions/bookmarks within 7 days.\n\n### 4.5 Account Profile and Preferences\n- WHEN an account is created, THE service SHALL store only minimal required profile fields and preferences per data minimization principle.\n- WHEN a user updates profile fields or preferences, THE service SHALL overwrite prior values and retain a change-audit entry for 180 days.\n- WHEN a user requests account deletion, THE service SHALL begin a 14-day cooling-off period during which sign-in cancels the deletion if the user explicitly revokes the request; after the period, THE service SHALL permanently delete or anonymize personal data except data needed for legal obligations or transparency logs.\n\n## 5. Report/Moderation Lifecycle and Evidence Retention\nStates: Reported → Triaged → Under Review → Decision → Sanction (if any) → Appeal → Finalized.\n\n- Report Intake\n  - WHEN a report is submitted, THE service SHALL timestamp, classify, and place it into the moderation queue.\n  - THE service SHALL preserve report details and referenced content snapshot at the time of report for evidentiary purposes.\n\n- Review and Decision\n  - WHEN a moderator opens a report, THE service SHALL record reviewer identity (role), actions taken, and time spent for transparency.\n  - WHEN a decision is issued, THE service SHALL store the decision, rationale, and associated policy references.\n\n- Evidence Retention\n  - THE service SHALL retain report records, content snapshots used as evidence, and moderation decisions for 2 years from finalization for audit and transparency, unless stricter statutory requirements apply.\n  - IF a sanction includes account suspension or permanent ban, THEN THE service SHALL retain the minimal identifiers necessary to enforce sanctions for the sanction duration plus 2 years.\n\n- Appeals\n  - WHEN an appeal is filed within the window defined by governance policy, THE service SHALL lock evidence from deletion until appeal closure.\n  - WHEN an appeal concludes, THE service SHALL update retention start to the appeal closure date.\n\n- Interaction with User Deletions\n  - IF the reported content’s author requests deletion, THEN THE service SHALL keep evidence under legal/moderation hold until the case is finalized, then apply standard deletion rules.\n\nReference: See the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 6. Logs, Metrics, and Backups: Retention and Disposal Principles\n- Audit and Security Logs\n  - THE service SHALL retain authentication, authorization, and sensitive action audit logs for 180 days at minimum and up to 1 year where required by internal policy.\n  - WHERE logs contain personal identifiers, THE service SHALL pseudonymize identifiers within 30 days unless strict identity is required for ongoing investigations.\n\n- Transparency Logs\n  - THE service SHALL retain public-facing transparency records of moderation actions for 2 years, with personal data minimized and pseudonymized where possible.\n\n- Operational Metrics and Analytics\n  - THE service SHALL retain granular metrics and event samples for 90 days; after 90 days THE service SHALL keep only aggregated, non-identifying statistics for longitudinal analysis.\n\n- Notification Delivery Logs\n  - THE service SHALL retain notification delivery attempts and outcomes for 90 days to support troubleshooting and compliance with opt-in/opt-out proofs.\n\n- Backups (Business-Level Principles)\n  - THE service SHALL maintain daily recovery points sufficient to restore to a business-acceptable point-in-time; WHERE monthly full retention is applied, THE service SHALL retain monthly recovery points for 3 months and daily recovery points for 30 days.\n  - IF a user exercises deletion rights, THEN THE service SHALL ensure that deleted personal data ages out of backup media within 35 days after deletion processed, acknowledging backup immutability windows.\n  - THE service SHALL document and publish the effective backup retention windows for audit.\n\n- Disposal\n  - WHEN retention expires and no legal or moderation hold exists, THE service SHALL dispose of logs, metrics, and backups in a manner that is irreversible and documented via audit entries.\n\n## 7. Anonymization and Pseudonymization Requirements\n- Pseudonymization\n  - WHEN storing data for audit or transparency, THE service SHALL replace direct personal identifiers with stable pseudonymous identifiers sufficient for role-based review but insufficient for public re-identification.\n  - WHERE cross-record correlation is necessary for abuse detection, THE service SHALL use rotating pseudonymous identifiers that change at most every 90 days while maintaining internal linkage.\n\n- Anonymization\n  - WHEN permanent deletion is required but business analytics retains value, THE service SHALL anonymize records by removing or irreversibly altering personal identifiers and quasi-identifiers so that re-identification is not reasonably possible.\n  - IF anonymization cannot guarantee non-reidentifiability for a dataset, THEN THE service SHALL opt for full deletion.\n\n- Re-identification Prohibition\n  - THE service SHALL prohibit any attempt to reverse pseudonymization or anonymization, and SHALL record violations as security incidents.\n\n- Documentation\n  - THE service SHALL maintain a data dictionary that maps data classes to anonymization/pseudonymization strategies at a business-description level for audit review.\n\n## 8. User-Requested Deletion and Recovery\n- Content Deletion by Author\n  - WHEN an author deletes own content (posts or comments), THE service SHALL begin the applicable recovery window (30 days for posts, 14 days for comments) and provide a self-service restoration option during that window.\n  - WHEN content is restored during the window, THE service SHALL reinstate all visible links and engagement counts except those already purged by separate user actions.\n\n- Account Deletion\n  - WHEN a verified user submits an account deletion request, THE service SHALL acknowledge the request within 24 hours, start a 14-day cooling-off period, and communicate the scheduled deletion date.\n  - WHEN the cooling-off period ends without revocation, THE service SHALL delete or anonymize personal data within 15 additional days and notify the user of completion if notification channels remain valid.\n  - WHERE legal obligations require retention (e.g., moderation transparency, fraud prevention), THE service SHALL retain only the minimal data necessary and SHALL document the legal basis.\n\n- Exceptions and Holds\n  - IF an active moderation case, payment dispute, or legal hold exists, THEN THE service SHALL defer deletion until closure and SHALL inform the user about the deferral reason and expected next steps.\n\n- Recovery Portal\n  - THE service SHALL provide a history of user-initiated deletions within the active recovery window and SHALL allow one-click restoration by the content owner.\n  - WHERE recovery would violate a moderation decision (e.g., content removed for policy breach), THE service SHALL block restoration and display the applicable policy reference in user-facing communications.\n\n## 9. Legal Hold and Exceptions\n- WHEN an Admin establishes a legal hold for specific subjects or data classes, THE service SHALL freeze deletion and anonymization actions for affected records until the hold is explicitly lifted.\n- THE service SHALL record the hold’s scope, reason (business-level reference), start/end timestamps, and approver role in the audit log and SHALL review active holds every 90 days.\n\n## 10. Retention Matrix (Business Summary)\n\n| Data Category | State/Trigger | Retention Policy | Deletion Type | Recovery Window | Notes |\n|---|---|---|---|---|---|\n| Draft Posts/Comments | Last edit inactive | Delete after 90 days inactivity + purge within 7 days | Permanent | N/A | User can self-delete anytime |\n| Published Post Versions | Edit event | Prior version kept 30 days | Auto purge after 30 days | N/A | Longer if under hold |\n| Posts (Author-deleted) | Soft deleted | Recovery 30 days; then delete content; metadata 180 days | Permanent (content), anonymize metadata | 30 days | Defer if under hold |\n| Comments (Author-deleted) | Soft deleted | Recovery 14 days; then delete content; metadata 90 days | Permanent (content), anonymize metadata | 14 days | Placeholder remains |\n| Reactions/Votes | Event created | Keep raw 90 days; keep aggregates indefinitely | Aggregate only | N/A | Remove attribution on account deletion (7 days) |\n| Follows/Bookmarks | Preference removed | Immediate deletion | Permanent | N/A | Purge within 7 days on account deletion |\n| Account Profiles | Deletion requested | 14-day cooling; delete/anonymize within +15 days | Permanent/Anonymize | N/A | Minimal retention if required by law |\n| Reports & Evidence | Finalization/Appeal close | 2 years | N/A | N/A | Extend under legal requirements |\n| Audit/Security Logs | Log creation | 180 days up to 1 year | Permanent | N/A | Pseudonymize in 30 days unless needed |\n| Transparency Logs | Action published | 2 years | N/A | N/A | Personal data minimized |\n| Metrics/Analytics | Event creation | Granular 90 days; aggregates thereafter | Aggregate | N/A | Non-identifying aggregates |\n| Notification Logs | Event creation | 90 days | Permanent | N/A | Proof of consent history |\n| Backups | Recovery point creation | Daily 30 days; Monthly 3 months | Secure destruction | N/A | Deleted data ages out ≤35 days |\n\n## 11. Error Handling and Edge Cases (Business)\n- Conflicts and Holds\n  - IF a user requests deletion while a legal or moderation hold exists, THEN THE service SHALL process the request to the extent possible and queue the remainder until the hold is lifted, with user notification per communications policy.\n\n- Referential Integrity\n  - WHEN a parent post is permanently deleted, THE service SHALL ensure that child comments remain visible if policy allows, with a clear placeholder and without broken navigation.\n\n- Partial Failures\n  - IF a deletion workflow partially completes, THEN THE service SHALL mark the item as “deletion pending” and retry within 24 hours until completion or hold.\n\n- Race Conditions\n  - WHEN simultaneous restore and delete actions occur within a recovery window, THE service SHALL prioritize the most recent, explicitly confirmed user action and record the decision in the audit log.\n\n- Attachments and Embedded Media\n  - WHEN content is deleted, THE service SHALL apply the same retention schedule to associated attachments and embedded media unless under hold.\n\n## 12. Auditability and Policy Governance\n- Lifecycle Event Logging\n  - THE service SHALL record lifecycle transitions (create, publish, edit, archive, delete, restore, hold apply/release) with actor role, timestamp, and reason, in an immutable audit trail accessible to Admins for compliance review.\n\n- Policy Versioning\n  - THE service SHALL maintain a versioned registry of lifecycle and retention rules; WHEN rules change, THE service SHALL apply new rules prospectively and SHALL not retroactively shorten required legal retention unless permitted by law.\n\n- Reviews and Certification\n  - THE service SHALL review lifecycle and retention practices at least annually and after major regulatory updates, certifying compliance status at the business level.\n\n- Minimization and Purpose Limitation\n  - THE service SHALL collect and retain only data necessary for the stated purpose and duration, as further detailed in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## 13. Success Criteria\n- Verifiability\n  - WHEN auditors review samples, THE service SHALL demonstrate that items followed the stated retention timelines within ±2 days for dated windows and without exception where no holds existed.\n\n- User Experience Timing\n  - WHEN users delete content, THE service SHALL remove content from user-facing views within 1 minute and complete background cleanup according to this policy.\n\n- Backup Aging\n  - WHEN users exercise deletion rights, THE service SHALL verify that personal data no longer appears in restore points older than 35 days after deletion completion.\n\n- Transparency\n  - THE service SHALL produce a quarterly report summarizing counts of deletions, holds, appeals, and restoration events without exposing personal data.\n\n---\nAlignment Note: These business rules are designed to be testable and auditable. Technical choices to implement these rules (e.g., storage layers, job scheduling, cryptographic methods) are at the full discretion of the development team and must remain consistent with linked policy documents."},"plan":"Document type: requirement (Data Lifecycle and Retention for pol-econ-board)\nAudience: development team\nPurpose: Define business-level, auditable lifecycle policies for all key data classes, aligned with governance and security/compliance documents\nStructure to implement:\n1) Data flow overview (conceptual)\n2) Post/Comment lifecycle (draft/publish/edit/archive/delete)\n3) Report/Moderation lifecycle and evidence retention\n4) Logs/Metrics/Backups retention and disposal\n5) Anonymization/Pseudonymization business requirements\n6) User-requested deletion and recovery processes\nPlus: roles context, legal holds, retention matrix, error/edge cases, auditability, success criteria; add diagrams as helpful","review":"Enhance for completeness, EARS specificity, and Mermaid correctness. Apply the following checks and rules:\n- Minimum length: 5,000+ characters, comprehensive business requirements only (no APIs/DB/architecture details)\n- All applicable requirements MUST be in EARS format (WHEN/WHILE/IF/THEN/WHERE, THE, SHALL)\n- Verifiable, auditable policies with measurable timelines and states\n- Include full lifecycle coverage: creation → use → preservation → disposition\n- Permission/role context in business terms (member, expert, moderator, editor, admin)\n- Error and edge-case handling; holds and exceptions\n- Performance expectations for user-visible effects (e.g., removal from views within 1 minute)\n- Mermaid diagrams: ALL labels in double quotes; no spaces between brackets/braces and quotes; correct arrow syntax (--> , -.- >, ==>); no nested quotes; use graph LR\n- Link text must be descriptive (no raw filenames)\n- Prohibit database schemas or API specs; natural-language business rules only\n- Business model alignment with security/compliance and governance docs\n- Anonymization/pseudonymization rules in business language; re-identification prohibition\n- Backup aging and immutability window handling; auditable disposal\n- Add acceptance criteria and success measures\n- Avoid meta commentary such as “This document …”; phrase content as requirements\n","content":"# pol-econ-board Data Lifecycle and Retention Requirements\n\nBusiness requirements only; all technical implementation decisions (architecture, APIs, database design, storage tiers, job orchestration) belong to the development team. Defines WHAT must happen across the data lifecycle, not HOW to implement it.\n\n## 1. Scope and Intent\n- Establish verifiable and auditable business rules for creation, use, preservation, anonymization, and deletion of information across its lifecycle in the pol-econ-board service.\n- Clarify responsibilities and constraints by role (member, expert, moderator, editor, admin) over data states.\n- Align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) and the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 2. Definitions and Data Classes\n- Core data classes (business-level):\n  - Account Profile: minimal identity and preferences for member/expert/moderator/editor/admin.\n  - Post: authored content including title/body and metadata (topics, tags, visibility, language, content warnings, sources).\n  - Comment/Reply: discussion items attached to a post or comment; includes mentions.\n  - Reaction/Vote: engagement signals tied to posts or comments.\n  - Follow/Subscription/Bookmark: user-interest signals for topics, authors, or items.\n  - Report: user-submitted complaint about content or behavior.\n  - Moderation Record: decisions, reasons, sanctions, transparency notes.\n  - Notification Record: delivery attempts, status, category/channel, preferences snapshot.\n  - Audit Log: immutable traces of sensitive actions and lifecycle transitions.\n  - Metrics/Analytics Event: granular events and aggregated counters for business analytics (non-identifying beyond policy limits).\n  - Backup Artifact: point-in-time preservation of business records for disaster recovery.\n  - DSAR Record: data subject access/rectify/delete/portability requests and fulfillment artifacts (business tracking).\n  - Legal Hold Record: records of holds with scope, basis, approver, and review history.\n  - Taxonomy Change Record: topic/tag/category adjustments with effective dates and mapping notes.\n\n- Role scope (business perspective):\n  - Member/Expert: create and manage own content; request deletion; exercise data rights per policy.\n  - Moderator: handle reports; hide/remove content; propose or apply sanctions per policy scope; manage evidence and transparency entries.\n  - Editor: curate/pin/feature; manage taxonomy; no unilateral access to personal data beyond business need.\n  - Admin: oversee policy application; impose legal holds; manage roles/policies; access audit and transparency logs.\n\n## 3. Conceptual Data Flow Overview\n```mermaid\ngraph LR\n  subgraph \"Creation\"\n    A1[\"Create Draft(Post/Comment)\"] --> A2[\"Validate & Classify\"]\n  end\n  subgraph \"Usage\"\n    B1[\"Publish & Engage\"] --> B2[\"Edit & Version\"]\n  end\n  subgraph \"Governance\"\n    C1[\"Report Submitted\"] --> C2[\"Moderation Review\"] --> C3[\"Decision/Sanction\"]\n  end\n  subgraph \"Preservation\"\n    D1[\"Audit Logging\"] --> D2[\"Backups & Metrics\"]\n  end\n  subgraph \"Disposition\"\n    E1[\"User/Policy Delete Request\"] --> E2[\"Soft Delete/Archive\"] --> E3[\"Permanent Deletion/Anonymize\"]\n  end\n  A2 --> B1\n  B2 -.-> D1\n  B1 --> D2\n  C3 --> D1\n  E1 --> D1\n```\n\n## 4. Global Lifecycle Concepts\n- States (business-level): Draft, Published, Edited (Versioned), Archived, Hidden (policy/moderation), Soft Deleted, Permanently Deleted, Under Hold (legal/moderation), Restored.\n- Transitions: Valid transitions are constrained by holds, appeals, and policy gates.\n\nEARS requirements (global):\n- WHILE 항목이 \"Under Hold\" 상태, THE lifecycle policy SHALL prohibit permanent deletion or anonymization for the affected records.\n- WHEN 상태 전이가 발생(create, publish, edit, archive, delete, restore, hold apply/release), THE lifecycle policy SHALL record actor role, timestamp, and reason in an immutable audit trail.\n- WHERE referential dependencies exist (e.g., comment → post), THE lifecycle policy SHALL preserve discussion continuity using placeholders when parents are removed.\n\n## 5. Post Lifecycle\nStates: Draft → Published → Edited (Versioned) → Archived (optional) → Deleted (Soft) → Permanently Deleted.\n\nCreation and drafts\n- WHEN a user saves a post as draft, THE service SHALL retain the draft for 90 days since last edit.\n- IF a draft remains inactive for 90 consecutive days, THEN THE service SHALL mark it for permanent deletion within 7 days.\n- THE service SHALL allow authors to self-delete drafts at any time; WHEN a draft is self-deleted, THE service SHALL purge it permanently within 7 days.\n\nPublishing and editing\n- WHEN a draft is published, THE service SHALL record a publication timestamp and initial version identifier.\n- WHEN an author edits a published post, THE service SHALL preserve the immediately prior version for 30 days for rollback and audit purposes unless a legal/moderation hold requires longer retention.\n- IF a published post is edited within 10 minutes of publication, THEN THE service SHALL treat the edit as a minor update not requiring separate archival unless content meaning materially changes per moderation rules.\n\nArchiving (business visibility management)\n- WHERE a post is older than 365 days without new engagement (views, comments, reactions), THE service SHALL be eligible to move it to an archived state where it remains readable but excluded from default feeds.\n- WHEN a post enters archived state, THE service SHALL maintain all references (comments, reactions) intact.\n\nDeletion\n- WHEN an author deletes a published post, THE service SHALL transition it to soft delete immediately, exclude it from public access, and begin a 30-day recovery window for the author.\n- WHEN the 30-day recovery window elapses without restoration, THE service SHALL permanently delete post body and attachments while retaining minimal non-content metadata (author pseudonymous identifier, deletion timestamp, content identifier) for 180 days for audit/abuse-prevention, after which THE service SHALL anonymize or delete such metadata unless under legal hold.\n- IF a post is under active moderation investigation or legal hold when deletion is requested, THEN THE service SHALL defer permanent deletion until the hold is lifted and SHALL inform the author through standard communication channels.\n\nCross-References\n- WHEN a post is permanently deleted, THE service SHALL remove or anonymize dependent objects per their own policies (e.g., comments by others remain but lose parent pointer visibility and show a \"missing parent\" placeholder; reactions are removed).\n\n### Visual: Post Lifecycle\n```mermaid\ngraph LR\n  A[\"Draft\"] --> B[\"Published\"] --> C[\"Edited(Versioned)\"]\n  B --> D[\"Archived\"]\n  C --> D\n  B --> E[\"Soft Deleted\"]\n  E --> F[\"Permanently Deleted\"]\n  D --> E\n  subgraph \"Constraints\"\n    G[\"Under Hold\"]\n  end\n  E -.-> G\n  F -.-> G\n```\n\n## 6. Comment/Reply Lifecycle\nStates: Draft → Published → Edited → Deleted (Soft) → Permanently Deleted.\n\nDrafts and publishing\n- THE service SHALL apply the same draft retention rules as posts (90-day inactivity purge).\n- WHEN a comment is published, THE service SHALL record a publication timestamp and link to the parent post/comment.\n\nEditing\n- WHERE editing is permitted by policy, THE service SHALL allow comment edits within 24 hours of posting; WHEN edited, THE service SHALL keep a prior version for 7 days for moderation audit.\n\nDeletion\n- WHEN a commenter deletes their comment, THE service SHALL soft delete immediately and offer a 14-day recovery window.\n- WHEN the 14-day window elapses, THE service SHALL permanently delete comment content while retaining minimal non-content metadata for 90 days for audit unless under legal hold.\n- IF the comment has replies, THEN THE service SHALL display a \"comment removed\" placeholder at the business content layer and preserve reply visibility.\n\n## 7. Reactions and Votes\n- WHEN a user adds or removes a reaction or vote, THE service SHALL apply the change immediately and record an event in audit logs where required.\n- WHEN a user account is deleted, THE service SHALL delete or aggregate reactions and votes such that individual attribution is removed within 7 days.\n- THE service SHALL retain reaction events for 90 days for abuse detection, after which THE service SHALL aggregate or purge individual events, keeping only aggregate counts.\n\n## 8. Follows, Subscriptions, and Bookmarks\n- WHEN a user follows a topic or author, THE service SHALL store the preference until the user unfollows or the account is deleted.\n- WHEN a user removes a bookmark, THE service SHALL delete the bookmark record immediately and exclude it from backups after the standard retention window.\n- WHERE an account is deleted, THE service SHALL purge follows/subscriptions/bookmarks within 7 days.\n\n## 9. Account Profile and Preferences\n- WHEN an account is created, THE service SHALL store only minimal required profile fields and preferences per data minimization principle.\n- WHEN a user updates profile fields or preferences, THE service SHALL overwrite prior values and retain a change-audit entry for 180 days.\n- WHEN a user requests account deletion, THE service SHALL begin a 14-day cooling-off period during which sign-in cancels the deletion if the user explicitly revokes the request; after the period, THE service SHALL permanently delete or anonymize personal data except data needed for legal obligations or transparency logs.\n\n### Visual: Account Deletion Flow (Cooling-Off → Final Disposition)\n```mermaid\ngraph LR\n  A[\"Account Deletion Request\"] --> B[\"Acknowledge(≤24h)\"] --> C[\"Cooling-Off(14d)\"]\n  C --> D{\"Revoked?\"}\n  D -->|\"Yes\"| E[\"Cancel Deletion\"]\n  D -->|\"No\"| F[\"Delete/Anonymize(≤15d)\"]\n  F --> G{\"Legal/Moderation Hold?\"}\n  G -->|\"Yes\"| H[\"Defer Until Hold Lifted\"]\n  G -->|\"No\"| I[\"Confirm Completion\"]\n```\n\n## 10. Report/Moderation Lifecycle and Evidence Retention\nStates: Reported → Triaged → Under Review → Decision → Sanction (if any) → Appeal → Finalized.\n\nReport intake\n- WHEN a report is submitted, THE service SHALL timestamp, classify, and place it into the moderation queue.\n- THE service SHALL preserve report details and a referenced content snapshot at time of report for evidence.\n\nReview and decision\n- WHEN a moderator opens a report, THE service SHALL record reviewer role, actions taken, and timing for transparency.\n- WHEN a decision is issued, THE service SHALL store decision, rationale, and policy references.\n\nEvidence retention\n- THE service SHALL retain report records, content snapshots used as evidence, and moderation decisions for 2 years from finalization unless stricter statutory requirements apply.\n- IF a sanction includes account suspension or permanent ban, THEN THE service SHALL retain minimal identifiers necessary to enforce sanctions for the sanction duration plus 2 years.\n\nAppeals and interactions\n- WHEN an appeal is filed within the allowed window, THE service SHALL lock evidence from deletion until appeal closure.\n- WHEN an appeal concludes, THE service SHALL reset the retention start to the appeal closure date.\n- IF the reported content’s author requests deletion, THEN THE service SHALL keep evidence under hold until the case is finalized, then apply standard deletion rules.\n\nReference: [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 11. Logs, Metrics, DSARs, and Backups: Retention and Disposal\nAudit and security logs\n- THE service SHALL retain authentication, authorization, and sensitive action audit logs for 180 days at minimum and up to 1 year where required by internal policy.\n- WHERE logs contain personal identifiers, THE service SHALL pseudonymize identifiers within 30 days unless strict identity is required for ongoing investigations.\n\nTransparency logs\n- THE service SHALL retain public-facing transparency records of moderation actions for 2 years, with personal data minimized and pseudonymized where possible.\n\nOperational metrics and analytics\n- THE service SHALL retain granular metrics and event samples for 90 days; after 90 days THE service SHALL keep only aggregated, non-identifying statistics for longitudinal analysis.\n\nNotification delivery logs\n- THE service SHALL retain notification delivery attempts and outcomes for 90 days to support troubleshooting and opt-in/opt-out proof.\n\nDSAR records\n- THE service SHALL retain DSAR request logs and responses for 2 years for audit and compliance, with personal data minimized.\n\nBackups (business-level principles)\n- THE service SHALL maintain daily recovery points sufficient to restore to a business-acceptable point-in-time; WHERE monthly full retention applies, THE service SHALL retain monthly recovery points for 3 months and daily recovery points for 30 days.\n- IF a user exercises deletion rights, THEN THE service SHALL ensure deleted personal data ages out of backup media within 35 days after deletion completion, acknowledging backup immutability windows.\n- THE service SHALL document and publish effective backup retention windows for audit.\n\nDisposal\n- WHEN retention expires and no legal or moderation hold exists, THE service SHALL dispose of logs, metrics, DSAR records, and backups in an irreversible manner and record disposal in audit entries.\n\n## 12. Anonymization and Pseudonymization Requirements\nPseudonymization\n- WHEN storing data for audit or transparency, THE service SHALL replace direct personal identifiers with stable pseudonymous identifiers sufficient for role-based review but insufficient for public re-identification.\n- WHERE cross-record correlation is necessary for abuse detection, THE service SHALL use rotating pseudonymous identifiers that change at most every 90 days while maintaining internal linkage.\n\nAnonymization\n- WHEN permanent deletion is required but analytics value remains, THE service SHALL anonymize records by removing or irreversibly altering personal identifiers and quasi-identifiers so re-identification is not reasonably possible.\n- IF anonymization cannot guarantee non-reidentifiability for a dataset, THEN THE service SHALL opt for full deletion.\n\nRe-identification prohibition and documentation\n- THE service SHALL prohibit attempts to reverse pseudonymization/anonymization and SHALL record violations as security incidents.\n- THE service SHALL maintain a business-level data dictionary mapping data classes to anonymization/pseudonymization strategies.\n\n## 13. User-Requested Deletion and Recovery\nContent deletion by author\n- WHEN an author deletes own content (posts or comments), THE service SHALL begin the applicable recovery window (30 days for posts, 14 days for comments) and provide a self-service restoration option during that window.\n- WHEN content is restored during the window, THE service SHALL reinstate visible links and engagement counts except those already purged by separate user actions.\n\nAccount deletion\n- WHEN a verified user submits an account deletion request, THE service SHALL acknowledge within 24 hours, start a 14-day cooling-off period, and communicate the scheduled deletion date.\n- WHEN the cooling-off period ends without revocation, THE service SHALL delete/anonymize personal data within 15 additional days and notify the user of completion if channels remain valid.\n- WHERE legal obligations require retention (e.g., moderation transparency, fraud prevention), THE service SHALL retain only minimal necessary data and SHALL document the legal basis.\n\nExceptions and holds\n- IF an active moderation case, payment dispute, or legal hold exists, THEN THE service SHALL defer deletion until closure and SHALL inform the user of deferral reason and next steps.\n\nRecovery portal\n- THE service SHALL provide a history of user-initiated deletions within the active recovery window and SHALL allow one-click restoration by the owner.\n- WHERE recovery would violate a moderation decision, THE service SHALL block restoration and display the applicable policy reference in user-facing communications.\n\n## 14. Legal Hold and Exceptions\n- WHEN an Admin establishes a legal hold for specific subjects or data classes, THE service SHALL freeze deletion and anonymization actions for affected records until the hold is explicitly lifted.\n- THE service SHALL record the hold’s scope, reason (business reference), start/end timestamps, and approver role in the audit log and SHALL review active holds every 90 days.\n\n## 15. Retention Matrix (Business Summary)\n\n| Data Category | State/Trigger | Retention Policy | Deletion Type | Recovery Window | Notes |\n|---|---|---|---|---|---|\n| Draft Posts/Comments | Last edit inactive | Delete after 90 days inactivity; purge within 7 days | Permanent | N/A | User can self-delete anytime |\n| Published Post Versions | Edit event | Prior version kept 30 days | Auto purge 30 days | N/A | Longer if under hold |\n| Posts (Author-deleted) | Soft deleted | Recovery 30 days; then delete content; metadata 180 days | Permanent (content); anonymize metadata | 30 days | Defer if under hold |\n| Comments (Author-deleted) | Soft deleted | Recovery 14 days; then delete content; metadata 90 days | Permanent (content); anonymize metadata | 14 days | Placeholder remains |\n| Reactions/Votes | Event created | Keep raw 90 days; keep aggregates indefinitely | Aggregate only | N/A | Remove attribution on account deletion (7 days) |\n| Follows/Bookmarks | Preference removed | Immediate deletion | Permanent | N/A | Purge within 7 days on account deletion |\n| Account Profiles | Deletion requested | 14-day cooling; delete/anonymize within +15 days | Permanent/Anonymize | N/A | Minimal retention if required by law |\n| Reports & Evidence | Finalization/Appeal close | 2 years | N/A | N/A | Extend under legal requirements |\n| Audit/Security Logs | Log creation | 180 days up to 1 year | Permanent | N/A | Pseudonymize in 30 days unless needed |\n| Transparency Logs | Action published | 2 years | N/A | N/A | Personal data minimized |\n| Metrics/Analytics | Event creation | Granular 90 days; aggregates thereafter | Aggregate | N/A | Non-identifying aggregates |\n| Notification Logs | Event creation | 90 days | Permanent | N/A | Proof of consent history |\n| DSAR Records | Request closure | 2 years | Permanent | N/A | Minimized content |\n| Backups | Recovery point creation | Daily 30 days; Monthly 3 months | Secure destruction | N/A | Deleted data ages out ≤35 days |\n| Taxonomy Change Records | Change applied | 1 year | Permanent | N/A | For curation audit |\n| Legal Hold Records | Hold creation | Duration of hold + 2 years | N/A | N/A | Scope/review trail retained |\n\n## 16. Error Handling and Edge Cases (Business)\nConflicts and holds\n- IF a user requests deletion while a legal or moderation hold exists, THEN THE service SHALL process the request to the extent possible and queue the remainder until the hold is lifted, with user notification per communications policy.\n\nReferential integrity\n- WHEN a parent post is permanently deleted, THE service SHALL ensure that child comments remain visible if policy allows, with a clear placeholder and without broken navigation.\n\nPartial failures\n- IF a deletion workflow partially completes, THEN THE service SHALL mark the item as \"deletion pending\" and retry within 24 hours until completion or hold.\n\nRace conditions\n- WHEN simultaneous restore and delete actions occur within a recovery window, THE service SHALL prioritize the most recent, explicitly confirmed user action and record the decision in the audit log.\n\nAttachments and embedded media\n- WHEN content is deleted, THE service SHALL apply the same retention schedule to associated attachments and embedded media unless under hold.\n\nData residency and localization (business-level)\n- WHERE data residency constraints apply, THE service SHALL ensure residency-compliant storage locations for preserved data classes and SHALL document residency scope in audit.\n\n## 17. Auditability and Policy Governance\nLifecycle event logging\n- THE service SHALL record lifecycle transitions (create, publish, edit, archive, delete, restore, hold apply/release) with actor role, timestamp, and reason in an immutable audit trail accessible to Admins for compliance review.\n\nPolicy versioning\n- THE service SHALL maintain a versioned registry of lifecycle and retention rules; WHEN rules change, THE service SHALL apply new rules prospectively and SHALL not retroactively shorten required legal retention unless permitted by law.\n\nReviews and certification\n- THE service SHALL review lifecycle and retention practices at least annually and after major regulatory updates, certifying compliance status at the business level.\n\nMinimization and purpose limitation\n- THE service SHALL collect and retain only data necessary for the stated purpose and duration, as detailed in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## 18. Performance and Success Criteria\nVerifiability\n- WHEN auditors review samples, THE service SHALL demonstrate adherence to stated retention timelines within ±2 days for date-specific windows where no holds existed.\n\nUser experience timing\n- WHEN users delete content, THE service SHALL remove content from user-facing views within 1 minute and complete background cleanup according to this policy.\n\nBackup aging\n- WHEN users exercise deletion rights, THE service SHALL verify that personal data no longer appears in restore points older than 35 days after deletion completion.\n\nTransparency\n- THE service SHALL produce a quarterly summary of deletions, holds, appeals, and restoration events without exposing personal data.\n\nProcessing deadlines\n- WHERE anonymization is selected instead of deletion, THE service SHALL complete anonymization within the same deadlines as deletion for the relevant data class.\n\n---\nBusiness requirements only; developers retain full autonomy over architecture, APIs, database design, and infrastructure choices while ensuring consistency with related policy documents.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:37.311Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"수익화/성장 전략과 운영 모델을 명확히 하여 비즈니스 관점의 의사결정을 지원하기 위함.","filename":"02-pol-econ-board-business-model.md","documentType":"business-model","outline":["왜 존재해야 하는가(시장 공백/사용자 페인포인트)","수익 모델(광고/스폰서십/프리미엄 멤버십/데이터 리포트)","사용자 획득 및 성장 전략(콘텐츠·커뮤니티·파트너)","운영 모델과 비용 구조(인력/도구/프로세스)","규제·정책 리스크와 대응 원칙","성공 지표와 모니터링(재무/사용자/콘텐츠 품질)"],"audience":"business stakeholders","keyQuestions":["지속 가능한 수익과 성장 경로는 무엇인가","핵심 비용 항목과 운영 리스크는 무엇이며 어떻게 완화하는가","어떤 KPI로 성과를 관리하는가"],"detailLevel":"moderate detail","constraints":["수익 및 비용 항목은 비즈니스 수준으로 정의","정량 KPI 예시 포함","기술 구현 세부 금지"],"content":"# pol-econ-board Business Model\n\n## Executive Summary\npol-econ-board is a community platform for evidence-based political and economic discourse that connects Members with verified Experts, supported by professional Editors and Moderators, and overseen by Admins. The business model blends four revenue pillars—contextual Ads, ethical Sponsorships, Premium Memberships, and aggregate Data Reports—balanced with strong governance to sustain trust. Growth is driven by an expert-led content engine, transparent moderation, and partner distribution. The operating model prioritizes lightweight fixed costs with scalable variable costs and explicit SLAs for content quality and compliance.\n\nThis document defines business requirements only. All technical implementation decisions belong to the development team; the document describes what the system should do, not how to build it.\n\n## Why This Service Should Exist (Market Gap & Pain Points)\n- Information noise and polarization degrade the quality of political/economic discussion; users lack credible, verifiable expert insights.\n- Traditional forums underinvest in moderation, producing low trust, high toxicity, and regulatory risk.\n- Media outlets offer one-to-many publishing but lack interactive, moderated expert–member engagement loops.\n- Professionals and institutions need synthesized sentiment/insights but face high discovery and verification costs.\n\nDifferentiation\n- Verified Experts who produce deep research and answer Q&A, increasing trust and retention.\n- Transparent Community Governance led by Moderators with auditable actions and appeal paths.\n- Editorial Quality Control by Editors to spotlight high-signal content and thematic series.\n- Evidence and Attribution norms for sources, with labeling standards that reduce misinformation risk.\n\nPrimary Users & Roles\n- Members: participate in discussions, create posts/comments, follow topics, react/vote, report content, manage preferences.\n- Experts: everything a Member can do plus publish long-form research/insights, propose expert-only topics, and join expert Q&A.\n- Moderators: enforce community rules, handle reports, apply temporary actions, propose sanctions, and maintain transparency logs.\n- Editors: curate topics, manage features, create announcements and sticky posts, and run special series.\n- Admins: system-wide operations, role management, policy updates, legal request handling, and metrics oversight.\n\n## Revenue Model\nRevenue Pillars\n1) Contextual Advertising (Ads)\n- Inventory: in-feed display, topic page banners, newsletter placements, and contextually relevant sponsor tags.\n- Targeting: context and topic-based only; no sale of personally identifiable profiles; privacy-first measurements.\n- Frequency & Load: ad-light defaults to preserve trust.\n- Exclusions: political campaign/advocacy ads restricted per policy and law; see Risk section.\n\n2) Sponsorships\n- Thematic sponsorship of premium series, events (e.g., AMAs), and newsletters.\n- Strict labeling and separation between sponsored and editorial content.\n- Pre-approval workflow across Editor and Moderator functions for policy fit.\n\n3) Premium Memberships\n- Benefits: reduced or ad-free experience per tier, priority in expert Q&A, exclusive long-form content, advanced topic digests, bookmarks and reading lists at higher quotas, and early access to features.\n- Pricing & Terms: monthly and annual options, free trial, and limited-time promotions.\n- Eligibility: available to authenticated users; gift/corporate licenses for institutions.\n\n4) Data & Insight Reports\n- Aggregated, anonymized trend reports on topics, engagement, and sentiment indices; no export of personal data.\n- Audience: institutions (universities, think tanks, media, finance) and power users.\n- Distribution: one-off reports and recurring subscriptions with quarterly refreshes.\n\nRevenue Policy Requirements (EARS)\n- THE pol-econ-board service SHALL display no more than 1 ad slot per 10 content units in default feeds.\n- THE pol-econ-board service SHALL cap ad frequency at 2 impressions per user per publisher per day by default.\n- WHERE a Premium tier includes \"ad-free\", THE pol-econ-board service SHALL suppress all paid ad placements for that user during the active subscription period.\n- WHEN a post is sponsored, THE pol-econ-board service SHALL render a prominent \"Sponsored\" label and link to an explanation page at the start of the content unit.\n- IF a sponsorship conflicts with policy categories (e.g., political campaign advocacy), THEN THE pol-econ-board service SHALL block the sponsorship from publication and notify Editors and Moderators for review.\n- THE pol-econ-board service SHALL provide access to Data Reports only as aggregated and anonymized content without exposing personal data or individual-level behavioral traces.\n- WHEN a Premium subscription lapses, THE pol-econ-board service SHALL revert the user to the free tier benefits within 1 hour.\n\nPricing and Unit Economics (Business-Level Assumptions)\n- Ads: eCPM range USD 1.5–6.0 depending on placement and seasonality; ad-light policy expected to reduce fill but improve retention.\n- Sponsorships: USD 8k–30k per themed series per month; AMAs USD 3k–10k per event; newsletter footer USD 1k–5k per send.\n- Premium: USD 6.99/month or USD 69/year; free trial 14 days; early annual adoption discount up to 20%.\n- Data Reports: USD 1.5k–5k per report; institutional annual subscriptions USD 12k–40k.\n\nRevenue Stream Diagram\n```mermaid\ngraph LR\n  subgraph \"Audience\"\n    A[\"Members\"]\n    B[\"Experts\"]\n    C[\"Institutions\"]\n  end\n  subgraph \"Monetization Products\"\n    D[\"Contextual Ads\"]\n    E[\"Sponsorships\"]\n    F[\"Premium Memberships\"]\n    G[\"Data & Insight Reports\"]\n  end\n  subgraph \"Revenue\"\n    H[\"Ad Revenue\"]\n    I[\"Sponsorship Revenue\"]\n    J[\"Subscription Revenue\"]\n    K[\"Report Sales\"]\n  end\n  A --> D\n  A --> F\n  B --> E\n  C --> G\n  D --> H\n  E --> I\n  F --> J\n  G --> K\n```\n\n## User Acquisition & Growth Strategy\nContent Engine\n- Expert-led long-form content and Q&A cadences establish authority and drive organic growth.\n- Editors curate high-signal threads and produce weekly analytical digests for shareability.\n- Topic follow mechanics create recurring engagement loops for Members and Experts.\n\nCommunity & Network Effects\n- Reputation and badges for Experts reinforce credibility; transparency logs foster trust.\n- Member referrals and co-reading (followed topics) increase cross-pollination across sub-communities.\n- Moderation that is visible and timely reduces churn stemming from toxicity.\n\nPartnerships\n- Universities and think tanks for expert onboarding and content syndication.\n- Media partners for co-publishing and backlinks; podcasts/webinars for distribution.\n- Professional associations to drive institutional subscriptions for Data Reports.\n\nGrowth Requirements (EARS)\n- THE pol-econ-board service SHALL publish at least 2 expert long-form pieces per week during the first 6 months post-launch.\n- THE pol-econ-board service SHALL provide a referral mechanism that attributes new sign-ups to existing Members for reward calculation.\n- WHERE a user follows a topic, THE pol-econ-board service SHALL include the topic in weekly digests and real-time alerts per user preference settings.\n- WHEN an Expert publishes a new piece, THE pol-econ-board service SHALL trigger eligible notifications to followers within 5 minutes.\n- IF a reported item exceeds the toxicity threshold, THEN THE pol-econ-board service SHALL reduce its distribution pending moderation.\n\nGrowth Flywheel Diagram\n```mermaid\ngraph LR\n  A[\"Expert Content\"] --> B[\"Search & Social Traffic\"]\n  B --> C[\"Member Sign-Ups\"]\n  C --> D[\"Engagement & Retention\"]\n  D --> E[\"Premium Conversion\"]\n  E --> F[\"Revenue\"]\n  F --> G[\"Expert Incentives\"]\n  G --> A\n```\n\n## Operating Model & Cost Structure\nPeople (Core Team, phased)\n- Editorial & Curation: 1 Lead Editor, 1–2 Editors (phase 1); scale to 3–5 as content volume grows.\n- Moderation & Trust: 1 Lead Moderator, 2–4 Moderators; part-time experts for sensitive topics during election periods.\n- Community & Growth: 1 Community Manager, 1 Growth PMM; contractor support for campaigns.\n- Partnerships & Sales: 1 Partnerships Lead, 1 Sponsorship Sales, 1 Account Manager.\n- Data & Insights: 1 Analyst for report production; scale to 2–3 with institutional demand.\n- Compliance & Policy: shared counsel or part-time compliance officer; election-period escalation rota.\n\nTools (Business-Level)\n- Content planning, sponsorship CRM, analytics and attribution, billing and subscription management, moderation queue and transparency ledger, and brand safety review tools.\n\nProcesses & SLAs\n- Editorial Calendar: weekly planning and monthly thematic cycles.\n- Sponsorship Review: brand fit and policy compliance approval before booking confirmation.\n- Moderation SLA: actionable reports triaged within 4 hours during business hours; severe harm flagged within 60 minutes.\n- Transparency: public monthly summary of moderation actions and sponsorship disclosures.\n\nCosts (Business-Level Estimates)\n- Fixed: core salaries, counsel retainer, basic tools/licenses, brand and PR.\n- Variable: content production stipends, sponsorship fulfillment assets, payment processing fees, promotional spend, translation and transcription.\n\nIllustrative Cost Structure (Phase 1–2)\n| Category | Monthly Estimate (USD) | Notes |\n|---------|-------------------------|-------|\n| Editorial & Moderation | 45k–85k | Staffing and stipends |\n| Community & Growth | 20k–40k | Campaigns and tools |\n| Partnerships & Sales | 25k–50k | Base plus commission |\n| Data & Insights | 12k–25k | Analyst and tooling |\n| Compliance & Legal | 8k–20k | Counsel retainer and audits |\n| Tools & Services | 10k–25k | Analytics, CRM, billing |\n| Marketing & PR | 20k–60k | Launch, sponsorship promotion |\n| Contingency (10%) | 14k–30k | Risk buffer |\n\nOperational Requirements (EARS)\n- THE pol-econ-board service SHALL enforce sponsorship labeling on all sponsored units without exception.\n- THE pol-econ-board service SHALL provide exportable booking confirmations and insertion orders for Sponsorships in human-readable formats.\n- WHEN a moderation report is categorized as severe harm, THE pol-econ-board service SHALL route it to priority handling with a target response within 60 minutes during coverage hours.\n- WHERE a campaign includes performance guarantees, THE pol-econ-board service SHALL provide delivery and pacing dashboards to business stakeholders.\n\n## Regulatory & Policy Risks and Response Principles\nRisk Categories (Business-Level)\n- Political Advertising Compliance: restrictions on campaign/advocacy ads; jurisdictional differences, especially during election windows.\n- Privacy & Data Protection: PIPA (Korea), GDPR, and similar regimes governing consent, minimization, and data subject rights.\n- Defamation, Misinformation, and Harmful Content: liability exposure from user-generated claims; need for source labeling and editorial standards.\n- Copyright & Fair Use: use of excerpts, charts, and external media.\n- Market Integrity: sensitive financial claims and investment advice; require disclaimers and expert verification.\n\nMitigation Principles\n- Clear guidelines on prohibited categories and required disclosures.\n- Strong, documented moderation process with appeal and transparency.\n- Data minimization for monetization; aggregate-only insights for external reports.\n- Election-period special policies with heightened review and cooling-off rules.\n\nCompliance Requirements (EARS)\n- THE pol-econ-board service SHALL maintain a publicly accessible policy page describing sponsorship disclosure and prohibited categories.\n- WHEN an election period policy is active, THE pol-econ-board service SHALL apply additional review steps to content tagged as political campaign-related before amplification.\n- IF a data subject requests access, THEN THE pol-econ-board service SHALL provide a human-readable summary of stored personal data and processing purposes within 30 days, aligned with applicable law.\n- WHERE a Data Report is generated, THE pol-econ-board service SHALL ensure outputs meet aggregation thresholds that prevent re-identification (e.g., minimum cohort size of 100).\n- IF a copyright complaint is received with required particulars, THEN THE pol-econ-board service SHALL de-list the content pending review and notify the uploader and complainant.\n\n## Success Metrics & Monitoring\nFinancial KPIs\n- Revenue Mix: Ads 25–40%, Sponsorships 25–35%, Premium 20–35%, Data Reports 10–20% by month 18.\n- MRR: USD 150k+ by month 18; growth 8–12% MoM during months 6–12, 5–8% thereafter.\n- ARPU (paid): USD 8–12 monthly; Churn (paid): < 4% monthly.\n\nUser & Growth KPIs\n- MAU: 250k by month 18; DAU/MAU: 18–27%.\n- Activation: ≥ 35% of new sign-ups reach first follow and first interaction within 7 days.\n- D30 Retention: ≥ 25% Members; ≥ 40% Experts.\n- Premium Conversion: 2.0–3.5% of active Members by month 12; annual plan share ≥ 35% of paid subs.\n\nContent Quality & Safety KPIs\n- Expert Ratio: ≥ 20% of front-page content from Experts.\n- Moderation SLA: ≥ 90% of severe reports handled within 60 minutes during coverage hours; ≥ 80% of general reports within 4 hours.\n- Transparency: monthly report published 100% of months.\n- Takedown Accuracy: appeal uphold rate between 10–25% (indicates neither over- nor under-enforcement extremes).\n\nSponsorship & Ads Performance KPIs\n- Sponsorship Fulfillment: ≥ 95% delivery to booked impressions/placements; labeled 100% of time.\n- Ad User Experience: average ads per session ≤ 3; complaint rate < 0.05% of sessions.\n\nData Report KPIs\n- Institutional Accounts: 20–60 by month 18; renewal rate ≥ 75%.\n- Report Production SLA: deliver quarterly updates within 10 business days of quarter close.\n\nMonitoring & Cadence\n- Weekly dashboards for growth and engagement; monthly financial close; quarterly planning reviews.\n- Named owners for each KPI: Growth PMM (acquisition), Lead Editor (content quality), Lead Moderator (safety), Partnerships Lead (sponsorship), Analyst (reports), Finance (revenue/margin).\n\nKPI Table (Illustrative Targets)\n| KPI | Phase 1 (0–6 mo) | Phase 2 (6–12 mo) | Phase 3 (12–18 mo) |\n|-----|-------------------|-------------------|--------------------|\n| MAU | 50k | 150k | 250k |\n| DAU/MAU | 15–20% | 18–25% | 20–27% |\n| Paid Conversion | 0.8–1.5% | 1.5–2.5% | 2.0–3.5% |\n| MRR | 20–40k | 60–110k | 150k+ |\n| Expert Content Share | 10% | 15% | 20% |\n| Severe Report SLA | 80% | 85% | 90% |\n\n## Business Requirements (EARS) Summary\nMonetization\n- THE pol-econ-board service SHALL limit default ad load to ad-light parameters and enforce frequency capping as defined in this document.\n- WHEN a user upgrades to Premium, THE pol-econ-board service SHALL immediately apply premium entitlements and persist them for the subscription term.\n- WHERE sponsorship units are booked, THE pol-econ-board service SHALL guarantee visible disclosure at the start of the unit and in any listings.\n\nGrowth & Content\n- THE pol-econ-board service SHALL maintain a weekly editorial cadence with at least 2 expert long-form pieces and 1 digest.\n- WHEN a user follows a topic, THE pol-econ-board service SHALL include it in digests and notifications, respecting user preferences.\n\nSafety & Compliance\n- THE pol-econ-board service SHALL maintain public policy documentation and update transparency logs monthly.\n- IF content is flagged as high risk during election periods, THEN THE pol-econ-board service SHALL require elevated review before promotion.\n\nData & Reporting\n- WHERE Data Reports are offered, THE pol-econ-board service SHALL use aggregation thresholds to prevent re-identification and exclude personal data.\n- WHEN an institutional subscription lapses, THE pol-econ-board service SHALL revoke access to new report releases while preserving prior entitlements per contract terms.\n\n## Scope of This Document\nThis document provides business requirements only. All technical implementation decisions (architecture, APIs, database design, encryption, and infrastructure) are at the discretion of the development team. This document specifies what the system should do from a business perspective, including measurable policies, SLAs, and KPIs, and does not prescribe how to implement them.\n\n\nReferences\n- For overall vision and scope, see the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md).\n- For governance and moderation standards, see the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- For security and compliance principles, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md)."},"plan":"Plan based on metadata and project context: 1) Title with service prefix pol-econ-board. 2) Why exist: market gap and pain points; differentiation and user roles. 3) Revenue model: Ads, Sponsorships, Premium Memberships, Data & Insight Reports; pricing ranges and unit economics assumptions; business rules and EARS requirements; monetization governance and controls; promotions/coupons; refunds/chargebacks; anti-fraud and abuse. 4) Acquisition and growth: content engine, community effects, partnerships; EARS targets; growth flywheel diagram. 5) Operating model and cost structure: team, tools, processes & SLAs; illustrative monthly costs; hiring/scale triggers (EARS). 6) Regulatory/policy risks: political ads, privacy (PIPA/GDPR concepts), defamation/misinformation, copyright, market integrity; mitigation principles; EARS compliance requirements. 7) Success metrics & monitoring: financial KPIs, user/growth KPIs, content quality & safety KPIs, sponsorship/ads KPIs, data reports KPIs; ownership/cadence; KPI table; KPI guardrails and triggers (EARS). 8) Additional workflows: sponsorship booking and review flow; premium entitlement lifecycle; data report contract lifecycle (Mermaid). 9) Business requirements summary in EARS by themes. 10) Scope statement confirming business-only requirements. 11) References with descriptive links to existing documents. All diagrams in Mermaid with strict syntax rules and LR orientation.","review":"Enhancement criteria: Business-model document must be comprehensive, implementation-ready for backend from a business perspective, 5,000–30,000+ chars, and use EARS for all applicable, testable requirements. Absolutely no API/database/architecture specs. Include WHY/HOW/WHAT; revenue pillars; growth strategy; operating model and cost structure; regulatory/policy risks; success metrics and monitoring. Validate all links (descriptive titles). Mermaid diagrams must use double quotes on all labels, no spaces between brackets and quotes, correct arrows (--> , -.-> , ==>), and avoid nested double quotes. Requirements must be specific/measurable in natural language with EARS keywords in English and descriptions in en-US. Include role considerations (member, expert, moderator, editor, admin). Add business rules for monetization controls, sponsorship workflows, premium entitlements, pricing/discount policies, refunds/chargebacks, fraud prevention, data reports packaging and eligibility, institutional contracts, and KPI guardrails. Add error/edge-handling from business perspective. Ensure performance expectations from user viewpoint (e.g., notification timing, response windows) where applicable. Include compliance (PIPA/KR), political advertising constraints, brand safety, disclosure standards. Strictly business-level; no technical details. Ensure the doc affirms developer autonomy (“business requirements only”).","content":"# pol-econ-board Business Model\n\n## Executive Summary\npol-econ-board is a trust-centered community for evidence-based political and economic discourse that connects Members with verified Experts, supported by Editors and Moderators, and overseen by Admins. The model blends four revenue pillars—contextual Ads, ethical Sponsorships, Premium Memberships, and aggregated Data & Insight Reports—operated under transparent governance to sustain credibility. Growth is driven by an expert-led content engine, curated discovery, visible moderation, and institutional partnerships. The operating model favors lean fixed costs with scalable variable spend, codified SLAs for content quality, sponsorship disclosure, and compliance.\n\nThis document provides business requirements only. All technical implementation decisions belong to the development team; it defines WHAT the system should do, not HOW to build it.\n\n## Why This Service Should Exist (Market Gap & Pain Points)\n- Information noise and polarization reduce the value of political/economic discussions; users lack credible, verifiable expert insights and clear norms.\n- General forums underinvest in moderation, driving low trust, toxicity, and regulatory risk for operators and advertisers.\n- Media outlets publish one-to-many; few enable sustained, moderated expert–member interaction with transparent standards.\n- Professionals/institutions need synthesized insights and sentiment but face high discovery, verification, and brand safety costs.\n\nDifferentiation\n- Verified Experts produce deep research, host Q&A, and model evidence-first debate to improve trust and retention.\n- Transparent governance: auditable moderator actions, reason codes, SLAs, and appeal paths.\n- Editorial curation: Editors spotlight high-signal threads, thematic series, and special coverage packages.\n- Evidence/Attribution norms: source citations and labeling that reduce misinformation risk and enable informed discourse.\n\nPrimary Users & Roles\n- Members: create posts/comments, follow topics, react/vote, report, bookmark, manage preferences.\n- Experts: all Member capabilities plus long-form insight posts, expert-only topic proposals, expert Q&A participation, trust badge.\n- Moderators: handle reports, hide/remove, request sanctions, maintain transparency logs, support dispute resolution.\n- Editors: curate features, manage topics/tags, announcements, pins, and special series; collaborate with Moderators.\n- Admins: system-wide policy/role management, legal requests, metrics oversight, and compliance.\n\n## Revenue Model\nRevenue Pillars\n1) Contextual Advertising (Ads)\n- Inventory: in-feed display units, topic page banners, newsletter placements, and contextually relevant sponsor tags.\n- Targeting: context/topic-based; no sale of personally identifiable profiles; privacy-first measurement.\n- Load policies: ad-light defaults that prioritize user trust and content integrity.\n- Exclusions: political campaign/advocacy ads and sensitive categories restricted per policy and law.\n\n2) Sponsorships\n- Thematic sponsorship of premium series, expert AMAs, newsletters, and special coverage.\n- Strict disclosure and separation between sponsored and editorial content.\n- Pre-approval workflow across Editors and Moderators for brand safety and policy fit.\n\n3) Premium Memberships\n- Benefits: ad-light or ad-free tiers, priority in expert Q&A, exclusive long-form content, advanced digests, higher bookmark/export quotas, early feature access.\n- Pricing & terms: monthly and annual options, free trial windows, limited-time promotions.\n- Eligibility: authenticated users; gift and institutional licenses permitted per policy.\n\n4) Data & Insight Reports\n- Aggregated, anonymized trend/readership/sentiment reports; no personal data exports.\n- Audience: institutions (universities, think tanks, media, finance) and professional power users.\n- Distribution: one-off reports and annual subscriptions with quarterly refresh.\n\nRevenue Policy Requirements (EARS)\n- THE pol-econ-board service SHALL display no more than 1 ad slot per 10 content units in default feeds.\n- THE pol-econ-board service SHALL cap ad frequency at 2 impressions per user per advertiser per day by default.\n- WHERE a Premium tier includes \"ad-free\", THE pol-econ-board service SHALL suppress all paid ad placements for that user during the active subscription period.\n- WHEN a post is sponsored, THE pol-econ-board service SHALL render a prominent \"Sponsored\" label with a link to disclosure at the start of the content unit.\n- IF a sponsorship conflicts with prohibited categories, THEN THE pol-econ-board service SHALL block publication and notify Editors and Moderators for review.\n- THE pol-econ-board service SHALL provide Data Reports only as aggregated/anonymized outputs without exposing personal data or individual behavioral traces.\n- WHEN a Premium subscription lapses, THE pol-econ-board service SHALL revert entitlements to free tier within 1 hour.\n\nPricing and Unit Economics (Business-Level Assumptions)\n- Ads: eCPM USD 1.5–6.0 depending on placement/seasonality; ad-light reduces fill, increases retention.\n- Sponsorships: USD 8k–30k per themed series per month; AMAs USD 3k–10k per event; newsletter footer USD 1k–5k per send.\n- Premium: USD 6.99/month or USD 69/year; free trial 14 days; annual discount up to 20%.\n- Data Reports: USD 1.5k–5k per report; institutional annual USD 12k–40k.\n\nMonetization Governance & Controls (EARS)\n- THE pol-econ-board service SHALL maintain a prohibited and restricted categories list for ads and sponsorships with examples and disclosure rules.\n- WHEN a booking is created, THE pol-econ-board service SHALL validate brand safety rules and conflict exclusions before accepting.\n- WHERE labeling is required, THE pol-econ-board service SHALL ensure labels are visible in primary placements and listings.\n- IF an advertiser or sponsor is placed on a temporary hold list, THEN THE pol-econ-board service SHALL block delivery until the hold is cleared.\n- WHEN a complaint about mislabeled sponsored content is received, THE pol-econ-board service SHALL investigate within 2 business days and correct labeling or pause delivery.\n\nPromotions, Coupons, and Discounts (EARS)\n- WHERE promotional codes are enabled, THE pol-econ-board service SHALL apply the discount to eligible Premium plans during checkout and display the adjusted term and renewal price.\n- WHEN a promotion expires, THE pol-econ-board service SHALL prevent further redemptions and honor already-granted terms until their end dates.\n- IF a user attempts to stack incompatible promotions, THEN THE pol-econ-board service SHALL apply the highest-value eligible promotion and inform the user.\n\nRefunds, Chargebacks, and Disputes (EARS)\n- WHEN a Premium subscriber requests a refund within a configured cooling-off window (e.g., 7 days), THE pol-econ-board service SHALL honor the policy and revoke entitlements upon refund approval.\n- IF a chargeback is received, THEN THE pol-econ-board service SHALL suspend Premium entitlements pending resolution and record the case in a finance dispute log.\n- WHERE recurring billing fails, THE pol-econ-board service SHALL attempt collection per policy (e.g., 3 retries over 7 days) and then downgrade entitlements if unresolved.\n\nFraud and Abuse Prevention (Monetization) (EARS)\n- WHEN suspicious subscription activity is detected (e.g., repeated trials), THE pol-econ-board service SHALL deny additional free trials and flag the account for review.\n- WHERE bulk redemptions from the same payment instrument exceed thresholds, THE pol-econ-board service SHALL pause fulfilment and require additional verification.\n- IF exploitation of ad-serving or sponsorship delivery is suspected, THEN THE pol-econ-board service SHALL halt affected placements and trigger brand-safety review.\n\nRevenue Streams Diagram\n```mermaid\ngraph LR\n  subgraph \"Audience\"\n    A[\"Members\"]\n    B[\"Experts\"]\n    C[\"Institutions\"]\n  end\n  subgraph \"Monetization Products\"\n    D[\"Contextual Ads\"]\n    E[\"Sponsorships\"]\n    F[\"Premium Memberships\"]\n    G[\"Data & Insight Reports\"]\n  end\n  subgraph \"Revenue\"\n    H[\"Ad Revenue\"]\n    I[\"Sponsorship Revenue\"]\n    J[\"Subscription Revenue\"]\n    K[\"Report Sales\"]\n  end\n  A --> D\n  A --> F\n  B --> E\n  C --> G\n  D --> H\n  E --> I\n  F --> J\n  G --> K\n```\n\nSponsorship Booking and Review Flow\n```mermaid\ngraph LR\n  subgraph \"Booking Intake\"\n    S1[\"Inquiry/IO Received\"] --> S2[\"Capture Brand & Category\"]\n    S2 --> S3{\"Allowed Category?\"}\n  end\n  subgraph \"Review\"\n    S4[\"Editorial & Policy Review\"] --> S5{\"Approved?\"}\n  end\n  subgraph \"Activation\"\n    S6[\"Create Schedule & Placements\"] --> S7[\"Label as Sponsored\"]\n    S7 --> S8[\"Monitor Delivery/Pacing\"]\n  end\n  subgraph \"Exceptions\"\n    SX1[\"Complaint/Violation\"] --> SX2[\"Pause & Investigate\"]\n  end\n  S3 -->|\"Yes\"| S4\n  S3 -->|\"No\"| SX2\n  S5 -->|\"Yes\"| S6\n  S5 -->|\"No\"| SX2\n  S8 --> SX2\n```\n\nPremium Entitlement Lifecycle\n```mermaid\ngraph LR\n  P1[\"Subscribe\"] --> P2[\"Grant Entitlements\"]\n  P2 --> P3{\"Payment Success?\"}\n  P3 -->|\"Yes\"| P4[\"Active\"]\n  P3 -->|\"No\"| P5[\"Retry/Grace\"]\n  P4 --> P6{\"Cancel or Lapse?\"}\n  P6 -->|\"Yes\"| P7[\"Downgrade within 1h\"]\n  P6 -->|\"No\"| P8[\"Renewal\"]\n```\n\nData Report Contract Lifecycle\n```mermaid\ngraph LR\n  R1[\"Prospect Requests Report\"] --> R2[\"Define Scope(Anonymized)\"]\n  R2 --> R3{\"Meets Aggregation Thresholds?\"}\n  R3 -->|\"Yes\"| R4[\"Sign Terms\"]\n  R3 -->|\"No\"| R5[\"Revise Scope\"]\n  R4 --> R6[\"Deliver Report\"]\n  R6 --> R7[\"Quarterly Refresh\"]\n```\n\n## User Acquisition & Growth Strategy\nContent Engine\n- Expert-led long-form and Q&A cadences establish authority, improve SEO/distribution, and drive organic growth.\n- Editors curate high-signal threads and publish weekly analytical digests for shareability.\n- Topic and expert follow mechanics create recurring engagement loops for Members and Experts.\n\nCommunity & Network Effects\n- Reputation and expert badges reinforce credibility and repeat visitation; transparency logs foster trust.\n- Member referrals, co-reading, and inter-topic surfacing promote cross-pollination among sub-communities.\n- Visible, timely moderation reduces churn driven by toxicity and low-quality interactions.\n\nPartnerships\n- Universities/think tanks for expert onboarding and content syndication.\n- Media partners for co-publishing/backlinks; podcasts/webinars for distribution.\n- Professional associations to drive institutional report subscriptions.\n\nGrowth Requirements (EARS)\n- THE pol-econ-board service SHALL publish at least 2 expert long-form pieces per week during the first 6 months post-launch.\n- THE pol-econ-board service SHALL provide a referral mechanism attributing new sign-ups to referrers for reward calculation.\n- WHERE a user follows a topic, THE pol-econ-board service SHALL include it in weekly digests and real-time alerts per preferences.\n- WHEN an Expert publishes a new piece, THE pol-econ-board service SHALL notify eligible followers within 5 minutes.\n- IF a reported item exceeds toxicity thresholds, THEN THE pol-econ-board service SHALL reduce its distribution pending moderation.\n- WHERE partner co-publishing is active, THE pol-econ-board service SHALL include partner attribution and link-back in visible metadata.\n\nGrowth Flywheel Diagram\n```mermaid\ngraph LR\n  A[\"Expert Content\"] --> B[\"Search & Social Traffic\"]\n  B --> C[\"Member Sign-Ups\"]\n  C --> D[\"Engagement & Retention\"]\n  D --> E[\"Premium Conversion\"]\n  E --> F[\"Revenue\"]\n  F --> G[\"Expert Incentives\"]\n  G --> A\n```\n\n## Operating Model & Cost Structure\nPeople (Core Team, phased)\n- Editorial & Curation: 1 Lead Editor, 1–2 Editors (phase 1); scale to 3–5 as volume grows.\n- Moderation & Trust: 1 Lead Moderator, 2–4 Moderators; part-time experts for sensitive topics during election periods.\n- Community & Growth: 1 Community Manager, 1 Growth PMM; contractor support for campaigns.\n- Partnerships & Sales: 1 Partnerships Lead, 1 Sponsorship Sales, 1 Account Manager.\n- Data & Insights: 1 Analyst for report production; scale to 2–3 with institutional demand.\n- Compliance & Policy: shared counsel or part-time compliance officer; election-period escalation rota.\n\nTools (Business-Level)\n- Content planning and editorial calendar; sponsorship CRM; analytics/attribution; billing/subscription management; moderation queue and transparency ledger; brand safety review tools.\n\nProcesses & SLAs\n- Editorial Calendar: weekly planning and monthly thematic cycles.\n- Sponsorship Review: brand fit and policy compliance approval before booking confirmation.\n- Moderation SLA: actionable reports triaged within 4 hours during business hours; severe harm flagged within 60 minutes.\n- Transparency: public monthly summary of moderation actions and sponsorship disclosures.\n\nCosts (Business-Level Estimates)\n- Fixed: core salaries, counsel retainer, core tools/licenses, brand and PR.\n- Variable: content stipends, sponsorship fulfilment assets, payment processing fees, promotional spend, translation/transcription.\n\nIllustrative Cost Structure (Phase 1–2)\n| Category | Monthly Estimate (USD) | Notes |\n|---------|-------------------------|-------|\n| Editorial & Moderation | 45k–85k | Staffing and stipends |\n| Community & Growth | 20k–40k | Campaigns and tools |\n| Partnerships & Sales | 25k–50k | Base plus commission |\n| Data & Insights | 12k–25k | Analyst and tooling |\n| Compliance & Legal | 8k–20k | Counsel retainer and audits |\n| Tools & Services | 10k–25k | Analytics, CRM, billing |\n| Marketing & PR | 20k–60k | Launch, sponsorship promotion |\n| Contingency (10%) | 14k–30k | Risk buffer |\n\nScale Triggers and Hiring Guardrails (EARS)\n- WHEN weekly expert output exceeds 8 long-form pieces for 4 consecutive weeks, THE pol-econ-board service SHALL hire or contract editorial capacity within 30 days.\n- WHEN moderation queues breach SLA for 2 consecutive weeks, THE pol-econ-board service SHALL add moderator shifts or capacity within 14 days.\n- WHERE institutional report backlog exceeds 3 signed requests, THE pol-econ-board service SHALL allocate additional analyst capacity within 30 days.\n\nOperational Requirements (EARS)\n- THE pol-econ-board service SHALL enforce sponsorship labeling on all sponsored units without exception.\n- THE pol-econ-board service SHALL provide exportable booking confirmations and insertion orders in human-readable formats.\n- WHEN a moderation report is categorized as severe harm, THE pol-econ-board service SHALL route it to priority handling with a target response within 60 minutes during coverage hours.\n- WHERE a campaign includes performance guarantees, THE pol-econ-board service SHALL provide delivery and pacing dashboards to business stakeholders.\n\n## Regulatory & Policy Risks and Response Principles\nRisk Categories (Business-Level)\n- Political Advertising Compliance: restrictions on campaign/advocacy ads; jurisdictional differences, especially during election windows.\n- Privacy & Data Protection: PIPA (Korea), GDPR-like regimes governing consent, minimization, and data subject rights.\n- Defamation/Misinformation/Harmful Content: liability exposure from user claims; source labeling and editorial standards required.\n- Copyright & Fair Use: excerpts, charts, external media usage.\n- Market Integrity: sensitive financial claims and investment advice; require disclaimers and expert verification.\n\nMitigation Principles\n- Prohibited categories and required disclosures explicitly listed and enforced.\n- Documented moderation with appeal and transparency.\n- Data minimization for monetization; aggregate-only insights for external reporting.\n- Election-period special policies with heightened review and cooling-off rules.\n\nCompliance Requirements (EARS)\n- THE pol-econ-board service SHALL maintain a publicly accessible policy page describing sponsorship disclosure and prohibited categories.\n- WHEN an election-period policy is active, THE pol-econ-board service SHALL apply additional review steps to content tagged as political campaign-related before amplification.\n- IF a data subject requests access, THEN THE pol-econ-board service SHALL provide a human-readable summary of stored personal data and processing purposes within 30 days, aligned with applicable law.\n- WHERE a Data Report is generated, THE pol-econ-board service SHALL ensure outputs meet aggregation thresholds that prevent re-identification (e.g., minimum cohort size of 100).\n- IF a copyright complaint is received with required particulars, THEN THE pol-econ-board service SHALL de-list the content pending review and notify the uploader and complainant.\n- WHERE regional political advertising is restricted, THE pol-econ-board service SHALL block such bookings and provide rationale to requesters.\n\n## Success Metrics & Monitoring\nFinancial KPIs\n- Revenue Mix: Ads 25–40%, Sponsorships 25–35%, Premium 20–35%, Data Reports 10–20% by month 18.\n- MRR: USD 150k+ by month 18; growth 8–12% MoM during months 6–12, 5–8% thereafter.\n- ARPU (paid): USD 8–12 monthly; Churn (paid): < 4% monthly; Refund rate < 2% of monthly billings.\n\nUser & Growth KPIs\n- MAU: 250k by month 18; DAU/MAU: 18–27%.\n- Activation: ≥ 35% of new sign-ups reach first follow and first interaction within 7 days.\n- D30 Retention: ≥ 25% Members; ≥ 40% Experts.\n- Premium Conversion: 2.0–3.5% of active Members by month 12; annual plan share ≥ 35% of paid subs.\n\nContent Quality & Safety KPIs\n- Expert Ratio: ≥ 20% of front-page content from Experts.\n- Moderation SLA: ≥ 90% of severe reports handled within 60 minutes during coverage hours; ≥ 80% of general reports within 4 hours.\n- Transparency: monthly moderation report published 100% of months.\n- Takedown Accuracy: appeal uphold rate between 10–25%.\n\nSponsorship & Ads Performance KPIs\n- Sponsorship Fulfillment: ≥ 95% delivery to booked placements; labeled 100% of time.\n- Ad UX: average ads per session ≤ 3; complaint rate < 0.05% of sessions; invalid traffic rate < 2% of ad impressions.\n\nData Report KPIs\n- Institutional Accounts: 20–60 by month 18; renewal rate ≥ 75%.\n- Report Production SLA: deliver quarterly updates within 10 business days of quarter close; on-time rate ≥ 95%.\n\nKPI Guardrails and Triggers (EARS)\n- IF paid churn exceeds 4% for 2 consecutive months, THEN THE pol-econ-board service SHALL initiate a retention review and pause price increases until churn normalizes.\n- WHEN ad complaint rate exceeds 0.05% of sessions in a week, THE pol-econ-board service SHALL reduce ad load by 20% the following week and assess placements.\n- WHERE expert content share drops below 15% for a month, THE pol-econ-board service SHALL allocate additional expert commissioning budget the next month.\n- IF invalid traffic on ads exceeds 2% for a week, THEN THE pol-econ-board service SHALL enable stricter delivery filters and inform sponsors/advertisers.\n\nMonitoring & Cadence\n- Weekly dashboards for growth and engagement; monthly financial close; quarterly planning reviews.\n- Named owners: Growth PMM (acquisition), Lead Editor (content quality), Lead Moderator (safety), Partnerships Lead (sponsorship), Analyst (reports), Finance (revenue/margin).\n\nKPI Table (Illustrative Targets)\n| KPI | Phase 1 (0–6 mo) | Phase 2 (6–12 mo) | Phase 3 (12–18 mo) |\n|-----|-------------------|-------------------|--------------------|\n| MAU | 50k | 150k | 250k |\n| DAU/MAU | 15–20% | 18–25% | 20–27% |\n| Paid Conversion | 0.8–1.5% | 1.5–2.5% | 2.0–3.5% |\n| MRR | 20–40k | 60–110k | 150k+ |\n| Expert Content Share | 10% | 15% | 20% |\n| Severe Report SLA | 80% | 85% | 90% |\n\n## Business Requirements (EARS) Summary\nMonetization\n- THE pol-econ-board service SHALL limit default ad load to ad-light parameters and enforce frequency capping as defined.\n- WHEN a user upgrades to Premium, THE pol-econ-board service SHALL apply entitlements immediately and persist for the subscription term.\n- WHERE sponsorship units are booked, THE pol-econ-board service SHALL guarantee visible disclosure at unit start and in listings.\n- WHEN a refund is approved, THE pol-econ-board service SHALL revoke premium entitlements and adjust access within 1 hour.\n\nGrowth & Content\n- THE pol-econ-board service SHALL maintain a weekly editorial cadence with at least 2 expert long-form pieces and 1 digest.\n- WHEN a user follows a topic, THE pol-econ-board service SHALL include it in digests and notifications per preferences.\n\nSafety & Compliance\n- THE pol-econ-board service SHALL maintain public policy documentation and update transparency logs monthly.\n- IF content is flagged as high risk during election periods, THEN THE pol-econ-board service SHALL require elevated review before promotion.\n\nData & Reporting\n- WHERE Data Reports are offered, THE pol-econ-board service SHALL use aggregation thresholds that prevent re-identification and exclude personal data.\n- WHEN an institutional subscription lapses, THE pol-econ-board service SHALL revoke access to new report releases while preserving prior entitlements per contract terms.\n\nOperational\n- THE pol-econ-board service SHALL publish monthly sponsorship and moderation disclosure summaries accessible to users.\n- WHEN moderation or sponsorship complaints are validated, THE pol-econ-board service SHALL implement corrective actions within 5 business days.\n\n## Scope of This Document\nBusiness requirements only. Technical implementation decisions (architecture, APIs, database design, encryption, infrastructure) are at the discretion of the development team; the content specifies measurable policies, SLAs, and KPIs.\n\nReferences\n- For overall vision and scope, see the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md).\n- For governance and moderation standards, see the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- For security and compliance principles, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:45.849Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"역할과 권한, 인증/세션 정책을 비즈니스 관점에서 완전하게 정의하여 권한 관리의 기준으로 삼기 위함.","filename":"03-pol-econ-board-user-roles-and-authentication.md","documentType":"requirement","outline":["인증 요구사항 개요","회원가입/로그인/로그아웃/이메일 인증/비밀번호 재설정","세션 및 토큰 관리(JWT) 원칙","역할 정의 및 권한 설명","권한 매트릭스(역할×액션)","정책: 비밀번호 규칙·로그인 시도 제한·계정 정지/해제·디바이스 로그아웃","감사 및 보안 고려(비즈니스 관점)"],"audience":"development team","keyQuestions":["어떤 역할이 존재하며 각 역할이 수행/제한되는 액션은 무엇인가","인증 흐름과 세션 만료/갱신 정책은 무엇인가","보안 및 감사 요구는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["01-pol-econ-board-service-overview.md","07-pol-econ-board-community-governance-and-moderation.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 요구사항 명시","권한 매트릭스 포함","JWT 기반 토큰 관리 원칙 포함","API/DB 세부 명시 금지"],"content":"# 03-pol-econ-board-user-roles-and-authentication\n\n## Scope and Intent\nThis document defines business requirements for authentication, authorization, and role-based access control of the service prefix \"pol-econ-board\". It specifies WHAT the system must do from a business perspective, not HOW to implement it. All technical implementation decisions (architecture, APIs, database design, libraries, infrastructure) are at the discretion of the development team.\n\n## Authentication Requirements Overview\n- THE system SHALL support account lifecycle: registration, email verification, login, logout, password change, password reset, and session/device management.\n- THE system SHALL support role-based authorization for roles: guest (unauthenticated), member, expert, moderator, editor, admin.\n- THE system SHALL use JWT for access control with short-lived access tokens and longer-lived refresh tokens.\n- THE system SHALL record key authentication and authorization events for audit and security monitoring.\n\n## Registration, Login, Logout, Email Verification, Password Reset\n\n### Registration\n- WHEN a user attempts to register with email and password, THE system SHALL validate input according to password policy and email format.\n- WHEN registration succeeds, THE system SHALL issue a verification step requiring email ownership confirmation prior to granting posting or interaction privileges.\n- WHERE invitation-based or role elevation flows are used (e.g., expert), THE system SHALL allow registration as member first and perform role elevation after verification and review.\n\nInput validation (business rules):\n- THE system SHALL require email in valid format with domain part containing at least one dot and TLD of 2–24 letters.\n- THE system SHALL reject disposable or blocked domains maintained by policy list.\n- THE system SHALL require password length ≥ 10 characters and include at least 2 of the following classes: uppercase, lowercase, number, symbol. Passphrases ≥ 16 characters with spaces allowed SHALL be accepted as an alternative.\n- THE system SHALL reject passwords found in a maintained common-passwords list (top N thousand) and passwords equal to email local part or display name.\n\n### Email Verification\n- WHEN a registration is submitted, THE system SHALL send a verification message containing a one-time token.\n- THE system SHALL set verification tokens to expire in 30 minutes and be single-use.\n- WHILE an account is unverified, THE system SHALL permit only read access to public content and allow profile completion but SHALL block posting, commenting, voting, reporting, and following.\n- IF a verification token is expired or invalid, THEN THE system SHALL present a clear error and SHALL allow requesting a new token up to 3 times per 24 hours.\n\n### Login\n- WHEN a user submits email and password, THE system SHALL validate credentials and respond within 2 seconds at the 95th percentile under normal load.\n- IF credentials are valid and the account is in good standing, THEN THE system SHALL create a session and issue access and refresh tokens containing role and permissions.\n- IF the account is suspended, THEN THE system SHALL deny login and present the suspension reason and duration when policy allows disclosure.\n- IF multi-factor verification is enabled by policy or user preference, THEN THE system SHALL require second-factor confirmation before issuing tokens.\n\n### Logout\n- WHEN a user initiates logout, THE system SHALL invalidate the active access token and detach it from the corresponding refresh token chain for that device.\n- WHEN the user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens associated with the account within 60 seconds.\n\n### Password Reset and Change\n- WHEN a user requests password reset, THE system SHALL send a one-time reset token that expires in 30 minutes and is invalidated upon use.\n- WHEN a user completes password reset, THE system SHALL invalidate all existing sessions and refresh tokens and require login with the new password.\n- WHEN a user changes password from a logged-in state, THE system SHALL prompt for current password re-authentication and SHALL invalidate all refresh tokens while allowing the current access token to expire within its normal lifetime unless policy requires immediate revocation.\n\n## Session and Token Management (JWT) Principles\n- THE system SHALL use JWT-based access tokens with a lifetime of 20 minutes and refresh tokens with a lifetime of 14 days.\n- THE system SHALL rotate refresh tokens on each use and SHALL invalidate the previous token immediately after rotation.\n- THE system SHALL embed in JWT payload at minimum: userId, role, a permissions array, issued-at time, and expiration time. Optional claims may include trust level, verified status, and badges when relevant to business logic.\n- IF a user’s role or permissions change, THEN THE system SHALL invalidate all active refresh tokens within 60 seconds and require token re-issuance under the new role.\n- WHERE device-level session tracking is enabled, THE system SHALL allow users to view active device sessions (device name, approximate location, last activity) and revoke individual sessions.\n- IF suspicious activity is detected on a session (impossible travel, abnormal IP velocity as per policy), THEN THE system SHALL flag the session for additional verification and MAY require step-up authentication.\n- WHERE client storage policy applies, THE system SHALL support secure storage of tokens with preference for httpOnly cookie; localStorage MAY be used where acceptable by policy. Developers retain discretion on exact mechanism.\n\n## Role Definitions and Permission Descriptions\nThe service recognizes the following roles. Each role’s permissions are described in business terms. JWT payloads MUST include the role and a permissions array reflecting granted actions.\n\n### Guest (Unauthenticated)\n- Read-only access to public content and search public posts.\n- Cannot create content, vote, react, report, or follow.\n\n### Member\n- General member registered with real name or alias. Can create/edit/delete own posts and comments, report content, bookmark, follow topics/users, vote/react, and manage notifications. Subject to community moderation.\n- Typical JWT permissions: [\"post:create\", \"post:edit:own\", \"post:delete:own\", \"comment:create\", \"comment:edit:own\", \"comment:delete:own\", \"report:create\", \"bookmark:create\", \"follow:create\", \"vote:create\", \"notify:manage\", \"profile:edit\"]\n\n### Expert\n- Elevated after expertise verification in politics/economics. Includes member permissions plus expert badge display, propose expert-only topics, publish deep-dive research/insight posts, and participate in expert Q&A.\n- Typical JWT permissions: member permissions + [\"topic:propose:expert\", \"post:create:insight\", \"qa:expert:participate\", \"badge:expert\"]\n\n### Moderator\n- Community operations. Access report queue, temporarily hide/delete content, request user sanctions (warning/suspension), mediate disputes, manage transparency logs.\n- Typical JWT permissions: member permissions + [\"report:queue:read\", \"content:hide\", \"content:delete\", \"sanction:request\", \"dispute:mediate\", \"transparency:manage\"]\n\n### Editor\n- Content quality and curation. Edit tags/topics, manage announcements/pinned posts, operate featured selections for home/sections, collaborate with moderators on policy violations.\n- Typical JWT permissions: member permissions + [\"topic:edit\", \"curation:feature\", \"announcement:manage\", \"pin:manage\"]\n\n### Admin\n- Organization-wide operations. Full access to all resources, role management, policy/settings changes, legal request workflow, service health/metrics oversight, audit review.\n- Typical JWT permissions: all permissions including [\"role:manage\", \"policy:manage\", \"sanction:execute\", \"audit:read\", \"system:metrics:read\", \"legal:request:manage\", \"session:revoke:any\"]\n\n## Permission Matrix (Role × Action)\n\n| Action (Business term) | Guest | Member | Expert | Moderator | Editor | Admin |\n|---|---|---|---|---|---|---|\n| View public content | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Search public posts | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create standard post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create deep-dive insight post | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit own post (within policy window) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Edit own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Vote/React on content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Report content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Bookmark content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Follow topic/user | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Propose expert-only topic | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit topics/tags | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Curate featured collections | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Manage announcements/pinned posts | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Access report queue | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Temporarily hide content | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Delete content (moderation remove) | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Issue user warning (execute) | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Request user suspension | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Execute user suspension | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Manage transparency logs | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Manage roles | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Change policies/settings | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Access audit logs | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View service health metrics | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Initiate legal request workflow | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View own sessions | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke own sessions (single/all) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke other users’ sessions | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nNotes:\n- Moderator actions that execute irreversible sanctions are restricted to admin. Moderators can request sanctions with documented reasons.\n- Expert adds publishing and proposal capabilities beyond member.\n\n## Policies: Password Rules, Login Attempt Limits, Account Suspension/Unlock, Device Logout\n\n### Password Rules\n- THE system SHALL enforce minimum password length of 10 and complexity as defined above.\n- THE system SHALL permit passphrases ≥ 16 characters without complexity requirements.\n- IF a password is found in a banned list, THEN THE system SHALL reject it with guidance to choose a stronger password.\n\n### Login Attempt Limits and Abuse Prevention\n- THE system SHALL allow up to 5 failed login attempts per account per rolling 15 minutes before temporary lockout.\n- IF the threshold is exceeded, THEN THE system SHALL lock the account for 15 minutes and SHALL send an advisory notice to the account email.\n- WHERE suspicious velocity or credential stuffing is detected, THE system SHALL apply adaptive throttling and MAY require additional verification.\n- THE system SHALL reset failure counters upon successful login.\n\n### Account Suspension and Unlock\n- WHEN a moderator submits a suspension request with reason and proposed duration, THE system SHALL route it for admin execution and log the decision.\n- WHEN an admin executes a suspension, THE system SHALL immediately revoke all sessions and block new sessions until the suspension ends or is lifted.\n- IF the suspension period expires, THEN THE system SHALL automatically restore login capability and flag the account for post-suspension review where policy requires.\n- WHERE an appeal is in progress per governance policy, THE system SHALL maintain the current enforcement state until the appeal outcome.\n\n### Device Logout and Session Visibility\n- THE system SHALL provide users a list of active sessions including device label, approximate location (city/country), and last activity timestamp.\n- WHEN a user revokes a specific session, THE system SHALL invalidate the corresponding refresh token and any derived access tokens within 60 seconds.\n- WHEN a user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens as noted earlier.\n\n## Error Handling and Recovery (Auth-specific)\n- IF login fails due to invalid credentials, THEN THE system SHALL present a generic failure message without disclosing whether email exists.\n- IF login fails due to unverified email, THEN THE system SHALL allow immediate resend of verification up to the daily resend limit.\n- IF login is blocked due to account suspension, THEN THE system SHALL present suspension status and policy-based guidance.\n- IF password reset token is invalid or expired, THEN THE system SHALL explain the issue and allow requesting a new token subject to rate limits.\n- IF token refresh fails due to reuse or rotation violation, THEN THE system SHALL revoke the refresh token family and require re-authentication.\n\nAll user-facing errors SHALL include a short, clear message and an optional reference code for support.\n\n## Performance and Rate-Limiting Expectations\n- THE system SHALL complete credential validation and token issuance within 2 seconds at the 95th percentile under normal load.\n- THE system SHALL deliver verification and reset emails within 60 seconds at the 95th percentile under normal load.\n- THE system SHALL support at least 10 token refreshes per user per hour without degradation, subject to normal rate-limits.\n- WHERE global traffic protection is necessary, THE system SHALL enforce per-IP and per-account rate limits for registration, login, verification, and reset actions as per policy thresholds.\n\n## Audit and Security Considerations (Business Perspective)\n- THE system SHALL maintain audit records for: registration, verification, login success/failure, logout, token refresh, token revocation, password change/reset, role/permission change, suspension requests and executions.\n- THE system SHALL ensure audit records include: actor (userId or system), action, timestamp, high-level context (e.g., device label, approximate location), and outcome (success/failure).\n- WHERE privacy laws apply, THE system SHALL align event retention with data lifecycle policy and ensure user data minimization.\n- THE system SHALL enable authorized reviewers (admin; limited moderator scope) to access relevant audit views while honoring least-privilege.\n- IF anomalous authentication patterns are detected, THEN THE system SHALL generate security alerts for review and MAY trigger protective measures (e.g., step-up authentication, temporary locks).\n\n## Mermaid Diagram: Authentication and Token Flow\n```mermaid\ngraph LR\n  subgraph \"User Authentication Flow\"\n    A[\"Start(Login)\"] --> B[\"Validate Input\"]\n    B --> C{\"Credentials Valid?\"}\n    C -->|\"Yes\"| D[\"Check Account State\"]\n    C -->|\"No\"| E[\"Show Generic Failure\"]\n    D --> F{\"MFA Required?\"}\n    F -->|\"Yes\"| G[\"Perform Second Factor\"]\n    F -->|\"No\"| H[\"Issue Tokens\"]\n    G --> I{\"Success?\"}\n    I -->|\"Yes\"| H\n    I -->|\"No\"| E\n  end\n\n  subgraph \"Token Management\"\n    H --> J[\"Access Token(20m)\"]\n    H --> K[\"Refresh Token(14d)\"]\n    K --> L[\"Rotate On Use\"]\n    L --> M{\"Rotation Valid?\"}\n    M -->|\"Yes\"| N[\"Issue New Pair\"]\n    M -->|\"No\"| O[\"Revoke Family & Re-auth\"]\n  end\n\n  subgraph \"Security Responses\"\n    D --> P{\"Suspended?\"}\n    P -->|\"Yes\"| Q[\"Deny Login & Notify\"]\n    P -->|\"No\"| F\n    K -.-> R[\"Revoke All Sessions\"]\n  end\n```\n\n## EARS-Formatted Detailed Requirements\n\n### Ubiquitous Requirements\n- THE authentication service SHALL require email verification before enabling content creation or interaction actions.\n- THE authorization service SHALL enforce role-based permissions as defined in the Permission Matrix.\n- THE token service SHALL issue access tokens with 20-minute lifetime and refresh tokens with 14-day lifetime.\n- THE security service SHALL maintain audit logs for all authentication and authorization events listed in this document.\n\n### Event-driven Requirements\n- WHEN a user registers, THE system SHALL send a verification message containing a single-use token that expires in 30 minutes.\n- WHEN a user logs in successfully, THE system SHALL bind the session to a device identifier and record last activity time.\n- WHEN a user logs out, THE system SHALL invalidate the active session within 60 seconds.\n- WHEN a refresh token is presented, THE system SHALL rotate it and invalidate the prior token.\n- WHEN a role is elevated (e.g., member → expert), THE system SHALL revoke existing refresh tokens and require re-authentication.\n- WHEN a moderator submits a sanction request, THE system SHALL route it for admin decision and log the outcome.\n\n### State-driven Requirements\n- WHILE an account remains unverified, THE system SHALL restrict the account to read-only public access and profile completion.\n- WHILE an account is under active suspension, THE system SHALL block login and token issuance.\n- WHILE an appeal is pending per governance policy, THE system SHALL preserve the current enforcement state.\n\n### Unwanted Behavior Requirements\n- IF a login attempt fails, THEN THE system SHALL present a generic error without confirming account existence.\n- IF failed login attempts exceed 5 within 15 minutes, THEN THE system SHALL lock the account for 15 minutes and log the event.\n- IF a refresh token reuse is detected, THEN THE system SHALL revoke the entire token family and require re-authentication.\n- IF impossible travel or anomalous activity is detected, THEN THE system SHALL require step-up verification before issuing tokens.\n- IF a password reset token is expired or invalid, THEN THE system SHALL deny the reset and allow a new request within policy limits.\n\n### Optional Features Requirements\n- WHERE multi-factor authentication is enabled, THE system SHALL require a second factor during login and sensitive actions.\n- WHERE device session visibility is enabled, THE system SHALL display active sessions and allow revocation by the user.\n- WHERE organization policy mandates httpOnly cookies, THE system SHALL store tokens in secure cookies rather than other storage options.\n\n## Business Rules and Validation Details\n- Email format: must include \"@\" and a domain containing at least one dot; TLD length 2–24; reject blocked domains.\n- Password: minimum length 10; at least 2 character classes unless passphrase ≥ 16; reject common and personal-info-based passwords.\n- Account names/display names: prohibited from impersonating public figures or organizations per governance policy.\n- Verification/resets: tokens are single-use, expire in 30 minutes, and are rate-limited to 3 sends per 24 hours per account.\n- Sensitive changes (email, password): require re-authentication within the past 5 minutes.\n\n## Data Minimization and Privacy (Business-Level)\n- THE system SHALL collect only data necessary for authentication and authorization (email, password hash, role, permissions, verification state, session metadata). Additional attributes (badge, trust level) SHALL be limited to business needs.\n- THE system SHALL allow users to view and manage their sessions and SHALL honor deletion requests per data lifecycle policy.\n\n## Success Criteria and KPIs (Auth Scope)\n- Email verification completion rate ≥ 90% within 24 hours of registration under normal operations.\n- 95th percentile login response time ≤ 2 seconds.\n- Password reset email delivery 95th percentile ≤ 60 seconds.\n- Security alert false-positive rate ≤ 5% after tuning.\n\n## Dependencies and References\n- Community sanctions, appeals, and transparency follow the rules defined in the governance documentation.\n- Privacy, data rights, and legal compliance requirements follow the security and compliance documentation.\n\n## Closing Statement\nThis document states business requirements only for authentication and authorization in the pol-econ-board service. All technical implementation decisions, including architecture, API shapes, database design, cryptography choices, and infrastructure, are the responsibility of the development team."},"plan":"Structure per outline: 1) Title; 2) Authentication Requirements Overview; 3) Account Lifecycle (Registration, Email Verification, Login, Logout, Password Reset/Change); 4) Session & JWT Token Management principles (lifetimes, rotation, refresh family handling, claim contents, device session visibility, key rotation policy); 5) Role Definitions and Permission Descriptions (guest, member, expert, moderator, editor, admin); 6) Permission Matrix (role × action) covering all business operations; 7) Policies: password rules, login attempt limits, account suspension/unlock, device logout, MFA policy; 8) Account States and Transitions (pending, active, suspended, disabled, deleted) with EARS; 9) Error Handling & Recovery (auth-specific); 10) Performance & Rate-Limiting expectations; 11) Audit & Security considerations including privacy and key rotation; 12) Diagrams (Auth/Token flow; Role elevation & sanction flow) with correct Mermaid syntax; 13) Success Criteria & KPIs; 14) Dependencies & references using descriptive link text; 15) Implementation autonomy statement (business requirements only, no technical prescriptions) without meta phrasing.","review":"Enhance to a production-ready, implementation-focused business requirements document. Ensure: 5,000+ characters; all outline sections fully developed; strict EARS usage for applicable requirements; precise, measurable policies; comprehensive authentication workflows; JWT principles with rotation, claims, lifetimes, and key rotation policy at business level; complete role definitions and permission matrix; account states and transitions; MFA policies; rate-limit and abuse controls; auditability and privacy-by-design; Mermaid diagrams with mandatory double quotes and correct arrow syntax; no API/DB/architecture details; no meta-commentary about the document itself; descriptive links to related documents.","content":"# 03-pol-econ-board-user-roles-and-authentication\n\n## Scope and Intent\nDefines business requirements for authentication, authorization, and role-based access control of the service prefix \"pol-econ-board\". Describes WHAT must happen in business terms; technical implementation decisions (architecture, APIs, database design, libraries, infrastructure) remain with the development team.\n\n## Authentication Requirements Overview\n- THE system SHALL support the full account lifecycle: registration, email verification, login, logout, password change, password reset, and session/device management.\n- THE system SHALL enforce role-based authorization for roles: guest (unauthenticated), member, expert, moderator, editor, admin.\n- THE system SHALL use JWT for access control with short-lived access tokens and longer-lived refresh tokens.\n- THE system SHALL record key authentication and authorization events for audit and security monitoring.\n- THE system SHALL operate default business time references in Asia/Seoul (KST) while respecting user-preferred locales for communications.\n\n## Account Lifecycle: Registration, Email Verification, Login, Logout, Password Reset/Change\n\n### Registration\n- WHEN a user attempts to register with email and password, THE system SHALL validate inputs against password policy and email format rules.\n- WHEN registration succeeds, THE system SHALL place the account in \"pending_verification\" state and require email ownership confirmation before enabling content interactions.\n- WHERE invitation-based or role elevation flows are used (e.g., expert candidates), THE system SHALL create the account as member and perform elevation post-verification and review.\n\nInput validation (business rules)\n- THE system SHALL require email in valid format containing a single \"@\", domain with at least one dot, and a TLD of 2–24 letters.\n- THE system SHALL reject disposable or blocked domains per policy-maintained lists.\n- THE system SHALL require password length ≥ 10 and at least 2 of the following classes: uppercase, lowercase, number, symbol; alternatively, passphrases ≥ 16 characters MAY include spaces with no additional class requirements.\n- THE system SHALL reject passwords present in the common-passwords list and those derived from the user’s personal identifiers (email local part, display name) with trivial mutations.\n\n### Email Verification\n- WHEN a registration is submitted, THE system SHALL send a verification message containing a single-use token.\n- THE system SHALL set verification tokens to expire in 30 minutes and be one-time use.\n- WHILE an account is unverified, THE system SHALL permit read-only public access and profile completion while blocking posting, commenting, voting, reporting, following, and reporting.\n- IF a verification token is expired or invalid, THEN THE system SHALL present a clear error and SHALL allow requesting a new token up to 3 times per 24 hours.\n- WHEN an email address is changed on an existing account, THE system SHALL re-verify ownership of the new address and restrict sensitive actions until verification completes.\n\n### Login\n- WHEN a user submits email and password, THE system SHALL validate credentials and respond within 2 seconds at P95 under normal load.\n- IF credentials are valid and the account is in good standing, THEN THE system SHALL create a session and issue access and refresh tokens embedding role and permissions.\n- IF the account is suspended, THEN THE system SHALL deny login and present the suspension reason and remaining duration where policy allows disclosure.\n- WHERE multi-factor authentication (MFA) is enabled by policy or user preference, THE system SHALL require a second factor (e.g., code or approved action) before issuing tokens.\n- WHEN a user opts for \"remember this device\" within policy, THE system SHALL mark the device session as trusted and reduce MFA prompts for 30 days unless risk signals require step-up authentication.\n\n### Logout\n- WHEN a user initiates logout, THE system SHALL invalidate the active access token and detach it from the corresponding refresh token chain for that device within 60 seconds.\n- WHEN the user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens associated with the account within 60 seconds.\n\n### Password Reset and Change\n- WHEN a user requests password reset, THE system SHALL send a one-time reset token that expires in 30 minutes and is invalidated upon use.\n- WHEN a user completes password reset, THE system SHALL invalidate all existing sessions and refresh tokens and require login with the new password.\n- WHEN a user changes password from a logged-in state, THE system SHALL prompt for current password re-authentication and SHALL invalidate all refresh tokens while allowing the current access token to expire on schedule unless policy requires immediate revocation.\n- WHERE password reset attempts exceed policy thresholds, THE system SHALL apply rate limits and communicate the next eligible time.\n\n## Account States and Transitions\nStates: pending_verification, active, suspended_temporary, suspended_permanent, disabled_security, deleted_pending, deleted_final.\n\n- THE system SHALL maintain a canonical account state and update it atomically.\n- WHEN email verification completes successfully, THE system SHALL transition state from pending_verification to active immediately.\n- WHEN a temporary suspension is applied, THE system SHALL set state to suspended_temporary with an end timestamp and block new sessions until expiry or lift.\n- WHEN a permanent suspension is applied, THE system SHALL set state to suspended_permanent and block all sessions indefinitely unless reversed by admin.\n- WHEN a security incident necessitates protection, THE system SHALL set state to disabled_security and require remediation (e.g., password reset, step-up verification) prior to reactivation.\n- WHEN an account deletion request is confirmed after cooling-off, THE system SHALL transition to deleted_final and block authentication permanently.\n- IF a suspension period expires, THEN THE system SHALL switch the account back to active and restore login capability.\n- WHILE an appeal is pending under governance policy, THE system SHALL preserve the current enforcement state until the appeal outcome.\n\n## Session and Token Management (JWT) Principles\n- THE system SHALL issue JWT access tokens with a lifetime of 20 minutes and refresh tokens with a lifetime of 14 days.\n- THE system SHALL rotate refresh tokens on every use and SHALL invalidate the previous token immediately after rotation.\n- THE system SHALL detect refresh token reuse and SHALL revoke the entire refresh token family upon detection, requiring re-authentication.\n- THE system SHALL embed in JWT payload at minimum: userId, role, a permissions array, issued-at time, expiration time; optional claims MAY include trust level, verified status, and badges when relevant to business logic.\n- WHERE audience, issuer, and token purpose distinctions are required for business control, THE system SHALL include business-identifying claims sufficient for environment isolation and contract-level enforcement.\n- IF a user’s role or permissions change, THEN THE system SHALL invalidate all active refresh tokens within 60 seconds and require token re-issuance under the new role.\n- WHERE device-level session tracking is enabled, THE system SHALL allow users to view active device sessions (device label, approximate location, last activity) and revoke individual sessions.\n- IF suspicious activity is detected on a session (impossible travel, abnormal IP/device velocity per policy), THEN THE system SHALL flag the session and require step-up verification prior to continued access.\n- WHERE client storage policy applies, THE system SHALL support secure storage of tokens with preference for httpOnly cookies; localStorage MAY be used where acceptable by policy. Developers retain discretion on exact mechanism.\n- THE system SHALL maintain a business-level key rotation policy for the JWT signing keys, including dual-publish windows, scheduled rotations at least every 180 days, and emergency rotation capability within 24 hours of incident declaration.\n- WHERE session concurrency policy applies, THE system SHALL limit simultaneous active device sessions per user to 10 by default (admin-configurable) and SHALL deny creation of additional sessions beyond the limit with guidance to revoke existing sessions.\n\n## Multi-Factor Authentication (MFA) Policy (Business Level)\n- WHERE MFA is mandated by policy or user opt-in, THE system SHALL support at least one possession factor and SHALL allow recovery paths that balance security and usability.\n- WHEN a sensitive action occurs (password change, email change, role elevation, global sign-out), THE system SHALL require step-up verification if MFA is enabled or risk signals are present.\n- IF repeated high-risk signals are detected within 24 hours (e.g., 3+ impossible-travel detections), THEN THE system SHALL enforce MFA on next login even for trusted devices.\n\n## Role Definitions and Permission Descriptions\nJWT payloads MUST include role and a permissions array reflecting granted actions. Permissions are expressed in business terms and enforced per matrix below.\n\n### Guest (Unauthenticated)\n- Read-only access to public content and search public posts.\n- Cannot create content, vote, react, report, or follow.\n\n### Member\n- Registered participant (real name or alias). May create/edit/delete own posts and comments, report content, bookmark, follow topics/users, vote/react, and manage notifications. Subject to governance enforcement.\n- Typical permissions: [\"post:create\", \"post:edit:own\", \"post:delete:own\", \"comment:create\", \"comment:edit:own\", \"comment:delete:own\", \"report:create\", \"bookmark:create\", \"follow:create\", \"vote:create\", \"notify:manage\", \"profile:edit\"]\n\n### Expert\n- Verified political/economic domain expert. Inherits member permissions; may display expert badge, propose expert-only topics, publish deep-dive research/insight posts, and participate in expert Q&A.\n- Additional permissions: [\"topic:propose:expert\", \"post:create:insight\", \"qa:expert:participate\", \"badge:expert\"]\n\n### Moderator\n- Community operations. Access report queue, temporarily hide/delete content, request user sanctions (warning/suspension), mediate disputes, manage transparency logs.\n- Additional permissions: [\"report:queue:read\", \"content:hide\", \"content:delete\", \"sanction:request\", \"dispute:mediate\", \"transparency:manage\"]\n\n### Editor\n- Content quality and curation. Edit tags/topics, manage announcements/pinned posts, operate featured selections. Collaborates with moderators on violations.\n- Additional permissions: [\"topic:edit\", \"curation:feature\", \"announcement:manage\", \"pin:manage\"]\n\n### Admin\n- Organization-wide operations. Full access to all resources, role management, policy/settings changes, legal request workflow, service health/metrics oversight, audit review.\n- Additional permissions: [\"role:manage\", \"policy:manage\", \"sanction:execute\", \"audit:read\", \"system:metrics:read\", \"legal:request:manage\", \"session:revoke:any\"]\n\n## Permission Matrix (Role × Action)\n\n| Action (Business term) | Guest | Member | Expert | Moderator | Editor | Admin |\n|---|---|---|---|---|---|---|\n| View public content | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Search public posts | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create standard post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create deep-dive insight post | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit own post (within policy window) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Edit own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Vote/React on content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Report content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Bookmark content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Follow topic/user | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Propose expert-only topic | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit topics/tags | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Curate featured collections | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Manage announcements/pinned posts | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Access report queue | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Temporarily hide content | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Delete content (moderation remove) | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Issue user warning (execute) | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Request user suspension | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Execute user suspension | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Manage transparency logs | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Manage roles | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Change policies/settings | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Access audit logs | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View service health metrics | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Initiate legal request workflow | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View own sessions | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke own sessions (single/all) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke other users’ sessions | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nNotes:\n- Moderators request account-level sanctions; admins execute irreversible sanctions.\n- Experts add publishing and proposal capabilities beyond members; no moderation powers.\n\n## Policies: Password Rules, Login Attempt Limits, Account Suspension/Unlock, Device Logout, MFA\n\n### Password Rules\n- THE system SHALL enforce minimum password length of 10 and the defined complexity rules.\n- THE system SHALL permit passphrases ≥ 16 characters without additional complexity requirements.\n- IF a password is found in a banned list or derived from personal identifiers, THEN THE system SHALL reject it with guidance to choose a stronger password.\n- WHEN a password is changed or reset, THE system SHALL require re-authentication for sensitive actions for the next 5 minutes.\n\n### Login Attempt Limits and Abuse Prevention\n- THE system SHALL allow up to 5 failed login attempts per account per rolling 15 minutes before temporary lockout.\n- IF the threshold is exceeded, THEN THE system SHALL lock the account for 15 minutes and SHALL send an advisory notice to the account email.\n- WHERE suspicious velocity or credential stuffing is detected, THE system SHALL apply adaptive throttling and MAY require additional verification.\n- THE system SHALL reset failure counters upon successful login.\n\n### Account Suspension and Unlock\n- WHEN a moderator submits a suspension request with reason codes and proposed duration, THE system SHALL route it for admin execution and log the decision.\n- WHEN an admin executes a suspension, THE system SHALL immediately revoke all sessions and block new sessions until the suspension ends or is lifted.\n- IF the suspension period expires, THEN THE system SHALL automatically restore login capability and flag the account for post-suspension review where policy requires.\n- WHERE an appeal is in progress per governance policy, THE system SHALL maintain the current enforcement state until the appeal outcome.\n\n### Device Logout and Session Visibility\n- THE system SHALL provide users a list of active sessions including device label, approximate location (city/country), and last activity timestamp.\n- WHEN a user revokes a specific session, THE system SHALL invalidate the corresponding refresh token and any derived access tokens within 60 seconds.\n- WHEN a user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens within 60 seconds and confirm completion.\n\n### MFA Application Rules\n- THE system SHALL provide MFA enrollment and backup/recovery options (e.g., backup codes) with rate-limited retrieval.\n- WHEN MFA is enabled, THE system SHALL require step-up verification for high-risk actions (password/email change, role elevation, global sign-out, viewing audit logs where role permits).\n\n## Error Handling and Recovery (Auth-Specific)\n- IF login fails due to invalid credentials, THEN THE system SHALL present a generic failure message without disclosing whether the email exists.\n- IF login fails due to unverified email, THEN THE system SHALL allow immediate resend of verification up to the daily resend limit.\n- IF login is blocked due to account suspension, THEN THE system SHALL present suspension status and policy-based guidance.\n- IF a password reset token is invalid or expired, THEN THE system SHALL explain the issue and allow requesting a new token subject to rate limits.\n- IF token refresh fails due to reuse or rotation violation, THEN THE system SHALL revoke the refresh token family and require re-authentication.\n- WHEN system-side anomalies affect authentication, THE system SHALL provide status messaging and reference codes for support without exposing internals.\n\n## Performance and Rate-Limiting Expectations\n- THE system SHALL complete credential validation and token issuance within 2 seconds at P95 under normal load.\n- THE system SHALL deliver verification and reset emails within 60 seconds at P95 under normal load.\n- THE system SHALL support at least 10 token refreshes per user per hour without degradation, subject to normal rate-limits.\n- WHERE global traffic protection is necessary, THE system SHALL enforce per-IP and per-account rate limits for registration, login, verification, and reset actions per policy thresholds.\n\n## Audit and Security Considerations (Business Perspective)\n- THE system SHALL maintain audit records for registration, verification, login success/failure, logout, token refresh, token revocation, password change/reset, role/permission change, suspension requests and executions, MFA enrollment/usage, and device trust changes.\n- THE system SHALL ensure audit records include: actor (userId or system), action, timestamp, business context (e.g., device label, approximate location), and outcome (success/failure).\n- THE system SHALL align event retention with the data lifecycle policy and ensure data minimization and pseudonymization where feasible.\n- THE system SHALL enable authorized reviewers (admin; limited moderator scope) to access relevant audit views while honoring least privilege.\n- IF anomalous authentication patterns are detected, THEN THE system SHALL generate security alerts for review and MAY trigger protective measures (step-up authentication, temporary locks).\n- THE system SHALL support JWT signing key rotation according to policy with auditable activation timestamps and approver roles.\n\n## Mermaid Diagram: Authentication and Token Flow\n```mermaid\ngraph LR\n  subgraph \"User Authentication Flow\"\n    A[\"Start(Login)\"] --> B[\"Validate Input\"]\n    B --> C{\"Credentials Valid?\"}\n    C -->|\"Yes\"| D[\"Check Account State\"]\n    C -->|\"No\"| E[\"Show Generic Failure\"]\n    D --> F{\"MFA Required?\"}\n    F -->|\"Yes\"| G[\"Perform Second Factor\"]\n    F -->|\"No\"| H[\"Issue Tokens\"]\n    G --> I{\"Success?\"}\n    I -->|\"Yes\"| H\n    I -->|\"No\"| E\n  end\n\n  subgraph \"Token Management\"\n    H --> J[\"Access Token(20m)\"]\n    H --> K[\"Refresh Token(14d)\"]\n    K --> L[\"Rotate On Use\"]\n    L --> M{\"Rotation Valid?\"}\n    M -->|\"Yes\"| N[\"Issue New Pair\"]\n    M -->|\"No\"| O[\"Revoke Family & Re-auth\"]\n  end\n\n  subgraph \"Security Responses\"\n    D --> P{\"Suspended?\"}\n    P -->|\"Yes\"| Q[\"Deny Login & Notify\"]\n    P -->|\"No\"| F\n    K -.-> R[\"Revoke All Sessions\"]\n  end\n```\n\n## Mermaid Diagram: Role Elevation and Sanction Workflow (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Role Elevation\"\n    A1[\"Member Submits Expert Verification\"] --> A2[\"Collect Evidence & Validate\"]\n    A2 --> A3{\"Meets Criteria?\"}\n    A3 -->|\"Yes\"| A4[\"Admin Assigns Expert Role\"]\n    A3 -->|\"No\"| A5[\"Reject with Rationale\"]\n    A4 --> A6[\"Revoke Refresh Tokens\"]\n    A6 --> A7[\"Require Re-Authentication\"]\n  end\n\n  subgraph \"Sanction Flow\"\n    B1[\"Moderator Submits Sanction Request\"] --> B2[\"Admin Reviews\"]\n    B2 --> B3{\"Approve?\"}\n    B3 -->|\"Yes\"| B4[\"Execute Suspension\"]\n    B3 -->|\"No\"| B5[\"Return with Guidance\"]\n    B4 --> B6[\"Revoke All Sessions\"]\n    B4 --> B7[\"Notify User & Log\"]\n  end\n```\n\n## EARS-Formatted Detailed Requirements\n\n### Ubiquitous Requirements\n- THE authentication service SHALL require email verification before enabling content creation or interaction actions.\n- THE authorization service SHALL enforce role-based permissions as defined in the Permission Matrix.\n- THE token service SHALL issue access tokens with 20-minute lifetime and refresh tokens with 14-day lifetime.\n- THE security service SHALL maintain audit logs for all authentication and authorization events listed in this file.\n- THE risk service SHALL evaluate session signals and require step-up verification under suspicious conditions.\n\n### Event-Driven Requirements\n- WHEN a user registers, THE system SHALL send a verification message containing a single-use token that expires in 30 minutes.\n- WHEN a user logs in successfully, THE system SHALL bind the session to a device identifier and record last activity time.\n- WHEN a user logs out, THE system SHALL invalidate the active session within 60 seconds.\n- WHEN a refresh token is presented, THE system SHALL rotate it and invalidate the prior token.\n- WHEN a role is elevated (e.g., member → expert), THE system SHALL revoke existing refresh tokens and require re-authentication.\n- WHEN a moderator submits a sanction request, THE system SHALL route it for admin decision and log the outcome.\n- WHEN a user changes email address, THE system SHALL require verification of the new address before enabling sensitive actions.\n- WHEN a user enables MFA, THE system SHALL prompt for a second factor during login and sensitive actions.\n\n### State-Driven Requirements\n- WHILE an account remains unverified, THE system SHALL restrict the account to read-only public access and profile completion.\n- WHILE an account is under active suspension, THE system SHALL block login and token issuance.\n- WHILE an appeal is pending per governance policy, THE system SHALL preserve the current enforcement state.\n- WHILE a device session is marked trusted, THE system SHALL suppress MFA prompts unless risk signals are present.\n\n### Unwanted Behavior Requirements\n- IF a login attempt fails, THEN THE system SHALL present a generic error without confirming account existence.\n- IF failed login attempts exceed 5 within 15 minutes, THEN THE system SHALL lock the account for 15 minutes and log the event.\n- IF a refresh token reuse is detected, THEN THE system SHALL revoke the entire token family and require re-authentication.\n- IF impossible travel or anomalous activity is detected, THEN THE system SHALL require step-up verification before issuing tokens.\n- IF a password reset token is expired or invalid, THEN THE system SHALL deny the reset and allow a new request within policy limits.\n- IF session concurrency exceeds the allowed limit, THEN THE system SHALL deny additional session creation and advise revocation of older sessions.\n\n### Optional Features Requirements\n- WHERE multi-factor authentication is enabled, THE system SHALL require a second factor during login and sensitive actions.\n- WHERE device session visibility is enabled, THE system SHALL display active sessions and allow revocation by the user.\n- WHERE organization policy mandates httpOnly cookies, THE system SHALL store tokens in secure cookies rather than other storage options.\n- WHERE trusted device preference is enabled, THE system SHALL reduce MFA prompts for trusted sessions for up to 30 days.\n\n## Business Rules and Validation Details\n- Email format: must include \"@\" and a domain containing at least one dot; TLD length 2–24; reject blocked domains.\n- Password: minimum length 10; at least 2 character classes unless passphrase ≥ 16; reject common and personal-info-based passwords.\n- Display names: prohibited from impersonating public figures or organizations per governance policy.\n- Verification/resets: tokens are single-use, expire in 30 minutes, and are rate-limited to 3 sends per 24 hours per account.\n- Sensitive changes (email, password): require re-authentication within the past 5 minutes.\n\n## Success Criteria and KPIs (Auth Scope)\n- Email verification completion rate ≥ 90% within 24 hours of registration under normal operations.\n- Login response time ≤ 2 seconds at P95 under normal load.\n- Password reset email delivery ≤ 60 seconds at P95.\n- Security alert false-positive rate ≤ 5% after tuning.\n- Token reuse detection time ≤ 5 seconds from event to enforcement.\n\n## Dependencies and References\n- Community sanctions, appeals, and transparency align with the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- Privacy, data rights, and legal compliance align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Functional behaviors that invoke auth decisions align with the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n\n## Implementation Autonomy Statement\nBusiness requirements only. All technical implementation decisions, including architecture, API design, database structure, cryptography choices, and infrastructure, are owned by the development team; the content defines WHAT must occur, not HOW to implement it.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:47.137Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"주요 업무 절차를 시각적으로 정리하여 팀 간 커뮤니케이션과 구현 일관성을 높이기 위함.","filename":"06-pol-econ-board-user-flows.md","documentType":"user-flow","outline":["사용자 여정 개요","계정 생성·인증 플로우","게시글 작성·수정·발행 플로우","신고 접수→중재→이의제기 플로우","알림 설정·수신 플로우","Mermaid 다이어그램(좌→우 흐름, 서브그래프 활용)","예외 분기 및 롤백 흐름"],"audience":"development team","keyQuestions":["각 플로우의 단계와 분기 조건은 무엇인가","역할별로 다른 경로와 승인 포인트는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["Mermaid 문법 규칙 엄수(이중따옴표, 화살표 규칙)","API/DB/아키텍처 세부 금지"],"content":"# pol-econ-board User Flows\n\nThis document specifies business-level user flows for the pol-econ-board service to ensure consistent implementation across teams. It describes WHAT the system should do from a business perspective; it does not dictate HOW to implement it. All technical implementation decisions (architecture, APIs, database design, etc.) are at the discretion of the development team.\n\n## Scope and Principles\n- Scope: Business workflows covering account creation and authentication, content authoring and publishing, reporting and moderation with appeal, and notifications configuration and delivery. Includes exception branches and rollback behaviors.\n- Roles in scope: member, expert, moderator, editor, admin.\n- Non-scope: Frontend UI/UX layouts, API endpoints, database schemas, infrastructure design.\n- Consistency: Flows use EARS requirements and Mermaid diagrams with left-to-right orientation and subgraphs for clarity.\n\n## User Journey Overview\nThe service facilitates political/economic discourse with trust and accountability. Users discover content, create posts, engage via comments and reactions, and participate in community governance through reporting. Expert users contribute deep analyses. Moderators and editors assure compliance and quality. Admins manage global policies.\n\nKey journey highlights:\n- Onboarding: Registration, email verification, sign-in, session maintenance, and secure sign-out across devices.\n- Creation: Draft → edit → version tracking → publish, with possible visibility constraints depending on policies and role capabilities.\n- Governance: Report → triage → action (hide/delete/sanction) → transparency log → appeal → review → resolution.\n- Notifications: Real-time and batch/digest messages respecting user preferences and rate limits.\n\n### High-Level Journey Diagram\n```mermaid\ngraph LR\n  A[\"Discover Content\"] --> B[\"Register/Sign In\"]\n  B --> C[\"Create Draft/Post\"]\n  C --> D{ \"Publish?\" }\n  D -->|\"Yes\"| E[\"Visible Per Policy\"]\n  D -->|\"No\"| F[\"Save as Draft\"]\n  E --> G[\"Engage(Comments/Reactions)\"]\n  G --> H{ \"Policy Violation Report?\" }\n  H -->|\"No\"| I[\"Continue Engagement\"]\n  H -->|\"Yes\"| J[\"Moderation Workflow\"]\n  J --> K{ \"Action Required?\" }\n  K -->|\"Yes\"| L[\"Apply Action(Sanction/Hide/Delete)\"]\n  K -->|\"No\"| M[\"Close with No Action\"]\n  E --> N[\"Notifications\"]\n```\n\n## Account Creation and Authentication Flow\nCovers registration, email verification, sign-in, session maintenance, sign-out, password reset, and cross-device revocation. Token usage follows the JWT-based principles defined in the authentication requirements document.\n\n### Narrative Flow\n- Registration: User submits registration data, the system validates inputs, creates an account in pending-verification state, sends verification instructions, and activates the account upon successful verification.\n- Sign-in: User submits credentials; the system validates and establishes a session with short-lived access and long-lived refresh tokens. Failed attempts increase a counter with temporary lockout as needed.\n- Password reset: User initiates reset, receives a one-time process to set a new password, and upon success, all existing sessions may be invalidated per policy.\n- Sign-out and device revocation: User can sign out on the current device and revoke all sessions on all devices.\n\n### Role Notes\n- All roles use the same authentication flow. Role assignment influences subsequent authorization, not sign-in mechanics.\n\n### EARS Requirements (Authentication)\n- THE authentication service SHALL accept registration with email and password and create an account in a pending-verification state.\n- WHEN a user completes email verification within the valid window, THE authentication service SHALL activate the account for sign-in.\n- IF email verification is attempted after expiration, THEN THE authentication service SHALL deny activation and allow requesting a new verification process.\n- WHEN a user submits valid credentials, THE authentication service SHALL establish a session and issue tokens with defined expirations.\n- IF a login attempt uses invalid credentials, THEN THE authentication service SHALL reject the login, increment a failure counter, and present a non-revealing error message.\n- WHERE the failure counter exceeds the lockout threshold within a window, THE authentication service SHALL apply a temporary login delay and provide guidance for password reset.\n- WHEN a user requests password reset, THE authentication service SHALL issue a one-time reset process bound to time and single-use constraints.\n- WHEN a password reset is completed, THE authentication service SHALL invalidate prior sessions according to security policy.\n- WHEN a user signs out, THE authentication service SHALL terminate the current session immediately.\n- WHEN a user requests device-wide sign-out, THE authentication service SHALL revoke all active sessions associated with the account.\n- WHILE a session is active, THE authentication service SHALL refresh access according to token refresh policy and deny refresh after refresh expiration.\n- THE authentication service SHALL respond to sign-in attempts within 2 seconds under normal load.\n\n### Account Creation & Authentication Diagram\n```mermaid\ngraph LR\n  subgraph \"Registration\"\n    A[\"Start Registration\"] --> B[\"Validate Inputs\"]\n    B --> C{ \"Valid?\" }\n    C -->|\"Yes\"| D[\"Create Pending Account\"]\n    C -->|\"No\"| E[\"Reject and Explain\"]\n    D --> F[\"Send Verification\"]\n  end\n\n  subgraph \"Verification\"\n    F --> G[\"User Follows Link\"]\n    G --> H{ \"Within Valid Window?\" }\n    H -->|\"Yes\"| I[\"Activate Account\"]\n    H -->|\"No\"| J[\"Offer New Verification\"]\n  end\n\n  subgraph \"Sign-In & Session\"\n    K[\"Submit Credentials\"] --> L[\"Validate Credentials\"]\n    L --> M{ \"Valid?\" }\n    M -->|\"Yes\"| N[\"Issue Tokens\"]\n    M -->|\"No\"| O[\"Reject and Increment Counter\"]\n    N --> P[\"Access Protected Resources\"]\n    P --> Q{ \"Refresh Needed?\" }\n    Q -->|\"Yes\"| R[\"Refresh Within Policy\"]\n    Q -->|\"No\"| S[\"Continue\"]\n  end\n\n  subgraph \"Sign-Out & Revocation\"\n    T[\"User Sign-Out\"] --> U[\"Terminate Current Session\"]\n    V[\"Revoke All Devices\"] --> W[\"Invalidate All Sessions\"]\n  end\n```\n\n## Post Create, Edit, Publish Flow\nCovers drafting, editing, versioning, and publishing content with role-based nuances and policy checks.\n\n### Narrative Flow\n- Drafting: Any authenticated member or expert creates drafts with autosave. Editor and admin roles do not author on behalf of others unless business policy explicitly allows; they manage curation and featured placement through separate processes.\n- Editing: Authors can edit drafts without restriction; once published, edits create new versions with change logs. Members can update their own content; experts can publish \"insight\" or \"research\" posts with the same versioning rules.\n- Pre-publish checks: System runs policy validations (e.g., banned topics during sensitive periods, required sources for claims). Optional flags may route posts for moderator review depending on signals or configured rules.\n- Publishing: If checks pass and no mandatory review is required, the post becomes visible according to visibility policy (public or restricted). If review is required, visibility remains limited until approval.\n\n### Role Notes\n- member: Can draft, edit, publish their own content; subject to automated checks and potential moderation review.\n- expert: Same as member plus can mark posts as expert content; subject to the same policy checks. Their posts may be prioritized for curation but do not bypass policy enforcement.\n- editor: Can feature and pin posts, manage topics/labels; cannot override moderation policy alone.\n- moderator: Can hold, hide, or request actions on posts per governance policy.\n- admin: Can override for legal/policy compliance and manage system-level settings.\n\n### EARS Requirements (Authoring & Publishing)\n- WHEN an authenticated user creates a draft, THE content service SHALL save the draft and maintain an immutable version history upon each significant save.\n- WHILE a post remains in draft, THE content service SHALL restrict visibility to the author and authorized reviewers where applicable.\n- WHEN an author attempts to publish, THE content service SHALL execute policy checks including restricted periods, mandatory citations, and prohibited content categories.\n- IF any mandatory check fails, THEN THE content service SHALL block publishing, present failure reasons, and preserve the draft state.\n- WHERE a post is flagged by automated heuristics or configured rules, THE content service SHALL route the post to a moderation queue and defer public visibility until decision.\n- WHEN a post passes all checks without mandatory review, THE content service SHALL publish the post and set visibility per policy immediately.\n- WHEN an author edits a published post, THE content service SHALL create a new version, preserve prior versions, and update the live version upon successful checks.\n- IF an author attempts to edit content under active investigation, THEN THE content service SHALL restrict edits to draft-copy only and prevent live changes until the investigation concludes.\n- THE content service SHALL record publication timestamps and version identifiers for transparency.\n- THE content service SHALL complete pre-publish validation within 3 seconds for standard-length posts under normal load.\n\n### Authoring & Publishing Diagram\n```mermaid\ngraph LR\n  subgraph \"Drafting\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Edit Content\"]\n  end\n\n  subgraph \"Pre-Publish Checks\"\n    C --> D[\"Run Policy Checks\"]\n    D --> E{ \"Checks Pass?\" }\n    E -->|\"No\"| F[\"Block Publish and Explain\"]\n    E -->|\"Yes\"| G{ \"Flagged for Review?\" }\n    G -->|\"Yes\"| H[\"Route to Moderation Queue\"]\n    G -->|\"No\"| I[\"Publish Immediately\"]\n  end\n\n  subgraph \"Post-Publish\"\n    I --> J[\"Visible per Policy\"]\n    H --> K{ \"Moderator Decision\" }\n    K -->|\"Approve\"| L[\"Publish\"]\n    K -->|\"Reject\"| M[\"Return to Draft with Reasons\"]\n    K -->|\"Request Changes\"| N[\"Author Revises Draft\"]\n    N -.-> D\n  end\n\n  subgraph \"Editing Published Content\"\n    O[\"Edit Published Post\"] --> P[\"Create New Version\"]\n    P --> D\n  end\n```\n\n## Report Intake → Moderation → Appeal Flow\nDefines how users report content, how moderators triage and act, and how authors can appeal decisions. Time expectations are stated from a business perspective.\n\n### Narrative Flow\n- Reporting: Any authenticated user can report content under specified categories (e.g., misinformation, hate, spam). The system validates report completeness and enters it into the moderation queue.\n- Triage: Moderators review reports by severity and context, consult guidelines, and record transparent decisions, including temporary hiding where warranted.\n- Actions: Possible outcomes include no action, warning, temporary suspension, content edit request, hide, or delete. Sanctioning follows the governance policy and transparency logging.\n- Appeal: Affected users can file appeals within a defined window. Appeals are reviewed by a different moderator or a designated reviewer. Decisions are logged and communicated.\n\n### Role Notes\n- member/expert: Can submit reports; can appeal actions affecting their content or account.\n- moderator: Can triage reports, apply content actions, propose or apply sanctions within their remit.\n- editor: Collaborates for quality guidance but does not unilaterally override moderation outcomes.\n- admin: Handles escalations, legal requests, and final adjudication when policy demands.\n\n### EARS Requirements (Moderation)\n- WHEN a user submits a report with a valid category and target, THE governance service SHALL create a case and place it in the moderation queue.\n- IF the report lacks required details, THEN THE governance service SHALL reject the submission and instruct the reporter to provide missing fields.\n- WHERE content presents imminent harm indicators, THE governance service SHALL apply temporary hiding pending expedited review.\n- WHEN a moderator reviews a case, THE governance service SHALL require a decision record including category, rationale, and action.\n- WHEN a case is resolved with action, THE governance service SHALL notify the reporter and affected parties with outcome and rationale.\n- WHERE a sanction affects account capabilities, THE governance service SHALL enforce restrictions immediately upon decision.\n- WHEN an appeal is received within the allowed window, THE governance service SHALL assign it to an eligible reviewer distinct from the original decision maker.\n- IF an appeal is upheld, THEN THE governance service SHALL restore the content or reverse sanctions and update the transparency record.\n- IF an appeal is denied, THEN THE governance service SHALL maintain the action and record the rationale.\n- THE governance service SHALL target initial triage within 24 hours for standard cases and within 2 hours for imminent harm indicators.\n\n### Moderation & Appeal Diagram\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    A[\"Submit Report\"] --> B[\"Validate Fields\"]\n    B --> C{ \"Complete?\" }\n    C -->|\"No\"| D[\"Reject and Guide\"]\n    C -->|\"Yes\"| E[\"Create Case\"]\n  end\n\n  subgraph \"Triage & Review\"\n    E --> F{ \"Imminent Harm?\" }\n    F -->|\"Yes\"| G[\"Temporarily Hide Content\"]\n    F -->|\"No\"| H[\"Queue by Priority\"]\n    G --> I[\"Expedited Review\"]\n    H --> I\n    I --> J{ \"Decision\" }\n  end\n\n  subgraph \"Actions\"\n    J -->|\"No Action\"| K[\"Close Case\"]\n    J -->|\"Warn/Suspend\"| L[\"Apply Sanction\"]\n    J -->|\"Hide/Delete\"| M[\"Apply Content Action\"]\n    J -->|\"Edit Request\"| N[\"Request Changes from Author\"]\n  end\n\n  subgraph \"Appeal\"\n    O[\"File Appeal\"] --> P[\"Assign Different Reviewer\"]\n    P --> Q{ \"Appeal Outcome\" }\n    Q -->|\"Upheld\"| R[\"Reverse Action and Restore\"]\n    Q -->|\"Denied\"| S[\"Maintain Action\"]\n  end\n\n  K --> T[\"Notify Parties\"]\n  L --> T\n  M --> T\n  N --> T\n  R --> T\n  S --> T\n```\n\n## Notification Settings and Receipt Flow\nDefines how users configure preferences and how notifications are delivered in real time or digest, respecting rate limits and user control.\n\n### Narrative Flow\n- Preference management: Users opt in/out per channel (in-app, email) and per category (mentions, replies, follows, moderation updates, policy events). Users may select digest frequency for summaries.\n- Triggering: Events such as mentions, comments, follows, publication outcomes, and moderation decisions trigger notifications. The system evaluates user preferences, quiet hours if defined, and rate limits before sending.\n- Delivery: Real-time where required; batched aggregation for digest per chosen interval. Failures are retried according to policy. Users can view notification history.\n\n### Role Notes\n- All roles receive notifications relevant to their actions and responsibilities. Moderators additionally receive queue assignments; admins receive policy/legal event notifications.\n\n### EARS Requirements (Notifications)\n- WHEN a trigger event occurs, THE notification service SHALL evaluate the recipient's preferences and channel availability before queuing delivery.\n- WHERE a user has enabled digest for a category, THE notification service SHALL aggregate events and deliver at the configured interval.\n- IF a user has opted out for a channel or category, THEN THE notification service SHALL suppress delivery for that scope.\n- WHEN a delivery attempt fails transiently, THE notification service SHALL retry according to backoff policy and record failure if exhausted.\n- WHEN a notification pertains to moderation outcomes, THE notification service SHALL include outcome, rationale summary, and available next steps.\n- THE notification service SHALL respect configured rate limits and quiet hours for non-critical categories.\n- WHERE an event is critical (security or policy), THE notification service SHALL bypass quiet hours for the minimum necessary alerting.\n\n### Notification Flow Diagram\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    A[\"Open Preferences\"] --> B[\"Set Channels\"]\n    B --> C[\"Set Categories\"]\n    C --> D[\"Set Digest Frequency\"]\n  end\n\n  subgraph \"Trigger & Evaluation\"\n    E[\"Event Triggered\"] --> F[\"Load Recipient Preferences\"]\n    F --> G{ \"Opted Out?\" }\n    G -->|\"Yes\"| H[\"Suppress\"]\n    G -->|\"No\"| I{ \"Digest Category?\" }\n    I -->|\"Yes\"| J[\"Aggregate for Digest\"]\n    I -->|\"No\"| K[\"Queue for Real-Time Delivery\"]\n  end\n\n  subgraph \"Delivery\"\n    K --> L[\"Attempt Delivery\"]\n    L --> M{ \"Success?\" }\n    M -->|\"Yes\"| N[\"Record Sent\"]\n    M -->|\"No\"| O[\"Retry per Policy\"]\n    O --> P{ \"Exhausted?\" }\n    P -->|\"Yes\"| Q[\"Record Failure\"]\n    P -->|\"No\"| L\n    J --> R[\"Send Digest at Interval\"]\n  end\n```\n\n## Exception Branches and Rollback Flows\nThis section unifies common exception handling paths across flows from a business perspective.\n\n### EARS Requirements (Exceptions & Rollbacks)\n- IF registration input validation fails, THEN THE authentication service SHALL not create an account and SHALL provide actionable guidance without revealing sensitive validation logic.\n- IF email verification is attempted with an invalid or expired token, THEN THE authentication service SHALL deny activation and SHALL offer a new verification process.\n- IF token refresh is attempted after refresh expiration, THEN THE authentication service SHALL require re-authentication and SHALL deny access until successful sign-in.\n- IF an author loses connectivity during draft save, THEN THE content service SHALL retain the last confirmed version and SHALL surface a reconciliation prompt on next restore.\n- IF pre-publish checks detect policy violations, THEN THE content service SHALL preserve the draft, SHALL enumerate violations, and SHALL block publication until resolved.\n- IF a moderation action is applied in error and later reversed, THEN THE governance service SHALL restore content visibility and SHALL update all related notifications and transparency records.\n- IF notification delivery repeatedly fails for a channel, THEN THE notification service SHALL mark the channel as temporarily unavailable for the recipient and SHALL suggest remediation steps via an alternative channel if available.\n- WHEN a user requests account-wide sign-out, THE authentication service SHALL revoke all devices within 1 minute and SHALL require fresh authentication for any new access.\n\n### Cross-Flow Rollback Diagram\n```mermaid\ngraph LR\n  A[\"Draft Save Attempt\"] --> B{ \"Network OK?\" }\n  B -->|\"Yes\"| C[\"Save Draft Version\"]\n  B -->|\"No\"| D[\"Keep Last Confirmed Version\"]\n  D --> E[\"Prompt Reconcile on Return\"]\n\n  F[\"Publish Attempt\"] --> G{ \"Policy Checks Pass?\" }\n  G -->|\"Yes\"| H[\"Publish Live\"]\n  G -->|\"No\"| I[\"Block and Keep Draft\"]\n\n  J[\"Token Refresh\"] --> K{ \"Refresh Valid?\" }\n  K -->|\"Yes\"| L[\"Issue New Access\"]\n  K -->|\"No\"| M[\"Require Re-Auth\"]\n\n  N[\"Moderation Reversal\"] --> O[\"Restore Content\"]\n  O --> P[\"Update Notifications\"]\n  O --> Q[\"Update Transparency Record\"]\n```\n\n## Related Documents\n- For roles, tokens, and authentication policies, see the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- For end-to-end business functionality, refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n- For community rules, report categories, sanctions, and appeals, consult the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md).\n\n"},"plan":"Document plan and structure aligned to metadata:\n1) Title: pol-econ-board User Flows\n2) Scope and Principles (state WHAT is covered; business-only stance; KST reference; LR Mermaid usage)\n3) User Journey Overview with a high-level journey diagram (LR)\n4) Account Creation and Authentication Flow\n   - Narrative description\n   - Role notes\n   - EARS requirements (registration, verification, login, session, logout, reset)\n   - Mermaid diagram (LR, subgraphs)\n5) Post Create, Edit, Publish Flow\n   - Narrative description\n   - Role notes\n   - EARS requirements (drafting, checks, publishing, versioning)\n   - Mermaid diagram (LR, subgraphs)\n6) Report Intake → Moderation → Appeal Flow\n   - Narrative description\n   - Role notes\n   - EARS requirements (report intake, triage, action, appeal, SLA)\n   - Mermaid diagram (LR, subgraphs)\n7) Notification Settings and Receipt Flow\n   - Narrative description\n   - Role notes\n   - EARS requirements (preferences, triggers, delivery, retries)\n   - Mermaid diagram (LR, subgraphs)\n8) Role-Based Approval and Gating Points (concise matrix and EARS)\n   - Optional Mermaid to illustrate role gates\n9) Exception Branches and Rollback Flows\n   - Cross-flow EARS requirements\n   - Mermaid diagram (LR)\n10) Related Documents (descriptive links)\n","review":"Enhancement criteria to apply strictly:\n- Length and completeness: minimum 5,000+ characters; expand flows, add role-based approval points, include comprehensive EARS requirements.\n- EARS compliance: convert any vague statements to EARS with clear triggers, actors, states, outcomes, and measurable time windows.\n- Mermaid validation: ALL labels in double quotes; NO spaces between brackets/braces and quotes; correct arrow syntax using -->, -.->, ==>; LR orientation; subgraphs labeled with double quotes; avoid nested quotes in labels.\n- Links: use descriptive link text; ensure only existing files are referenced via relative paths.\n- Natural-language business requirements only: exclude APIs, DB schemas, or architecture details.\n- Authentication and roles: ensure flows respect roles (member, expert, moderator, editor, admin) and summarize approval gates.\n- Error handling: include exception branches and rollback behaviors across flows.\n- Performance: include user-perceived timing expectations where relevant (e.g., 2–3 seconds for auth and validation steps).\n- Document voice: avoid meta-commentary such as \"This document\"; state scope/principles directly.\n- Locale: en-US professional tone; EARS keywords remain in English.\n","content":"# pol-econ-board User Flows\n\n## Scope and Principles\n- Business workflows covering account creation and authentication, content authoring and publishing, reporting and moderation with appeal, and notifications configuration and delivery.\n- Roles in scope: member, expert, moderator, editor, admin.\n- Out of scope: frontend UI/UX layouts, API endpoints, database schemas, infrastructure design.\n- Implementation ownership: defines WHAT happens; all technical implementation decisions (architecture, APIs, database design, encryption, infrastructure) belong to developers.\n- Consistency rules: EARS requirements throughout; Mermaid diagrams use left-to-right orientation; all labels in double quotes; no spaces between brackets/braces and quotes; correct arrow syntax.\n- Time references: user-perceived performance and any SLAs are expressed in business terms; default business timezone Asia/Seoul (KST).\n\n## User Journey Overview\nThe service supports trustworthy political/economic discourse. Users discover content, register, verify, and sign in; create and publish posts; engage via comments and reactions; and escalate issues through reporting. Experts produce in-depth analyses; moderators and editors ensure compliance and quality; admins manage global policies and escalations.\n\nKey journey highlights:\n- Onboarding: registration, email verification, sign-in, session maintenance, secure sign-out across devices.\n- Creation: draft → edit → version tracking → publish; optional pre-publish review based on policies and role capabilities.\n- Governance: report → triage → action (hide/delete/sanction) → transparency log → appeal → review → resolution.\n- Notifications: real-time and batch/digest messages that respect user preferences, quiet hours, and rate limits.\n\n### High-Level Journey Diagram\n```mermaid\ngraph LR\n  A[\"Discover Content\"] --> B[\"Register/Sign In\"]\n  B --> C[\"Create Draft/Post\"]\n  C --> D{\"Publish?\"}\n  D -->|\"Yes\"| E[\"Visible Per Policy\"]\n  D -->|\"No\"| F[\"Save as Draft\"]\n  E --> G[\"Engage(Comments/Reactions)\"]\n  G --> H{\"Policy Violation Report?\"}\n  H -->|\"No\"| I[\"Continue Engagement\"]\n  H -->|\"Yes\"| J[\"Moderation Workflow\"]\n  J --> K{\"Action Required?\"}\n  K -->|\"Yes\"| L[\"Apply Action(Sanction/Hide/Delete)\"]\n  K -->|\"No\"| M[\"Close with No Action\"]\n  E --> N[\"Notifications\"]\n```\n\n## Account Creation and Authentication Flow\nCovers registration, email verification, sign-in, session maintenance, sign-out, password reset, and cross-device revocation. Token usage adheres to JWT-based principles defined in the authentication requirements.\n\n### Narrative Flow\n- Registration: A user submits registration data; inputs are validated; a pending-verification account is created; verification instructions are sent; account activates upon successful verification.\n- Sign-in: A user submits credentials; the system validates and establishes a session with short-lived access and longer-lived refresh tokens. Failed attempts increase a counter that can trigger temporary lockout.\n- Password reset: A user initiates a reset; a one-time, time-bound reset process is issued; after success, prior sessions are invalidated per policy.\n- Sign-out and device revocation: A user signs out on the current device and may revoke all sessions across all devices.\n\n### Role Notes\n- All roles use the same authentication and session flow; role assignment influences authorization decisions after sign-in.\n\n### EARS Requirements (Authentication)\n- THE authentication service SHALL accept registration with email and password and create an account in a pending-verification state.\n- WHEN a user completes email verification within the valid window, THE authentication service SHALL activate the account for sign-in.\n- IF email verification is attempted after expiration, THEN THE authentication service SHALL deny activation and allow requesting a new verification process.\n- WHEN a user submits valid credentials, THE authentication service SHALL establish a session and issue tokens with defined expirations.\n- IF a login attempt uses invalid credentials, THEN THE authentication service SHALL reject the login, increment a failure counter, and present a non-revealing error message.\n- WHERE the failure counter exceeds the lockout threshold within a window, THE authentication service SHALL apply a temporary login delay and provide guidance for password reset.\n- WHEN a user requests password reset, THE authentication service SHALL issue a one-time reset process bound to time and single-use constraints.\n- WHEN a password reset is completed, THE authentication service SHALL invalidate prior sessions according to security policy.\n- WHEN a user signs out, THE authentication service SHALL terminate the current session immediately.\n- WHEN a user requests device-wide sign-out, THE authentication service SHALL revoke all active sessions associated with the account.\n- WHILE a session is active, THE authentication service SHALL refresh access according to token refresh policy and deny refresh after refresh expiration.\n- THE authentication service SHALL respond to sign-in attempts within 2 seconds under normal load.\n\n### Account Creation & Authentication Diagram\n```mermaid\ngraph LR\n  subgraph \"Registration\"\n    A[\"Start Registration\"] --> B[\"Validate Inputs\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Create Pending Account\"]\n    C -->|\"No\"| E[\"Reject and Explain\"]\n    D --> F[\"Send Verification\"]\n  end\n\n  subgraph \"Verification\"\n    F --> G[\"User Follows Link\"]\n    G --> H{\"Within Valid Window?\"}\n    H -->|\"Yes\"| I[\"Activate Account\"]\n    H -->|\"No\"| J[\"Offer New Verification\"]\n  end\n\n  subgraph \"Sign-In & Session\"\n    K[\"Submit Credentials\"] --> L[\"Validate Credentials\"]\n    L --> M{\"Valid?\"}\n    M -->|\"Yes\"| N[\"Issue Tokens\"]\n    M -->|\"No\"| O[\"Reject and Increment Counter\"]\n    N --> P[\"Access Protected Resources\"]\n    P --> Q{\"Refresh Needed?\"}\n    Q -->|\"Yes\"| R[\"Refresh Within Policy\"]\n    Q -->|\"No\"| S[\"Continue\"]\n  end\n\n  subgraph \"Sign-Out & Revocation\"\n    T[\"User Sign-Out\"] --> U[\"Terminate Current Session\"]\n    V[\"Revoke All Devices\"] --> W[\"Invalidate All Sessions\"]\n  end\n```\n\n## Post Create, Edit, Publish Flow\nCovers drafting, editing, versioning, and publishing with policy checks and role-based nuances.\n\n### Narrative Flow\n- Drafting: Any authenticated member or expert creates drafts with autosave. Editors and admins typically do not author on behalf of others unless policy allows; editors manage curation and featured placement via separate processes.\n- Editing: Authors freely edit drafts; edits to published posts create versions with change logs. Members update their own content; experts publish “insight” or “research” posts under the same versioning rules.\n- Pre-publish checks: Policy validations run (e.g., restricted topics during sensitive periods, required sources for factual claims). Signals or rules may route posts for moderator review.\n- Publishing: If checks pass and no mandatory review applies, the post becomes visible per visibility policy (public or restricted). If review is required, visibility remains limited until approval.\n\n### Role Notes\n- member: drafts, edits, publishes own content; subject to automated checks and potential moderation review.\n- expert: same as member with expert labeling; does not bypass policy enforcement.\n- editor: features and pins posts; manages topics/labels; cannot unilaterally override policy enforcement.\n- moderator: may hold, hide, or request actions per governance policy.\n- admin: oversees legal/policy compliance and system-level settings.\n\n### EARS Requirements (Authoring & Publishing)\n- WHEN an authenticated user creates a draft, THE content service SHALL save the draft and maintain an immutable version history upon each significant save.\n- WHILE a post remains in draft, THE content service SHALL restrict visibility to the author and authorized reviewers where applicable.\n- WHEN an author attempts to publish, THE content service SHALL execute policy checks including restricted periods, mandatory citations, and prohibited content categories.\n- IF any mandatory check fails, THEN THE content service SHALL block publishing, present failure reasons, and preserve the draft state.\n- WHERE a post is flagged by automated heuristics or configured rules, THE content service SHALL route the post to a moderation queue and defer public visibility until decision.\n- WHEN a post passes all checks without mandatory review, THE content service SHALL publish the post and set visibility per policy immediately.\n- WHEN an author edits a published post, THE content service SHALL create a new version, preserve prior versions, and update the live version upon successful checks.\n- IF an author attempts to edit content under active investigation, THEN THE content service SHALL restrict edits to draft-copy only and prevent live changes until the investigation concludes.\n- THE content service SHALL record publication timestamps and version identifiers for transparency.\n- THE content service SHALL complete pre-publish validation within 3 seconds for standard-length posts under normal load.\n\n### Authoring & Publishing Diagram\n```mermaid\ngraph LR\n  subgraph \"Drafting\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Edit Content\"]\n  end\n\n  subgraph \"Pre-Publish Checks\"\n    C --> D[\"Run Policy Checks\"]\n    D --> E{\"Checks Pass?\"}\n    E -->|\"No\"| F[\"Block Publish and Explain\"]\n    E -->|\"Yes\"| G{\"Flagged for Review?\"}\n    G -->|\"Yes\"| H[\"Route to Moderation Queue\"]\n    G -->|\"No\"| I[\"Publish Immediately\"]\n  end\n\n  subgraph \"Post-Publish\"\n    I --> J[\"Visible per Policy\"]\n    H --> K{\"Moderator Decision\"}\n    K -->|\"Approve\"| L[\"Publish\"]\n    K -->|\"Reject\"| M[\"Return to Draft with Reasons\"]\n    K -->|\"Request Changes\"| N[\"Author Revises Draft\"]\n    N -.-> D\n  end\n\n  subgraph \"Editing Published Content\"\n    O[\"Edit Published Post\"] --> P[\"Create New Version\"]\n    P --> D\n  end\n```\n\n## Report Intake → Moderation → Appeal Flow\nDefines how users report content, how moderators triage and act, and how authors can appeal decisions. Time expectations are stated in business terms.\n\n### Narrative Flow\n- Reporting: Any authenticated user reports content under specified categories (e.g., misinformation, hate, spam). The system validates report completeness and enters it into the moderation queue.\n- Triage: Moderators review by severity and context, consult guidelines, and record transparent decisions, including temporary hiding where warranted.\n- Actions: Outcomes include no action, warning, temporary suspension, edit request, hide, or delete. Sanctioning follows the governance policy and transparency logging.\n- Appeal: Affected users file appeals within a defined window. Appeals are reviewed by a different moderator or a designated reviewer. Decisions are logged and communicated.\n\n### Role Notes\n- member/expert: submit reports; appeal actions affecting their content or account.\n- moderator: triage reports; apply content actions; propose or apply sanctions within remit.\n- editor: collaborates on quality; does not override moderation outcomes unilaterally.\n- admin: handles escalations, legal requests, and final adjudication when policy demands.\n\n### EARS Requirements (Moderation)\n- WHEN a user submits a report with a valid category and target, THE governance service SHALL create a case and place it in the moderation queue.\n- IF the report lacks required details, THEN THE governance service SHALL reject the submission and instruct the reporter to provide missing fields.\n- WHERE content presents imminent harm indicators, THE governance service SHALL apply temporary hiding pending expedited review.\n- WHEN a moderator reviews a case, THE governance service SHALL require a decision record including category, rationale, and action.\n- WHEN a case is resolved with action, THE governance service SHALL notify the reporter and affected parties with outcome and rationale.\n- WHERE a sanction affects account capabilities, THE governance service SHALL enforce restrictions immediately upon decision.\n- WHEN an appeal is received within the allowed window, THE governance service SHALL assign it to an eligible reviewer distinct from the original decision maker.\n- IF an appeal is upheld, THEN THE governance service SHALL restore the content or reverse sanctions and update the transparency record.\n- IF an appeal is denied, THEN THE governance service SHALL maintain the action and record the rationale.\n- THE governance service SHALL target initial triage within 24 hours for standard cases and within 2 hours for imminent harm indicators.\n\n### Moderation & Appeal Diagram\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    A[\"Submit Report\"] --> B[\"Validate Fields\"]\n    B --> C{\"Complete?\"}\n    C -->|\"No\"| D[\"Reject and Guide\"]\n    C -->|\"Yes\"| E[\"Create Case\"]\n  end\n\n  subgraph \"Triage & Review\"\n    E --> F{\"Imminent Harm?\"}\n    F -->|\"Yes\"| G[\"Temporarily Hide Content\"]\n    F -->|\"No\"| H[\"Queue by Priority\"]\n    G --> I[\"Expedited Review\"]\n    H --> I\n    I --> J{\"Decision\"}\n  end\n\n  subgraph \"Actions\"\n    J -->|\"No Action\"| K[\"Close Case\"]\n    J -->|\"Warn/Suspend\"| L[\"Apply Sanction\"]\n    J -->|\"Hide/Delete\"| M[\"Apply Content Action\"]\n    J -->|\"Edit Request\"| N[\"Request Changes from Author\"]\n  end\n\n  subgraph \"Appeal\"\n    O[\"File Appeal\"] --> P[\"Assign Different Reviewer\"]\n    P --> Q{\"Appeal Outcome\"}\n    Q -->|\"Upheld\"| R[\"Reverse Action and Restore\"]\n    Q -->|\"Denied\"| S[\"Maintain Action\"]\n  end\n\n  K --> T[\"Notify Parties\"]\n  L --> T\n  M --> T\n  N --> T\n  R --> T\n  S --> T\n```\n\n## Notification Settings and Receipt Flow\nDefines how users configure preferences and how notifications are delivered in real time or digest, respecting rate limits and user control.\n\n### Narrative Flow\n- Preference management: Users opt in/out per channel (in-app, email) and per category (mentions, replies, follows, moderation updates, policy events). Users may select digest frequency for summaries.\n- Triggering: Events such as mentions, comments, follows, publication outcomes, and moderation decisions trigger notifications. The system evaluates user preferences, quiet hours, and rate limits before sending.\n- Delivery: Real-time where required; batched aggregation for digest per chosen interval. Failures are retried per policy. Users can view notification history.\n\n### Role Notes\n- All roles receive notifications appropriate to their actions and responsibilities. Moderators also receive queue assignments; admins receive policy/legal event notifications.\n\n### EARS Requirements (Notifications)\n- WHEN a trigger event occurs, THE notification service SHALL evaluate the recipient's preferences and channel availability before queuing delivery.\n- WHERE a user has enabled digest for a category, THE notification service SHALL aggregate events and deliver at the configured interval.\n- IF a user has opted out for a channel or category, THEN THE notification service SHALL suppress delivery for that scope.\n- WHEN a delivery attempt fails transiently, THE notification service SHALL retry according to backoff policy and record failure if exhausted.\n- WHEN a notification pertains to moderation outcomes, THE notification service SHALL include outcome, rationale summary, and available next steps.\n- THE notification service SHALL respect configured rate limits and quiet hours for non-critical categories.\n- WHERE an event is critical (security or policy), THE notification service SHALL bypass quiet hours for the minimum necessary alerting.\n\n### Notification Flow Diagram\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    A[\"Open Preferences\"] --> B[\"Set Channels\"]\n    B --> C[\"Set Categories\"]\n    C --> D[\"Set Digest Frequency\"]\n  end\n\n  subgraph \"Trigger & Evaluation\"\n    E[\"Event Triggered\"] --> F[\"Load Recipient Preferences\"]\n    F --> G{\"Opted Out?\"}\n    G -->|\"Yes\"| H[\"Suppress\"]\n    G -->|\"No\"| I{\"Digest Category?\"}\n    I -->|\"Yes\"| J[\"Aggregate for Digest\"]\n    I -->|\"No\"| K[\"Queue for Real-Time Delivery\"]\n  end\n\n  subgraph \"Delivery\"\n    K --> L[\"Attempt Delivery\"]\n    L --> M{\"Success?\"}\n    M -->|\"Yes\"| N[\"Record Sent\"]\n    M -->|\"No\"| O[\"Retry per Policy\"]\n    O --> P{\"Exhausted?\"}\n    P -->|\"Yes\"| Q[\"Record Failure\"]\n    P -->|\"No\"| L\n    J --> R[\"Send Digest at Interval\"]\n  end\n```\n\n## Role-Based Approval and Gating Points\nAuthorization gates differ by role for certain actions. Business rules are expressed in EARS to remove ambiguity.\n\n### EARS Requirements (Role Gates)\n- WHERE the actor is member, THE content service SHALL allow publishing own posts subject to policy checks without mandatory staff pre-approval.\n- WHERE the actor is expert and marks content as “long-form research”, THE content service SHALL require either source completeness verification or editor review prior to publication.\n- WHERE the actor is editor, THE curation service SHALL permit pinning and featuring but SHALL require moderator approval to enforce policy violations.\n- WHERE the actor is moderator, THE governance service SHALL allow content hide/remove and SHALL require admin approval for permanent account sanctions.\n- WHERE the actor is admin, THE governance service SHALL allow irreversible sanctions and legal-policy overrides with mandatory audit logging.\n\n### Role Gate Diagram\n```mermaid\ngraph LR\n  subgraph \"Actors\"\n    A[\"Member\"]\n    B[\"Expert\"]\n    C[\"Editor\"]\n    D[\"Moderator\"]\n    E[\"Admin\"]\n  end\n\n  subgraph \"Gates\"\n    G1[\"Publish Without Pre-Approval\"]\n    G2[\"Research Pre-Check or Editor Review\"]\n    G3[\"Pin/Feature Requires Policy Alignment\"]\n    G4[\"Hide/Remove Content\"]\n    G5[\"Permanent Sanction Approval\"]\n  end\n\n  A --> G1\n  B --> G2\n  C --> G3\n  D --> G4\n  D --> G5\n  E --> G5\n```\n\n## Exception Branches and Rollback Flows\nCross-flow exception handling paths and rollback behaviors expressed in EARS with a consolidated diagram.\n\n### EARS Requirements (Exceptions & Rollbacks)\n- IF registration input validation fails, THEN THE authentication service SHALL not create an account and SHALL provide actionable guidance without revealing sensitive validation logic.\n- IF email verification is attempted with an invalid or expired token, THEN THE authentication service SHALL deny activation and SHALL offer a new verification process.\n- IF token refresh is attempted after refresh expiration, THEN THE authentication service SHALL require re-authentication and SHALL deny access until successful sign-in.\n- IF an author loses connectivity during draft save, THEN THE content service SHALL retain the last confirmed version and SHALL surface a reconciliation prompt on next restore.\n- IF pre-publish checks detect policy violations, THEN THE content service SHALL preserve the draft, SHALL enumerate violations, and SHALL block publication until resolved.\n- IF a moderation action is applied in error and later reversed, THEN THE governance service SHALL restore content visibility and SHALL update all related notifications and transparency records.\n- IF notification delivery repeatedly fails for a channel, THEN THE notification service SHALL mark the channel as temporarily unavailable for the recipient and SHALL suggest remediation steps via an alternative channel if available.\n- WHEN a user requests account-wide sign-out, THE authentication service SHALL revoke all devices within 1 minute and SHALL require fresh authentication for any new access.\n\n### Cross-Flow Rollback Diagram\n```mermaid\ngraph LR\n  A[\"Draft Save Attempt\"] --> B{\"Network OK?\"}\n  B -->|\"Yes\"| C[\"Save Draft Version\"]\n  B -->|\"No\"| D[\"Keep Last Confirmed Version\"]\n  D --> E[\"Prompt Reconcile on Return\"]\n\n  F[\"Publish Attempt\"] --> G{\"Policy Checks Pass?\"}\n  G -->|\"Yes\"| H[\"Publish Live\"]\n  G -->|\"No\"| I[\"Block and Keep Draft\"]\n\n  J[\"Token Refresh\"] --> K{\"Refresh Valid?\"}\n  K -->|\"Yes\"| L[\"Issue New Access\"]\n  K -->|\"No\"| M[\"Require Re-Auth\"]\n\n  N[\"Moderation Reversal\"] --> O[\"Restore Content\"]\n  O --> P[\"Update Notifications\"]\n  O --> Q[\"Update Transparency Record\"]\n```\n\n## Related Documents\n- Refer to the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for roles, tokens, and authentication policies.\n- Refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for end-to-end business functionality and validations.\n- Refer to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for report categories, sanctions, and appeals.\n","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:51.748Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"오류/예외 상황에서의 사용자 관점 처리 원칙과 복구 절차를 표준화하기 위함.","filename":"12-pol-econ-board-exception-handling-and-error-scenarios.md","documentType":"requirement","outline":["공통 에러 분류와 사용자 메시지 원칙","인증/인가 관련 오류 처리","콘텐츠 작업 오류(업로드/저장/충돌) 처리","신고/중재 실패 및 재처리","외부 연동 실패 시 처리(로그인 제공자 등)","레이트리밋/스팸 차단에 따른 제한 알림","데이터 무결성/중복 감지와 정정","사용자 복구 절차와 안내"],"audience":"development team","keyQuestions":["대표적인 오류 상황과 기대되는 시스템 반응은 무엇인가","사용자 복구 경로와 재시도 정책은 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["EARS 형식으로 오류 처리 요구사항 작성","사용자 메시지 원칙 명시","API/코드 수준 상세 금지"],"content":"# pol-econ-board Exception Handling and Error Scenarios\n\nThis document defines complete business requirements for how the pol-econ-board service handles exceptions and error scenarios from a user perspective, including recovery procedures. It provides business requirements only. All technical implementation decisions (architecture, APIs, database design, libraries) are at the sole discretion of the development team. The document describes WHAT the system must do, not HOW to build it.\n\n## 1. Purpose and Scope\n- Standardize error taxonomy, user-facing messaging, recovery flows, and cross-cutting policies across authentication, content operations, moderation, external integrations, rate limiting/spam control, and data integrity.\n- Ensure consistent, actionable responses with measurable performance targets and clear remediation guidance.\n- Provide testable requirements using EARS syntax for pass/fail validation.\n\n## 2. Related Documents\n- For role definitions and authentication rules, see the User Roles and Authentication Requirements: [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- For end-to-end functions and validations, see the Functional Requirements: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- For user journeys and diagrams, see the User Flows: [User Flow Diagrams and Journeys](./06-pol-econ-board-user-flows.md).\n\n## 3. Common Error Taxonomy and User Message Principles\n\n### 3.1 Error Categories and Codes\n- Category list (business-level): AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- Error code format: CATEGORY_SUBJECT_REASON (UPPERCASE, underscores). Examples: AUTH_INVALID_CREDENTIALS, CONTENT_VERSION_CONFLICT, RATE_LIMIT_EXCEEDED, INTEGRATION_PROVIDER_UNAVAILABLE, DATA_DUPLICATE_SUBMISSION.\n- Severity levels (business impact): INFO, WARNING, ERROR, CRITICAL.\n\n### 3.2 Standard Error Object (Business-Level)\n- Fields required for user-facing handling and audit. This is not an API schema; it is the business content the response must convey:\n  - errorCode (string; follows code format)\n  - title (short human-readable summary)\n  - message (actionable description with next steps)\n  - userAction (primary recommended action)\n  - supportId (opaque identifier for support/audit; unique per incident)\n  - category (one of categories above)\n  - severity (INFO/WARNING/ERROR/CRITICAL)\n  - retryAfter (optional, seconds or timestamp when retry is allowed/expected)\n\n### 3.3 User Message Principles\n- Clarity: plain language; avoid jargon or stack traces.\n- Actionability: always include the next step the user can take, or when to try again.\n- Non-disclosure: never reveal sensitive details (e.g., which field exactly failed security checks for spam, internal IDs, or validation rules that could be gamed).\n- Consistency: uniform tone and structure across all modules.\n- Localization: messages are localized to the user’s language; dynamic inserts use placeholders; sensitive content is neutral.\n- Accessibility: messages avoid color-only significance and are concise for assistive technologies.\n\n### 3.4 Performance Expectations for Error Responses\n- Perceived immediacy matters. Targets below are user-facing, measured at the boundary of the service response perceived by the client.\n  - Detection-to-display latency: ≤ 1.0 second for synchronous actions, ≤ 5.0 seconds for asynchronous confirmations.\n  - Retryability hint availability: provided within the same response when applicable.\n  - Logging identifier (supportId): always present with errors of severity ERROR or higher.\n\n## 4. Global Cross-Cutting Requirements (EARS)\n- THE pol-econ-board service SHALL classify every error into exactly one category from AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- THE pol-econ-board service SHALL produce a user-facing error payload with fields errorCode, title, message, userAction, category, severity, and supportId for errors of severity ERROR or CRITICAL.\n- THE pol-econ-board service SHALL include retryAfter where a retry is appropriate and bounded.\n- THE pol-econ-board service SHALL present localized messages based on the user’s language preference.\n- THE pol-econ-board service SHALL avoid exposing internal identifiers, stack traces, SQL details, or provider-specific secrets in user-facing messages.\n- THE pol-econ-board service SHALL generate a unique supportId for each error event visible to users and persist an audit log correlated by that identifier.\n- THE pol-econ-board service SHALL display an error to the user within 1 second for synchronous failures.\n- THE pol-econ-board service SHALL record severity at time of error creation using the defined severity scale.\n- THE pol-econ-board service SHALL attach remediation guidance in userAction for all actionable errors.\n- THE pol-econ-board service SHALL suppress duplicate error messages for the same root cause within a single user action.\n- THE pol-econ-board service SHALL provide idempotent handling for user-triggered actions that are retried due to transient failures.\n- WHERE rate limiting applies, THE pol-econ-board service SHALL communicate the next eligible retry time using retryAfter.\n\n## 5. Authentication and Authorization Error Handling\n\n### 5.1 Scenarios\n- Invalid credentials at login.\n- Email not verified.\n- Account locked/suspended.\n- Session expired or token invalid/expired.\n- Refresh token invalid, expired, or revoked.\n- Permission denied due to role/permission mismatch.\n- Forced logout due to device revocation or global sign-out.\n\n### 5.2 EARS Requirements\n- WHEN 로그인 시 잘못된 자격 증명이 제출될 때, THE pol-econ-board service SHALL return AUTH_INVALID_CREDENTIALS with message guiding to check email/password and a link to reset password, without indicating which part is wrong.\n- WHEN 로그인 시 계정 이메일이 미인증 상태일 때, THE pol-econ-board service SHALL return ACCOUNT_EMAIL_UNVERIFIED with an option to resend verification and indicate expected arrival time within 5 minutes.\n- WHEN 계정이 정책 위반으로 잠김 상태일 때, THE pol-econ-board service SHALL return ACCOUNT_LOCKED with message including lock duration or appeal link per policy.\n- WHEN 세션 토큰이 만료되었을 때, THE pol-econ-board service SHALL attempt a silent renewal using a valid refresh context and, upon failure, present SESSION_EXPIRED requiring re-authentication.\n- IF 갱신 토큰이 만료되었거나 철회되었을 경우, THEN THE pol-econ-board service SHALL clear session context and present AUTH_REAUTHENTICATION_REQUIRED with userAction \"Sign in again\".\n- WHEN 권한이 부족한 사용자가 제한된 리소스에 접근할 때, THE pol-econ-board service SHALL return PERM_FORBIDDEN with a message indicating the action is not permitted for the user’s role.\n- WHEN 관리자에 의해 모든 디바이스에서 로그아웃이 수행되었을 때, THE pol-econ-board service SHALL present SESSION_REVOKED and require re-authentication before any protected action.\n- WHERE 다단계 인증이 정책상 필요한 구간일 때, THE pol-econ-board service SHALL present AUTH_STEP_UP_REQUIRED with guidance to complete additional checks.\n- THE pol-econ-board service SHALL limit login attempts to prevent enumeration and return AUTH_ATTEMPT_LIMIT with a cooldown window not exceeding 15 minutes.\n\n### 5.3 Token Refresh and Failure Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Session Lifecycle\"\n    A[\"Protected Action\"] --> B[\"Access Token Validation\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Proceed Action\"]\n    C -->|\"No\"| E[\"Attempt Silent Refresh\"]\n    E --> F{\"Refresh Succeeds?\"}\n    F -->|\"Yes\"| D\n    F -->|\"No\"| G[\"Present SESSION_EXPIRED\"]\n  end\n  G --> H[\"User Re-authenticates\"]\n  H --> D\n```\n\n## 6. Content Operation Errors (Upload/Save/Conflict)\n\n### 6.1 Scenarios\n- Draft auto-save failure.\n- Publish validation errors (missing required fields, policy constraints).\n- Attachment upload failures (size/type/timeout/corrupted file).\n- Version conflicts due to concurrent edits.\n- Storage quota exceeded for attachments.\n- Network interruption during save/publish.\n\n### 6.2 EARS Requirements\n- WHEN 초안 자동저장이 실패할 때, THE pol-econ-board service SHALL display CONTENT autosave failure within 1 second and queue a background retry up to 3 attempts within 2 minutes.\n- WHEN 게시 요청이 필수 비즈니스 규칙 검증에 실패할 때, THE pol-econ-board service SHALL return VALIDATION_FAILED with a list of violated business rules summarized in user language and preserve the user’s data.\n- WHEN 첨부 업로드가 허용 크기 또는 형식을 초과할 때, THE pol-econ-board service SHALL return UPLOAD_POLICY_REJECTED specifying the allowed limits without exposing internal thresholds that can be gamed beyond published policy.\n- WHEN 업로드가 네트워크 일시 오류로 실패할 때, THE pol-econ-board service SHALL return UPLOAD_TRANSIENT_FAILURE with userAction to retry and SHALL allow up to 3 retries with exponential backoff not exceeding 60 seconds total.\n- WHEN 동시 편집으로 버전 충돌이 감지될 때, THE pol-econ-board service SHALL return CONTENT_VERSION_CONFLICT and provide options to reload latest, keep local copy, or create a new revision.\n- WHEN 저장 또는 게시 중 연결이 중단되었을 때, THE pol-econ-board service SHALL guarantee idempotent processing such that repeated submission does not create duplicates.\n- WHERE 사용자 저장소 제한이 정책상 설정되어 있을 때, THE pol-econ-board service SHALL return UPLOAD_QUOTA_EXCEEDED with guidance on freeing space or upgrading if applicable.\n\n### 6.3 Save Conflict Resolution Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Edit and Save\"\n    A[\"User Edits Content\"] --> B[\"Submit Save\"]\n    B --> C[\"Validate Business Rules\"]\n    C --> D[\"Check Latest Version\"]\n    D --> E{\"Conflict?\"}\n    E -->|\"No\"| F[\"Persist Changes\"]\n    E -->|\"Yes\"| G[\"Return CONTENT_VERSION_CONFLICT\"]\n  end\n  G --> H[\"Offer Options\"]\n  H --> I[\"Reload Latest\"]\n  H --> J[\"Keep Local Copy\"]\n  H --> K[\"Create New Revision\"]\n  I --> F\n  J -.-> F\n  K --> F\n```\n\n## 7. Report/Moderation Failures and Reprocessing\n\n### 7.1 Scenarios\n- Report submission transient failure.\n- Moderation queue backlog causing SLA risk.\n- Temporary moderation action later reversed.\n- Appeal submission failure.\n\n### 7.2 EARS Requirements\n- WHEN 신고 제출이 일시적으로 실패할 때, THE pol-econ-board service SHALL return REPORT_SUBMISSION_FAILED with userAction to retry and preserve the report details locally for 24 hours.\n- WHILE 중재 큐 적체가 SLA 위험 수준일 때, THE pol-econ-board service SHALL surface MODERATION_DELAY_NOTICE to reporters with an updated expected resolution window.\n- IF 중재 결과가 재검토에서 뒤집힐 조건이 충족될 경우, THEN THE pol-econ-board service SHALL issue MODERATION_ACTION_REVERSED notices to impacted users and restore content state where applicable.\n- WHEN 이의제기 제출이 검증 오류로 실패할 때, THE pol-econ-board service SHALL return VALIDATION_FAILED with specific missing elements (e.g., required rationale) described in user language.\n- THE pol-econ-board service SHALL maintain a transparency log entry for moderation errors with supportId correlation.\n\n## 8. External Integration Failures\n\n### 8.1 Scenarios\n- Third-party login provider unavailable or timeout.\n- Email delivery provider error or rate limit.\n- Webhook/partner feed delays.\n\n### 8.2 EARS Requirements\n- WHEN 외부 로그인 제공자가 응답하지 않거나 오류를 반환할 때, THE pol-econ-board service SHALL return INTEGRATION_PROVIDER_UNAVAILABLE with userAction to try an alternative method or try again later and SHALL not block native email login.\n- WHEN 이메일 인증 메시지 발송이 실패할 때, THE pol-econ-board service SHALL return NOTIFICATION_DELIVERY_FAILED with option to resend and guidance to check spam folders.\n- WHEN 파트너 연동 데이터가 지연될 때, THE pol-econ-board service SHALL present INTEGRATION_DELAY_NOTICE with an estimated refresh time window not exceeding 60 minutes.\n- IF 외부 연동의 오류가 지속적으로 발생하는 경우, THEN THE pol-econ-board service SHALL degrade gracefully by disabling dependent optional features and informing users via banner-level message.\n\n## 9. Rate Limit and Spam Blocking Notifications\n\n### 9.1 Scenarios\n- Short-term throttling due to bursts.\n- Behavioral spam patterns detected.\n- Automated challenge required to continue.\n\n### 9.2 EARS Requirements\n- WHEN 단기간 요청 폭주로 임계치를 초과할 때, THE pol-econ-board service SHALL return RATE_LIMIT_EXCEEDED with retryAfter indicating the earliest retry time and SHALL not consume quota on refused retries after notification.\n- WHEN 스팸 의심 패턴이 감지될 때, THE pol-econ-board service SHALL return SPAM_SUSPECTED and limit posting or messaging features for a cooldown period while offering appeal instructions.\n- WHERE 자동 챌린지가 정책상 허용되는 경우, THE pol-econ-board service SHALL present CHALLENGE_REQUIRED and restore normal limits upon challenge success.\n- THE pol-econ-board service SHALL avoid permanently blocking a user on a first offense absent clear abuse signals and SHALL provide a path to remediation or appeal.\n\n## 10. Data Integrity, Duplicate Detection, and Correction\n\n### 10.1 Scenarios\n- Double submissions due to retries/back button.\n- Duplicate posts/comments within short interval.\n- Orphan references to deleted content.\n\n### 10.2 EARS Requirements\n- WHEN 동일한 사용자 액션이 짧은 시간 내 반복 제출될 때, THE pol-econ-board service SHALL enforce idempotent processing and return DATA_DUPLICATE_SUBMISSION referencing the original successful action via a user-safe reference.\n- WHEN 중복 게시물 내용이 정책 기준과 시간 창(예: 5분) 내로 감지될 때, THE pol-econ-board service SHALL return CONTENT_DUPLICATE_DETECTED and offer userAction to edit, merge, or discard.\n- IF 참조 무결성 위반이 감지될 경우, THEN THE pol-econ-board service SHALL return DATA_INTEGRITY_ERROR and guide the user to refresh or navigate to valid resources, while recording the condition for backend reconciliation.\n- THE pol-econ-board service SHALL prevent publishing content that violates referential integrity rules and SHALL present a corrective checklist.\n\n## 11. User Recovery Procedures and Guidance\n\n### 11.1 Recovery Center (Business-Level)\n- Centralized, role-aware recovery page that consolidates recent failed actions with status and next steps (no UI spec implied).\n\n### 11.2 EARS Requirements\n- THE pol-econ-board service SHALL provide a recovery center summarizing the last 20 failed actions per user with timestamps and userAction.\n- THE pol-econ-board service SHALL allow resubmission of eligible failed actions from the recovery center where safe and idempotent.\n- WHERE 사용자 권한이 필요한 복구가 포함되는 경우, THE pol-econ-board service SHALL verify permissions and show PERM_FORBIDDEN if insufficient.\n- IF 동일 실패가 3회 연속 반복될 경우, THEN THE pol-econ-board service SHALL prompt the user with alternative actions or support contact.\n- THE pol-econ-board service SHALL include the supportId and a copyable diagnostics summary in the recovery center.\n\n## 12. Error Category to Message Examples\n\nThe following examples illustrate business content; development teams retain freedom over technical formatting.\n\n| Category | Example Code | Title | Example User Message | Primary User Action |\n|----------|--------------|-------|----------------------|---------------------|\n| AUTH | AUTH_INVALID_CREDENTIALS | Sign-in failed | We couldn’t sign you in. Check your email and password, then try again. | Reset password or try again |\n| ACCOUNT | ACCOUNT_EMAIL_UNVERIFIED | Email not verified | Your email is not verified. We sent a new verification message. | Open email and verify |\n| SESSION | SESSION_EXPIRED | Session expired | Your session ended. Please sign in again to continue. | Sign in again |\n| PERM | PERM_FORBIDDEN | Action not permitted | Your account does not have permission to perform this action. | Review permissions |\n| CONTENT | CONTENT_VERSION_CONFLICT | Edit conflict detected | Another edit was saved while you were editing. Review the latest version. | Review and resolve |\n| UPLOAD | UPLOAD_TRANSIENT_FAILURE | Upload interrupted | The upload was interrupted. You can retry safely. | Retry upload |\n| RATE_LIMIT | RATE_LIMIT_EXCEEDED | Too many requests | You’ve reached the limit. Try again in a few minutes. | Try again later |\n| SPAM | SPAM_SUSPECTED | Posting temporarily limited | We detected unusual activity. Posting is limited for a short time. | Follow instructions or appeal |\n| INTEGRATION | INTEGRATION_PROVIDER_UNAVAILABLE | Provider unavailable | A login provider is temporarily unavailable. Try another method. | Try another method |\n| DATA | DATA_DUPLICATE_SUBMISSION | Duplicate submission | It looks like this was already submitted. | View previous result |\n\n## 13. Success Criteria and Monitoring (Business-Level)\n- THE pol-econ-board service SHALL achieve ≥ 99% of synchronous error displays within 1 second, measured at the client boundary.\n- THE pol-econ-board service SHALL include supportId in 100% of ERROR/CRITICAL cases and maintain auditable logs.\n- THE pol-econ-board service SHALL ensure that 95% of transient upload failures succeed within 3 total retries.\n- THE pol-econ-board service SHALL provide retryAfter for 100% of rate limit responses.\n- THE pol-econ-board service SHALL maintain transparency logs for moderation error reversals with monthly summaries.\n\n## 14. Glossary (Business Terms)\n- supportId: User-visible opaque identifier used to correlate an incident with audit logs.\n- retryAfter: User-understandable indicator for when a retry is allowed or expected.\n- Idempotent processing: Repeating the same user action does not create additional side effects.\n- Severity: Business impact classification guiding priority and user communications.\n\n## 15. Additional EARS Requirements by Area (Comprehensive)\n\n### 15.1 Messaging and Localization\n- THE pol-econ-board service SHALL ensure messages are written at a reading level accessible to the general public and avoid legal jargon except where mandated.\n- WHERE localization is available for a language, THE pol-econ-board service SHALL deliver error messages in that language with placeholders correctly substituted.\n- IF message rendering fails, THEN THE pol-econ-board service SHALL fall back to a default language and preserve the supportId.\n\n### 15.2 Logging and Privacy\n- THE pol-econ-board service SHALL log sufficient context to diagnose user-visible errors while redacting personal data that is not necessary for diagnosis.\n- WHERE privacy regulations require minimization, THE pol-econ-board service SHALL avoid logging content bodies for private messages and log only metadata sufficient for audit.\n\n### 15.3 Retries and Backoff (Business Policy)\n- THE pol-econ-board service SHALL cap automated retries to prevent cascading failures and user confusion, not exceeding 3 attempts within 2 minutes for content saves and uploads.\n- THE pol-econ-board service SHALL surface retry exhaustion clearly and provide a definitive next step.\n\n### 15.4 Accessibility and Inclusivity\n- THE pol-econ-board service SHALL avoid using color-only or icon-only indications for errors.\n- THE pol-econ-board service SHALL include concise text alternatives for all alerts.\n\n## 16. Appendix: Sample Flow for Rate Limit Handling (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Request Handling\"\n    A[\"User Action\"] --> B[\"Check Rate Quota\"]\n    B --> C{\"Exceeded?\"}\n    C -->|\"No\"| D[\"Proceed\"]\n    C -->|\"Yes\"| E[\"Return RATE_LIMIT_EXCEEDED\"]\n  end\n  E --> F[\"Show Retry Time(retryAfter)\"]\n  F --> G{\"Challenge Allowed?\"}\n  G -->|\"Yes\"| H[\"Present CHALLENGE_REQUIRED\"]\n  G -->|\"No\"| I[\"Wait Cooldown\"]\n  H --> J{\"Challenge Passed?\"}\n  J -->|\"Yes\"| D\n  J -->|\"No\"| I\n```\n\n---\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, are under the full autonomy of the development team. The scope is limited to defining user-visible behaviors, rules, and recovery paths for error scenarios in pol-econ-board."},"plan":"Structure: Title → Purpose/Scope → Related Documents → Common Error Taxonomy & Message Principles → Global Cross-Cutting EARS → Auth/Authorization Errors → Content Operation Errors → Report/Moderation Failures → External Integration Failures → Rate Limit & Spam Controls → Data Integrity & Duplicate Handling → User Recovery Procedures → Notification Delivery Errors & Fallbacks → System/Maintenance/Degradation Errors → Composite Operations & Partial Failure Handling → Expanded Examples Table → Success Criteria & Monitoring → Glossary → Additional EARS by Area (Messaging/Localization, Logging/Privacy, Retries/Backoff, Accessibility) → Global Error Handling Diagram (Mermaid) → Rate Limit Handling Diagram (Mermaid). Ensure role-aware differences, performance targets, and privacy-preserving messages.","review":"Enhance to meet business-requirements standards with: 1) 100% EARS compliance for all applicable requirements; 2) English-only user-facing text per en-US locale while keeping EARS keywords in English; 3) Complete coverage of outlined sections with added SYSTEM and NOTIFICATION error areas, composite-operation edge cases, and role-aware messaging; 4) Consistent error taxonomy and measurable performance targets; 5) No API/DB/architecture details; 6) Correct Mermaid syntax (double quotes for all labels, proper arrows, no spaces between brackets and quotes); 7) Descriptive, actionable user messages and recovery guidance; 8) Link texts must be descriptive; 9) Min length 5,000+ chars; 10) No developer notes beyond allowed autonomy statement.","content":"# pol-econ-board Exception Handling and Error Scenarios\n\nBusiness requirements for handling exceptions and user-visible error scenarios, including recovery procedures and consistency rules. Business requirements only; all technical implementation decisions (architecture, APIs, database design, libraries) are owned by the development team. Describes WHAT must happen, not HOW to build it.\n\n## 1. Purpose and Scope\n- Standardize error taxonomy, user-facing messaging, recovery flows, and cross-cutting policies across authentication, authorization, content operations, moderation, external integrations, rate limiting/spam control, notification delivery, system incidents, and data integrity.\n- Ensure consistent, actionable responses with measurable performance targets and user recovery guidance.\n- Define testable, unambiguous requirements using EARS syntax.\n\n## 2. Related Documents\n- User and role definitions with authentication policies: [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- End-to-end feature behaviors and validations: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- Visual user journeys and decision branches: [User Flow Diagrams and Journeys](./06-pol-econ-board-user-flows.md).\n\n## 3. Common Error Taxonomy and User Message Principles\n\n### 3.1 Error Categories and Codes\n- Categories (business-level): AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- Error code format: CATEGORY_SUBJECT_REASON (UPPERCASE with underscores). Examples: AUTH_INVALID_CREDENTIALS, CONTENT_VERSION_CONFLICT, RATE_LIMIT_EXCEEDED, INTEGRATION_PROVIDER_UNAVAILABLE, DATA_DUPLICATE_SUBMISSION, SYSTEM_MAINTENANCE_ACTIVE.\n- Severity levels (business impact): INFO (no user action required), WARNING (user action suggested), ERROR (user action required), CRITICAL (widespread impact; some features degraded or unavailable).\n\n### 3.2 Standard Error Payload (Business-Level Content)\nBusiness information the response must convey to users and audit (not an API schema):\n- errorCode (follows format above)\n- title (short human-readable summary)\n- message (actionable description with next steps and context bounds)\n- userAction (specific recommended user step)\n- supportId (opaque identifier for support/audit; unique per incident)\n- category (one from §3.1)\n- severity (INFO/WARNING/ERROR/CRITICAL)\n- retryAfter (optional; seconds or timestamp for earliest retry)\n\n### 3.3 User Message Principles\n- Clarity: plain language; no jargon, stack traces, or internal error dumps.\n- Actionability: include what the user can do now and when to try again.\n- Non-disclosure: hide sensitive internals (validation heuristics, internal IDs, provider secrets, exact anti-abuse thresholds).\n- Consistency: uniform tone, structure, and placement across modules; predictable codes.\n- Localization: messages localized to the user’s language; placeholders substituted correctly; sensitive content neutral.\n- Accessibility: concise text alternatives; avoid color-only signals; no emoji-only indicators.\n\n### 3.4 Performance Expectations for Error Responses\n- Detection-to-display latency: ≤ 1.0 second for synchronous actions; ≤ 5.0 seconds for asynchronous confirmations.\n- Retryability hints: provided in the same response when applicable.\n- supportId: present for all ERROR and CRITICAL severities.\n\n## 4. Global Cross-Cutting Requirements (EARS)\n- THE pol-econ-board service SHALL classify every error into exactly one category from AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- THE pol-econ-board service SHALL produce a localized user-facing payload with errorCode, title, message, userAction, category, severity, and supportId for errors of severity ERROR or CRITICAL.\n- THE pol-econ-board service SHALL include retryAfter where a bounded retry is appropriate.\n- THE pol-econ-board service SHALL avoid exposing internal identifiers, stack traces, SQL details, or provider-specific secrets in user-facing messages.\n- THE pol-econ-board service SHALL generate a unique supportId for each user-visible error and persist an audit log correlated by that identifier.\n- THE pol-econ-board service SHALL display a user-visible error within 1 second for synchronous failures.\n- THE pol-econ-board service SHALL record severity on error creation using the defined scale.\n- THE pol-econ-board service SHALL attach remediation guidance in userAction for all actionable errors.\n- THE pol-econ-board service SHALL suppress duplicate error messages for the same root cause within a single user action.\n- THE pol-econ-board service SHALL provide idempotent handling for user-triggered actions retried due to transient failures.\n- WHERE rate limiting applies, THE pol-econ-board service SHALL communicate the next eligible retry time using retryAfter.\n- WHERE the user role is moderator or admin and the context involves a policy outcome, THE pol-econ-board service SHALL include standardized reason codes and policy references without exposing personal data beyond business necessity.\n\n## 5. Authentication and Authorization Error Handling\n\n### 5.1 Scenarios\n- Invalid credentials at login.\n- Email not verified.\n- Account locked or suspended per policy.\n- Access token expired or invalid.\n- Refresh token invalid, expired, revoked, or reused.\n- Permission denied due to role/permission mismatch.\n- Forced logout due to device revocation or global sign-out.\n- Multi-factor step-up required by policy or risk.\n\n### 5.2 EARS Requirements\n- WHEN invalid login credentials are submitted, THE pol-econ-board service SHALL return AUTH_INVALID_CREDENTIALS with guidance to check email/password and a link to reset, without indicating which field is wrong.\n- WHEN the account email is unverified during login, THE pol-econ-board service SHALL return ACCOUNT_EMAIL_UNVERIFIED with an option to resend verification and indicate expected arrival time within 5 minutes.\n- WHEN the account is locked due to policy violation, THE pol-econ-board service SHALL return ACCOUNT_LOCKED with lock duration or appeal instructions according to governance policy.\n- WHEN the access token has expired, THE pol-econ-board service SHALL attempt silent renewal using a valid refresh context and, upon failure, present SESSION_EXPIRED requiring re-authentication.\n- IF the refresh token is expired, revoked, or reused, THEN THE pol-econ-board service SHALL clear session context and present AUTH_REAUTHENTICATION_REQUIRED with userAction \"Sign in again\".\n- WHEN a user with insufficient permissions attempts a restricted action, THE pol-econ-board service SHALL return PERM_FORBIDDEN with a message indicating that the action is not permitted for the user’s role.\n- WHEN an admin performs sign-out from all devices, THE pol-econ-board service SHALL present SESSION_REVOKED and require re-authentication before any protected action.\n- WHERE multi-factor authentication is required by policy for the action, THE pol-econ-board service SHALL present AUTH_STEP_UP_REQUIRED with guidance to complete additional checks.\n- THE pol-econ-board service SHALL limit login attempts to prevent enumeration and return AUTH_ATTEMPT_LIMIT with a cooldown window not exceeding 15 minutes.\n\n### 5.3 Token Refresh and Failure Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Session Lifecycle\"\n    A[\"Protected Action\"] --> B[\"Access Token Validation\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Proceed Action\"]\n    C -->|\"No\"| E[\"Attempt Silent Refresh\"]\n    E --> F{\"Refresh Succeeds?\"}\n    F -->|\"Yes\"| D\n    F -->|\"No\"| G[\"Present SESSION_EXPIRED\"]\n  end\n  G --> H[\"User Re-authenticates\"]\n  H --> D\n```\n\n## 6. Content Operation Errors (Upload/Save/Conflict)\n\n### 6.1 Scenarios\n- Draft autosave failure.\n- Publish validation errors (missing required fields, policy constraints).\n- Attachment upload failures (size/type/timeout/corrupted file).\n- Version conflicts due to concurrent edits.\n- Storage quota exceeded for attachments or saved items.\n- Network interruption during save/publish.\n\n### 6.2 EARS Requirements\n- WHEN draft autosave fails, THE pol-econ-board service SHALL display CONTENT_AUTOSAVE_FAILED within 1 second and queue a background retry up to 3 attempts within 2 minutes.\n- WHEN a publish request fails mandatory business rule validation, THE pol-econ-board service SHALL return VALIDATION_FAILED with a list of violated business rules in user language and preserve the user’s data.\n- WHEN an attachment upload exceeds allowed size or type, THE pol-econ-board service SHALL return UPLOAD_POLICY_REJECTED specifying allowed limits without exposing internal anti-abuse thresholds beyond published policy.\n- WHEN an upload fails due to a transient network error, THE pol-econ-board service SHALL return UPLOAD_TRANSIENT_FAILURE with userAction to retry and SHALL allow up to 3 retries with exponential backoff not exceeding 60 seconds total.\n- WHEN a version conflict is detected due to concurrent edits, THE pol-econ-board service SHALL return CONTENT_VERSION_CONFLICT and provide options to reload latest, keep local copy, or create a new revision.\n- WHEN the connection is interrupted during save or publish, THE pol-econ-board service SHALL guarantee idempotent processing so that repeated submission does not create duplicates.\n- WHERE user storage quota policies apply, THE pol-econ-board service SHALL return UPLOAD_QUOTA_EXCEEDED with guidance on freeing space or upgrading if applicable.\n\n### 6.3 Save Conflict Resolution Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Edit and Save\"\n    A[\"User Edits Content\"] --> B[\"Submit Save\"]\n    B --> C[\"Validate Business Rules\"]\n    C --> D[\"Check Latest Version\"]\n    D --> E{\"Conflict?\"}\n    E -->|\"No\"| F[\"Persist Changes\"]\n    E -->|\"Yes\"| G[\"Return CONTENT_VERSION_CONFLICT\"]\n  end\n  G --> H[\"Offer Options\"]\n  H --> I[\"Reload Latest\"]\n  H --> J[\"Keep Local Copy\"]\n  H --> K[\"Create New Revision\"]\n  I --> F\n  J -.-> F\n  K --> F\n```\n\n## 7. Report/Moderation Failures and Reprocessing\n\n### 7.1 Scenarios\n- Report submission transient failure.\n- Moderation queue backlog causing SLA risk.\n- Temporary moderation action later reversed.\n- Appeal submission validation failure.\n\n### 7.2 EARS Requirements\n- WHEN report submission fails transiently, THE pol-econ-board service SHALL return REPORT_SUBMISSION_FAILED with userAction to retry and SHALL preserve the report details locally for 24 hours.\n- WHILE the moderation queue backlog threatens SLA, THE pol-econ-board service SHALL surface MODERATION_DELAY_NOTICE to reporters with an updated expected resolution window.\n- IF conditions for reversing a moderation outcome are met on re-review, THEN THE pol-econ-board service SHALL issue MODERATION_ACTION_REVERSED notices to impacted users and restore content state where applicable.\n- WHEN an appeal submission fails validation, THE pol-econ-board service SHALL return VALIDATION_FAILED with missing or invalid elements summarized in user language.\n- THE pol-econ-board service SHALL maintain a transparency log entry for moderation errors with supportId correlation.\n\n## 8. External Integration Failures\n\n### 8.1 Scenarios\n- Third-party login provider unavailable or timeout.\n- Email delivery provider error or rate limit.\n- Webhook or partner feed delays.\n\n### 8.2 EARS Requirements\n- WHEN an external login provider is unavailable or returns errors, THE pol-econ-board service SHALL return INTEGRATION_PROVIDER_UNAVAILABLE with userAction to try an alternative method or try again later and SHALL not block native email login.\n- WHEN sending an email verification or password reset message fails, THE pol-econ-board service SHALL return NOTIFICATION_DELIVERY_FAILED with an option to resend and guidance to check spam folders.\n- WHEN partner integration data is delayed, THE pol-econ-board service SHALL present INTEGRATION_DELAY_NOTICE with an estimated refresh time window not exceeding 60 minutes.\n- IF external integration errors persist, THEN THE pol-econ-board service SHALL degrade gracefully by disabling dependent optional features and informing users via a banner-level message.\n\n## 9. Rate Limit and Spam Blocking Notifications\n\n### 9.1 Scenarios\n- Short-term throttling due to bursts.\n- Behavioral spam patterns detected.\n- Automated challenge required to continue.\n\n### 9.2 EARS Requirements\n- WHEN short-term request bursts exceed thresholds, THE pol-econ-board service SHALL return RATE_LIMIT_EXCEEDED with retryAfter indicating the earliest retry time and SHALL not consume quota on refused retries after notification.\n- WHEN spam-suspect patterns are detected, THE pol-econ-board service SHALL return SPAM_SUSPECTED and limit posting or messaging features for a cooldown period while offering appeal instructions.\n- WHERE an automated challenge is permitted by policy, THE pol-econ-board service SHALL present CHALLENGE_REQUIRED and restore normal limits upon challenge success.\n- THE pol-econ-board service SHALL avoid permanent blocks on a first offense absent clear abuse signals and SHALL provide a path to remediation or appeal.\n\n## 10. Data Integrity, Duplicate Detection, and Correction\n\n### 10.1 Scenarios\n- Double submissions due to retries/back button.\n- Duplicate posts/comments within a short interval.\n- Orphan references to deleted content; broken parent links.\n\n### 10.2 EARS Requirements\n- WHEN the same user action is submitted repeatedly within a short window, THE pol-econ-board service SHALL enforce idempotent processing and return DATA_DUPLICATE_SUBMISSION referencing the original successful action via a user-safe reference.\n- WHEN duplicate post content is detected within a policy time window (e.g., 5 minutes), THE pol-econ-board service SHALL return CONTENT_DUPLICATE_DETECTED and offer userAction to edit, merge, or discard.\n- IF a referential integrity violation is detected, THEN THE pol-econ-board service SHALL return DATA_INTEGRITY_ERROR and guide the user to refresh or navigate to valid resources while recording the condition for backend reconciliation.\n- THE pol-econ-board service SHALL prevent publishing content that violates referential integrity rules and SHALL present a corrective checklist.\n\n## 11. User Recovery Procedures and Guidance\n\n### 11.1 Recovery Center (Business-Level)\nCentralized, role-aware recovery page that consolidates recent failed actions with status, diagnostics, and next steps (no UI spec implied).\n\n### 11.2 EARS Requirements\n- THE pol-econ-board service SHALL provide a recovery center summarizing the last 20 failed actions per user with timestamps, errorCodes, supportIds, and userAction.\n- THE pol-econ-board service SHALL allow resubmission of eligible failed actions from the recovery center where safe and idempotent.\n- WHERE a recovery requires specific permissions, THE pol-econ-board service SHALL verify authorization and present PERM_FORBIDDEN if insufficient.\n- IF the same failure repeats 3 times consecutively, THEN THE pol-econ-board service SHALL prompt the user with alternative actions or support contact guidance.\n- THE pol-econ-board service SHALL include a copyable diagnostics summary (non-sensitive) and the supportId in the recovery center for each failure.\n\n## 12. Notification Delivery Errors and Fallbacks\n\n### 12.1 Scenarios\n- In-app notification creation succeeds but display is delayed by quiet hours or client state.\n- Email delivery failures due to provider rate limits, bounces, or authentication issues.\n- Digest generation backlogs.\n\n### 12.2 EARS Requirements\n- WHEN a non-critical notification is suppressed by user quiet hours, THE pol-econ-board service SHALL defer in-app display until quiet hours end and annotate the deferral state.\n- WHEN email sending fails transiently, THE pol-econ-board service SHALL retry within policy limits and record outcomes; IF retries are exhausted, THEN THE pol-econ-board service SHALL keep the item in in-app notifications and mark email delivery as failed for user visibility.\n- WHERE digest generation backlogs occur, THE pol-econ-board service SHALL prioritize transactional notifications and present a DIGEST_DELAY_NOTICE with the next expected send window.\n\n## 13. System, Maintenance, and Degradation Errors\n\n### 13.1 Scenarios\n- Planned maintenance.\n- Partial outage or feature degradation.\n- Global incident affecting core operations.\n\n### 13.2 EARS Requirements\n- WHEN planned maintenance is active, THE pol-econ-board service SHALL present SYSTEM_MAINTENANCE_ACTIVE with a maintenance window and a link to the status page; essential read-only access SHALL be preserved when possible.\n- IF a partial outage occurs, THEN THE pol-econ-board service SHALL present SYSTEM_PARTIAL_DEGRADATION and disable dependent optional features while preserving core read capabilities when feasible.\n- WHEN a global incident is declared, THE pol-econ-board service SHALL surface SYSTEM_INCIDENT_NOTICE across affected areas with scope, impact summary, and expected next update time.\n- WHERE user actions are deferred due to degradation, THE pol-econ-board service SHALL queue the action safely and present the queued state with a later auto-retry policy; idempotency SHALL be maintained.\n\n## 14. Composite Operations and Partial Failures\n\n### 14.1 Scenarios\n- Post publish with multiple attachments where some attachments fail processing.\n- Multi-step moderation workflow actions where one step succeeds and a subsequent step fails.\n- Follow and notify chain where follow succeeds but notification creation fails.\n\n### 14.2 EARS Requirements\n- WHEN composite operations include independently retryable sub-steps, THE pol-econ-board service SHALL commit successful sub-steps and present a PARTIAL_COMPLETION notice with specific next steps to resolve failed sub-steps without data loss.\n- IF a sub-step is non-compensable and fails, THEN THE pol-econ-board service SHALL roll back the composite action to a consistent prior state and present a clear message describing what was undone.\n- WHERE partial completion is user-acceptable (e.g., publish without failed optional attachments), THE pol-econ-board service SHALL offer a choice to proceed without the failed parts and to retry them later.\n\n## 15. Error Code to Message Examples\n\nRepresentative examples of business content; developers retain autonomy over formatting and transport.\n\n| Category | Example Code | Title | Example User Message | Primary User Action |\n|----------|--------------|-------|----------------------|---------------------|\n| AUTH | AUTH_INVALID_CREDENTIALS | Sign-in failed | Unable to sign you in. Check your email and password, then try again. | Reset password or try again |\n| ACCOUNT | ACCOUNT_EMAIL_UNVERIFIED | Email not verified | Your email is not verified. A new verification message was sent. | Open email and verify |\n| SESSION | SESSION_EXPIRED | Session expired | Your session ended. Sign in again to continue. | Sign in again |\n| PERM | PERM_FORBIDDEN | Action not permitted | Your account does not have permission to perform this action. | Review permissions |\n| CONTENT | CONTENT_VERSION_CONFLICT | Edit conflict detected | Another edit was saved while you were editing. Review the latest version. | Review and resolve |\n| UPLOAD | UPLOAD_TRANSIENT_FAILURE | Upload interrupted | The upload was interrupted. You can retry safely. | Retry upload |\n| VALIDATION | VALIDATION_FAILED | Needs correction | Some required fields are missing or invalid. Review the highlighted issues. | Fix and resubmit |\n| RATE_LIMIT | RATE_LIMIT_EXCEEDED | Too many requests | You’ve reached the limit. Try again later. | Try again after retryAfter |\n| SPAM | SPAM_SUSPECTED | Posting temporarily limited | Unusual activity detected. Posting is limited for a short time. | Follow instructions or appeal |\n| INTEGRATION | INTEGRATION_PROVIDER_UNAVAILABLE | Provider unavailable | A login provider is temporarily unavailable. Try another method. | Try another method |\n| NOTIFICATION | NOTIFICATION_DELIVERY_FAILED | Email not sent | We could not send a verification email. Try again or check spam. | Resend email |\n| SYSTEM | SYSTEM_MAINTENANCE_ACTIVE | Maintenance in progress | Some features are unavailable during scheduled maintenance. | Try again after window |\n| DATA | DATA_DUPLICATE_SUBMISSION | Duplicate submission | It looks like this was already submitted. | View previous result |\n\n## 16. Success Criteria and Monitoring (Business-Level)\n- THE pol-econ-board service SHALL achieve ≥ 99% of synchronous error displays within 1 second, measured at the client boundary.\n- THE pol-econ-board service SHALL include supportId in 100% of ERROR/CRITICAL cases and maintain auditable logs.\n- THE pol-econ-board service SHALL ensure that 95% of transient upload failures succeed within 3 total retries.\n- THE pol-econ-board service SHALL provide retryAfter for 100% of rate limit responses and for planned maintenance windows.\n- THE pol-econ-board service SHALL publish monthly summaries for moderation reversals in transparency logs.\n\n## 17. Glossary (Business Terms)\n- supportId: User-visible opaque identifier used to correlate an incident with audit logs.\n- retryAfter: User-understandable indicator for when a retry is allowed or expected.\n- Idempotent processing: Repeating the same user action does not create additional side effects.\n- Severity: Business impact classification guiding priority and user communications.\n- Partial completion: A result where some sub-steps succeed and others are deferred or failed, communicated clearly to the user.\n\n## 18. Additional EARS Requirements by Area (Comprehensive)\n\n### 18.1 Messaging and Localization\n- THE pol-econ-board service SHALL ensure messages are written at a reading level accessible to the general public and avoid legal jargon except where mandated.\n- WHERE localization is available for a language, THE pol-econ-board service SHALL deliver messages in that language with placeholders correctly substituted.\n- IF message rendering fails, THEN THE pol-econ-board service SHALL fall back to a default language and preserve the supportId.\n\n### 18.2 Logging and Privacy\n- THE pol-econ-board service SHALL log sufficient context to diagnose user-visible errors while redacting personal data that is not necessary for diagnosis.\n- WHERE privacy regulations require minimization, THE pol-econ-board service SHALL avoid logging content bodies for private messages and log only metadata sufficient for audit.\n\n### 18.3 Retries and Backoff (Business Policy)\n- THE pol-econ-board service SHALL cap automated retries to prevent cascading failures and user confusion, not exceeding 3 attempts within 2 minutes for content saves and uploads.\n- THE pol-econ-board service SHALL surface retry exhaustion clearly and provide a definitive next step.\n\n### 18.4 Accessibility and Inclusivity\n- THE pol-econ-board service SHALL avoid using color-only or icon-only indications for errors.\n- THE pol-econ-board service SHALL include concise text alternatives for all alerts.\n\n## 19. Global Error Handling Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"User Initiated Action\"\n    A[\"User Action\"] --> B[\"Validate Input\"]\n    B --> C{\"Valid?\"}\n    C -->|\"No\"| D[\"Return VALIDATION_FAILED\"]\n    C -->|\"Yes\"| E[\"Process Request\"]\n  end\n\n  subgraph \"Error Detection\"\n    E --> F{\"Transient Failure?\"}\n    F -->|\"Yes\"| G[\"Retry with Backoff(≤3)\"]\n    F -->|\"No\"| H{\"Rate Limit?\"}\n    H -->|\"Yes\"| I[\"Return RATE_LIMIT_EXCEEDED with retryAfter\"]\n    H -->|\"No\"| J{\"Permission?\"}\n    J -->|\"Denied\"| K[\"Return PERM_FORBIDDEN\"]\n    J -->|\"Allowed\"| L{\"Integration Issue?\"}\n    L -->|\"Yes\"| M[\"Return INTEGRATION_PROVIDER_UNAVAILABLE\"]\n    L -->|\"No\"| N{\"System Incident?\"}\n    N -->|\"Yes\"| O[\"Return SYSTEM_* Notice\"]\n    N -->|\"No\"| P[\"Return Specific Error Code\"]\n  end\n\n  subgraph \"User Guidance\"\n    P --> Q[\"Attach userAction & supportId\"]\n    D --> Q\n    I --> Q\n    K --> Q\n    M --> Q\n    O --> Q\n  end\n```\n\n## 20. Rate Limit Handling Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Request Handling\"\n    A[\"User Action\"] --> B[\"Check Rate Quota\"]\n    B --> C{\"Exceeded?\"}\n    C -->|\"No\"| D[\"Proceed\"]\n    C -->|\"Yes\"| E[\"Return RATE_LIMIT_EXCEEDED\"]\n  end\n  E --> F[\"Show Retry Time(retryAfter)\"]\n  F --> G{\"Challenge Allowed?\"}\n  G -->|\"Yes\"| H[\"Present CHALLENGE_REQUIRED\"]\n  G -->|\"No\"| I[\"Wait Cooldown\"]\n  H --> J{\"Challenge Passed?\"}\n  J -->|\"Yes\"| D\n  J -->|\"No\"| I\n```\n\n---\n\nBusiness requirements only. All technical implementation decisions, including architecture, APIs, and database design, are under the full autonomy of the development team. Scope is limited to defining user-visible behaviors, rules, and recovery paths for error scenarios in pol-econ-board.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:22:57.257Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeReview","file":{"reason":"핵심 기능을 업무 관점으로 완전·명확하게 규정하여 개발·QA 기준으로 사용하기 위함.","filename":"04-pol-econ-board-functional-requirements.md","documentType":"requirement","outline":["게시글 관리(작성/수정/삭제/버전)","댓글/대댓글/멘션","카테고리·태그·주제 팔로우","투표/리액션/추천","북마크/읽음 상태/저장","검색/정렬/필터","신고/차단 및 자동화 규칙","초안/검토/발행 워크플로","공지/고정글/특집 큐레이션 연계","피드/타임라인/구독","알림 트리거 연결","레이트리밋/이용제한 정책","접근성/다국어(비즈니스 관점)","수용 기준 및 예외 사항"],"audience":"development team","keyQuestions":["사용자가 수행할 수 있는 모든 업무 기능은 무엇이며 제약은 무엇인가","각 기능의 입력 검증/처리 로직/출력 기대치는 무엇인가","성능·보안·감사 요구와의 연계는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","06-pol-econ-board-user-flows.md","07-pol-econ-board-community-governance-and-moderation.md","11-pol-econ-board-notifications-and-communications.md"],"constraints":["EARS 형식으로 상세 요구사항 기술","성능 기대치(사용자 체감 기준) 포함","UI/설계/기술 구현 세부 금지"],"content":"# pol-econ-board Functional Requirements\n\nThis document defines the complete, business-level functional requirements of the pol-econ-board service for development and QA usage. It specifies WHAT the system shall do in measurable, testable terms using EARS format where applicable. It intentionally excludes technical implementation details such as APIs, database schemas, and infrastructure design. Developers retain full autonomy on how to implement these requirements.\n\nFor authentication, authorization, and role details, align with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md). For process visualizations, see complementary flows in the [User Flows Guide](./06-pol-econ-board-user-flows.md). For moderation standards and sanctions, adhere to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md). For messaging specifics, align triggers in this document with the [Notifications and Communications Standard](./11-pol-econ-board-notifications-and-communications.md).\n\n## 1) Purpose and Scope\n- Define the full set of functional capabilities required to operate a moderated, expertise-forward political and economic discussion platform.\n- Establish business rules, validation, processing logic, outputs, performance expectations, error handling, and role-based access constraints.\n- Cover member-generated content, expert contributions, editorial curation, moderation workflows, personalization, search, and notifications.\n\n## 2) Terminology and Global Conventions\n- Timezone: All business time windows and SLAs are expressed in Asia/Seoul (KST) by default; user-facing times SHALL respect the user’s configured local timezone where preferences exist.\n- Counting windows: Unless otherwise stated, rate-limits use rolling 60-minute windows for per-hour metrics and rolling 24-hour windows for daily metrics.\n- Content policy baseline: All content requirements here operate under and defer to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md).\n- Performance baseline: Unless specified otherwise, simple actions (create/edit/delete/like/bookmark/follow) SHALL complete within 2 seconds for the user; discovery actions (search/filter/sort) SHALL return within 1 second for common queries and within 3 seconds for complex queries on typical load.\n- Draft vs. published: “Draft” is private to its author (and to reviewers where applicable). “Published” is visible per visibility rules. “Hidden” indicates system- or moderator-suppressed visibility.\n- Version: Each published edit creates an immutable version record that can be viewed in history comparisons.\n- Visibility levels (business): public; limited (followers or invited audiences where configured); staff-only (moderators/editors/admins).\n\n## 3) Role Context (Business Perspective)\n- member: May create and manage own posts and comments, react, follow, bookmark, report, and block. Subject to rate-limits and community policy.\n- expert: All member privileges, plus expert badge display, expert-only topic proposals, long-form research/insight posts, expert Q&A participation, and expert recommendation signals.\n- moderator: Reviews reports, hides/deletes content per policy, recommends sanctions, manages dispute resolution, and maintains transparency logs.\n- editor: Curates categories, manages featured content, announcements, and pins; collaborates with moderators on policy violations.\n- admin: Full oversight, role management, policy/configuration, legal requests workflows, and service-level metrics.\n\nRole-based constraints for each feature are specified within the relevant sections below. The complete role model and JWT principles are defined in the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n\n---\n\n## 4) Functional Requirements (EARS)\n\n### 4.1) Post Management (Create/Edit/Delete/Version)\nBusiness fields for a Post (business-level, not schema):\n- Title (4–120 characters), Body (min 20 characters for published posts), Attachments (0–10 files; each ≤ 25 MB; allowed types: image, PDF, CSV; videos only when explicitly enabled), Category (one), Tags (0–5), Visibility, Source links (0–10, valid URL), Content warnings (0–3 from predefined list), Estimated reading time (auto-calculated), Language (e.g., Korean, English).\n- Prohibited: doxxing, hate speech, incitement, spam, unsubstantiated claims presented as facts without sources in “analysis/research” contexts (policy-specific definitions in governance document).\n\nValidation and creation\n- WHEN a user submits a new post as draft, THE system SHALL validate title length 4–120 characters, body length ≥ 20 characters, and allowed attachment count/size/types.\n- WHEN a user saves a draft, THE system SHALL persist the draft within 2 seconds and return the draft identifier and last-saved timestamp.\n- WHEN a user attempts to publish, THE system SHALL require Category and enforce at least one source link for “analysis/research” post types.\n- WHERE the user role is member, THE system SHALL allow publishing up to 10 posts per 24 hours.\n- WHERE the user role is expert, THE system SHALL allow publishing up to 20 posts per 24 hours and permit “long-form” flag up to 20,000 characters body.\n- WHERE the user role is moderator or editor, THE system SHALL allow internal/staff-only posts without public visibility for operational notices.\n\nEditing and versioning\n- WHEN an author edits a published post, THE system SHALL create a new immutable version and retain prior versions for comparison.\n- WHERE edits occur within 10 minutes of publication, THE system SHALL allow “silent update” without feed bump; after 10 minutes, feed bump SHALL occur unless staff marks “no-bump”.\n- WHILE a post is draft, THE system SHALL allow unlimited edits and autosave at least every 30 seconds of active typing.\n\nDeletion and restoration\n- WHEN an author deletes own post, THE system SHALL soft-delete it and hide from public while retaining for 30 days for potential restoration.\n- IF a soft-deleted post is restored within 30 days, THEN THE system SHALL reinstate its visibility and maintain version history continuity.\n- IF a post is under active investigation (flagged), THEN THE system SHALL prevent author deletion until moderation completes or staff overrides.\n\nIntegrity and policy checks\n- WHEN a post contains more than 3 external links, THE system SHALL flag it for automated spam review without blocking publication unless thresholds are exceeded (see §4.7).\n- WHERE content includes media attachments, THE system SHALL require a text alternative (caption/alt-text) per accessibility requirements (§4.13).\n- IF a post violates rate-limits or is under sanction, THEN THE system SHALL deny publishing with a clear reason and next eligible time.\n\nOutputs\n- THE system SHALL return identifiers, timestamps (created/updated/published), current visibility, version number, and moderation status upon create/edit/publish actions.\n\nPerformance\n- THE post save or publish operation SHALL complete within 2 seconds under nominal load for text-only posts; within 5 seconds when up to 10 attachments are included.\n\n### 4.2) Comments, Replies, Mentions\nScope\n- Comments support one level of replies (reply-to-comment). Mentions use “@handle” of users with public mentionability.\n\nValidation and creation\n- WHEN a user submits a comment, THE system SHALL validate length 1–5,000 characters and disallow empty or media-only comments.\n- WHERE the role is member or expert, THE system SHALL allow up to 60 comments per 24 hours.\n- WHEN a reply is created, THE system SHALL associate it with the parent comment and the post thread.\n- WHEN a user mentions another user, THE system SHALL validate that the target user permits mentions and is not blocked by the author.\n\nEditing and deletion\n- WHERE the author is the comment owner, THE system SHALL allow edits for 15 minutes with edit marker displayed thereafter.\n- WHEN the author deletes a comment, THE system SHALL soft-delete and replace with a placeholder indicating removal.\n\nAbuse and policy\n- IF a comment contains prohibited content as defined by policy, THEN THE system SHALL route it to moderation queues and may auto-hide according to §4.7 thresholds.\n\nNotifications\n- WHEN a user is mentioned, THE system SHALL enqueue a mention notification per preferences (§4.11).\n\nPerformance\n- THE comment create/edit/delete operation SHALL complete within 1 second for text-only content.\n\n### 4.3) Categories, Tags, Topic Follow\nCategories and tags\n- WHEN a post is published, THE system SHALL require exactly one Category from the controlled list managed by editors.\n- WHERE tags are provided, THE system SHALL allow up to 5 free-form tags validated against profanity/ban lists.\n\nTopic follow\n- WHEN a user follows a topic (category/tag or editor-curated topic), THE system SHALL add it to the user’s subscription list.\n- WHERE a user follows a topic, THE system SHALL prioritize content from that topic in personalized feeds (§4.10).\n- IF a followed topic is deprecated, THEN THE system SHALL notify users and suggest alternatives.\n\n### 4.4) Votes, Reactions, Recommendations\nVote and reaction types\n- Votes support “Agree” and “Disagree”. Reactions support “Insightful”, “Question”, “Source requested”, and “Appreciation”.\n\nConstraints\n- WHERE a user is authenticated, THE system SHALL allow one vote per post per user and allow updating the choice; reactions are one per type per user per post.\n- WHERE the actor is expert, THE system SHALL allow an “Expert Recommend” marker distinct from general reactions.\n- IF a post is archived or hidden, THEN THE system SHALL block new votes/reactions while preserving counts.\n\nOutputs and display rules (business)\n- WHEN counts are requested for display, THE system SHALL provide totals and expert-specific counts to enable separate labeling.\n\nPerformance\n- THE system SHALL record a vote or reaction within 1 second and reflect updated counts within 2 seconds in dependent views.\n\n### 4.5) Bookmarks, Read State, Saved Items\n- WHEN a user bookmarks a post, THE system SHALL store it in the user’s bookmarks and allow foldering into up to 20 named collections.\n- WHILE a user scrolls through a post, THE system SHALL track read progress and mark as “read” when ≥ 80% of body is viewed.\n- WHEN a user saves a post for offline reading (business concept), THE system SHALL store a snapshot of the text and metadata for later retrieval; media may be excluded depending on rights.\n- WHERE the user requests export of saved items, THE system SHALL prepare an export within 10 seconds for up to 100 items.\n\n### 4.6) Search, Sort, Filter\nInputs and validation\n- WHEN a user searches, THE system SHALL accept queries up to 200 characters, with logical operators AND/OR and quoted phrases.\n- WHERE filters are applied, THE system SHALL support Category, Tags, Author, Role (expert only), Date range, Content type (post/comment), Minimum reaction score, and Moderation status (staff roles only).\n- WHERE sorting is applied, THE system SHALL support Newest, Oldest, Most reacted, Most agreed.\n\nProcessing\n- WHEN a search is executed, THE system SHALL return results with total matches, paginated in pages of 20 items for posts and 50 items for comments.\n\nPerformance\n- THE system SHALL return common query results within 1 second and complex multi-filter queries within 3 seconds under typical load.\n\n### 4.7) Reporting, Blocking, and Automation Rules\nReporting\n- WHEN a user reports content, THE system SHALL require a reason category (e.g., Misinformation, Harassment, Hate, Spam, Off-topic, Illegal) and an optional note up to 500 characters.\n- WHERE a single content item receives ≥ 5 reports within 1 hour, THE system SHALL flag it for expedited review.\n\nAuto-hide thresholds\n- WHERE reports >= 20 from distinct users within 3 hours OR a weighted score threshold is exceeded (expert reports count as 2), THE system SHALL auto-hide the content pending review.\n- IF auto-hide is triggered, THEN THE system SHALL notify the author and provide an appeal link to the dispute workflow.\n\nBlocking\n- WHEN a user blocks another user, THE system SHALL hide the blocker’s view of the blockee’s content and prevent mentions and direct interactions between them.\n\nStaff workflows\n- WHEN content is auto-hidden or reported beyond thresholds, THE system SHALL place it into the moderation queue with metadata: report counts by category, timestamps, involved users, and preliminary risk assessment.\n\nRate-limits on reporting\n- WHERE the user files reports, THE system SHALL limit to 30 reports per 24 hours.\n\n### 4.8) Draft, Review, Publish Workflow\nStates\n- Draft → Submitted for Review (optional) → Published → Updated (versioned) → Archived/Hidden.\n\nRules\n- WHERE the author is expert and the post is marked as “long-form research”, THE system SHALL require either editor review or source completeness check before publication.\n- WHERE the post includes a “content warning”, THE system SHALL display a preface and require user confirmation before viewing full content.\n- WHEN an editor rejects a submission, THE system SHALL return reasons and allow resubmission after corrections.\n- WHEN a post is archived, THE system SHALL remove it from feeds while retaining searchability for staff and author.\n\nSLA\n- WHERE review is required, THE system SHALL complete first review within 24 hours under normal operations.\n\n### 4.9) Announcements, Pinned Posts, Special Curation\n- WHERE the actor is editor or admin, THE system SHALL allow creating “Announcement” posts visible to all users.\n- WHEN a post is pinned in a section by an editor, THE system SHALL keep it at the top of that section for a configurable duration (1–14 days).\n- WHERE a post is featured in a curated collection, THE system SHALL annotate it with the collection label and ensure it appears in that collection’s feed.\n- IF a pinned item expires, THEN THE system SHALL unpin it automatically and record the unpin event in audit logs.\n\n### 4.10) Feeds, Timelines, Subscriptions\nPersonalization\n- WHERE a user follows topics or authors, THE system SHALL prioritize their content in the user’s home feed while ensuring at least 30% diversity from non-followed but relevant topics.\n- WHERE the actor is unauthenticated, THE system SHALL show a general feed based on overall quality and recency.\n\nOrdering and freshness\n- WHEN building feeds, THE system SHALL prefer recency within the past 72 hours and decay older items unless they are featured or actively discussed.\n\nIntegrity\n- IF a post is hidden or under sanction, THEN THE system SHALL exclude it from public feeds while staff views remain available.\n\nPagination\n- THE system SHALL deliver feeds in pages of 20 posts, supporting infinite continuation from the user perspective.\n\nPerformance\n- THE system SHALL generate the first page of a personalized feed within 1.5 seconds under typical load.\n\n### 4.11) Notification Triggers Linkage (Business Events)\n- WHEN a user is mentioned in a post or comment, THE system SHALL trigger a “mention” notification per user preference.\n- WHEN a followed author publishes, THE system SHALL trigger a “new post by followed author” notification subject to frequency limits (max 3 per author per day).\n- WHEN a followed topic has new curated content, THE system SHALL trigger a “topic update” notification; batched in digests where configured.\n- WHEN a user’s post is reported and auto-hidden, THE system SHALL send an “action required” notification with appeal information.\n- WHEN an editor pins or features a user’s post, THE system SHALL notify the author of the feature placement.\n\nNotification delivery channels and templates must follow the [Notifications and Communications Standard](./11-pol-econ-board-notifications-and-communications.md).\n\n### 4.12) Rate-Limiting and Usage Restrictions\nPer-user limits (default)\n- WHERE the role is member, THE system SHALL enforce: up to 10 posts/day; 60 comments/day; 300 reactions/day; 30 reports/day.\n- WHERE the role is expert, THE system SHALL enforce: up to 20 posts/day; 100 comments/day; 500 reactions/day; 50 reports/day.\n- WHERE the role is newly registered (< 7 days), THE system SHALL halve the above limits.\n\nBurst control\n- WHEN a user performs more than 10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds.\n\nAbuse escalations\n- IF repeated rate-limit violations occur 3 times within 24 hours, THEN THE system SHALL place the account under temporary restriction for 24 hours on posting and commenting.\n\n### 4.13) Accessibility and Multilingual (Business)\nAccessibility\n- WHERE content includes images, THE system SHALL require descriptive alt-text 20–250 characters.\n- WHERE content includes audio/video, THE system SHALL require a transcript or captions before publication unless an editor grants an exception for breaking news with a 48-hour remediation window.\n- WHEN presenting color-coded badges or signals in business logic, THE system SHALL include textual equivalents.\n\nLanguage\n- WHERE a post is created, THE system SHALL store its language and allow filtering by language in search and feeds.\n- WHERE multilingual content is supported, THE system SHALL link translations of the same post and allow users to prefer languages in feed preferences.\n\nCross-border periods\n- WHERE sensitive political periods (e.g., elections) are flagged in policy, THE system SHALL apply stricter review rules per the governance document and annotate affected posts with compliance tags.\n\n---\n\n## 5) Process Diagrams (Business Flows)\n\nDraft → Review → Publish\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Write Content\"]\n    B --> C[\"Save Draft\"]\n    C --> D{\"Requires Review?\"}\n  end\n  subgraph \"Review\"\n    E[\"Submit For Review\"] --> F[\"Editor Checks Sources\"]\n    F --> G{\"Approve?\"}\n  end\n  subgraph \"Publication\"\n    H[\"Publish\"] --> I[\"Create Version Record\"]\n    I --> J[\"Distribute To Feeds\"]\n  end\n  D -->|\"Yes\"| E\n  D -->|\"No\"| H\n  G -->|\"Yes\"| H\n  G -->|\"No\"| K[\"Reject With Reasons\"]\n  K --> C\n```\n\nReport → Moderation\n```mermaid\ngraph LR\n  A[\"User Reports Content\"] --> B[\"Collect Reasons\"]\n  B --> C{\"Threshold Met?\"}\n  C -->|\"No\"| D[\"Queue Standard Review\"]\n  C -->|\"Yes\"| E[\"Auto-Hide Content\"]\n  E --> F[\"Notify Author\"]\n  D --> G[\"Moderator Review\"]\n  F --> G\n  G --> H{\"Policy Violation?\"}\n  H -->|\"Yes\"| I[\"Apply Sanction\"]\n  H -->|\"No\"| J[\"Restore Content\"]\n  I --> K[\"Transparency Log\"]\n  J --> K\n```\n\n---\n\n## 6) Acceptance Criteria & Exceptions\nAcceptance criteria are testable business outcomes verifying conformance:\n\nGeneral\n- THE system SHALL persist drafts, posts, comments, and reactions with correct ownership and timestamps, visible in subsequent retrievals within expected performance windows.\n- THE system SHALL prevent actions that exceed limits and provide user-facing reasons and next eligible times.\n\nPosts\n- WHEN publishing valid content, THE system SHALL return published status, version number, and visibility. WHEN invalid, errors identify the field and violated rule (length, attachments, policy keyword triggers) in natural language.\n- WHEN editing published posts, THE system SHALL create a new version and maintain access to prior versions.\n\nComments\n- WHEN submitting valid comments, THE system SHALL append to the thread, increment counts, and notify mentioned users according to preferences.\n\nSearch and feeds\n- WHEN executing typical searches and feed builds, THE system SHALL meet performance targets and return correct ordering and filtering.\n\nReporting and moderation\n- WHEN report thresholds are crossed, THE system SHALL auto-hide content, notify the author, and enqueue for review with required metadata.\n\nNotifications\n- WHEN eligible events occur, THE system SHALL enqueue the corresponding notification respecting opt-in status and frequency limits.\n\nExceptions and overrides\n- WHERE legal hold or compliance requires preservation, THE system SHALL prevent deletion and annotate the hold.\n- WHERE staff override is documented, THE system SHALL record the actor, reason, and timestamp in audit logs.\n- WHERE service-wide incidents necessitate temporary relaxation of limits (e.g., breaking elections news), THE system SHALL allow configured exceptions for a defined window and record the change.\n\n---\n\nThis document provides business requirements only. All technical implementation decisions, including architecture, APIs, and database design, belong to the development team. The content specifies WHAT the pol-econ-board system must do from a business perspective and does not prescribe HOW to build it."},"plan":"1) Title and high-level context of pol-econ-board functional requirements without meta commentary\n2) References to related documents (roles/auth, user flows, governance, notifications) using descriptive links\n3) Purpose and scope, terminology and global conventions\n4) Role context in business terms\n5) Functional requirements by capability area (EARS):\n   - Post management (create/edit/delete/version) with validation, policy checks, outputs, performance\n   - Comments/replies/mentions with limits, editing, notifications, performance\n   - Categories/tags/topic follow with deprecation behavior\n   - Votes/reactions/recommendations with constraints and outputs\n   - Bookmarks/read state/saved items including exports\n   - Search/sort/filter with pagination and performance\n   - Reporting/blocking/automation thresholds and workflows\n   - Draft/review/publish workflow and SLAs\n   - Announcements/pins/special curation\n   - Feeds/timelines/subscriptions (personalization, ordering, integrity, pagination, performance)\n   - Notification trigger linkage to the notifications standard\n   - Rate-limiting and usage restrictions (per-role/day; burst control; abuse escalation)\n   - Accessibility and multilingual business requirements\n6) Business flow diagrams (Mermaid) for authoring/publish and report→moderation\n7) Acceptance criteria and exceptions including audit/logging, legal holds, staff overrides\n8) Final statement that content is business requirements only and developers own implementation decisions (without saying “This document…”)\n","review":"- Use EARS for all applicable requirements (WHEN/WHILE/IF/THEN/WHERE/THE/SHALL), written in en-US natural language for descriptions\n- Prohibit technical implementation details (no API specs, database schemas, or infrastructure details)\n- Ensure completeness across all outline areas: posts, comments, categorization/tags/follows, votes/reactions, bookmarks/read-state/saved, search/sort/filter, reporting/blocking/automation, draft-review-publish workflow, announcements/pins/curation, feeds/timelines/subscriptions, notification trigger linkage, rate limiting/usage restrictions, accessibility/multilingual, acceptance criteria and exceptions\n- Include performance expectations in user-experience terms and measurable limits\n- Maintain business rules and validation logic for inputs and outputs in natural language, with role-based constraints\n- Mermaid diagrams must quote all labels with double quotes and use correct arrow syntax; no spaces between brackets/braces and quotes\n- Link to related documents using descriptive, human-readable titles with relative paths\n- No meta commentary like “This document…”, write directly as the content\n- Minimum length target > 5,000 characters; expand with concrete rules, edge cases, and acceptance criteria\n- Explicit alignment with roles and auth requirements; avoid duplicating API/DB details\n- Ensure all EARS requirements are specific, testable, and unambiguous","content":"# pol-econ-board Functional Requirements\n\nComplete, business-level functional requirements for the pol-econ-board service written in EARS where applicable. Content focuses on WHAT the system must do and excludes architecture, API shapes, database schemas, and infrastructure details. Developers retain full autonomy over technical implementation.\n\nAlign authentication, authorization, and roles with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md). Refer to flows in the [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md). Apply governance and sanctions from the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md). Connect business events to delivery rules in the [Notifications and Communications Requirements](./11-pol-econ-board-notifications-and-communications.md).\n\n## 1) Purpose and Scope\n- Define the full set of functional capabilities required for a moderated, expertise-forward political and economic discussion platform.\n- Establish business rules, input validation, processing logic, outputs, performance expectations, error handling, and role-based constraints.\n- Cover member-generated content, expert contributions, editorial curation, moderation workflows, personalization, search, subscriptions, and notification triggers.\n\n## 2) Terminology and Global Conventions\n- Timezone: Business time windows and SLAs use Asia/Seoul (KST). User-facing times SHALL respect the user’s configured local timezone where preferences exist.\n- Counting windows: Unless stated otherwise, rate limits use rolling 60-minute windows for per-hour metrics and rolling 24-hour windows for daily metrics.\n- Content policy baseline: Content behaviors defer to the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- Performance baseline: Unless specified, simple actions (create/edit/delete/like/bookmark/follow) SHALL complete within 2 seconds for the user; discovery actions (search/filter/sort) SHALL respond within 1 second for common queries and within 3 seconds for complex queries under typical load.\n- Content states: Draft (private to author and reviewers where applicable); Published (visible per visibility rules); Hidden (system- or moderator-suppressed); Soft-Hidden (limited visibility, e.g., author and direct participants only); Archived (excluded from default feeds but still accessible as defined herein).\n- Versioning: Each published edit creates an immutable version that can be viewed in comparisons.\n- Visibility levels (business): Public; Limited (followers or invited audiences where configured); Staff-only (moderators/editors/admins).\n\n## 3) Role Context (Business Perspective)\n- member: Create and manage own posts and comments; react, follow, bookmark, report, and block; subject to rate limits and policy.\n- expert: All member privileges plus expert badge, expert-only topic proposals, long-form research/insight posts, expert Q&A participation, expert recommendation signals.\n- moderator: Review reports, hide/delete content per policy, request sanctions, manage disputes, maintain transparency logs.\n- editor: Curate categories and tags, manage featured content, announcements, and pins; collaborate with moderators on policy issues.\n- admin: Oversight of roles, policies, legal requests, and service health.\n\nRole-based constraints per feature are embedded in the sections below. The full role model and JWT principles reside in the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n\n---\n\n## 4) Functional Requirements (EARS)\n\n### 4.1) Post Management (Create/Edit/Delete/Version)\nBusiness fields (business-level, not schema):\n- Title (4–120 characters)\n- Body (≥ 20 characters for published posts; drafts may be shorter but must be non-empty)\n- Attachments (0–10 files; each ≤ 25 MB; types: image, PDF, CSV; videos only when explicitly enabled)\n- Category (exactly one controlled value)\n- Tags (0–5; profanity/ban list filtered; each 1–30 characters)\n- Visibility (public/limited/staff-only)\n- Source links (0–10; valid URLs)\n- Content warnings (0–3 from predefined list)\n- Estimated reading time (auto-calculated)\n- Language (e.g., Korean, English)\n\nValidation and creation\n- WHEN a user submits a new post as draft, THE system SHALL validate title length 4–120 characters, body length ≥ 1 character for drafts and ≥ 20 characters for publication, and allowed attachment count/size/types.\n- WHEN a user saves a draft, THE system SHALL persist within 2 seconds and return the draft identifier and last-saved timestamp.\n- WHEN a user attempts to publish, THE system SHALL require Category and enforce at least one source link for “analysis/research” post types.\n- WHERE the user role is member, THE system SHALL allow publishing up to 10 posts per 24 hours.\n- WHERE the user role is expert, THE system SHALL allow publishing up to 20 posts per 24 hours and permit “long-form” flag up to 20,000 characters body.\n- WHERE the user role is moderator or editor, THE system SHALL allow staff-only posts without public visibility for operational notices.\n\nEditing and versioning\n- WHEN an author edits a published post, THE system SHALL create a new immutable version and retain prior versions for comparison.\n- WHERE edits occur within 10 minutes of publication, THE system SHALL allow “silent update” without feed bump; after 10 minutes, feed bump SHALL occur unless staff marks “no-bump”.\n- WHILE a post is draft, THE system SHALL allow unlimited edits and autosave at least every 30 seconds of active typing.\n\nDeletion and restoration\n- WHEN an author deletes own post, THE system SHALL soft-delete and hide from public while retaining for 30 days for potential restoration.\n- IF a soft-deleted post is restored within 30 days, THEN THE system SHALL reinstate its visibility and maintain version history continuity.\n- IF a post is under active investigation (flagged), THEN THE system SHALL prevent author deletion until moderation completes or staff override is recorded.\n\nIntegrity and policy checks\n- WHEN a post contains more than 3 external links, THE system SHALL flag it for automated spam review without blocking publication unless thresholds are exceeded (see §4.7).\n- WHERE content includes media attachments, THE system SHALL require a text alternative (caption/alt-text) per accessibility requirements (§4.13).\n- IF a post violates rate limits or is under sanction, THEN THE system SHALL deny publishing with a clear reason and next eligible time.\n\nOutputs\n- THE system SHALL return identifiers, timestamps (created/updated/published), current visibility, version number, moderation status, and derived signals (e.g., estimated reading time) upon create/edit/publish.\n\nPerformance\n- THE post save or publish operation SHALL complete within 2 seconds under nominal load for text-only posts; within 5 seconds when up to 10 attachments are included.\n\nEdge constraints\n- WHERE mentions in the post body exceed 20 unique users, THE system SHALL block publication and instruct the author to reduce mass-mentions per anti-abuse policy.\n- WHERE tags include banned terms, THE system SHALL reject publication with a policy-aligned reason code.\n\n### 4.2) Comments, Replies, Mentions\nScope\n- Comments support one level of replies (reply-to-comment). Mentions use “@handle” of users with public mentionability.\n\nValidation and creation\n- WHEN a user submits a comment, THE system SHALL validate length 1–5,000 characters and disallow empty or media-only comments.\n- WHERE the role is member or expert, THE system SHALL allow up to 60 comments per 24 hours.\n- WHEN a reply is created, THE system SHALL associate it with the parent comment and the post thread.\n- WHEN a user mentions another user, THE system SHALL validate mention permissions and block interactions with users who are blocked by or have blocked the author.\n- WHERE a single comment attempts to mention more than 10 distinct users, THE system SHALL block submission and return a mass-mention limit message.\n\nEditing and deletion\n- WHERE the author is the comment owner, THE system SHALL allow edits for 15 minutes with an edit marker displayed thereafter.\n- WHEN the author deletes a comment, THE system SHALL soft-delete and replace with a placeholder indicating removal.\n\nAbuse and policy\n- IF a comment triggers prohibited content rules, THEN THE system SHALL route it to moderation queues and may auto-hide according to §4.7 thresholds.\n\nNotifications\n- WHEN a user is mentioned, THE system SHALL enqueue a mention notification per preferences (§4.11).\n\nOutputs and performance\n- THE system SHALL return identifiers, parent linkage, timestamps, mention list, and moderation status for created comments.\n- THE comment create/edit/delete operation SHALL complete within 1 second for text-only content.\n\n### 4.3) Categories, Tags, Topic Follow\nCategories and tags\n- WHEN a post is published, THE system SHALL require exactly one Category from the controlled list managed by editors.\n- WHERE tags are provided, THE system SHALL allow up to 5 free-form tags validated against profanity/ban lists and length 1–30 characters.\n- WHEN editors modify category definitions, THE system SHALL preserve historical category labels on existing posts while applying new taxonomy prospectively.\n\nTopic follow\n- WHEN a user follows a topic (category/tag or editor-curated topic), THE system SHALL add it to the user’s subscription list.\n- WHERE a user follows a topic, THE system SHALL prioritize that topic in personalized feeds (§4.10).\n- IF a followed topic is deprecated, THEN THE system SHALL notify followers and suggest alternatives; migrations SHALL preserve user preferences with user-confirmable mapping.\n\n### 4.4) Votes, Reactions, Recommendations\nVote and reaction types\n- Votes support “Agree” and “Disagree”. Reactions support “Insightful”, “Question”, “Source requested”, and “Appreciation”.\n\nConstraints\n- WHERE a user is authenticated, THE system SHALL allow one vote per post per user with ability to change the choice; reactions are one per type per user per post.\n- WHERE the actor is expert, THE system SHALL allow an “Expert Recommend” marker distinct from general reactions.\n- IF a post is archived or hidden, THEN THE system SHALL block new votes/reactions while preserving counts.\n\nOutputs and display rules (business)\n- WHEN counts are requested for display, THE system SHALL provide totals and expert-specific counts to enable separate labeling.\n- WHILE reaction/vote updates propagate, THE system SHALL maintain eventual consistency with staleness ≤ 3 seconds under normal load.\n\nPerformance\n- THE system SHALL record a vote or reaction within 1 second and reflect updated counts within 2 seconds in dependent views.\n\nAnti-abuse\n- WHERE a single account submits >10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds (§4.12).\n\n### 4.5) Bookmarks, Read State, Saved Items\n- WHEN a user bookmarks a post, THE system SHALL store it in the user’s bookmarks and allow foldering into up to 20 named collections (collection name 1–40 characters, profanity filtered).\n- WHILE a user scrolls through a post, THE system SHALL track read progress and mark as “read” when ≥ 80% of body is viewed or ≥ 10 seconds of engaged reading elapse, whichever comes later.\n- WHEN a user saves a post for offline reading (business concept), THE system SHALL store a snapshot of the text and metadata for later retrieval; media may be excluded depending on rights.\n- WHERE the user requests export of saved items, THE system SHALL prepare an export within 10 seconds for up to 100 items and provide a durable link or retrieval reference.\n- IF a bookmarked item is deleted or becomes private, THEN THE system SHALL retain a placeholder with permissible metadata and indicate unavailability.\n\n### 4.6) Search, Sort, Filter\nInputs and validation\n- WHEN a user searches, THE system SHALL accept queries up to 200 characters, with logical operators AND/OR and quoted phrases.\n- WHERE filters are applied, THE system SHALL support Category, Tags, Author, Role (expert only), Date range, Content type (post/comment), Minimum reaction score, and Moderation status (staff roles only).\n- WHERE sorting is applied, THE system SHALL support Newest, Oldest, Most reacted, and Most agreed.\n\nProcessing and outputs\n- WHEN a search is executed, THE system SHALL return results with total matches and page data in pages of 20 items for posts and 50 items for comments, including key metadata (title/excerpt/author/category/timestamps/reaction summaries/visibility state as appropriate).\n\nPerformance\n- THE system SHALL return common query results within 1 second and complex multi-filter queries within 3 seconds under typical load.\n\nSafety and integrity\n- IF a query triggers sensitive or election-period rules, THEN THE system SHALL elevate checks per governance policy and annotate affected results with compliance labels where applicable.\n\n### 4.7) Reporting, Blocking, and Automation Rules\nReporting\n- WHEN a user reports content, THE system SHALL require a reason category (e.g., Misinformation, Harassment, Hate, Spam, Off-topic, Illegal) and an optional note up to 500 characters.\n- WHERE a single content item receives ≥ 5 reports within 1 hour, THE system SHALL flag it for expedited review.\n\nAuto-hide thresholds\n- WHERE reports ≥ 20 from distinct users within 3 hours OR a weighted score threshold is exceeded (expert reports count as 2), THE system SHALL auto-hide the content pending review.\n- IF auto-hide is triggered, THEN THE system SHALL notify the author and provide an appeal link to the dispute workflow.\n\nBlocking\n- WHEN a user blocks another user, THE system SHALL hide the blocker’s view of the blockee’s content and prevent mentions and direct interactions between them.\n- WHILE a block is active, THE system SHALL suppress notifications originating from the blocked user to the blocker.\n\nStaff workflows\n- WHEN content is auto-hidden or reported beyond thresholds, THE system SHALL place it into the moderation queue with metadata: report counts by category, timestamps, involved users, and preliminary risk assessment.\n\nRate-limits on reporting\n- WHERE the user files reports, THE system SHALL limit to 30 reports per 24 hours.\n\n### 4.8) Draft, Review, Publish Workflow\nStates\n- Draft → Submitted for Review (optional) → Published → Updated (versioned) → Archived/Hidden.\n\nRules\n- WHERE the author is expert and the post is marked as “long-form research”, THE system SHALL require either editor review or source completeness check before publication.\n- WHERE the post includes a “content warning”, THE system SHALL display a preface and require user confirmation before viewing full content.\n- WHEN an editor rejects a submission, THE system SHALL return reasons and allow resubmission after corrections.\n- WHEN a post is archived, THE system SHALL remove it from feeds while retaining searchability for staff and author.\n\nSLA\n- WHERE review is required, THE system SHALL complete first review within 24 hours under normal operations.\n\n### 4.9) Announcements, Pinned Posts, Special Curation\n- WHERE the actor is editor or admin, THE system SHALL allow creating “Announcement” posts visible to all users.\n- WHEN a post is pinned in a section by an editor, THE system SHALL keep it at the top of that section for a configurable duration (1–14 days).\n- WHERE a post is featured in a curated collection, THE system SHALL annotate it with the collection label and ensure it appears in that collection’s feed.\n- IF a pinned item expires, THEN THE system SHALL unpin it automatically and record the unpin event in audit logs.\n- WHERE editorial quality requires temporary visibility reduction, THE system SHALL allow editors to apply non-policy-based soft-hiding with rationale visible to staff.\n\n### 4.10) Feeds, Timelines, Subscriptions\nPersonalization\n- WHERE a user follows topics or authors, THE system SHALL prioritize their content in the user’s home feed while ensuring at least 30% diversity from non-followed but relevant topics.\n- WHERE the actor is unauthenticated, THE system SHALL show a general feed based on overall quality and recency.\n\nOrdering and freshness\n- WHEN building feeds, THE system SHALL prefer recency within the past 72 hours and decay older items unless they are featured or actively discussed.\n- WHERE duplicate appearances would occur within the same feed page, THE system SHALL deduplicate items.\n\nIntegrity\n- IF a post is hidden or under sanction, THEN THE system SHALL exclude it from public feeds while staff views remain available.\n- WHERE a block or mute exists, THE system SHALL exclude blocked or muted sources from the viewer’s feed composition.\n\nPagination\n- THE system SHALL deliver feeds in pages of 20 posts, supporting infinite continuation from the user perspective.\n\nPerformance\n- THE system SHALL generate the first page of a personalized feed within 1.5 seconds under typical load.\n\n### 4.11) Notification Triggers Linkage (Business Events)\n- WHEN a user is mentioned in a post or comment, THE system SHALL trigger a “mention” notification per user preference.\n- WHEN a followed author publishes, THE system SHALL trigger a “new post by followed author” notification subject to frequency limits (max 3 per author per day).\n- WHEN a followed topic has new curated content, THE system SHALL trigger a “topic update” notification; batched in digests where configured.\n- WHEN a user’s post is reported and auto-hidden, THE system SHALL send an “action required” notification with appeal information.\n- WHEN an editor pins or features a user’s post, THE system SHALL notify the author of the feature placement.\n- WHERE DND or snooze preferences are set, THE system SHALL defer non-transactional notifications accordingly.\n\nDelivery channels and templates must follow the [Notifications and Communications Requirements](./11-pol-econ-board-notifications-and-communications.md).\n\n### 4.12) Rate-Limiting and Usage Restrictions\nPer-user limits (default)\n- WHERE the role is member, THE system SHALL enforce: up to 10 posts/day; 60 comments/day; 300 reactions/day; 30 reports/day.\n- WHERE the role is expert, THE system SHALL enforce: up to 20 posts/day; 100 comments/day; 500 reactions/day; 50 reports/day.\n- WHERE the role is newly registered (< 7 days), THE system SHALL halve the above limits.\n\nBurst control\n- WHEN a user performs more than 10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds.\n- WHEN a user attempts more than 5 post publications within 10 minutes, THE system SHALL delay further publications for 15 minutes and provide the next eligible time.\n\nAbuse escalations\n- IF repeated rate-limit violations occur 3 times within 24 hours, THEN THE system SHALL place the account under temporary restriction for 24 hours on posting and commenting.\n- WHERE automated signals indicate bot-like behavior, THE system SHALL require an interactive challenge before allowing further actions.\n\n### 4.13) Accessibility and Multilingual (Business)\nAccessibility\n- WHERE content includes images, THE system SHALL require descriptive alt-text 20–250 characters.\n- WHERE content includes audio/video, THE system SHALL require a transcript or captions before publication unless an editor grants an exception for breaking news with a 48-hour remediation window.\n- WHEN presenting color-coded badges or signals in business logic, THE system SHALL include textual equivalents.\n- WHERE links are provided, THE system SHALL use meaningful descriptive link text rather than raw URLs.\n\nLanguage\n- WHERE a post is created, THE system SHALL store its language and allow filtering by language in search and feeds.\n- WHERE multilingual content is supported, THE system SHALL link translations of the same post and allow users to prefer languages in feed preferences.\n- IF a preferred language version is unavailable, THEN THE system SHALL present the default language with a notice of available languages.\n\nSensitive periods\n- WHERE election or other sensitive political periods are in effect, THE system SHALL apply stricter review rules per the governance document and annotate affected posts with compliance tags.\n\n---\n\n## 5) Process Diagrams (Business Flows)\n\nDraft → Review → Publish\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Write Content\"]\n    B --> C[\"Save Draft\"]\n    C --> D{\"Requires Review?\"}\n  end\n  subgraph \"Review\"\n    E[\"Submit For Review\"] --> F[\"Editor Checks Sources\"]\n    F --> G{\"Approve?\"}\n  end\n  subgraph \"Publication\"\n    H[\"Publish\"] --> I[\"Create Version Record\"]\n    I --> J[\"Distribute To Feeds\"]\n  end\n  D -->|\"Yes\"| E\n  D -->|\"No\"| H\n  G -->|\"Yes\"| H\n  G -->|\"No\"| K[\"Reject With Reasons\"]\n  K --> C\n```\n\nReport → Moderation\n```mermaid\ngraph LR\n  A[\"User Reports Content\"] --> B[\"Collect Reasons\"]\n  B --> C{\"Threshold Met?\"}\n  C -->|\"No\"| D[\"Queue Standard Review\"]\n  C -->|\"Yes\"| E[\"Auto-Hide Content\"]\n  E --> F[\"Notify Author\"]\n  D --> G[\"Moderator Review\"]\n  F --> G\n  G --> H{\"Policy Violation?\"}\n  H -->|\"Yes\"| I[\"Apply Sanction\"]\n  H -->|\"No\"| J[\"Restore Content\"]\n  I --> K[\"Transparency Log\"]\n  J --> K\n```\n\n---\n\n## 6) Acceptance Criteria & Exceptions\nGeneral\n- THE system SHALL persist drafts, posts, comments, and reactions with correct ownership and timestamps, visible in subsequent retrievals within expected performance windows.\n- THE system SHALL prevent actions that exceed limits and provide user-facing reasons and next eligible times.\n- THE system SHALL create audit entries for staff-driven visibility changes (pin, feature, hide, unhide) including actor role, reason, and timestamp.\n\nPosts\n- WHEN publishing valid content, THE system SHALL return published status, version number, and visibility; WHEN invalid, errors SHALL identify the violated business rule (length, attachments, policy triggers) in natural language.\n- WHEN editing published posts, THE system SHALL create a new version and maintain access to prior versions.\n- IF a post is auto-hidden due to thresholds, THEN THE system SHALL notify the author with reason category and appeal link.\n\nComments\n- WHEN submitting valid comments, THE system SHALL append to the thread, increment counts, and notify mentioned users according to preferences.\n- IF a comment violates mass-mention limits or block rules, THEN THE system SHALL reject with a clear reason.\n\nSearch and feeds\n- WHEN executing typical searches and feed builds, THE system SHALL meet performance targets and return correct ordering, filtering, and deduplication.\n\nReporting and moderation\n- WHEN report thresholds are crossed, THE system SHALL auto-hide content, notify the author, and enqueue for review with required metadata.\n\nNotifications\n- WHEN eligible events occur, THE system SHALL enqueue the corresponding notification respecting opt-in status, DND/snooze, and frequency limits.\n\nExceptions and overrides\n- WHERE legal hold or compliance requires preservation, THE system SHALL prevent deletion and annotate the hold.\n- WHERE staff override is documented, THE system SHALL record the actor, reason, and timestamp in audit logs.\n- WHERE service-wide incidents necessitate temporary relaxation of limits (e.g., breaking elections news), THE system SHALL allow configured exceptions for a defined window and record the change.\n\nBusiness requirements only. All technical implementation decisions, including architecture, APIs, and database design, belong to the development team. Describes WHAT the pol-econ-board system must do from a business perspective and does not prescribe HOW to build it.","total":13,"completed":0,"step":0,"created_at":"2025-08-12T04:23:42.760Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}},{"event":{"type":"analyzeComplete","roles":[{"name":"member","description":"실명 또는 별칭 기반으로 가입한 일반 회원. 게시글/댓글 작성, 수정, 삭제(본인 한정), 신고, 북마크, 팔로우, 투표/리액션, 알림 설정을 수행한다. 커뮤니티 규칙을 준수하며 제재 대상이 될 수 있다."},{"name":"expert","description":"정치/경제 분야 전문성 검증을 통해 승격된 회원. member 권한 포함 + 전문가 배지 노출, 전문가 전용 주제 제안, 심층 글(리서치/인사이트) 게시, 전문가 Q&A 참여 등 신뢰도 기반의 추가 권한을 가진다."},{"name":"moderator","description":"커뮤니티 운영을 담당하는 중재자. 신고 접수 큐 열람, 콘텐츠 임시 숨김/삭제, 사용자 제재(경고/일시정지) 요청, 분쟁 조정, 투명성 로그 기록 관리 등 커뮤니티 가이드라인 집행 권한을 가진다."},{"name":"editor","description":"콘텐츠 품질을 책임지는 에디터. 말머리/주제 편집, 특집 큐레이션, 공지/고정글 관리, 홈·섹션 피처링 운영을 수행하며, 정책 위반 판단 권한은 moderator와 협업한다."},{"name":"admin","description":"전사 시스템 운영 권한. 모든 리소스에 대한 접근(감사 검토 포함), 역할 관리, 정책/설정 변경, 법적 요청 대응 워크플로 관리, 서비스 상태/지표 관리를 총괄한다."}],"prefix":"pol-econ-board","files":[{"reason":"전체 문서 지도를 제공하여 이해관계자가 빠르게 필요한 문서로 이동할 수 있도록 하기 위함.","filename":"00-toc.md","documentType":"service-overview","outline":["문서 목적","문서 목록 및 간단 설명","문서 간 관계 및 읽기 순서","용어 및 약어 가이드"],"audience":"general","keyQuestions":["어떤 문서가 포함되어 있으며 무엇을 다루는가","각 문서의 읽기 순서는 무엇인가"],"detailLevel":"high-level overview","constraints":["문서 링크는 설명형 링크 텍스트를 사용할 것","개발자 노트는 본 문서 맨 하단에 블록인용 형식으로만 포함"],"content":"# pol-econ-board Documentation Index\n\n## Document Purpose\nProvides a complete, navigable map of the pol-econ-board documentation set so stakeholders can quickly locate the appropriate document, understand its scope, and follow a recommended reading sequence. Clarifies how documents relate across business objectives, requirements, governance, and compliance.\n\n## Document List and Brief Descriptions\n- [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) — Summarizes vision, goals, target users, value proposition, scope, differentiation, success metrics (KPI), and a phased roadmap from beta to expansion with business context and justification.\n- [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md) — Defines monetization pillars (ads, sponsorships, premium membership, data/insight reports), user acquisition and growth strategies, operating model and cost structure, regulatory risks, and KPI monitoring.\n- [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) — Specifies registration, login, logout, email verification, password reset, JWT-based session policies, full role definitions (member, expert, moderator, editor, admin), permission matrix, and audit/security expectations in business terms.\n- [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) — Details business functionality: posts, comments, categories/tags/follows, votes/reactions, bookmarks, search/sort/filter, reporting and blocking, draft/review/publish workflows, notices and featured curation, feeds and subscriptions, notification triggers, rate limits, and acceptance criteria.\n- [User Stories and Acceptance Criteria](./05-pol-econ-board-user-stories.md) — Presents personas (member, expert, moderator, editor, admin), key success scenarios, edge cases, misuse/abuse prevention, and Definition of Done with measurable acceptance criteria.\n- [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md) — Visualizes major workflows (left-to-right Mermaid): account creation/authentication, authoring and publishing, reporting to moderation and appeal, notification settings and delivery, and exception branches with rollbacks.\n- [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) — Defines community rules, allowed/forbidden content, political-sensitivity guardrails, report taxonomy and SLA, sanction ladders and triggers, transparency reporting, appeal/review/restore procedures, and election-period policies.\n- [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) — Establishes measurable performance expectations (response times, throughput, concurrency), availability and recovery targets (RTO/RPO concepts), scalability, observability, data minimization, scheduling windows, and capacity planning.\n- [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) — Outlines privacy principles and consent, data subject rights processing, age/identity and sensitive periods policy (if required), legal compliance (e.g., PIPA), auditability and transparency, abuse/spam/bot mitigation with rate limiting, and incident communication.\n- [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) — Describes conceptual data flows; lifecycles for posts/comments (draft/publish/edit/archive/delete); moderation evidence retention; logs/metrics/backups retention and disposal; anonymization/pseudonymization; user-initiated deletion and recovery.\n- [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) — Standardizes notification types (real-time, batch, digest), triggers, channels (in-app, email), frequency/rate limits, subscription/follow/digest policies, consent and preferences, composition guidelines, and retry/fallback.\n- [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) — Catalogs error classes and messaging principles; auth and authorization failures; content operation errors (upload/save/conflict); moderation workflow failures; external integration errors; rate-limiting and spam controls; data integrity and deduplication; and user recovery procedures.\n\n## Document Relationships and Recommended Reading Order\nDocuments progress from context and strategy to detailed requirements and operational policies. Recommended path: Overview → Business Model → Roles & Auth → Functional Requirements → User Flows → Governance → Non-Functional → Security & Compliance → Data Lifecycle → Notifications → Exceptions.\n\n```mermaid\ngraph LR\n  subgraph \"Context & Strategy\"\n    A1[\"Service Overview\"] --> A2[\"Business Model\"]\n  end\n\n  subgraph \"Core Requirements\"\n    B1[\"User Roles & Authentication\"] --> B2[\"Functional Requirements\"]\n    B2 --> B3[\"User Flows\"]\n  end\n\n  subgraph \"Operations & Governance\"\n    C1[\"Community Governance & Moderation\"]\n    C2[\"Notifications & Communications\"]\n  end\n\n  subgraph \"Quality & Compliance\"\n    D1[\"Non-Functional Requirements\"]\n    D2[\"Security & Compliance\"]\n    D3[\"Data Lifecycle & Retention\"]\n    D4[\"Exception Handling & Errors\"]\n  end\n\n  A2 --> B1\n  B3 --> C1\n  B3 --> C2\n  B2 --> D1\n  D1 --> D2\n  D2 --> D3\n  B2 --> D4\n```\n\nRole-specific shortcuts:\n- Product and business stakeholders: Start with the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md) and the [Business Model and Operating Strategy](./02-pol-econ-board-business-model.md), then review the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) and the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Backend developers and QA: Begin with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) and the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md), followed by the [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md), then consult governance, NFRs, compliance, data lifecycle, notifications, and error handling.\n- Moderation and editorial teams: Focus on the [Community Governance and Moderation Policies](./07-pol-econ-board-community-governance-and-moderation.md) and the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md), then reference the [Exception Handling and Error Scenarios](./12-pol-econ-board-exception-handling-and-error-scenarios.md) and the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## Terms and Acronyms Guide\nThe glossary standardizes key terms used across documents.\n\n| Term/Acronym | Definition | Where Used |\n|--------------|------------|------------|\n| pol-econ-board | Service prefix and identifier for this project focused on political and economic discourse. | All documents |\n| EARS | Easy Approach to Requirements Syntax; unambiguous, testable requirement statements. | Requirements documents (03, 04, 07, 08, 09, 11, 12) |\n| JWT | JSON Web Token used for access and refresh tokens to manage user sessions. | 03, 06, 09 |\n| RBAC | Role-Based Access Control; roles include member, expert, moderator, editor, admin. | 03, 04 |\n| SLA | Service Level Agreement; time targets for moderation and other workflows. | 07, 08 |\n| KPI | Key Performance Indicator; metrics like MAU/DAU, retention rate, and content quality measures. | 01, 02 |\n| NFR | Non-Functional Requirements; performance, availability, scalability, observability expectations. | 08 |\n| PIPA | Personal Information Protection Act (Korea); privacy regulation relevant to data handling. | 09, 10 |\n| RTO/RPO | Recovery Time Objective / Recovery Point Objective; continuity and recovery targets. | 08, 10 |\n| MAU/DAU | Monthly/Daily Active Users. | 01, 02 |\n| Sanction Ladder | Progressive discipline model: warning → suspension → permanent action. | 07 |\n| Digest | Aggregated periodic notification summarizing content updates. | 11 |\n| Transparency Log | Record of moderation and policy enforcement actions. | 07, 09 |\n| Data Subject Rights | Rights to access, rectify, delete, and port personal data. | 09, 10 |\n| Rate Limiting | Business rules that cap actions per user/time window to prevent abuse. | 04, 08, 09, 11 |\n\nRole definitions used throughout:\n- member — Registered user (real name or alias) with permissions to create, edit, and delete own posts/comments; report content; bookmark; follow; vote/react; and manage notifications; subject to community rules and potential sanctions.\n- expert — Verified political/economic domain expert; inherits member permissions and can publish deeper research/insights, propose expert-only topics, and participate in expert Q&A with a trust badge.\n- moderator — Community operator handling report queues; temporarily hide/delete content; propose user sanctions (warning/suspension); mediate disputes; and oversee transparency logs.\n- editor — Content quality owner managing topics/tags; special curation; announcements/pins; and featuring operations; collaborates with moderators on policy violations.\n- admin — Organization-level operator with access to all resources for audits; role management; policy/config changes; legal request workflows; service health; and metrics governance.\n\n> Developer Note: This document defines business requirements only for the pol-econ-board documentation set. All technical implementation decisions (architecture, APIs, database design, and infrastructure) are at the discretion of the development team."},{"reason":"서비스의 존재 이유, 대상 사용자, 핵심 가치와 범위 등 전반을 한눈에 제시하기 위함.","filename":"01-pol-econ-board-service-overview.md","documentType":"service-overview","outline":["서비스 비전과 목표","문제 정의와 기회","대상 사용자와 핵심 가치 제안","핵심 기능 요약","범위 및 비범위(Out of Scope)","경쟁 환경과 차별화 요소","성공 지표(KPI)와 목표 수준","단계적 로드맵(베타→정식→확장)"],"audience":"business stakeholders","keyQuestions":["이 서비스가 해결하는 문제와 제공 가치가 무엇인가","누가 주요 사용자이며 어떤 사용 사례가 핵심인가","성공을 어떻게 정의하고 측정할 것인가","초기와 중장기 로드맵은 무엇인가"],"detailLevel":"moderate detail","constraints":["비즈니스 요구 중심으로 작성","기술 구현 세부(아키텍처, API, DB) 금지"],"content":"# pol-econ-board Service Overview\n\n## Service Vision and Objectives\npol-econ-board is a trust-focused political and economic discussion and analysis community that enables informed conversations, expert insights, and transparent moderation. The service exists to reduce noise, polarization, and misinformation by combining community participation with clear governance and role-based accountability.\n\nObjectives (12–18 months horizon):\n- Establish a reliable forum for policy and market discourse with measurable trust signals and transparent moderation.\n- Attract qualified experts and elevate high-quality insights to inform public understanding and decision-making.\n- Build a sustainable, scalable business with diversified revenue streams and strong user retention.\n\nGuiding principles:\n- Truth and verifiability over virality.\n- Community participation with accountability.\n- Transparency in moderation and policy enforcement.\n- Measurable outcomes and continuously improved operations.\n\n## Problem Definition and Opportunity\n- Information overload: Political and economic content is high-volume but low-signal. Users struggle to find reliable, contextualized analysis.\n- Trust deficit: Anonymous or low-accountability forums enable misinformation and low-quality discourse.\n- Expert–public gap: Experts lack structured ways to share insights with context and receive meaningful feedback.\n- Fragmented experiences: Insights, debate, curation, and policy enforcement are spread across disparate platforms without consistent standards.\n\nOpportunity:\n- Provide a specialized, moderated environment that privileges sourced, contextual analysis and civil debate.\n- Create a tiered role system (member, expert, moderator, editor, admin) to align incentives and responsibilities.\n- Offer transparent governance, auditable decisions, and topic-focused discovery to increase user confidence and time-on-platform.\n\n## Target Users and Core Value Proposition\nPrimary personas and value delivered:\n- Members (general participants):\n  - Value: Access to high-signal discussions, topic follow for personalization, bookmarking, reactions, and clear rules for safe participation.\n  - Use cases: Post viewpoints with sources, ask questions, follow topics/experts, receive notifications, report problematic content.\n- Experts (verified domain specialists):\n  - Value: Credibility badge, dedicated long-form analysis and research formats, expert Q&A, topic leadership, and influence.\n  - Use cases: Publish research notes, host Q&A threads, propose expert topics, respond to member questions.\n- Moderators (community governance):\n  - Value: Efficient intake queue, policy-aligned actions (hide, remove, warning/suspension requests), transparent records.\n  - Use cases: Process reports, apply sanctions per policy, manage appeals, maintain a transparency log.\n- Editors (content quality):\n  - Value: Curate features, manage tags/topics, headline and topic hygiene, special coverage packages and featured placements.\n  - Use cases: Tag and topic grooming, curated home/section features, announcements and pinning.\n- Admins (operational owners):\n  - Value: End-to-end oversight, policy configuration, role assignments, legal/compliance workflows, and audit visibility.\n  - Use cases: Manage roles and policies, oversee indicators and risk, respond to lawful requests.\n\nCore value proposition:\n- High-signal community powered by verified expertise and transparent governance.\n- Clear norms, predictable enforcement, and visible trust indicators.\n- Topic-centric discovery with measurable quality and relevance.\n\n## Business Model (Why/How/What)\n### Why This Service Exists\n- Address the trust and quality gap in political/economic discourse with an accountability-first community.\n- Serve a growing audience seeking reliable analysis and expert commentary without the noise of general-purpose social platforms.\n\n### Revenue Strategy\n- Advertising and sponsorships: Brand-safe placements in featured sections and expert channels.\n- Premium membership: Ad-light experience, advanced filters, expert AMAs access, early access to curated reports.\n- Sponsored expert series: Cohort-based expert columns or Q&A programs, clearly labeled.\n- Data-rich summaries and reports (business-level packaging): Periodic, curated digests for professionals.\n\n### Growth Plan\n- Supply-side seeding: Onboard a core cohort of verified experts and editors to set quality bar.\n- Community credibility: Transparency logs, clear sanctions policy, and measurable content quality indicators.\n- Partnerships: Think tanks, universities, and reputable media for co-produced series.\n- Retention loops: Topic follow, expert follow, personalized digests, and earned status for positive contributions.\n\n### Success Metrics\n- Trust and safety: Low reversal rate in moderation decisions, timely SLA adherence.\n- Engagement: Repeat sessions/week, quality reactions, follow actions, save/bookmark rates.\n- Expert participation: Number of active experts and expert-originated threads per week.\n- Monetization: Premium conversion rate, sponsorship bookings, ad yield.\n\n## Core Features Summary\nBusiness-level capability statements using EARS for testability.\n\nContent creation and management:\n- THE service SHALL allow members to create, edit, and delete their own posts and comments within policy-compliant boundaries.\n- WHEN a user publishes content, THE service SHALL record topic tags, sources (if provided), and attribution for later policy checks and discovery.\n- WHERE the user is an expert, THE service SHALL enable long-form analyses and expert Q&A threads with expert badges.\n- IF content is reported, THEN THE service SHALL route it to the moderation queue and apply configured timelines for action.\n- WHILE content is under review, THE service SHALL optionally restrict visibility according to policy.\n\nDiscovery and curation:\n- THE service SHALL provide topic follow, expert follow, and curated features to surface relevant content.\n- WHEN users follow topics or experts, THE service SHALL generate personalized feeds and digests subject to user preferences.\n- WHERE editors curate features, THE service SHALL support announcements, pinned posts, and special packages.\n\nReactions and community signals:\n- THE service SHALL support reactions, voting, and bookmarking to quantify engagement and relevance.\n- WHEN a user reacts or votes, THE service SHALL update engagement signals used for ranking and curation.\n- IF abnormal engagement patterns are detected, THEN THE service SHALL flag items for review (anti-gaming).\n\nReporting and governance:\n- THE service SHALL provide a report feature with clear categories (e.g., misinformation, harassment, spam, off-topic).\n- WHEN reports are submitted, THE service SHALL acknowledge receipt and communicate outcomes per policy.\n- WHERE sanctions are applied, THE service SHALL log the action to a transparency record with reason codes.\n\nNotifications (business-level):\n- WHEN followed experts or topics publish, THE service SHALL notify followers subject to frequency limits and user consent.\n- IF the system detects notification fatigue, THEN THE service SHALL throttle non-critical notifications.\n\nRole-based capabilities (high level):\n- WHERE the user is a moderator, THE service SHALL provide tools to hide/remove content, warn, and request suspensions per policy.\n- WHERE the user is an editor, THE service SHALL manage tags/topics, featured lists, and announcements.\n- WHERE the user is an admin, THE service SHALL manage roles, policies, and compliance workflows.\n\nPerformance experience (business expectation):\n- WHEN users perform common actions (login, open feed, view post), THE service SHALL respond within a user-perceived 1–2 seconds for typical conditions.\n- WHERE complex searches and filters are executed, THE service SHALL return initial results within 3 seconds for common queries.\n\n## Scope and Out of Scope\nIn scope (business outcomes):\n- Account registration, login/logout, email verification, password reset.\n- Role-based permissions: member, expert, moderator, editor, admin.\n- Posts, comments, replies, mentions, reactions, votes, bookmarks.\n- Topic/tag management, topic/expert follow, curated features.\n- Reporting, moderation workflow, sanctions policy, transparency logs.\n- Personalized feeds and configurable notifications.\n\nOut of scope (initial phases):\n- Real-time audio/video debates and live streaming.\n- Direct monetization between users (tips, paywalled posts) before compliance readiness.\n- Public API for third-party integrations in Beta/GA.\n- Frontend design specifications (layouts, colors, interactions).\n\nBoundary requirements (EARS):\n- THE service SHALL avoid collecting unnecessary personal data beyond business needs.\n- IF a feature introduces legal/compliance implications, THEN THE service SHALL require policy and compliance review before launch.\n- WHERE experimental features are enabled, THE service SHALL be opt-in and reversible at the cohort level.\n\n## Competitive Landscape and Differentiation\nCompetitive sets:\n- General social networks: Broad reach but low context, volatile quality.\n- Traditional forums: Community-led but uneven moderation and limited expert validation.\n- Publisher comment sections and Q&A: Limited interaction depth, weak governance transparency.\n\nDifferentiators:\n- Verified expert participation with visible credentials and specialized formats.\n- Transparent governance with clear reason codes, SLAs, and public transparency records.\n- Topic- and expert-centric discovery that privileges sourced, contextual contributions.\n- Role separation (moderator vs. editor) to balance policy enforcement and content quality.\n\n## Success Metrics (KPIs) and Target Levels\nTimeframes reference post-General Availability (GA). Targets define success thresholds that inform go/no-go decisions and iteration priorities.\n\nEngagement and growth:\n- THE service SHALL achieve 25–35% 28-day retention for new registered members by Month 6 post-GA.\n- THE service SHALL achieve at least 4 sessions/week median among retained members by Month 6 post-GA.\n- THE service SHALL reach 150–250 active experts with 400+ expert-originated threads/month by Month 6 post-GA.\n\nQuality and trust:\n- THE service SHALL maintain a moderation decision reversal rate under 5% monthly.\n- THE service SHALL process 90% of standard reports within 24 hours and 99% within 72 hours.\n- THE service SHALL keep repeat sanctions (within 90 days) under 10% of sanctioned accounts.\n\nMonetization:\n- THE service SHALL achieve 2.0–3.5% premium conversion among MAUs by Month 12 post-GA.\n- THE service SHALL secure at least two sponsorship packages per month by Month 6 post-GA.\n\nReliability and responsiveness (user-perceived):\n- THE service SHALL serve core feed and post views within 1–2 seconds p50 and under 4 seconds p95 for typical conditions.\n\n## Phased Roadmap (Beta → GA → Expansion)\nPrinciples:\n- Deliver trust and quality foundations first (roles, governance, transparency).\n- Validate expert and editor workflows alongside member value loops (follow, digest, reactions).\n- Use measurable gates to progress phases.\n\nPhase 1: Private Beta (target window: Q4 2025)\n- Cohort: ~1,000 members, 50–75 experts, 5–8 moderators, 3–5 editors.\n- Scope highlights: Core posting/comments, topic follow, expert badges and long-form posts, reporting and basic moderation queue, limited notifications.\n- Gates (must meet to exit):\n  - THE service SHALL achieve at least 30% weekly active rate among Beta cohort for four consecutive weeks.\n  - THE service SHALL process 95% of reports within 48 hours during Beta.\n  - THE service SHALL onboard minimum 50 verified experts with ≥2 posts each.\n\nPhase 2: Public Beta (target window: Q1–Q2 2026)\n- Scope highlights: Transparency logs, editor curation packages, expanded notification controls, improved discovery filters, sanctions and appeals process.\n- Gates:\n  - THE service SHALL demonstrate moderation reversal rate under 7% across two consecutive months.\n  - THE service SHALL reach 20–25% 28-day retention for new sign-ups in Public Beta.\n  - THE service SHALL sustain p95 perceived response under 4 seconds for feeds and posts under typical conditions.\n\nPhase 3: General Availability (GA) (target window: Q3 2026)\n- Scope highlights: Premium membership v1, sponsorship placements, expert Q&A programs, expanded governance reporting.\n- Gates:\n  - THE service SHALL reach 25–35% 28-day retention within three months post-GA.\n  - THE service SHALL onboard 150+ active experts with ongoing production.\n  - THE service SHALL meet monetization targets (≥2 sponsorships/month steady state).\n\nPhase 4: Expansion (post-GA, ongoing)\n- Possible directions: Regional topic verticals, institutional partnerships, digest products for professionals, advanced trust signals.\n- Governance maturity: More granular sanctions matrix and election-period policies aligned with local regulations.\n\n### Visual: Trust-Centric Content Lifecycle (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A1[\"Draft Content\"] --> A2[\"Add Sources/Tags\"]\n    A2 --> A3[\"Publish\"]\n  end\n\n  subgraph \"Community & Signals\"\n    B1[\"Topic/Expert Follow\"] --> B2[\"Reactions/Votes/Bookmarks\"]\n    B2 --> B3[\"Personalized Feeds/Digests\"]\n  end\n\n  subgraph \"Governance\"\n    C1[\"Reports Submitted\"] --> C2[\"Moderation Queue\"]\n    C2 --> C3{\"Action Needed?\"}\n    C3 -->|\"Yes\"| C4[\"Hide/Remove/Warn\"]\n    C3 -->|\"No\"| C5[\"Maintain Visibility\"]\n    C4 --> C6[\"Transparency Log\"]\n    C5 --> C6\n  end\n\n  A3 --> B1\n  B2 -.-> C1\n```\n\n## Document Scope and Implementation Ownership\nBusiness requirements and objectives are defined in natural language without prescribing technical implementations. All technical decisions—including architecture, APIs, data models, and infrastructure—belong to the development team. The content specifies what the service should do, not how to build it.\n\n## Related Documents\n- Review the [Business Model and Monetization Strategy](./02-pol-econ-board-business-model.md) for business assumptions and revenue details.\n- Review the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for role definitions and authorization policies.\n- Review the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for comprehensive feature-level requirements.\n- Review the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for rules, sanctions, and transparency requirements.\n- Review the [Non-Functional Requirements Guide](./08-pol-econ-board-non-functional-requirements.md) for performance and reliability expectations.\n- Review the [Notifications and Communications Policy](./11-pol-econ-board-notifications-and-communications.md) for business-level notification rules.\n"},{"reason":"수익화/성장 전략과 운영 모델을 명확히 하여 비즈니스 관점의 의사결정을 지원하기 위함.","filename":"02-pol-econ-board-business-model.md","documentType":"business-model","outline":["왜 존재해야 하는가(시장 공백/사용자 페인포인트)","수익 모델(광고/스폰서십/프리미엄 멤버십/데이터 리포트)","사용자 획득 및 성장 전략(콘텐츠·커뮤니티·파트너)","운영 모델과 비용 구조(인력/도구/프로세스)","규제·정책 리스크와 대응 원칙","성공 지표와 모니터링(재무/사용자/콘텐츠 품질)"],"audience":"business stakeholders","keyQuestions":["지속 가능한 수익과 성장 경로는 무엇인가","핵심 비용 항목과 운영 리스크는 무엇이며 어떻게 완화하는가","어떤 KPI로 성과를 관리하는가"],"detailLevel":"moderate detail","constraints":["수익 및 비용 항목은 비즈니스 수준으로 정의","정량 KPI 예시 포함","기술 구현 세부 금지"],"content":"# pol-econ-board Business Model\n\n## Executive Summary\npol-econ-board is a trust-centered community for evidence-based political and economic discourse that connects Members with verified Experts, supported by Editors and Moderators, and overseen by Admins. The model blends four revenue pillars—contextual Ads, ethical Sponsorships, Premium Memberships, and aggregated Data & Insight Reports—operated under transparent governance to sustain credibility. Growth is driven by an expert-led content engine, curated discovery, visible moderation, and institutional partnerships. The operating model favors lean fixed costs with scalable variable spend, codified SLAs for content quality, sponsorship disclosure, and compliance.\n\nThis document provides business requirements only. All technical implementation decisions belong to the development team; it defines WHAT the system should do, not HOW to build it.\n\n## Why This Service Should Exist (Market Gap & Pain Points)\n- Information noise and polarization reduce the value of political/economic discussions; users lack credible, verifiable expert insights and clear norms.\n- General forums underinvest in moderation, driving low trust, toxicity, and regulatory risk for operators and advertisers.\n- Media outlets publish one-to-many; few enable sustained, moderated expert–member interaction with transparent standards.\n- Professionals/institutions need synthesized insights and sentiment but face high discovery, verification, and brand safety costs.\n\nDifferentiation\n- Verified Experts produce deep research, host Q&A, and model evidence-first debate to improve trust and retention.\n- Transparent governance: auditable moderator actions, reason codes, SLAs, and appeal paths.\n- Editorial curation: Editors spotlight high-signal threads, thematic series, and special coverage packages.\n- Evidence/Attribution norms: source citations and labeling that reduce misinformation risk and enable informed discourse.\n\nPrimary Users & Roles\n- Members: create posts/comments, follow topics, react/vote, report, bookmark, manage preferences.\n- Experts: all Member capabilities plus long-form insight posts, expert-only topic proposals, expert Q&A participation, trust badge.\n- Moderators: handle reports, hide/remove, request sanctions, maintain transparency logs, support dispute resolution.\n- Editors: curate features, manage topics/tags, announcements, pins, and special series; collaborate with Moderators.\n- Admins: system-wide policy/role management, legal requests, metrics oversight, and compliance.\n\n## Revenue Model\nRevenue Pillars\n1) Contextual Advertising (Ads)\n- Inventory: in-feed display units, topic page banners, newsletter placements, and contextually relevant sponsor tags.\n- Targeting: context/topic-based; no sale of personally identifiable profiles; privacy-first measurement.\n- Load policies: ad-light defaults that prioritize user trust and content integrity.\n- Exclusions: political campaign/advocacy ads and sensitive categories restricted per policy and law.\n\n2) Sponsorships\n- Thematic sponsorship of premium series, expert AMAs, newsletters, and special coverage.\n- Strict disclosure and separation between sponsored and editorial content.\n- Pre-approval workflow across Editors and Moderators for brand safety and policy fit.\n\n3) Premium Memberships\n- Benefits: ad-light or ad-free tiers, priority in expert Q&A, exclusive long-form content, advanced digests, higher bookmark/export quotas, early feature access.\n- Pricing & terms: monthly and annual options, free trial windows, limited-time promotions.\n- Eligibility: authenticated users; gift and institutional licenses permitted per policy.\n\n4) Data & Insight Reports\n- Aggregated, anonymized trend/readership/sentiment reports; no personal data exports.\n- Audience: institutions (universities, think tanks, media, finance) and professional power users.\n- Distribution: one-off reports and annual subscriptions with quarterly refresh.\n\nRevenue Policy Requirements (EARS)\n- THE pol-econ-board service SHALL display no more than 1 ad slot per 10 content units in default feeds.\n- THE pol-econ-board service SHALL cap ad frequency at 2 impressions per user per advertiser per day by default.\n- WHERE a Premium tier includes \"ad-free\", THE pol-econ-board service SHALL suppress all paid ad placements for that user during the active subscription period.\n- WHEN a post is sponsored, THE pol-econ-board service SHALL render a prominent \"Sponsored\" label with a link to disclosure at the start of the content unit.\n- IF a sponsorship conflicts with prohibited categories, THEN THE pol-econ-board service SHALL block publication and notify Editors and Moderators for review.\n- THE pol-econ-board service SHALL provide Data Reports only as aggregated/anonymized outputs without exposing personal data or individual behavioral traces.\n- WHEN a Premium subscription lapses, THE pol-econ-board service SHALL revert entitlements to free tier within 1 hour.\n\nPricing and Unit Economics (Business-Level Assumptions)\n- Ads: eCPM USD 1.5–6.0 depending on placement/seasonality; ad-light reduces fill, increases retention.\n- Sponsorships: USD 8k–30k per themed series per month; AMAs USD 3k–10k per event; newsletter footer USD 1k–5k per send.\n- Premium: USD 6.99/month or USD 69/year; free trial 14 days; annual discount up to 20%.\n- Data Reports: USD 1.5k–5k per report; institutional annual USD 12k–40k.\n\nMonetization Governance & Controls (EARS)\n- THE pol-econ-board service SHALL maintain a prohibited and restricted categories list for ads and sponsorships with examples and disclosure rules.\n- WHEN a booking is created, THE pol-econ-board service SHALL validate brand safety rules and conflict exclusions before accepting.\n- WHERE labeling is required, THE pol-econ-board service SHALL ensure labels are visible in primary placements and listings.\n- IF an advertiser or sponsor is placed on a temporary hold list, THEN THE pol-econ-board service SHALL block delivery until the hold is cleared.\n- WHEN a complaint about mislabeled sponsored content is received, THE pol-econ-board service SHALL investigate within 2 business days and correct labeling or pause delivery.\n\nPromotions, Coupons, and Discounts (EARS)\n- WHERE promotional codes are enabled, THE pol-econ-board service SHALL apply the discount to eligible Premium plans during checkout and display the adjusted term and renewal price.\n- WHEN a promotion expires, THE pol-econ-board service SHALL prevent further redemptions and honor already-granted terms until their end dates.\n- IF a user attempts to stack incompatible promotions, THEN THE pol-econ-board service SHALL apply the highest-value eligible promotion and inform the user.\n\nRefunds, Chargebacks, and Disputes (EARS)\n- WHEN a Premium subscriber requests a refund within a configured cooling-off window (e.g., 7 days), THE pol-econ-board service SHALL honor the policy and revoke entitlements upon refund approval.\n- IF a chargeback is received, THEN THE pol-econ-board service SHALL suspend Premium entitlements pending resolution and record the case in a finance dispute log.\n- WHERE recurring billing fails, THE pol-econ-board service SHALL attempt collection per policy (e.g., 3 retries over 7 days) and then downgrade entitlements if unresolved.\n\nFraud and Abuse Prevention (Monetization) (EARS)\n- WHEN suspicious subscription activity is detected (e.g., repeated trials), THE pol-econ-board service SHALL deny additional free trials and flag the account for review.\n- WHERE bulk redemptions from the same payment instrument exceed thresholds, THE pol-econ-board service SHALL pause fulfilment and require additional verification.\n- IF exploitation of ad-serving or sponsorship delivery is suspected, THEN THE pol-econ-board service SHALL halt affected placements and trigger brand-safety review.\n\nRevenue Streams Diagram\n```mermaid\ngraph LR\n  subgraph \"Audience\"\n    A[\"Members\"]\n    B[\"Experts\"]\n    C[\"Institutions\"]\n  end\n  subgraph \"Monetization Products\"\n    D[\"Contextual Ads\"]\n    E[\"Sponsorships\"]\n    F[\"Premium Memberships\"]\n    G[\"Data & Insight Reports\"]\n  end\n  subgraph \"Revenue\"\n    H[\"Ad Revenue\"]\n    I[\"Sponsorship Revenue\"]\n    J[\"Subscription Revenue\"]\n    K[\"Report Sales\"]\n  end\n  A --> D\n  A --> F\n  B --> E\n  C --> G\n  D --> H\n  E --> I\n  F --> J\n  G --> K\n```\n\nSponsorship Booking and Review Flow\n```mermaid\ngraph LR\n  subgraph \"Booking Intake\"\n    S1[\"Inquiry/IO Received\"] --> S2[\"Capture Brand & Category\"]\n    S2 --> S3{\"Allowed Category?\"}\n  end\n  subgraph \"Review\"\n    S4[\"Editorial & Policy Review\"] --> S5{\"Approved?\"}\n  end\n  subgraph \"Activation\"\n    S6[\"Create Schedule & Placements\"] --> S7[\"Label as Sponsored\"]\n    S7 --> S8[\"Monitor Delivery/Pacing\"]\n  end\n  subgraph \"Exceptions\"\n    SX1[\"Complaint/Violation\"] --> SX2[\"Pause & Investigate\"]\n  end\n  S3 -->|\"Yes\"| S4\n  S3 -->|\"No\"| SX2\n  S5 -->|\"Yes\"| S6\n  S5 -->|\"No\"| SX2\n  S8 --> SX2\n```\n\nPremium Entitlement Lifecycle\n```mermaid\ngraph LR\n  P1[\"Subscribe\"] --> P2[\"Grant Entitlements\"]\n  P2 --> P3{\"Payment Success?\"}\n  P3 -->|\"Yes\"| P4[\"Active\"]\n  P3 -->|\"No\"| P5[\"Retry/Grace\"]\n  P4 --> P6{\"Cancel or Lapse?\"}\n  P6 -->|\"Yes\"| P7[\"Downgrade within 1h\"]\n  P6 -->|\"No\"| P8[\"Renewal\"]\n```\n\nData Report Contract Lifecycle\n```mermaid\ngraph LR\n  R1[\"Prospect Requests Report\"] --> R2[\"Define Scope(Anonymized)\"]\n  R2 --> R3{\"Meets Aggregation Thresholds?\"}\n  R3 -->|\"Yes\"| R4[\"Sign Terms\"]\n  R3 -->|\"No\"| R5[\"Revise Scope\"]\n  R4 --> R6[\"Deliver Report\"]\n  R6 --> R7[\"Quarterly Refresh\"]\n```\n\n## User Acquisition & Growth Strategy\nContent Engine\n- Expert-led long-form and Q&A cadences establish authority, improve SEO/distribution, and drive organic growth.\n- Editors curate high-signal threads and publish weekly analytical digests for shareability.\n- Topic and expert follow mechanics create recurring engagement loops for Members and Experts.\n\nCommunity & Network Effects\n- Reputation and expert badges reinforce credibility and repeat visitation; transparency logs foster trust.\n- Member referrals, co-reading, and inter-topic surfacing promote cross-pollination among sub-communities.\n- Visible, timely moderation reduces churn driven by toxicity and low-quality interactions.\n\nPartnerships\n- Universities/think tanks for expert onboarding and content syndication.\n- Media partners for co-publishing/backlinks; podcasts/webinars for distribution.\n- Professional associations to drive institutional report subscriptions.\n\nGrowth Requirements (EARS)\n- THE pol-econ-board service SHALL publish at least 2 expert long-form pieces per week during the first 6 months post-launch.\n- THE pol-econ-board service SHALL provide a referral mechanism attributing new sign-ups to referrers for reward calculation.\n- WHERE a user follows a topic, THE pol-econ-board service SHALL include it in weekly digests and real-time alerts per preferences.\n- WHEN an Expert publishes a new piece, THE pol-econ-board service SHALL notify eligible followers within 5 minutes.\n- IF a reported item exceeds toxicity thresholds, THEN THE pol-econ-board service SHALL reduce its distribution pending moderation.\n- WHERE partner co-publishing is active, THE pol-econ-board service SHALL include partner attribution and link-back in visible metadata.\n\nGrowth Flywheel Diagram\n```mermaid\ngraph LR\n  A[\"Expert Content\"] --> B[\"Search & Social Traffic\"]\n  B --> C[\"Member Sign-Ups\"]\n  C --> D[\"Engagement & Retention\"]\n  D --> E[\"Premium Conversion\"]\n  E --> F[\"Revenue\"]\n  F --> G[\"Expert Incentives\"]\n  G --> A\n```\n\n## Operating Model & Cost Structure\nPeople (Core Team, phased)\n- Editorial & Curation: 1 Lead Editor, 1–2 Editors (phase 1); scale to 3–5 as volume grows.\n- Moderation & Trust: 1 Lead Moderator, 2–4 Moderators; part-time experts for sensitive topics during election periods.\n- Community & Growth: 1 Community Manager, 1 Growth PMM; contractor support for campaigns.\n- Partnerships & Sales: 1 Partnerships Lead, 1 Sponsorship Sales, 1 Account Manager.\n- Data & Insights: 1 Analyst for report production; scale to 2–3 with institutional demand.\n- Compliance & Policy: shared counsel or part-time compliance officer; election-period escalation rota.\n\nTools (Business-Level)\n- Content planning and editorial calendar; sponsorship CRM; analytics/attribution; billing/subscription management; moderation queue and transparency ledger; brand safety review tools.\n\nProcesses & SLAs\n- Editorial Calendar: weekly planning and monthly thematic cycles.\n- Sponsorship Review: brand fit and policy compliance approval before booking confirmation.\n- Moderation SLA: actionable reports triaged within 4 hours during business hours; severe harm flagged within 60 minutes.\n- Transparency: public monthly summary of moderation actions and sponsorship disclosures.\n\nCosts (Business-Level Estimates)\n- Fixed: core salaries, counsel retainer, core tools/licenses, brand and PR.\n- Variable: content stipends, sponsorship fulfilment assets, payment processing fees, promotional spend, translation/transcription.\n\nIllustrative Cost Structure (Phase 1–2)\n| Category | Monthly Estimate (USD) | Notes |\n|---------|-------------------------|-------|\n| Editorial & Moderation | 45k–85k | Staffing and stipends |\n| Community & Growth | 20k–40k | Campaigns and tools |\n| Partnerships & Sales | 25k–50k | Base plus commission |\n| Data & Insights | 12k–25k | Analyst and tooling |\n| Compliance & Legal | 8k–20k | Counsel retainer and audits |\n| Tools & Services | 10k–25k | Analytics, CRM, billing |\n| Marketing & PR | 20k–60k | Launch, sponsorship promotion |\n| Contingency (10%) | 14k–30k | Risk buffer |\n\nScale Triggers and Hiring Guardrails (EARS)\n- WHEN weekly expert output exceeds 8 long-form pieces for 4 consecutive weeks, THE pol-econ-board service SHALL hire or contract editorial capacity within 30 days.\n- WHEN moderation queues breach SLA for 2 consecutive weeks, THE pol-econ-board service SHALL add moderator shifts or capacity within 14 days.\n- WHERE institutional report backlog exceeds 3 signed requests, THE pol-econ-board service SHALL allocate additional analyst capacity within 30 days.\n\nOperational Requirements (EARS)\n- THE pol-econ-board service SHALL enforce sponsorship labeling on all sponsored units without exception.\n- THE pol-econ-board service SHALL provide exportable booking confirmations and insertion orders in human-readable formats.\n- WHEN a moderation report is categorized as severe harm, THE pol-econ-board service SHALL route it to priority handling with a target response within 60 minutes during coverage hours.\n- WHERE a campaign includes performance guarantees, THE pol-econ-board service SHALL provide delivery and pacing dashboards to business stakeholders.\n\n## Regulatory & Policy Risks and Response Principles\nRisk Categories (Business-Level)\n- Political Advertising Compliance: restrictions on campaign/advocacy ads; jurisdictional differences, especially during election windows.\n- Privacy & Data Protection: PIPA (Korea), GDPR-like regimes governing consent, minimization, and data subject rights.\n- Defamation/Misinformation/Harmful Content: liability exposure from user claims; source labeling and editorial standards required.\n- Copyright & Fair Use: excerpts, charts, external media usage.\n- Market Integrity: sensitive financial claims and investment advice; require disclaimers and expert verification.\n\nMitigation Principles\n- Prohibited categories and required disclosures explicitly listed and enforced.\n- Documented moderation with appeal and transparency.\n- Data minimization for monetization; aggregate-only insights for external reporting.\n- Election-period special policies with heightened review and cooling-off rules.\n\nCompliance Requirements (EARS)\n- THE pol-econ-board service SHALL maintain a publicly accessible policy page describing sponsorship disclosure and prohibited categories.\n- WHEN an election-period policy is active, THE pol-econ-board service SHALL apply additional review steps to content tagged as political campaign-related before amplification.\n- IF a data subject requests access, THEN THE pol-econ-board service SHALL provide a human-readable summary of stored personal data and processing purposes within 30 days, aligned with applicable law.\n- WHERE a Data Report is generated, THE pol-econ-board service SHALL ensure outputs meet aggregation thresholds that prevent re-identification (e.g., minimum cohort size of 100).\n- IF a copyright complaint is received with required particulars, THEN THE pol-econ-board service SHALL de-list the content pending review and notify the uploader and complainant.\n- WHERE regional political advertising is restricted, THE pol-econ-board service SHALL block such bookings and provide rationale to requesters.\n\n## Success Metrics & Monitoring\nFinancial KPIs\n- Revenue Mix: Ads 25–40%, Sponsorships 25–35%, Premium 20–35%, Data Reports 10–20% by month 18.\n- MRR: USD 150k+ by month 18; growth 8–12% MoM during months 6–12, 5–8% thereafter.\n- ARPU (paid): USD 8–12 monthly; Churn (paid): < 4% monthly; Refund rate < 2% of monthly billings.\n\nUser & Growth KPIs\n- MAU: 250k by month 18; DAU/MAU: 18–27%.\n- Activation: ≥ 35% of new sign-ups reach first follow and first interaction within 7 days.\n- D30 Retention: ≥ 25% Members; ≥ 40% Experts.\n- Premium Conversion: 2.0–3.5% of active Members by month 12; annual plan share ≥ 35% of paid subs.\n\nContent Quality & Safety KPIs\n- Expert Ratio: ≥ 20% of front-page content from Experts.\n- Moderation SLA: ≥ 90% of severe reports handled within 60 minutes during coverage hours; ≥ 80% of general reports within 4 hours.\n- Transparency: monthly moderation report published 100% of months.\n- Takedown Accuracy: appeal uphold rate between 10–25%.\n\nSponsorship & Ads Performance KPIs\n- Sponsorship Fulfillment: ≥ 95% delivery to booked placements; labeled 100% of time.\n- Ad UX: average ads per session ≤ 3; complaint rate < 0.05% of sessions; invalid traffic rate < 2% of ad impressions.\n\nData Report KPIs\n- Institutional Accounts: 20–60 by month 18; renewal rate ≥ 75%.\n- Report Production SLA: deliver quarterly updates within 10 business days of quarter close; on-time rate ≥ 95%.\n\nKPI Guardrails and Triggers (EARS)\n- IF paid churn exceeds 4% for 2 consecutive months, THEN THE pol-econ-board service SHALL initiate a retention review and pause price increases until churn normalizes.\n- WHEN ad complaint rate exceeds 0.05% of sessions in a week, THE pol-econ-board service SHALL reduce ad load by 20% the following week and assess placements.\n- WHERE expert content share drops below 15% for a month, THE pol-econ-board service SHALL allocate additional expert commissioning budget the next month.\n- IF invalid traffic on ads exceeds 2% for a week, THEN THE pol-econ-board service SHALL enable stricter delivery filters and inform sponsors/advertisers.\n\nMonitoring & Cadence\n- Weekly dashboards for growth and engagement; monthly financial close; quarterly planning reviews.\n- Named owners: Growth PMM (acquisition), Lead Editor (content quality), Lead Moderator (safety), Partnerships Lead (sponsorship), Analyst (reports), Finance (revenue/margin).\n\nKPI Table (Illustrative Targets)\n| KPI | Phase 1 (0–6 mo) | Phase 2 (6–12 mo) | Phase 3 (12–18 mo) |\n|-----|-------------------|-------------------|--------------------|\n| MAU | 50k | 150k | 250k |\n| DAU/MAU | 15–20% | 18–25% | 20–27% |\n| Paid Conversion | 0.8–1.5% | 1.5–2.5% | 2.0–3.5% |\n| MRR | 20–40k | 60–110k | 150k+ |\n| Expert Content Share | 10% | 15% | 20% |\n| Severe Report SLA | 80% | 85% | 90% |\n\n## Business Requirements (EARS) Summary\nMonetization\n- THE pol-econ-board service SHALL limit default ad load to ad-light parameters and enforce frequency capping as defined.\n- WHEN a user upgrades to Premium, THE pol-econ-board service SHALL apply entitlements immediately and persist for the subscription term.\n- WHERE sponsorship units are booked, THE pol-econ-board service SHALL guarantee visible disclosure at unit start and in listings.\n- WHEN a refund is approved, THE pol-econ-board service SHALL revoke premium entitlements and adjust access within 1 hour.\n\nGrowth & Content\n- THE pol-econ-board service SHALL maintain a weekly editorial cadence with at least 2 expert long-form pieces and 1 digest.\n- WHEN a user follows a topic, THE pol-econ-board service SHALL include it in digests and notifications per preferences.\n\nSafety & Compliance\n- THE pol-econ-board service SHALL maintain public policy documentation and update transparency logs monthly.\n- IF content is flagged as high risk during election periods, THEN THE pol-econ-board service SHALL require elevated review before promotion.\n\nData & Reporting\n- WHERE Data Reports are offered, THE pol-econ-board service SHALL use aggregation thresholds that prevent re-identification and exclude personal data.\n- WHEN an institutional subscription lapses, THE pol-econ-board service SHALL revoke access to new report releases while preserving prior entitlements per contract terms.\n\nOperational\n- THE pol-econ-board service SHALL publish monthly sponsorship and moderation disclosure summaries accessible to users.\n- WHEN moderation or sponsorship complaints are validated, THE pol-econ-board service SHALL implement corrective actions within 5 business days.\n\n## Scope of This Document\nBusiness requirements only. Technical implementation decisions (architecture, APIs, database design, encryption, infrastructure) are at the discretion of the development team; the content specifies measurable policies, SLAs, and KPIs.\n\nReferences\n- For overall vision and scope, see the [Service Overview for pol-econ-board](./01-pol-econ-board-service-overview.md).\n- For governance and moderation standards, see the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- For security and compliance principles, see the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md)."},{"reason":"역할과 권한, 인증/세션 정책을 비즈니스 관점에서 완전하게 정의하여 권한 관리의 기준으로 삼기 위함.","filename":"03-pol-econ-board-user-roles-and-authentication.md","documentType":"requirement","outline":["인증 요구사항 개요","회원가입/로그인/로그아웃/이메일 인증/비밀번호 재설정","세션 및 토큰 관리(JWT) 원칙","역할 정의 및 권한 설명","권한 매트릭스(역할×액션)","정책: 비밀번호 규칙·로그인 시도 제한·계정 정지/해제·디바이스 로그아웃","감사 및 보안 고려(비즈니스 관점)"],"audience":"development team","keyQuestions":["어떤 역할이 존재하며 각 역할이 수행/제한되는 액션은 무엇인가","인증 흐름과 세션 만료/갱신 정책은 무엇인가","보안 및 감사 요구는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["01-pol-econ-board-service-overview.md","07-pol-econ-board-community-governance-and-moderation.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 요구사항 명시","권한 매트릭스 포함","JWT 기반 토큰 관리 원칙 포함","API/DB 세부 명시 금지"],"content":"# 03-pol-econ-board-user-roles-and-authentication\n\n## Scope and Intent\nDefines business requirements for authentication, authorization, and role-based access control of the service prefix \"pol-econ-board\". Describes WHAT must happen in business terms; technical implementation decisions (architecture, APIs, database design, libraries, infrastructure) remain with the development team.\n\n## Authentication Requirements Overview\n- THE system SHALL support the full account lifecycle: registration, email verification, login, logout, password change, password reset, and session/device management.\n- THE system SHALL enforce role-based authorization for roles: guest (unauthenticated), member, expert, moderator, editor, admin.\n- THE system SHALL use JWT for access control with short-lived access tokens and longer-lived refresh tokens.\n- THE system SHALL record key authentication and authorization events for audit and security monitoring.\n- THE system SHALL operate default business time references in Asia/Seoul (KST) while respecting user-preferred locales for communications.\n\n## Account Lifecycle: Registration, Email Verification, Login, Logout, Password Reset/Change\n\n### Registration\n- WHEN a user attempts to register with email and password, THE system SHALL validate inputs against password policy and email format rules.\n- WHEN registration succeeds, THE system SHALL place the account in \"pending_verification\" state and require email ownership confirmation before enabling content interactions.\n- WHERE invitation-based or role elevation flows are used (e.g., expert candidates), THE system SHALL create the account as member and perform elevation post-verification and review.\n\nInput validation (business rules)\n- THE system SHALL require email in valid format containing a single \"@\", domain with at least one dot, and a TLD of 2–24 letters.\n- THE system SHALL reject disposable or blocked domains per policy-maintained lists.\n- THE system SHALL require password length ≥ 10 and at least 2 of the following classes: uppercase, lowercase, number, symbol; alternatively, passphrases ≥ 16 characters MAY include spaces with no additional class requirements.\n- THE system SHALL reject passwords present in the common-passwords list and those derived from the user’s personal identifiers (email local part, display name) with trivial mutations.\n\n### Email Verification\n- WHEN a registration is submitted, THE system SHALL send a verification message containing a single-use token.\n- THE system SHALL set verification tokens to expire in 30 minutes and be one-time use.\n- WHILE an account is unverified, THE system SHALL permit read-only public access and profile completion while blocking posting, commenting, voting, reporting, following, and reporting.\n- IF a verification token is expired or invalid, THEN THE system SHALL present a clear error and SHALL allow requesting a new token up to 3 times per 24 hours.\n- WHEN an email address is changed on an existing account, THE system SHALL re-verify ownership of the new address and restrict sensitive actions until verification completes.\n\n### Login\n- WHEN a user submits email and password, THE system SHALL validate credentials and respond within 2 seconds at P95 under normal load.\n- IF credentials are valid and the account is in good standing, THEN THE system SHALL create a session and issue access and refresh tokens embedding role and permissions.\n- IF the account is suspended, THEN THE system SHALL deny login and present the suspension reason and remaining duration where policy allows disclosure.\n- WHERE multi-factor authentication (MFA) is enabled by policy or user preference, THE system SHALL require a second factor (e.g., code or approved action) before issuing tokens.\n- WHEN a user opts for \"remember this device\" within policy, THE system SHALL mark the device session as trusted and reduce MFA prompts for 30 days unless risk signals require step-up authentication.\n\n### Logout\n- WHEN a user initiates logout, THE system SHALL invalidate the active access token and detach it from the corresponding refresh token chain for that device within 60 seconds.\n- WHEN the user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens associated with the account within 60 seconds.\n\n### Password Reset and Change\n- WHEN a user requests password reset, THE system SHALL send a one-time reset token that expires in 30 minutes and is invalidated upon use.\n- WHEN a user completes password reset, THE system SHALL invalidate all existing sessions and refresh tokens and require login with the new password.\n- WHEN a user changes password from a logged-in state, THE system SHALL prompt for current password re-authentication and SHALL invalidate all refresh tokens while allowing the current access token to expire on schedule unless policy requires immediate revocation.\n- WHERE password reset attempts exceed policy thresholds, THE system SHALL apply rate limits and communicate the next eligible time.\n\n## Account States and Transitions\nStates: pending_verification, active, suspended_temporary, suspended_permanent, disabled_security, deleted_pending, deleted_final.\n\n- THE system SHALL maintain a canonical account state and update it atomically.\n- WHEN email verification completes successfully, THE system SHALL transition state from pending_verification to active immediately.\n- WHEN a temporary suspension is applied, THE system SHALL set state to suspended_temporary with an end timestamp and block new sessions until expiry or lift.\n- WHEN a permanent suspension is applied, THE system SHALL set state to suspended_permanent and block all sessions indefinitely unless reversed by admin.\n- WHEN a security incident necessitates protection, THE system SHALL set state to disabled_security and require remediation (e.g., password reset, step-up verification) prior to reactivation.\n- WHEN an account deletion request is confirmed after cooling-off, THE system SHALL transition to deleted_final and block authentication permanently.\n- IF a suspension period expires, THEN THE system SHALL switch the account back to active and restore login capability.\n- WHILE an appeal is pending under governance policy, THE system SHALL preserve the current enforcement state until the appeal outcome.\n\n## Session and Token Management (JWT) Principles\n- THE system SHALL issue JWT access tokens with a lifetime of 20 minutes and refresh tokens with a lifetime of 14 days.\n- THE system SHALL rotate refresh tokens on every use and SHALL invalidate the previous token immediately after rotation.\n- THE system SHALL detect refresh token reuse and SHALL revoke the entire refresh token family upon detection, requiring re-authentication.\n- THE system SHALL embed in JWT payload at minimum: userId, role, a permissions array, issued-at time, expiration time; optional claims MAY include trust level, verified status, and badges when relevant to business logic.\n- WHERE audience, issuer, and token purpose distinctions are required for business control, THE system SHALL include business-identifying claims sufficient for environment isolation and contract-level enforcement.\n- IF a user’s role or permissions change, THEN THE system SHALL invalidate all active refresh tokens within 60 seconds and require token re-issuance under the new role.\n- WHERE device-level session tracking is enabled, THE system SHALL allow users to view active device sessions (device label, approximate location, last activity) and revoke individual sessions.\n- IF suspicious activity is detected on a session (impossible travel, abnormal IP/device velocity per policy), THEN THE system SHALL flag the session and require step-up verification prior to continued access.\n- WHERE client storage policy applies, THE system SHALL support secure storage of tokens with preference for httpOnly cookies; localStorage MAY be used where acceptable by policy. Developers retain discretion on exact mechanism.\n- THE system SHALL maintain a business-level key rotation policy for the JWT signing keys, including dual-publish windows, scheduled rotations at least every 180 days, and emergency rotation capability within 24 hours of incident declaration.\n- WHERE session concurrency policy applies, THE system SHALL limit simultaneous active device sessions per user to 10 by default (admin-configurable) and SHALL deny creation of additional sessions beyond the limit with guidance to revoke existing sessions.\n\n## Multi-Factor Authentication (MFA) Policy (Business Level)\n- WHERE MFA is mandated by policy or user opt-in, THE system SHALL support at least one possession factor and SHALL allow recovery paths that balance security and usability.\n- WHEN a sensitive action occurs (password change, email change, role elevation, global sign-out), THE system SHALL require step-up verification if MFA is enabled or risk signals are present.\n- IF repeated high-risk signals are detected within 24 hours (e.g., 3+ impossible-travel detections), THEN THE system SHALL enforce MFA on next login even for trusted devices.\n\n## Role Definitions and Permission Descriptions\nJWT payloads MUST include role and a permissions array reflecting granted actions. Permissions are expressed in business terms and enforced per matrix below.\n\n### Guest (Unauthenticated)\n- Read-only access to public content and search public posts.\n- Cannot create content, vote, react, report, or follow.\n\n### Member\n- Registered participant (real name or alias). May create/edit/delete own posts and comments, report content, bookmark, follow topics/users, vote/react, and manage notifications. Subject to governance enforcement.\n- Typical permissions: [\"post:create\", \"post:edit:own\", \"post:delete:own\", \"comment:create\", \"comment:edit:own\", \"comment:delete:own\", \"report:create\", \"bookmark:create\", \"follow:create\", \"vote:create\", \"notify:manage\", \"profile:edit\"]\n\n### Expert\n- Verified political/economic domain expert. Inherits member permissions; may display expert badge, propose expert-only topics, publish deep-dive research/insight posts, and participate in expert Q&A.\n- Additional permissions: [\"topic:propose:expert\", \"post:create:insight\", \"qa:expert:participate\", \"badge:expert\"]\n\n### Moderator\n- Community operations. Access report queue, temporarily hide/delete content, request user sanctions (warning/suspension), mediate disputes, manage transparency logs.\n- Additional permissions: [\"report:queue:read\", \"content:hide\", \"content:delete\", \"sanction:request\", \"dispute:mediate\", \"transparency:manage\"]\n\n### Editor\n- Content quality and curation. Edit tags/topics, manage announcements/pinned posts, operate featured selections. Collaborates with moderators on violations.\n- Additional permissions: [\"topic:edit\", \"curation:feature\", \"announcement:manage\", \"pin:manage\"]\n\n### Admin\n- Organization-wide operations. Full access to all resources, role management, policy/settings changes, legal request workflow, service health/metrics oversight, audit review.\n- Additional permissions: [\"role:manage\", \"policy:manage\", \"sanction:execute\", \"audit:read\", \"system:metrics:read\", \"legal:request:manage\", \"session:revoke:any\"]\n\n## Permission Matrix (Role × Action)\n\n| Action (Business term) | Guest | Member | Expert | Moderator | Editor | Admin |\n|---|---|---|---|---|---|---|\n| View public content | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Search public posts | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create standard post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create deep-dive insight post | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit own post (within policy window) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own post | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Create comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Edit own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Delete own comment | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Vote/React on content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Report content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Bookmark content | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Follow topic/user | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Propose expert-only topic | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ |\n| Edit topics/tags | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Curate featured collections | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Manage announcements/pinned posts | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Access report queue | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Temporarily hide content | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Delete content (moderation remove) | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Issue user warning (execute) | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Request user suspension | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Execute user suspension | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Manage transparency logs | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Manage roles | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Change policies/settings | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Access audit logs | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View service health metrics | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Initiate legal request workflow | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n| View own sessions | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke own sessions (single/all) | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Revoke other users’ sessions | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nNotes:\n- Moderators request account-level sanctions; admins execute irreversible sanctions.\n- Experts add publishing and proposal capabilities beyond members; no moderation powers.\n\n## Policies: Password Rules, Login Attempt Limits, Account Suspension/Unlock, Device Logout, MFA\n\n### Password Rules\n- THE system SHALL enforce minimum password length of 10 and the defined complexity rules.\n- THE system SHALL permit passphrases ≥ 16 characters without additional complexity requirements.\n- IF a password is found in a banned list or derived from personal identifiers, THEN THE system SHALL reject it with guidance to choose a stronger password.\n- WHEN a password is changed or reset, THE system SHALL require re-authentication for sensitive actions for the next 5 minutes.\n\n### Login Attempt Limits and Abuse Prevention\n- THE system SHALL allow up to 5 failed login attempts per account per rolling 15 minutes before temporary lockout.\n- IF the threshold is exceeded, THEN THE system SHALL lock the account for 15 minutes and SHALL send an advisory notice to the account email.\n- WHERE suspicious velocity or credential stuffing is detected, THE system SHALL apply adaptive throttling and MAY require additional verification.\n- THE system SHALL reset failure counters upon successful login.\n\n### Account Suspension and Unlock\n- WHEN a moderator submits a suspension request with reason codes and proposed duration, THE system SHALL route it for admin execution and log the decision.\n- WHEN an admin executes a suspension, THE system SHALL immediately revoke all sessions and block new sessions until the suspension ends or is lifted.\n- IF the suspension period expires, THEN THE system SHALL automatically restore login capability and flag the account for post-suspension review where policy requires.\n- WHERE an appeal is in progress per governance policy, THE system SHALL maintain the current enforcement state until the appeal outcome.\n\n### Device Logout and Session Visibility\n- THE system SHALL provide users a list of active sessions including device label, approximate location (city/country), and last activity timestamp.\n- WHEN a user revokes a specific session, THE system SHALL invalidate the corresponding refresh token and any derived access tokens within 60 seconds.\n- WHEN a user selects \"log out from all devices\", THE system SHALL revoke all active sessions and refresh tokens within 60 seconds and confirm completion.\n\n### MFA Application Rules\n- THE system SHALL provide MFA enrollment and backup/recovery options (e.g., backup codes) with rate-limited retrieval.\n- WHEN MFA is enabled, THE system SHALL require step-up verification for high-risk actions (password/email change, role elevation, global sign-out, viewing audit logs where role permits).\n\n## Error Handling and Recovery (Auth-Specific)\n- IF login fails due to invalid credentials, THEN THE system SHALL present a generic failure message without disclosing whether the email exists.\n- IF login fails due to unverified email, THEN THE system SHALL allow immediate resend of verification up to the daily resend limit.\n- IF login is blocked due to account suspension, THEN THE system SHALL present suspension status and policy-based guidance.\n- IF a password reset token is invalid or expired, THEN THE system SHALL explain the issue and allow requesting a new token subject to rate limits.\n- IF token refresh fails due to reuse or rotation violation, THEN THE system SHALL revoke the refresh token family and require re-authentication.\n- WHEN system-side anomalies affect authentication, THE system SHALL provide status messaging and reference codes for support without exposing internals.\n\n## Performance and Rate-Limiting Expectations\n- THE system SHALL complete credential validation and token issuance within 2 seconds at P95 under normal load.\n- THE system SHALL deliver verification and reset emails within 60 seconds at P95 under normal load.\n- THE system SHALL support at least 10 token refreshes per user per hour without degradation, subject to normal rate-limits.\n- WHERE global traffic protection is necessary, THE system SHALL enforce per-IP and per-account rate limits for registration, login, verification, and reset actions per policy thresholds.\n\n## Audit and Security Considerations (Business Perspective)\n- THE system SHALL maintain audit records for registration, verification, login success/failure, logout, token refresh, token revocation, password change/reset, role/permission change, suspension requests and executions, MFA enrollment/usage, and device trust changes.\n- THE system SHALL ensure audit records include: actor (userId or system), action, timestamp, business context (e.g., device label, approximate location), and outcome (success/failure).\n- THE system SHALL align event retention with the data lifecycle policy and ensure data minimization and pseudonymization where feasible.\n- THE system SHALL enable authorized reviewers (admin; limited moderator scope) to access relevant audit views while honoring least privilege.\n- IF anomalous authentication patterns are detected, THEN THE system SHALL generate security alerts for review and MAY trigger protective measures (step-up authentication, temporary locks).\n- THE system SHALL support JWT signing key rotation according to policy with auditable activation timestamps and approver roles.\n\n## Mermaid Diagram: Authentication and Token Flow\n```mermaid\ngraph LR\n  subgraph \"User Authentication Flow\"\n    A[\"Start(Login)\"] --> B[\"Validate Input\"]\n    B --> C{\"Credentials Valid?\"}\n    C -->|\"Yes\"| D[\"Check Account State\"]\n    C -->|\"No\"| E[\"Show Generic Failure\"]\n    D --> F{\"MFA Required?\"}\n    F -->|\"Yes\"| G[\"Perform Second Factor\"]\n    F -->|\"No\"| H[\"Issue Tokens\"]\n    G --> I{\"Success?\"}\n    I -->|\"Yes\"| H\n    I -->|\"No\"| E\n  end\n\n  subgraph \"Token Management\"\n    H --> J[\"Access Token(20m)\"]\n    H --> K[\"Refresh Token(14d)\"]\n    K --> L[\"Rotate On Use\"]\n    L --> M{\"Rotation Valid?\"}\n    M -->|\"Yes\"| N[\"Issue New Pair\"]\n    M -->|\"No\"| O[\"Revoke Family & Re-auth\"]\n  end\n\n  subgraph \"Security Responses\"\n    D --> P{\"Suspended?\"}\n    P -->|\"Yes\"| Q[\"Deny Login & Notify\"]\n    P -->|\"No\"| F\n    K -.-> R[\"Revoke All Sessions\"]\n  end\n```\n\n## Mermaid Diagram: Role Elevation and Sanction Workflow (Business Level)\n```mermaid\ngraph LR\n  subgraph \"Role Elevation\"\n    A1[\"Member Submits Expert Verification\"] --> A2[\"Collect Evidence & Validate\"]\n    A2 --> A3{\"Meets Criteria?\"}\n    A3 -->|\"Yes\"| A4[\"Admin Assigns Expert Role\"]\n    A3 -->|\"No\"| A5[\"Reject with Rationale\"]\n    A4 --> A6[\"Revoke Refresh Tokens\"]\n    A6 --> A7[\"Require Re-Authentication\"]\n  end\n\n  subgraph \"Sanction Flow\"\n    B1[\"Moderator Submits Sanction Request\"] --> B2[\"Admin Reviews\"]\n    B2 --> B3{\"Approve?\"}\n    B3 -->|\"Yes\"| B4[\"Execute Suspension\"]\n    B3 -->|\"No\"| B5[\"Return with Guidance\"]\n    B4 --> B6[\"Revoke All Sessions\"]\n    B4 --> B7[\"Notify User & Log\"]\n  end\n```\n\n## EARS-Formatted Detailed Requirements\n\n### Ubiquitous Requirements\n- THE authentication service SHALL require email verification before enabling content creation or interaction actions.\n- THE authorization service SHALL enforce role-based permissions as defined in the Permission Matrix.\n- THE token service SHALL issue access tokens with 20-minute lifetime and refresh tokens with 14-day lifetime.\n- THE security service SHALL maintain audit logs for all authentication and authorization events listed in this file.\n- THE risk service SHALL evaluate session signals and require step-up verification under suspicious conditions.\n\n### Event-Driven Requirements\n- WHEN a user registers, THE system SHALL send a verification message containing a single-use token that expires in 30 minutes.\n- WHEN a user logs in successfully, THE system SHALL bind the session to a device identifier and record last activity time.\n- WHEN a user logs out, THE system SHALL invalidate the active session within 60 seconds.\n- WHEN a refresh token is presented, THE system SHALL rotate it and invalidate the prior token.\n- WHEN a role is elevated (e.g., member → expert), THE system SHALL revoke existing refresh tokens and require re-authentication.\n- WHEN a moderator submits a sanction request, THE system SHALL route it for admin decision and log the outcome.\n- WHEN a user changes email address, THE system SHALL require verification of the new address before enabling sensitive actions.\n- WHEN a user enables MFA, THE system SHALL prompt for a second factor during login and sensitive actions.\n\n### State-Driven Requirements\n- WHILE an account remains unverified, THE system SHALL restrict the account to read-only public access and profile completion.\n- WHILE an account is under active suspension, THE system SHALL block login and token issuance.\n- WHILE an appeal is pending per governance policy, THE system SHALL preserve the current enforcement state.\n- WHILE a device session is marked trusted, THE system SHALL suppress MFA prompts unless risk signals are present.\n\n### Unwanted Behavior Requirements\n- IF a login attempt fails, THEN THE system SHALL present a generic error without confirming account existence.\n- IF failed login attempts exceed 5 within 15 minutes, THEN THE system SHALL lock the account for 15 minutes and log the event.\n- IF a refresh token reuse is detected, THEN THE system SHALL revoke the entire token family and require re-authentication.\n- IF impossible travel or anomalous activity is detected, THEN THE system SHALL require step-up verification before issuing tokens.\n- IF a password reset token is expired or invalid, THEN THE system SHALL deny the reset and allow a new request within policy limits.\n- IF session concurrency exceeds the allowed limit, THEN THE system SHALL deny additional session creation and advise revocation of older sessions.\n\n### Optional Features Requirements\n- WHERE multi-factor authentication is enabled, THE system SHALL require a second factor during login and sensitive actions.\n- WHERE device session visibility is enabled, THE system SHALL display active sessions and allow revocation by the user.\n- WHERE organization policy mandates httpOnly cookies, THE system SHALL store tokens in secure cookies rather than other storage options.\n- WHERE trusted device preference is enabled, THE system SHALL reduce MFA prompts for trusted sessions for up to 30 days.\n\n## Business Rules and Validation Details\n- Email format: must include \"@\" and a domain containing at least one dot; TLD length 2–24; reject blocked domains.\n- Password: minimum length 10; at least 2 character classes unless passphrase ≥ 16; reject common and personal-info-based passwords.\n- Display names: prohibited from impersonating public figures or organizations per governance policy.\n- Verification/resets: tokens are single-use, expire in 30 minutes, and are rate-limited to 3 sends per 24 hours per account.\n- Sensitive changes (email, password): require re-authentication within the past 5 minutes.\n\n## Success Criteria and KPIs (Auth Scope)\n- Email verification completion rate ≥ 90% within 24 hours of registration under normal operations.\n- Login response time ≤ 2 seconds at P95 under normal load.\n- Password reset email delivery ≤ 60 seconds at P95.\n- Security alert false-positive rate ≤ 5% after tuning.\n- Token reuse detection time ≤ 5 seconds from event to enforcement.\n\n## Dependencies and References\n- Community sanctions, appeals, and transparency align with the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- Privacy, data rights, and legal compliance align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- Functional behaviors that invoke auth decisions align with the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n\n## Implementation Autonomy Statement\nBusiness requirements only. All technical implementation decisions, including architecture, API design, database structure, cryptography choices, and infrastructure, are owned by the development team; the content defines WHAT must occur, not HOW to implement it."},{"reason":"핵심 기능을 업무 관점으로 완전·명확하게 규정하여 개발·QA 기준으로 사용하기 위함.","filename":"04-pol-econ-board-functional-requirements.md","documentType":"requirement","outline":["게시글 관리(작성/수정/삭제/버전)","댓글/대댓글/멘션","카테고리·태그·주제 팔로우","투표/리액션/추천","북마크/읽음 상태/저장","검색/정렬/필터","신고/차단 및 자동화 규칙","초안/검토/발행 워크플로","공지/고정글/특집 큐레이션 연계","피드/타임라인/구독","알림 트리거 연결","레이트리밋/이용제한 정책","접근성/다국어(비즈니스 관점)","수용 기준 및 예외 사항"],"audience":"development team","keyQuestions":["사용자가 수행할 수 있는 모든 업무 기능은 무엇이며 제약은 무엇인가","각 기능의 입력 검증/처리 로직/출력 기대치는 무엇인가","성능·보안·감사 요구와의 연계는 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","06-pol-econ-board-user-flows.md","07-pol-econ-board-community-governance-and-moderation.md","11-pol-econ-board-notifications-and-communications.md"],"constraints":["EARS 형식으로 상세 요구사항 기술","성능 기대치(사용자 체감 기준) 포함","UI/설계/기술 구현 세부 금지"],"content":"# pol-econ-board Functional Requirements\n\nComplete, business-level functional requirements for the pol-econ-board service written in EARS where applicable. Content focuses on WHAT the system must do and excludes architecture, API shapes, database schemas, and infrastructure details. Developers retain full autonomy over technical implementation.\n\nAlign authentication, authorization, and roles with the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md). Refer to flows in the [User Flows and Process Diagrams](./06-pol-econ-board-user-flows.md). Apply governance and sanctions from the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md). Connect business events to delivery rules in the [Notifications and Communications Requirements](./11-pol-econ-board-notifications-and-communications.md).\n\n## 1) Purpose and Scope\n- Define the full set of functional capabilities required for a moderated, expertise-forward political and economic discussion platform.\n- Establish business rules, input validation, processing logic, outputs, performance expectations, error handling, and role-based constraints.\n- Cover member-generated content, expert contributions, editorial curation, moderation workflows, personalization, search, subscriptions, and notification triggers.\n\n## 2) Terminology and Global Conventions\n- Timezone: Business time windows and SLAs use Asia/Seoul (KST). User-facing times SHALL respect the user’s configured local timezone where preferences exist.\n- Counting windows: Unless stated otherwise, rate limits use rolling 60-minute windows for per-hour metrics and rolling 24-hour windows for daily metrics.\n- Content policy baseline: Content behaviors defer to the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n- Performance baseline: Unless specified, simple actions (create/edit/delete/like/bookmark/follow) SHALL complete within 2 seconds for the user; discovery actions (search/filter/sort) SHALL respond within 1 second for common queries and within 3 seconds for complex queries under typical load.\n- Content states: Draft (private to author and reviewers where applicable); Published (visible per visibility rules); Hidden (system- or moderator-suppressed); Soft-Hidden (limited visibility, e.g., author and direct participants only); Archived (excluded from default feeds but still accessible as defined herein).\n- Versioning: Each published edit creates an immutable version that can be viewed in comparisons.\n- Visibility levels (business): Public; Limited (followers or invited audiences where configured); Staff-only (moderators/editors/admins).\n\n## 3) Role Context (Business Perspective)\n- member: Create and manage own posts and comments; react, follow, bookmark, report, and block; subject to rate limits and policy.\n- expert: All member privileges plus expert badge, expert-only topic proposals, long-form research/insight posts, expert Q&A participation, expert recommendation signals.\n- moderator: Review reports, hide/delete content per policy, request sanctions, manage disputes, maintain transparency logs.\n- editor: Curate categories and tags, manage featured content, announcements, and pins; collaborate with moderators on policy issues.\n- admin: Oversight of roles, policies, legal requests, and service health.\n\nRole-based constraints per feature are embedded in the sections below. The full role model and JWT principles reside in the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n\n---\n\n## 4) Functional Requirements (EARS)\n\n### 4.1) Post Management (Create/Edit/Delete/Version)\nBusiness fields (business-level, not schema):\n- Title (4–120 characters)\n- Body (≥ 20 characters for published posts; drafts may be shorter but must be non-empty)\n- Attachments (0–10 files; each ≤ 25 MB; types: image, PDF, CSV; videos only when explicitly enabled)\n- Category (exactly one controlled value)\n- Tags (0–5; profanity/ban list filtered; each 1–30 characters)\n- Visibility (public/limited/staff-only)\n- Source links (0–10; valid URLs)\n- Content warnings (0–3 from predefined list)\n- Estimated reading time (auto-calculated)\n- Language (e.g., Korean, English)\n\nValidation and creation\n- WHEN a user submits a new post as draft, THE system SHALL validate title length 4–120 characters, body length ≥ 1 character for drafts and ≥ 20 characters for publication, and allowed attachment count/size/types.\n- WHEN a user saves a draft, THE system SHALL persist within 2 seconds and return the draft identifier and last-saved timestamp.\n- WHEN a user attempts to publish, THE system SHALL require Category and enforce at least one source link for “analysis/research” post types.\n- WHERE the user role is member, THE system SHALL allow publishing up to 10 posts per 24 hours.\n- WHERE the user role is expert, THE system SHALL allow publishing up to 20 posts per 24 hours and permit “long-form” flag up to 20,000 characters body.\n- WHERE the user role is moderator or editor, THE system SHALL allow staff-only posts without public visibility for operational notices.\n\nEditing and versioning\n- WHEN an author edits a published post, THE system SHALL create a new immutable version and retain prior versions for comparison.\n- WHERE edits occur within 10 minutes of publication, THE system SHALL allow “silent update” without feed bump; after 10 minutes, feed bump SHALL occur unless staff marks “no-bump”.\n- WHILE a post is draft, THE system SHALL allow unlimited edits and autosave at least every 30 seconds of active typing.\n\nDeletion and restoration\n- WHEN an author deletes own post, THE system SHALL soft-delete and hide from public while retaining for 30 days for potential restoration.\n- IF a soft-deleted post is restored within 30 days, THEN THE system SHALL reinstate its visibility and maintain version history continuity.\n- IF a post is under active investigation (flagged), THEN THE system SHALL prevent author deletion until moderation completes or staff override is recorded.\n\nIntegrity and policy checks\n- WHEN a post contains more than 3 external links, THE system SHALL flag it for automated spam review without blocking publication unless thresholds are exceeded (see §4.7).\n- WHERE content includes media attachments, THE system SHALL require a text alternative (caption/alt-text) per accessibility requirements (§4.13).\n- IF a post violates rate limits or is under sanction, THEN THE system SHALL deny publishing with a clear reason and next eligible time.\n\nOutputs\n- THE system SHALL return identifiers, timestamps (created/updated/published), current visibility, version number, moderation status, and derived signals (e.g., estimated reading time) upon create/edit/publish.\n\nPerformance\n- THE post save or publish operation SHALL complete within 2 seconds under nominal load for text-only posts; within 5 seconds when up to 10 attachments are included.\n\nEdge constraints\n- WHERE mentions in the post body exceed 20 unique users, THE system SHALL block publication and instruct the author to reduce mass-mentions per anti-abuse policy.\n- WHERE tags include banned terms, THE system SHALL reject publication with a policy-aligned reason code.\n\n### 4.2) Comments, Replies, Mentions\nScope\n- Comments support one level of replies (reply-to-comment). Mentions use “@handle” of users with public mentionability.\n\nValidation and creation\n- WHEN a user submits a comment, THE system SHALL validate length 1–5,000 characters and disallow empty or media-only comments.\n- WHERE the role is member or expert, THE system SHALL allow up to 60 comments per 24 hours.\n- WHEN a reply is created, THE system SHALL associate it with the parent comment and the post thread.\n- WHEN a user mentions another user, THE system SHALL validate mention permissions and block interactions with users who are blocked by or have blocked the author.\n- WHERE a single comment attempts to mention more than 10 distinct users, THE system SHALL block submission and return a mass-mention limit message.\n\nEditing and deletion\n- WHERE the author is the comment owner, THE system SHALL allow edits for 15 minutes with an edit marker displayed thereafter.\n- WHEN the author deletes a comment, THE system SHALL soft-delete and replace with a placeholder indicating removal.\n\nAbuse and policy\n- IF a comment triggers prohibited content rules, THEN THE system SHALL route it to moderation queues and may auto-hide according to §4.7 thresholds.\n\nNotifications\n- WHEN a user is mentioned, THE system SHALL enqueue a mention notification per preferences (§4.11).\n\nOutputs and performance\n- THE system SHALL return identifiers, parent linkage, timestamps, mention list, and moderation status for created comments.\n- THE comment create/edit/delete operation SHALL complete within 1 second for text-only content.\n\n### 4.3) Categories, Tags, Topic Follow\nCategories and tags\n- WHEN a post is published, THE system SHALL require exactly one Category from the controlled list managed by editors.\n- WHERE tags are provided, THE system SHALL allow up to 5 free-form tags validated against profanity/ban lists and length 1–30 characters.\n- WHEN editors modify category definitions, THE system SHALL preserve historical category labels on existing posts while applying new taxonomy prospectively.\n\nTopic follow\n- WHEN a user follows a topic (category/tag or editor-curated topic), THE system SHALL add it to the user’s subscription list.\n- WHERE a user follows a topic, THE system SHALL prioritize that topic in personalized feeds (§4.10).\n- IF a followed topic is deprecated, THEN THE system SHALL notify followers and suggest alternatives; migrations SHALL preserve user preferences with user-confirmable mapping.\n\n### 4.4) Votes, Reactions, Recommendations\nVote and reaction types\n- Votes support “Agree” and “Disagree”. Reactions support “Insightful”, “Question”, “Source requested”, and “Appreciation”.\n\nConstraints\n- WHERE a user is authenticated, THE system SHALL allow one vote per post per user with ability to change the choice; reactions are one per type per user per post.\n- WHERE the actor is expert, THE system SHALL allow an “Expert Recommend” marker distinct from general reactions.\n- IF a post is archived or hidden, THEN THE system SHALL block new votes/reactions while preserving counts.\n\nOutputs and display rules (business)\n- WHEN counts are requested for display, THE system SHALL provide totals and expert-specific counts to enable separate labeling.\n- WHILE reaction/vote updates propagate, THE system SHALL maintain eventual consistency with staleness ≤ 3 seconds under normal load.\n\nPerformance\n- THE system SHALL record a vote or reaction within 1 second and reflect updated counts within 2 seconds in dependent views.\n\nAnti-abuse\n- WHERE a single account submits >10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds (§4.12).\n\n### 4.5) Bookmarks, Read State, Saved Items\n- WHEN a user bookmarks a post, THE system SHALL store it in the user’s bookmarks and allow foldering into up to 20 named collections (collection name 1–40 characters, profanity filtered).\n- WHILE a user scrolls through a post, THE system SHALL track read progress and mark as “read” when ≥ 80% of body is viewed or ≥ 10 seconds of engaged reading elapse, whichever comes later.\n- WHEN a user saves a post for offline reading (business concept), THE system SHALL store a snapshot of the text and metadata for later retrieval; media may be excluded depending on rights.\n- WHERE the user requests export of saved items, THE system SHALL prepare an export within 10 seconds for up to 100 items and provide a durable link or retrieval reference.\n- IF a bookmarked item is deleted or becomes private, THEN THE system SHALL retain a placeholder with permissible metadata and indicate unavailability.\n\n### 4.6) Search, Sort, Filter\nInputs and validation\n- WHEN a user searches, THE system SHALL accept queries up to 200 characters, with logical operators AND/OR and quoted phrases.\n- WHERE filters are applied, THE system SHALL support Category, Tags, Author, Role (expert only), Date range, Content type (post/comment), Minimum reaction score, and Moderation status (staff roles only).\n- WHERE sorting is applied, THE system SHALL support Newest, Oldest, Most reacted, and Most agreed.\n\nProcessing and outputs\n- WHEN a search is executed, THE system SHALL return results with total matches and page data in pages of 20 items for posts and 50 items for comments, including key metadata (title/excerpt/author/category/timestamps/reaction summaries/visibility state as appropriate).\n\nPerformance\n- THE system SHALL return common query results within 1 second and complex multi-filter queries within 3 seconds under typical load.\n\nSafety and integrity\n- IF a query triggers sensitive or election-period rules, THEN THE system SHALL elevate checks per governance policy and annotate affected results with compliance labels where applicable.\n\n### 4.7) Reporting, Blocking, and Automation Rules\nReporting\n- WHEN a user reports content, THE system SHALL require a reason category (e.g., Misinformation, Harassment, Hate, Spam, Off-topic, Illegal) and an optional note up to 500 characters.\n- WHERE a single content item receives ≥ 5 reports within 1 hour, THE system SHALL flag it for expedited review.\n\nAuto-hide thresholds\n- WHERE reports ≥ 20 from distinct users within 3 hours OR a weighted score threshold is exceeded (expert reports count as 2), THE system SHALL auto-hide the content pending review.\n- IF auto-hide is triggered, THEN THE system SHALL notify the author and provide an appeal link to the dispute workflow.\n\nBlocking\n- WHEN a user blocks another user, THE system SHALL hide the blocker’s view of the blockee’s content and prevent mentions and direct interactions between them.\n- WHILE a block is active, THE system SHALL suppress notifications originating from the blocked user to the blocker.\n\nStaff workflows\n- WHEN content is auto-hidden or reported beyond thresholds, THE system SHALL place it into the moderation queue with metadata: report counts by category, timestamps, involved users, and preliminary risk assessment.\n\nRate-limits on reporting\n- WHERE the user files reports, THE system SHALL limit to 30 reports per 24 hours.\n\n### 4.8) Draft, Review, Publish Workflow\nStates\n- Draft → Submitted for Review (optional) → Published → Updated (versioned) → Archived/Hidden.\n\nRules\n- WHERE the author is expert and the post is marked as “long-form research”, THE system SHALL require either editor review or source completeness check before publication.\n- WHERE the post includes a “content warning”, THE system SHALL display a preface and require user confirmation before viewing full content.\n- WHEN an editor rejects a submission, THE system SHALL return reasons and allow resubmission after corrections.\n- WHEN a post is archived, THE system SHALL remove it from feeds while retaining searchability for staff and author.\n\nSLA\n- WHERE review is required, THE system SHALL complete first review within 24 hours under normal operations.\n\n### 4.9) Announcements, Pinned Posts, Special Curation\n- WHERE the actor is editor or admin, THE system SHALL allow creating “Announcement” posts visible to all users.\n- WHEN a post is pinned in a section by an editor, THE system SHALL keep it at the top of that section for a configurable duration (1–14 days).\n- WHERE a post is featured in a curated collection, THE system SHALL annotate it with the collection label and ensure it appears in that collection’s feed.\n- IF a pinned item expires, THEN THE system SHALL unpin it automatically and record the unpin event in audit logs.\n- WHERE editorial quality requires temporary visibility reduction, THE system SHALL allow editors to apply non-policy-based soft-hiding with rationale visible to staff.\n\n### 4.10) Feeds, Timelines, Subscriptions\nPersonalization\n- WHERE a user follows topics or authors, THE system SHALL prioritize their content in the user’s home feed while ensuring at least 30% diversity from non-followed but relevant topics.\n- WHERE the actor is unauthenticated, THE system SHALL show a general feed based on overall quality and recency.\n\nOrdering and freshness\n- WHEN building feeds, THE system SHALL prefer recency within the past 72 hours and decay older items unless they are featured or actively discussed.\n- WHERE duplicate appearances would occur within the same feed page, THE system SHALL deduplicate items.\n\nIntegrity\n- IF a post is hidden or under sanction, THEN THE system SHALL exclude it from public feeds while staff views remain available.\n- WHERE a block or mute exists, THE system SHALL exclude blocked or muted sources from the viewer’s feed composition.\n\nPagination\n- THE system SHALL deliver feeds in pages of 20 posts, supporting infinite continuation from the user perspective.\n\nPerformance\n- THE system SHALL generate the first page of a personalized feed within 1.5 seconds under typical load.\n\n### 4.11) Notification Triggers Linkage (Business Events)\n- WHEN a user is mentioned in a post or comment, THE system SHALL trigger a “mention” notification per user preference.\n- WHEN a followed author publishes, THE system SHALL trigger a “new post by followed author” notification subject to frequency limits (max 3 per author per day).\n- WHEN a followed topic has new curated content, THE system SHALL trigger a “topic update” notification; batched in digests where configured.\n- WHEN a user’s post is reported and auto-hidden, THE system SHALL send an “action required” notification with appeal information.\n- WHEN an editor pins or features a user’s post, THE system SHALL notify the author of the feature placement.\n- WHERE DND or snooze preferences are set, THE system SHALL defer non-transactional notifications accordingly.\n\nDelivery channels and templates must follow the [Notifications and Communications Requirements](./11-pol-econ-board-notifications-and-communications.md).\n\n### 4.12) Rate-Limiting and Usage Restrictions\nPer-user limits (default)\n- WHERE the role is member, THE system SHALL enforce: up to 10 posts/day; 60 comments/day; 300 reactions/day; 30 reports/day.\n- WHERE the role is expert, THE system SHALL enforce: up to 20 posts/day; 100 comments/day; 500 reactions/day; 50 reports/day.\n- WHERE the role is newly registered (< 7 days), THE system SHALL halve the above limits.\n\nBurst control\n- WHEN a user performs more than 10 reactions within 10 seconds, THE system SHALL delay further reactions for 30 seconds.\n- WHEN a user attempts more than 5 post publications within 10 minutes, THE system SHALL delay further publications for 15 minutes and provide the next eligible time.\n\nAbuse escalations\n- IF repeated rate-limit violations occur 3 times within 24 hours, THEN THE system SHALL place the account under temporary restriction for 24 hours on posting and commenting.\n- WHERE automated signals indicate bot-like behavior, THE system SHALL require an interactive challenge before allowing further actions.\n\n### 4.13) Accessibility and Multilingual (Business)\nAccessibility\n- WHERE content includes images, THE system SHALL require descriptive alt-text 20–250 characters.\n- WHERE content includes audio/video, THE system SHALL require a transcript or captions before publication unless an editor grants an exception for breaking news with a 48-hour remediation window.\n- WHEN presenting color-coded badges or signals in business logic, THE system SHALL include textual equivalents.\n- WHERE links are provided, THE system SHALL use meaningful descriptive link text rather than raw URLs.\n\nLanguage\n- WHERE a post is created, THE system SHALL store its language and allow filtering by language in search and feeds.\n- WHERE multilingual content is supported, THE system SHALL link translations of the same post and allow users to prefer languages in feed preferences.\n- IF a preferred language version is unavailable, THEN THE system SHALL present the default language with a notice of available languages.\n\nSensitive periods\n- WHERE election or other sensitive political periods are in effect, THE system SHALL apply stricter review rules per the governance document and annotate affected posts with compliance tags.\n\n---\n\n## 5) Process Diagrams (Business Flows)\n\nDraft → Review → Publish\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Write Content\"]\n    B --> C[\"Save Draft\"]\n    C --> D{\"Requires Review?\"}\n  end\n  subgraph \"Review\"\n    E[\"Submit For Review\"] --> F[\"Editor Checks Sources\"]\n    F --> G{\"Approve?\"}\n  end\n  subgraph \"Publication\"\n    H[\"Publish\"] --> I[\"Create Version Record\"]\n    I --> J[\"Distribute To Feeds\"]\n  end\n  D -->|\"Yes\"| E\n  D -->|\"No\"| H\n  G -->|\"Yes\"| H\n  G -->|\"No\"| K[\"Reject With Reasons\"]\n  K --> C\n```\n\nReport → Moderation\n```mermaid\ngraph LR\n  A[\"User Reports Content\"] --> B[\"Collect Reasons\"]\n  B --> C{\"Threshold Met?\"}\n  C -->|\"No\"| D[\"Queue Standard Review\"]\n  C -->|\"Yes\"| E[\"Auto-Hide Content\"]\n  E --> F[\"Notify Author\"]\n  D --> G[\"Moderator Review\"]\n  F --> G\n  G --> H{\"Policy Violation?\"}\n  H -->|\"Yes\"| I[\"Apply Sanction\"]\n  H -->|\"No\"| J[\"Restore Content\"]\n  I --> K[\"Transparency Log\"]\n  J --> K\n```\n\n---\n\n## 6) Acceptance Criteria & Exceptions\nGeneral\n- THE system SHALL persist drafts, posts, comments, and reactions with correct ownership and timestamps, visible in subsequent retrievals within expected performance windows.\n- THE system SHALL prevent actions that exceed limits and provide user-facing reasons and next eligible times.\n- THE system SHALL create audit entries for staff-driven visibility changes (pin, feature, hide, unhide) including actor role, reason, and timestamp.\n\nPosts\n- WHEN publishing valid content, THE system SHALL return published status, version number, and visibility; WHEN invalid, errors SHALL identify the violated business rule (length, attachments, policy triggers) in natural language.\n- WHEN editing published posts, THE system SHALL create a new version and maintain access to prior versions.\n- IF a post is auto-hidden due to thresholds, THEN THE system SHALL notify the author with reason category and appeal link.\n\nComments\n- WHEN submitting valid comments, THE system SHALL append to the thread, increment counts, and notify mentioned users according to preferences.\n- IF a comment violates mass-mention limits or block rules, THEN THE system SHALL reject with a clear reason.\n\nSearch and feeds\n- WHEN executing typical searches and feed builds, THE system SHALL meet performance targets and return correct ordering, filtering, and deduplication.\n\nReporting and moderation\n- WHEN report thresholds are crossed, THE system SHALL auto-hide content, notify the author, and enqueue for review with required metadata.\n\nNotifications\n- WHEN eligible events occur, THE system SHALL enqueue the corresponding notification respecting opt-in status, DND/snooze, and frequency limits.\n\nExceptions and overrides\n- WHERE legal hold or compliance requires preservation, THE system SHALL prevent deletion and annotate the hold.\n- WHERE staff override is documented, THE system SHALL record the actor, reason, and timestamp in audit logs.\n- WHERE service-wide incidents necessitate temporary relaxation of limits (e.g., breaking elections news), THE system SHALL allow configured exceptions for a defined window and record the change.\n\nBusiness requirements only. All technical implementation decisions, including architecture, APIs, and database design, belong to the development team. Describes WHAT the pol-econ-board system must do from a business perspective and does not prescribe HOW to build it."},{"reason":"현실적인 사용자 관점의 시나리오를 제시하여 요구사항 검증과 테스트 기준을 제공하기 위함.","filename":"05-pol-econ-board-user-stories.md","documentType":"user-story","outline":["페르소나 정의(일반 회원/전문가/중재자/에디터/관리자)","핵심 시나리오(성공 경로)","보조·엣지 시나리오","오남용·남용 방지 시나리오","완료 정의(DoD) 및 수용 기준"],"audience":"development team","keyQuestions":["주요 사용자 여정에서 기대 행동과 결과는 무엇인가","엣지/실패 시나리오에서의 시스템 반응은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["자연어 중심의 사용자 관점 기술","측정 가능한 수용 기준 포함"],"content":"# pol-econ-board User Stories and Acceptance Criteria\n\nUser stories define complete, testable behaviors for pol-econ-board in business terms using EARS. All statements specify WHAT the system must do; all technical implementation decisions (architecture, APIs, database design) remain at the discretion of the development team.\n\n## Personas\n\n| Persona | Description | Primary Goals | Key Constraints | Anti-Goals |\n|--------|-------------|---------------|-----------------|-----------|\n| Member | Registered participant (real name or alias). Can create/manage own posts and comments, bookmark, follow topics/authors, vote/react, report, configure notifications. | Express opinions, discover credible content, manage personal library, receive relevant updates. | Must follow community rules; subject to rate limits and moderation; new-account restrictions. | Cannot moderate other users; cannot bypass policy checks; cannot view staff-only content. |\n| Expert | Verified political/economic domain expert; inherits Member capabilities with expert features (badge, expert topics, in-depth insights, expert Q&A). | Publish authoritative analysis, lead expert topics, answer community questions, build reputation. | Verification required; disclosure of affiliations when relevant; higher quality bar. | Cannot override policy enforcement; cannot edit others’ content without policy-based role. |\n| Moderator | Community operator enforcing rules. Triage reports, hide/remove content, request sanctions, manage disputes, maintain transparency logs. | Keep community safe and compliant; meet moderation SLAs; ensure due process. | Must follow sanction ladder and audit requirements; limited to permitted actions. | Cannot execute permanent bans without admin approval; cannot alter editorial curation. |\n| Editor | Content quality curator. Manage taxonomy (categories/tags), featured collections, announcements, pinned items; collaborate with moderators for policy violations. | Elevate high-signal content, maintain taxonomy hygiene, run curated programs. | Subject to pin/feature quotas; cannot issue user sanctions alone. | Cannot remove content for policy reasons without moderation; cannot change roles. |\n| Admin | System-wide operator. Manage roles/policies/settings, legal requests, transparency/audit oversight, system health indicators. | Govern operations, ensure compliance, publish transparency. | Separation of duties; sensitive actions require verification; audit logging for all admin actions. | Cannot skip transparency/audit requirements; cannot disable appeals process without policy basis. |\n\n## Core Scenarios (Happy Paths)\n\n### Member Core Scenarios\n\n1) Registration and Email Verification\n- User Story: As a Member, register and verify email to participate.\n- Acceptance Criteria (EARS):\n  - WHEN valid registration details are submitted, THE pol-econ-board SHALL create a pending account and send a verification message within 5 minutes.\n  - WHEN verification is completed within 24 hours, THE pol-econ-board SHALL activate the account and allow login immediately.\n  - IF the verification window expires, THEN THE pol-econ-board SHALL require a new verification before enabling login.\n\n2) Login, Session Continuity, and Device Awareness\n- User Story: As a Member, log in securely and maintain session without frequent interruptions.\n- Acceptance Criteria (EARS):\n  - WHEN valid credentials are submitted, THE pol-econ-board SHALL grant access and establish a session within 2 seconds under normal load.\n  - WHILE the session remains within policy limits, THE pol-econ-board SHALL preserve state and support silent token renewal.\n  - WHERE device session visibility is enabled, THE pol-econ-board SHALL list active sessions with device label, approximate location, and last activity.\n  - WHEN a user chooses log out from all devices, THE pol-econ-board SHALL revoke all active sessions within 60 seconds and confirm completion.\n\n3) Topic and Author Following with Personalized Feed\n- User Story: As a Member, follow topics and authors to personalize discovery.\n- Acceptance Criteria (EARS):\n  - WHEN a topic or author is followed, THE pol-econ-board SHALL update the subscription list and adjust feed composition on the next refresh.\n  - WHILE followed items exist, THE pol-econ-board SHALL present at least 20 items per page prioritized by recency and relevance.\n  - IF a topic or author is unfollowed, THEN THE pol-econ-board SHALL remove it from the subscription list and reflect the change on next feed build.\n\n4) Post Drafting, Editing Window, and Publication\n- User Story: As a Member, draft, edit, and publish posts.\n- Acceptance Criteria (EARS):\n  - WHEN a draft with valid required fields is saved, THE pol-econ-board SHALL persist it and return a stable identifier within 2 seconds.\n  - WHEN a valid draft is submitted for publication, THE pol-econ-board SHALL publish it and include it in feeds and search within 10 seconds subject to policy checks.\n  - WHERE a post is edited within 10 minutes of publication, THE pol-econ-board SHALL apply a silent update without feed bump; otherwise apply normal bump.\n  - IF content exceeds policy limits (length, restricted tags, missing required sources), THEN THE pol-econ-board SHALL block publication and enumerate the violated rules in user language.\n\n5) Commenting and Mentions\n- User Story: As a Member, comment and @mention others for discussion.\n- Acceptance Criteria (EARS):\n  - WHEN a comment meets validation rules, THE pol-econ-board SHALL post it within 2 seconds and notify recipients per preferences.\n  - WHERE a mention is included and the target permits mentions, THE pol-econ-board SHALL tag the mention and trigger a notification.\n  - IF the target content is removed or locked, THEN THE pol-econ-board SHALL prevent new comments and provide a policy-aligned reason.\n\n6) Reactions and Voting\n- User Story: As a Member, react or vote to signal evaluation.\n- Acceptance Criteria (EARS):\n  - WHEN a valid reaction or vote is submitted, THE pol-econ-board SHALL record it once per user per item and update aggregate counts within 1 second.\n  - WHERE reactions are disabled or the item is archived, THE pol-econ-board SHALL prevent new reactions and indicate the state.\n  - IF a conflicting vote is attempted, THEN THE pol-econ-board SHALL keep the most recent valid state without double counting.\n\n7) Bookmarks and Reading History\n- User Story: As a Member, bookmark and track reading to revisit items.\n- Acceptance Criteria (EARS):\n  - WHEN a bookmark request is submitted, THE pol-econ-board SHALL create it and confirm within 1 second.\n  - WHILE a post is read for ≥ 10 seconds or ≥ 80% of length, THE pol-econ-board SHALL mark it as read.\n  - IF a bookmarked item is deleted or made private, THEN THE pol-econ-board SHALL retain a placeholder with permitted metadata.\n\n8) Reporting Content and Blocking Users\n- User Story: As a Member, report problematic content and block users for safety.\n- Acceptance Criteria (EARS):\n  - WHEN a report with valid category and context is submitted, THE pol-econ-board SHALL enqueue it with timestamp and return acknowledgment within 2 seconds.\n  - WHEN a user is blocked, THE pol-econ-board SHALL immediately prevent delivery of their content and notifications to the blocker.\n  - IF interaction with blocked users or content is attempted, THEN THE pol-econ-board SHALL prevent the action and state the block rule.\n\n9) Notification Preferences and Quiet Hours\n- User Story: As a Member, configure notifications to limit noise.\n- Acceptance Criteria (EARS):\n  - WHEN notification preferences are updated, THE pol-econ-board SHALL apply changes to future notifications within 1 minute.\n  - WHERE digest mode is selected, THE pol-econ-board SHALL aggregate eligible events and deliver per configured schedule.\n  - IF a channel is disabled, THEN THE pol-econ-board SHALL suppress non-mandatory notifications to that channel and confirm suppression.\n  - WHERE quiet hours are enabled, THE pol-econ-board SHALL defer non-critical notifications until quiet hours end.\n\n10) Search, Sort, and Filter\n- User Story: As a Member, find relevant content efficiently.\n- Acceptance Criteria (EARS):\n  - WHEN a search query up to 200 characters is submitted with optional filters (category, tag, author, role=expert, date range, min reaction), THE pol-econ-board SHALL return a results page within 1 second for common queries and within 3 seconds for complex filters.\n  - WHERE sorting is applied, THE pol-econ-board SHALL support Newest, Oldest, Most reacted, and Most agreed orderings.\n  - IF filters are invalid (e.g., inverted date range), THEN THE pol-econ-board SHALL reject the request and present corrective guidance.\n\n11) Edit and Delete Own Content\n- User Story: As a Member, manage posts and comments responsibly.\n- Acceptance Criteria (EARS):\n  - WHEN a published post is edited, THE pol-econ-board SHALL create a new version and maintain prior versions in history accessible to authorized roles.\n  - WHEN own post is deleted, THE pol-econ-board SHALL soft-delete immediately and preserve a 30-day restoration window.\n  - WHEN own comment is deleted, THE pol-econ-board SHALL soft-delete and preserve a 14-day restoration window, leaving a placeholder.\n\n12) Account Security: Password Reset and Email Change\n- User Story: As a Member, recover access and maintain up-to-date contact.\n- Acceptance Criteria (EARS):\n  - WHEN a password reset is requested, THE pol-econ-board SHALL send a single-use token and accept a new password within 30 minutes.\n  - WHEN email change is initiated, THE pol-econ-board SHALL require re-authentication and verification of the new email before updating contact.\n\n### Expert Core Scenarios\n\n1) Expert Verification Lifecycle\n- User Story: As an Expert candidate, submit credentials to gain expert capabilities.\n- Acceptance Criteria (EARS):\n  - WHEN required verification data is submitted, THE pol-econ-board SHALL record the application and notify reviewers within 5 minutes.\n  - WHILE under review, THE pol-econ-board SHALL expose status and allow supplemental evidence.\n  - IF approved, THEN THE pol-econ-board SHALL assign the expert role and display the badge on new and existing content within 10 minutes.\n\n2) Conflict of Interest (COI) Disclosure\n- User Story: As an Expert, disclose affiliations to maintain trust.\n- Acceptance Criteria (EARS):\n  - WHEN a post discusses entities with potential COI, THE pol-econ-board SHALL require affiliation disclosure before publication.\n  - IF disclosure is missing for flagged contexts, THEN THE pol-econ-board SHALL hold publication and request disclosure.\n\n3) Expert Topic Proposal and Leadership\n- User Story: As an Expert, propose specialized topics and lead content.\n- Acceptance Criteria (EARS):\n  - WHEN a topic proposal with required metadata is submitted, THE pol-econ-board SHALL route it for editorial review and return a tracking ID.\n  - IF approved, THEN THE pol-econ-board SHALL create the topic, assign the proposer as lead contributor, and publish guidelines.\n  - WHERE rejected, THE pol-econ-board SHALL record rationale visible to the proposer.\n\n4) In-depth Insight Publication and Versioning\n- User Story: As an Expert, publish in-depth insights with expert labeling.\n- Acceptance Criteria (EARS):\n  - WHEN a compliant expert post is submitted, THE pol-econ-board SHALL publish it with expert labeling and include it in expert feeds.\n  - WHERE curation flags the post, THE pol-econ-board SHALL hold publication pending review and notify within 10 minutes.\n  - IF updated after publication, THEN THE pol-econ-board SHALL version the content and expose version history to authorized roles.\n\n5) Expert Q&A Participation\n- User Story: As an Expert, answer tagged questions effectively.\n- Acceptance Criteria (EARS):\n  - WHEN posting an answer to a tagged question, THE pol-econ-board SHALL mark it expert-answered and notify the asker.\n  - WHERE multiple experts answer, THE pol-econ-board SHALL order by freshness and relevance and allow reactions/votes.\n  - IF the question is closed by policy, THEN THE pol-econ-board SHALL prevent new answers and indicate closure reason.\n\n### Moderator Core Scenarios\n\n1) Report Intake and Triage\n- User Story: As a Moderator, triage incoming reports to act within SLA.\n- Acceptance Criteria (EARS):\n  - WHEN a new report arrives, THE pol-econ-board SHALL place it in the triage queue with severity and category metadata immediately.\n  - WHILE a moderator handles a report, THE pol-econ-board SHALL lock it to that moderator to prevent conflicting actions.\n  - IF the report lacks sufficient context, THEN THE pol-econ-board SHALL request more information from the reporter.\n\n2) Provisional Hide, Removal, and Restoration\n- User Story: As a Moderator, hide or remove violating content and restore if appropriate.\n- Acceptance Criteria (EARS):\n  - WHEN a provisional hide is applied under rules, THE pol-econ-board SHALL hide the content within 1 minute and log the action.\n  - WHERE removal is warranted, THE pol-econ-board SHALL remove content, preserve audit evidence, and notify involved parties.\n  - IF an action is reversed after review, THEN THE pol-econ-board SHALL restore visibility and update transparency logs.\n\n3) Sanction Requests and Enforcement\n- User Story: As a Moderator, request sanctions to deter violations.\n- Acceptance Criteria (EARS):\n  - WHEN a sanction request meets thresholds, THE pol-econ-board SHALL route it for approval and start SLA timers.\n  - WHERE a sanction is approved, THE pol-econ-board SHALL apply it and restrict affected actions immediately.\n  - IF the sanction period elapses, THEN THE pol-econ-board SHALL lift restrictions automatically and log completion.\n\n4) Appeals Handling\n- User Story: As a Moderator, process appeals to ensure fairness.\n- Acceptance Criteria (EARS):\n  - WHEN an appeal is submitted within the window, THE pol-econ-board SHALL acknowledge receipt and place it in an appeals queue.\n  - WHILE an appeal is pending, THE pol-econ-board SHALL pause further escalations where policy allows.\n  - IF the appeal is upheld, THEN THE pol-econ-board SHALL reverse actions and notify parties; ELSE THE pol-econ-board SHALL provide rationale and next steps.\n\n5) Election-Period Triage\n- User Story: As a Moderator, apply heightened standards during election periods.\n- Acceptance Criteria (EARS):\n  - WHERE the system is in election-period state, THE pol-econ-board SHALL prioritize flagged items and shorten internal review timers according to policy.\n  - WHEN content about elections lacks required sourcing, THE pol-econ-board SHALL hold publication pending verification.\n\n### Editor Core Scenarios\n\n1) Taxonomy Management and Deprecation\n- User Story: As an Editor, manage categories, tags, and deprecations.\n- Acceptance Criteria (EARS):\n  - WHEN a category/tag update is submitted, THE pol-econ-board SHALL validate uniqueness and policy compliance and apply changes within 2 minutes.\n  - WHERE a category is deprecated, THE pol-econ-board SHALL migrate attached content to a designated alternative and log mappings.\n  - IF a change would break references, THEN THE pol-econ-board SHALL block it and propose safe alternatives.\n\n2) Featured Collections, Pinning, and Rotation\n- User Story: As an Editor, curate featured sets and manage pins.\n- Acceptance Criteria (EARS):\n  - WHEN a featured collection with valid items is created, THE pol-econ-board SHALL publish it and expose it to eligible feeds.\n  - WHERE pinning limits are reached, THE pol-econ-board SHALL reject new pins and indicate current allocations.\n  - IF a pinned item expires or is removed, THEN THE pol-econ-board SHALL unpin it and update dependent placements.\n\n3) Scheduled Publishing and Announcements\n- User Story: As an Editor, schedule posts and publish announcements.\n- Acceptance Criteria (EARS):\n  - WHEN a scheduled publish time in Asia/Seoul is set, THE pol-econ-board SHALL publish within the scheduled minute barring policy holds.\n  - WHERE an announcement is created by authorized roles, THE pol-econ-board SHALL display it to all users and log publish/unpublish events.\n\n### Admin Core Scenarios\n\n1) Role and Permission Management\n- User Story: As an Admin, assign roles and manage permissions appropriately.\n- Acceptance Criteria (EARS):\n  - WHEN a role is assigned or revoked, THE pol-econ-board SHALL reflect the change in authorization decisions within 1 minute.\n  - WHERE conflicting role changes occur, THE pol-econ-board SHALL apply deterministic precedence per policy and log resolution.\n  - IF assignment checks fail, THEN THE pol-econ-board SHALL reject the change with a policy-aligned reason.\n\n2) Legal Request and Transparency Reporting\n- User Story: As an Admin, process legal requests and publish transparency data.\n- Acceptance Criteria (EARS):\n  - WHEN a lawful request is recorded with required metadata, THE pol-econ-board SHALL freeze affected data changes and start fulfillment timers.\n  - WHERE disclosure is authorized, THE pol-econ-board SHALL produce required artifacts and update status.\n  - IF the request is withdrawn or expires, THEN THE pol-econ-board SHALL lift holds and record closure.\n  - WHEN the monthly transparency report is due, THE pol-econ-board SHALL publish aggregated moderation metrics by the policy deadline.\n\n---\n\n## Secondary and Edge Scenarios\n\n1) Draft Autosave and Recovery\n- Acceptance Criteria (EARS):\n  - WHILE editing and changes are detected, THE pol-econ-board SHALL autosave at least every 30 seconds or on significant edits.\n  - IF a session ends unexpectedly, THEN THE pol-econ-board SHALL offer the most recent autosaved draft upon return.\n\n2) Version Conflicts on Edit\n- Acceptance Criteria (EARS):\n  - WHEN an edit conflicts with a newer server version, THE pol-econ-board SHALL detect the conflict and require confirmation to merge or overwrite.\n  - IF the user cancels, THEN THE pol-econ-board SHALL preserve the server version and local changes as a new draft.\n\n3) Comment Thread Locking\n- Acceptance Criteria (EARS):\n  - WHEN a thread is locked, THE pol-econ-board SHALL prevent new comments and reactions and display the locked state to authorized viewers.\n  - IF the lock is lifted, THEN THE pol-econ-board SHALL restore normal interaction immediately.\n\n4) Rate Limits and Cooldowns\n- Acceptance Criteria (EARS):\n  - WHEN defined action limits are exceeded, THE pol-econ-board SHALL block further attempts for the cooldown period and indicate remaining wait time.\n  - WHERE elevated abuse risk is detected, THE pol-econ-board SHALL apply stricter temporary limits consistent with policy.\n\n5) Soft-Deleted Content References\n- Acceptance Criteria (EARS):\n  - WHEN content is soft-deleted, THE pol-econ-board SHALL maintain a placeholder with non-sensitive metadata where policy allows.\n  - IF hard deletion is required by policy, THEN THE pol-econ-board SHALL remove references and indicate unavailability.\n\n6) Appeal Window Boundary\n- Acceptance Criteria (EARS):\n  - WHEN an action triggers an appealable decision, THE pol-econ-board SHALL show the appeal window and accept appeals until the exact cutoff.\n  - IF an appeal arrives after the deadline, THEN THE pol-econ-board SHALL reject it and provide information about next permitted steps.\n\n7) Notification Delivery Guarantees and Quiet Hours\n- Acceptance Criteria (EARS):\n  - WHEN a triggering event occurs, THE pol-econ-board SHALL enqueue notification delivery within 1 minute and attempt delivery according to preferences.\n  - IF delivery fails, THEN THE pol-econ-board SHALL retry per policy and record the outcome for user-visible status.\n  - WHERE quiet hours apply, THE pol-econ-board SHALL defer non-critical deliveries until quiet hours end.\n\n8) Expert Status Revocation\n- Acceptance Criteria (EARS):\n  - WHEN expert status is revoked, THE pol-econ-board SHALL remove the badge from new and existing public views and update permissions immediately.\n  - WHERE prior content references expert status, THE pol-econ-board SHALL preserve historical accuracy in audit contexts while removing public-facing badges.\n\n9) Duplicate Submission Protection and Idempotency\n- Acceptance Criteria (EARS):\n  - WHEN the same action is detected as a retry within 30 seconds, THE pol-econ-board SHALL return the prior success identifier without duplicating side effects.\n  - IF a duplicate post is detected by similarity within 5 minutes, THEN THE pol-econ-board SHALL block publication and offer options to edit, merge, or discard.\n\n10) Offline and Intermittent Connectivity\n- Acceptance Criteria (EARS):\n  - WHEN connectivity is lost during draft editing, THE pol-econ-board SHALL preserve the last confirmed version and surface a reconciliation prompt on restore.\n  - WHEN connectivity resumes, THE pol-econ-board SHALL synchronize pending actions in submission order with idempotency.\n\n---\n\n## Abuse and Misuse Prevention Scenarios\n\n1) Spam Posting and Mass Mentions\n- Acceptance Criteria (EARS):\n  - WHEN posting frequency or content patterns match spam heuristics, THE pol-econ-board SHALL throttle or block submission and require additional verification.\n  - WHERE mass mentions exceed policy thresholds, THE pol-econ-board SHALL block the operation and indicate limits.\n\n2) Coordinated Brigading and Vote Manipulation\n- Acceptance Criteria (EARS):\n  - WHEN correlated abnormal voting is detected, THE pol-econ-board SHALL flag tallies for review and temporarily exclude suspicious signals from public counts.\n  - IF accounts are confirmed abusive, THEN THE pol-econ-board SHALL invalidate related interactions and apply sanctions per policy.\n\n3) Harassment and Doxxing Prevention\n- Acceptance Criteria (EARS):\n  - WHEN content includes prohibited personal information or targeted harassment patterns, THE pol-econ-board SHALL block or remove the content and escalate to moderation.\n  - WHERE repeated harassment originates from an account, THE pol-econ-board SHALL escalate sanctions per severity ladder.\n\n4) False Reporting Abuse\n- Acceptance Criteria (EARS):\n  - WHEN reporting patterns from an account are repeatedly invalid, THE pol-econ-board SHALL limit reporting privileges temporarily and inform the user.\n  - IF a subsequent report is validated within a defined period, THEN THE pol-econ-board SHALL restore normal privileges.\n\n5) Election-Period Safeguards\n- Acceptance Criteria (EARS):\n  - WHERE the system is in election-period state, THE pol-econ-board SHALL apply heightened content checks and shorter moderation SLAs for flagged items.\n  - WHEN election-related content lacks required sourcing, THE pol-econ-board SHALL hold publication pending verification.\n\n6) Sockpuppeting and Evasion\n- Acceptance Criteria (EARS):\n  - WHEN evasion of sanctions via new accounts is detected, THE pol-econ-board SHALL link related accounts for enforcement and apply escalated sanctions per policy.\n\n---\n\n## Definition of Done (DoD) and Cross-Cutting Acceptance Criteria\n\n- DoD per story\n  - THE pol-econ-board SHALL satisfy all EARS acceptance criteria defined for the story.\n  - THE pol-econ-board SHALL implement input validation rules, clear error states, and reversible outcomes where policy allows.\n  - THE pol-econ-board SHALL log business events necessary for audit and transparency with durable identifiers.\n  - THE pol-econ-board SHALL meet performance expectations (e.g., common actions within 1–2 seconds P95; publication/indexing within stated windows).\n  - THE pol-econ-board SHALL present policy-aligned user messages without revealing sensitive internals.\n\n- Cross-cutting criteria\n  - WHEN an operation succeeds, THE pol-econ-board SHALL return a durable identifier referencing the resulting entity.\n  - IF an operation fails, THEN THE pol-econ-board SHALL provide a reason code and a recoverable next step where applicable.\n  - WHILE permissions are being changed, THE pol-econ-board SHALL keep authorization decisions consistent and atomic from the user perspective.\n  - WHERE data retention or legal holds apply, THE pol-econ-board SHALL respect retention windows and display availability states.\n  - WHERE localization applies, THE pol-econ-board SHALL provide messages in the user’s preferred language with consistent terminology.\n  - WHERE accessibility applies, THE pol-econ-board SHALL include textual equivalents for non-text signals in user-facing messages.\n\n---\n\n## Visual Flows (Representative)\n\n### Post Creation, Review, and Publication (Member → Editor/Moderator)\n```mermaid\ngraph LR\n  subgraph \"Authoring\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Submit For Publication\"]\n  end\n  subgraph \"Editorial/Policy Checks\"\n    D[\"Policy Validation\"] --> E{\"Compliant?\"}\n  end\n  subgraph \"Outcomes\"\n    F[\"Publish Post\"]\n    G[\"Hold For Review\"]\n    H[\"Reject With Guidance\"]\n  end\n  C --> D\n  E -->|\"Yes\"| F\n  E -->|\"Needs Review\"| G\n  E -->|\"No\"| H\n```\n\n### Report Intake and Moderation Action\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    R1[\"Member Submits Report\"] --> R2[\"Categorize & Timestamp\"]\n    R2 --> R3[\"Queue For Triage\"]\n  end\n  subgraph \"Triage\"\n    T1[\"Assign To Moderator\"] --> T2{\"Sufficient Context?\"}\n  end\n  subgraph \"Action\"\n    A1[\"Provisional Hide\"]\n    A2[\"Remove & Preserve Evidence\"]\n    A3[\"No Action\"]\n  end\n  R3 --> T1\n  T2 -->|\"Yes\"| A1\n  T2 -->|\"Yes\"| A2\n  T2 -->|\"No\"| A3\n```\n\n### Expert Verification and COI Disclosure\n```mermaid\ngraph LR\n  subgraph \"Application\"\n    V1[\"Submit Verification Data\"] --> V2[\"Record & Notify Reviewers\"]\n  end\n  subgraph \"Review\"\n    V3[\"Review Credentials\"] --> V4{\"Approve?\"}\n  end\n  subgraph \"Outcomes\"\n    V5[\"Assign Expert Role\"]\n    V6[\"Request More Evidence\"]\n    V7[\"Reject With Rationale\"]\n  end\n  V2 --> V3\n  V4 -->|\"Yes\"| V5\n  V4 -->|\"No\"| V7\n  V3 --> V6\n```\n\n### Notification Preferences and Quiet Hours\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    P1[\"Open Preferences\"] --> P2[\"Set Categories & Channels\"]\n    P2 --> P3[\"Enable Quiet Hours\"]\n    P2 --> P4[\"Select Digest Frequency\"]\n  end\n  subgraph \"Evaluation\"\n    E1[\"Event Triggered\"] --> E2[\"Check Preferences\"]\n    E2 --> E3{\"Suppress?\"}\n  end\n  subgraph \"Delivery\"\n    D1[\"Queue In-App\"]\n    D2[\"Queue Email\"]\n  end\n  E3 -->|\"Yes\"| E4[\"Defer or Suppress\"]\n  E3 -->|\"No\"| D1\n  E3 -->|\"No\"| D2\n```\n\n---\n\n## Related References\n- Functional feature details: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md)\n- Process diagrams and exceptions: [User Flows and Visual Journeys for pol-econ-board](./06-pol-econ-board-user-flows.md)\n\nBusiness-scope statement: content specifies WHAT pol-econ-board must do from a user perspective; developers retain full autonomy over technical implementation, including architecture, APIs, and database design."},{"reason":"주요 업무 절차를 시각적으로 정리하여 팀 간 커뮤니케이션과 구현 일관성을 높이기 위함.","filename":"06-pol-econ-board-user-flows.md","documentType":"user-flow","outline":["사용자 여정 개요","계정 생성·인증 플로우","게시글 작성·수정·발행 플로우","신고 접수→중재→이의제기 플로우","알림 설정·수신 플로우","Mermaid 다이어그램(좌→우 흐름, 서브그래프 활용)","예외 분기 및 롤백 흐름"],"audience":"development team","keyQuestions":["각 플로우의 단계와 분기 조건은 무엇인가","역할별로 다른 경로와 승인 포인트는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["Mermaid 문법 규칙 엄수(이중따옴표, 화살표 규칙)","API/DB/아키텍처 세부 금지"],"content":"# pol-econ-board User Flows\n\n## Scope and Principles\n- Business workflows covering account creation and authentication, content authoring and publishing, reporting and moderation with appeal, and notifications configuration and delivery.\n- Roles in scope: member, expert, moderator, editor, admin.\n- Out of scope: frontend UI/UX layouts, API endpoints, database schemas, infrastructure design.\n- Implementation ownership: defines WHAT happens; all technical implementation decisions (architecture, APIs, database design, encryption, infrastructure) belong to developers.\n- Consistency rules: EARS requirements throughout; Mermaid diagrams use left-to-right orientation; all labels in double quotes; no spaces between brackets/braces and quotes; correct arrow syntax.\n- Time references: user-perceived performance and any SLAs are expressed in business terms; default business timezone Asia/Seoul (KST).\n\n## User Journey Overview\nThe service supports trustworthy political/economic discourse. Users discover content, register, verify, and sign in; create and publish posts; engage via comments and reactions; and escalate issues through reporting. Experts produce in-depth analyses; moderators and editors ensure compliance and quality; admins manage global policies and escalations.\n\nKey journey highlights:\n- Onboarding: registration, email verification, sign-in, session maintenance, secure sign-out across devices.\n- Creation: draft → edit → version tracking → publish; optional pre-publish review based on policies and role capabilities.\n- Governance: report → triage → action (hide/delete/sanction) → transparency log → appeal → review → resolution.\n- Notifications: real-time and batch/digest messages that respect user preferences, quiet hours, and rate limits.\n\n### High-Level Journey Diagram\n```mermaid\ngraph LR\n  A[\"Discover Content\"] --> B[\"Register/Sign In\"]\n  B --> C[\"Create Draft/Post\"]\n  C --> D{\"Publish?\"}\n  D -->|\"Yes\"| E[\"Visible Per Policy\"]\n  D -->|\"No\"| F[\"Save as Draft\"]\n  E --> G[\"Engage(Comments/Reactions)\"]\n  G --> H{\"Policy Violation Report?\"}\n  H -->|\"No\"| I[\"Continue Engagement\"]\n  H -->|\"Yes\"| J[\"Moderation Workflow\"]\n  J --> K{\"Action Required?\"}\n  K -->|\"Yes\"| L[\"Apply Action(Sanction/Hide/Delete)\"]\n  K -->|\"No\"| M[\"Close with No Action\"]\n  E --> N[\"Notifications\"]\n```\n\n## Account Creation and Authentication Flow\nCovers registration, email verification, sign-in, session maintenance, sign-out, password reset, and cross-device revocation. Token usage adheres to JWT-based principles defined in the authentication requirements.\n\n### Narrative Flow\n- Registration: A user submits registration data; inputs are validated; a pending-verification account is created; verification instructions are sent; account activates upon successful verification.\n- Sign-in: A user submits credentials; the system validates and establishes a session with short-lived access and longer-lived refresh tokens. Failed attempts increase a counter that can trigger temporary lockout.\n- Password reset: A user initiates a reset; a one-time, time-bound reset process is issued; after success, prior sessions are invalidated per policy.\n- Sign-out and device revocation: A user signs out on the current device and may revoke all sessions across all devices.\n\n### Role Notes\n- All roles use the same authentication and session flow; role assignment influences authorization decisions after sign-in.\n\n### EARS Requirements (Authentication)\n- THE authentication service SHALL accept registration with email and password and create an account in a pending-verification state.\n- WHEN a user completes email verification within the valid window, THE authentication service SHALL activate the account for sign-in.\n- IF email verification is attempted after expiration, THEN THE authentication service SHALL deny activation and allow requesting a new verification process.\n- WHEN a user submits valid credentials, THE authentication service SHALL establish a session and issue tokens with defined expirations.\n- IF a login attempt uses invalid credentials, THEN THE authentication service SHALL reject the login, increment a failure counter, and present a non-revealing error message.\n- WHERE the failure counter exceeds the lockout threshold within a window, THE authentication service SHALL apply a temporary login delay and provide guidance for password reset.\n- WHEN a user requests password reset, THE authentication service SHALL issue a one-time reset process bound to time and single-use constraints.\n- WHEN a password reset is completed, THE authentication service SHALL invalidate prior sessions according to security policy.\n- WHEN a user signs out, THE authentication service SHALL terminate the current session immediately.\n- WHEN a user requests device-wide sign-out, THE authentication service SHALL revoke all active sessions associated with the account.\n- WHILE a session is active, THE authentication service SHALL refresh access according to token refresh policy and deny refresh after refresh expiration.\n- THE authentication service SHALL respond to sign-in attempts within 2 seconds under normal load.\n\n### Account Creation & Authentication Diagram\n```mermaid\ngraph LR\n  subgraph \"Registration\"\n    A[\"Start Registration\"] --> B[\"Validate Inputs\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Create Pending Account\"]\n    C -->|\"No\"| E[\"Reject and Explain\"]\n    D --> F[\"Send Verification\"]\n  end\n\n  subgraph \"Verification\"\n    F --> G[\"User Follows Link\"]\n    G --> H{\"Within Valid Window?\"}\n    H -->|\"Yes\"| I[\"Activate Account\"]\n    H -->|\"No\"| J[\"Offer New Verification\"]\n  end\n\n  subgraph \"Sign-In & Session\"\n    K[\"Submit Credentials\"] --> L[\"Validate Credentials\"]\n    L --> M{\"Valid?\"}\n    M -->|\"Yes\"| N[\"Issue Tokens\"]\n    M -->|\"No\"| O[\"Reject and Increment Counter\"]\n    N --> P[\"Access Protected Resources\"]\n    P --> Q{\"Refresh Needed?\"}\n    Q -->|\"Yes\"| R[\"Refresh Within Policy\"]\n    Q -->|\"No\"| S[\"Continue\"]\n  end\n\n  subgraph \"Sign-Out & Revocation\"\n    T[\"User Sign-Out\"] --> U[\"Terminate Current Session\"]\n    V[\"Revoke All Devices\"] --> W[\"Invalidate All Sessions\"]\n  end\n```\n\n## Post Create, Edit, Publish Flow\nCovers drafting, editing, versioning, and publishing with policy checks and role-based nuances.\n\n### Narrative Flow\n- Drafting: Any authenticated member or expert creates drafts with autosave. Editors and admins typically do not author on behalf of others unless policy allows; editors manage curation and featured placement via separate processes.\n- Editing: Authors freely edit drafts; edits to published posts create versions with change logs. Members update their own content; experts publish “insight” or “research” posts under the same versioning rules.\n- Pre-publish checks: Policy validations run (e.g., restricted topics during sensitive periods, required sources for factual claims). Signals or rules may route posts for moderator review.\n- Publishing: If checks pass and no mandatory review applies, the post becomes visible per visibility policy (public or restricted). If review is required, visibility remains limited until approval.\n\n### Role Notes\n- member: drafts, edits, publishes own content; subject to automated checks and potential moderation review.\n- expert: same as member with expert labeling; does not bypass policy enforcement.\n- editor: features and pins posts; manages topics/labels; cannot unilaterally override policy enforcement.\n- moderator: may hold, hide, or request actions per governance policy.\n- admin: oversees legal/policy compliance and system-level settings.\n\n### EARS Requirements (Authoring & Publishing)\n- WHEN an authenticated user creates a draft, THE content service SHALL save the draft and maintain an immutable version history upon each significant save.\n- WHILE a post remains in draft, THE content service SHALL restrict visibility to the author and authorized reviewers where applicable.\n- WHEN an author attempts to publish, THE content service SHALL execute policy checks including restricted periods, mandatory citations, and prohibited content categories.\n- IF any mandatory check fails, THEN THE content service SHALL block publishing, present failure reasons, and preserve the draft state.\n- WHERE a post is flagged by automated heuristics or configured rules, THE content service SHALL route the post to a moderation queue and defer public visibility until decision.\n- WHEN a post passes all checks without mandatory review, THE content service SHALL publish the post and set visibility per policy immediately.\n- WHEN an author edits a published post, THE content service SHALL create a new version, preserve prior versions, and update the live version upon successful checks.\n- IF an author attempts to edit content under active investigation, THEN THE content service SHALL restrict edits to draft-copy only and prevent live changes until the investigation concludes.\n- THE content service SHALL record publication timestamps and version identifiers for transparency.\n- THE content service SHALL complete pre-publish validation within 3 seconds for standard-length posts under normal load.\n\n### Authoring & Publishing Diagram\n```mermaid\ngraph LR\n  subgraph \"Drafting\"\n    A[\"Start Draft\"] --> B[\"Autosave Draft\"]\n    B --> C[\"Edit Content\"]\n  end\n\n  subgraph \"Pre-Publish Checks\"\n    C --> D[\"Run Policy Checks\"]\n    D --> E{\"Checks Pass?\"}\n    E -->|\"No\"| F[\"Block Publish and Explain\"]\n    E -->|\"Yes\"| G{\"Flagged for Review?\"}\n    G -->|\"Yes\"| H[\"Route to Moderation Queue\"]\n    G -->|\"No\"| I[\"Publish Immediately\"]\n  end\n\n  subgraph \"Post-Publish\"\n    I --> J[\"Visible per Policy\"]\n    H --> K{\"Moderator Decision\"}\n    K -->|\"Approve\"| L[\"Publish\"]\n    K -->|\"Reject\"| M[\"Return to Draft with Reasons\"]\n    K -->|\"Request Changes\"| N[\"Author Revises Draft\"]\n    N -.-> D\n  end\n\n  subgraph \"Editing Published Content\"\n    O[\"Edit Published Post\"] --> P[\"Create New Version\"]\n    P --> D\n  end\n```\n\n## Report Intake → Moderation → Appeal Flow\nDefines how users report content, how moderators triage and act, and how authors can appeal decisions. Time expectations are stated in business terms.\n\n### Narrative Flow\n- Reporting: Any authenticated user reports content under specified categories (e.g., misinformation, hate, spam). The system validates report completeness and enters it into the moderation queue.\n- Triage: Moderators review by severity and context, consult guidelines, and record transparent decisions, including temporary hiding where warranted.\n- Actions: Outcomes include no action, warning, temporary suspension, edit request, hide, or delete. Sanctioning follows the governance policy and transparency logging.\n- Appeal: Affected users file appeals within a defined window. Appeals are reviewed by a different moderator or a designated reviewer. Decisions are logged and communicated.\n\n### Role Notes\n- member/expert: submit reports; appeal actions affecting their content or account.\n- moderator: triage reports; apply content actions; propose or apply sanctions within remit.\n- editor: collaborates on quality; does not override moderation outcomes unilaterally.\n- admin: handles escalations, legal requests, and final adjudication when policy demands.\n\n### EARS Requirements (Moderation)\n- WHEN a user submits a report with a valid category and target, THE governance service SHALL create a case and place it in the moderation queue.\n- IF the report lacks required details, THEN THE governance service SHALL reject the submission and instruct the reporter to provide missing fields.\n- WHERE content presents imminent harm indicators, THE governance service SHALL apply temporary hiding pending expedited review.\n- WHEN a moderator reviews a case, THE governance service SHALL require a decision record including category, rationale, and action.\n- WHEN a case is resolved with action, THE governance service SHALL notify the reporter and affected parties with outcome and rationale.\n- WHERE a sanction affects account capabilities, THE governance service SHALL enforce restrictions immediately upon decision.\n- WHEN an appeal is received within the allowed window, THE governance service SHALL assign it to an eligible reviewer distinct from the original decision maker.\n- IF an appeal is upheld, THEN THE governance service SHALL restore the content or reverse sanctions and update the transparency record.\n- IF an appeal is denied, THEN THE governance service SHALL maintain the action and record the rationale.\n- THE governance service SHALL target initial triage within 24 hours for standard cases and within 2 hours for imminent harm indicators.\n\n### Moderation & Appeal Diagram\n```mermaid\ngraph LR\n  subgraph \"Report Intake\"\n    A[\"Submit Report\"] --> B[\"Validate Fields\"]\n    B --> C{\"Complete?\"}\n    C -->|\"No\"| D[\"Reject and Guide\"]\n    C -->|\"Yes\"| E[\"Create Case\"]\n  end\n\n  subgraph \"Triage & Review\"\n    E --> F{\"Imminent Harm?\"}\n    F -->|\"Yes\"| G[\"Temporarily Hide Content\"]\n    F -->|\"No\"| H[\"Queue by Priority\"]\n    G --> I[\"Expedited Review\"]\n    H --> I\n    I --> J{\"Decision\"}\n  end\n\n  subgraph \"Actions\"\n    J -->|\"No Action\"| K[\"Close Case\"]\n    J -->|\"Warn/Suspend\"| L[\"Apply Sanction\"]\n    J -->|\"Hide/Delete\"| M[\"Apply Content Action\"]\n    J -->|\"Edit Request\"| N[\"Request Changes from Author\"]\n  end\n\n  subgraph \"Appeal\"\n    O[\"File Appeal\"] --> P[\"Assign Different Reviewer\"]\n    P --> Q{\"Appeal Outcome\"}\n    Q -->|\"Upheld\"| R[\"Reverse Action and Restore\"]\n    Q -->|\"Denied\"| S[\"Maintain Action\"]\n  end\n\n  K --> T[\"Notify Parties\"]\n  L --> T\n  M --> T\n  N --> T\n  R --> T\n  S --> T\n```\n\n## Notification Settings and Receipt Flow\nDefines how users configure preferences and how notifications are delivered in real time or digest, respecting rate limits and user control.\n\n### Narrative Flow\n- Preference management: Users opt in/out per channel (in-app, email) and per category (mentions, replies, follows, moderation updates, policy events). Users may select digest frequency for summaries.\n- Triggering: Events such as mentions, comments, follows, publication outcomes, and moderation decisions trigger notifications. The system evaluates user preferences, quiet hours, and rate limits before sending.\n- Delivery: Real-time where required; batched aggregation for digest per chosen interval. Failures are retried per policy. Users can view notification history.\n\n### Role Notes\n- All roles receive notifications appropriate to their actions and responsibilities. Moderators also receive queue assignments; admins receive policy/legal event notifications.\n\n### EARS Requirements (Notifications)\n- WHEN a trigger event occurs, THE notification service SHALL evaluate the recipient's preferences and channel availability before queuing delivery.\n- WHERE a user has enabled digest for a category, THE notification service SHALL aggregate events and deliver at the configured interval.\n- IF a user has opted out for a channel or category, THEN THE notification service SHALL suppress delivery for that scope.\n- WHEN a delivery attempt fails transiently, THE notification service SHALL retry according to backoff policy and record failure if exhausted.\n- WHEN a notification pertains to moderation outcomes, THE notification service SHALL include outcome, rationale summary, and available next steps.\n- THE notification service SHALL respect configured rate limits and quiet hours for non-critical categories.\n- WHERE an event is critical (security or policy), THE notification service SHALL bypass quiet hours for the minimum necessary alerting.\n\n### Notification Flow Diagram\n```mermaid\ngraph LR\n  subgraph \"Preference Management\"\n    A[\"Open Preferences\"] --> B[\"Set Channels\"]\n    B --> C[\"Set Categories\"]\n    C --> D[\"Set Digest Frequency\"]\n  end\n\n  subgraph \"Trigger & Evaluation\"\n    E[\"Event Triggered\"] --> F[\"Load Recipient Preferences\"]\n    F --> G{\"Opted Out?\"}\n    G -->|\"Yes\"| H[\"Suppress\"]\n    G -->|\"No\"| I{\"Digest Category?\"}\n    I -->|\"Yes\"| J[\"Aggregate for Digest\"]\n    I -->|\"No\"| K[\"Queue for Real-Time Delivery\"]\n  end\n\n  subgraph \"Delivery\"\n    K --> L[\"Attempt Delivery\"]\n    L --> M{\"Success?\"}\n    M -->|\"Yes\"| N[\"Record Sent\"]\n    M -->|\"No\"| O[\"Retry per Policy\"]\n    O --> P{\"Exhausted?\"}\n    P -->|\"Yes\"| Q[\"Record Failure\"]\n    P -->|\"No\"| L\n    J --> R[\"Send Digest at Interval\"]\n  end\n```\n\n## Role-Based Approval and Gating Points\nAuthorization gates differ by role for certain actions. Business rules are expressed in EARS to remove ambiguity.\n\n### EARS Requirements (Role Gates)\n- WHERE the actor is member, THE content service SHALL allow publishing own posts subject to policy checks without mandatory staff pre-approval.\n- WHERE the actor is expert and marks content as “long-form research”, THE content service SHALL require either source completeness verification or editor review prior to publication.\n- WHERE the actor is editor, THE curation service SHALL permit pinning and featuring but SHALL require moderator approval to enforce policy violations.\n- WHERE the actor is moderator, THE governance service SHALL allow content hide/remove and SHALL require admin approval for permanent account sanctions.\n- WHERE the actor is admin, THE governance service SHALL allow irreversible sanctions and legal-policy overrides with mandatory audit logging.\n\n### Role Gate Diagram\n```mermaid\ngraph LR\n  subgraph \"Actors\"\n    A[\"Member\"]\n    B[\"Expert\"]\n    C[\"Editor\"]\n    D[\"Moderator\"]\n    E[\"Admin\"]\n  end\n\n  subgraph \"Gates\"\n    G1[\"Publish Without Pre-Approval\"]\n    G2[\"Research Pre-Check or Editor Review\"]\n    G3[\"Pin/Feature Requires Policy Alignment\"]\n    G4[\"Hide/Remove Content\"]\n    G5[\"Permanent Sanction Approval\"]\n  end\n\n  A --> G1\n  B --> G2\n  C --> G3\n  D --> G4\n  D --> G5\n  E --> G5\n```\n\n## Exception Branches and Rollback Flows\nCross-flow exception handling paths and rollback behaviors expressed in EARS with a consolidated diagram.\n\n### EARS Requirements (Exceptions & Rollbacks)\n- IF registration input validation fails, THEN THE authentication service SHALL not create an account and SHALL provide actionable guidance without revealing sensitive validation logic.\n- IF email verification is attempted with an invalid or expired token, THEN THE authentication service SHALL deny activation and SHALL offer a new verification process.\n- IF token refresh is attempted after refresh expiration, THEN THE authentication service SHALL require re-authentication and SHALL deny access until successful sign-in.\n- IF an author loses connectivity during draft save, THEN THE content service SHALL retain the last confirmed version and SHALL surface a reconciliation prompt on next restore.\n- IF pre-publish checks detect policy violations, THEN THE content service SHALL preserve the draft, SHALL enumerate violations, and SHALL block publication until resolved.\n- IF a moderation action is applied in error and later reversed, THEN THE governance service SHALL restore content visibility and SHALL update all related notifications and transparency records.\n- IF notification delivery repeatedly fails for a channel, THEN THE notification service SHALL mark the channel as temporarily unavailable for the recipient and SHALL suggest remediation steps via an alternative channel if available.\n- WHEN a user requests account-wide sign-out, THE authentication service SHALL revoke all devices within 1 minute and SHALL require fresh authentication for any new access.\n\n### Cross-Flow Rollback Diagram\n```mermaid\ngraph LR\n  A[\"Draft Save Attempt\"] --> B{\"Network OK?\"}\n  B -->|\"Yes\"| C[\"Save Draft Version\"]\n  B -->|\"No\"| D[\"Keep Last Confirmed Version\"]\n  D --> E[\"Prompt Reconcile on Return\"]\n\n  F[\"Publish Attempt\"] --> G{\"Policy Checks Pass?\"}\n  G -->|\"Yes\"| H[\"Publish Live\"]\n  G -->|\"No\"| I[\"Block and Keep Draft\"]\n\n  J[\"Token Refresh\"] --> K{\"Refresh Valid?\"}\n  K -->|\"Yes\"| L[\"Issue New Access\"]\n  K -->|\"No\"| M[\"Require Re-Auth\"]\n\n  N[\"Moderation Reversal\"] --> O[\"Restore Content\"]\n  O --> P[\"Update Notifications\"]\n  O --> Q[\"Update Transparency Record\"]\n```\n\n## Related Documents\n- Refer to the [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md) for roles, tokens, and authentication policies.\n- Refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md) for end-to-end business functionality and validations.\n- Refer to the [Community Governance and Moderation Policy](./07-pol-econ-board-community-governance-and-moderation.md) for report categories, sanctions, and appeals.\n"},{"reason":"커뮤니티 운영 원칙과 중재 기준을 합의된 규범으로 문서화하여 일관 집행을 보장하기 위함.","filename":"07-pol-econ-board-community-governance-and-moderation.md","documentType":"requirement","outline":["커뮤니티 규칙과 허용/금지 콘텐츠 정의","정치적 민감 콘텐츠 가이드(사실성·출처·표현 수위)","신고 분류 체계와 처리 SLA","제재 수위표(경고/일시정지/영구 제재)와 트리거","투명성 보고 및 로그 공개 원칙","이의제기·재검토·복구 절차","선거기간 특별정책(국내 법·정책 준수)"],"audience":"development team","keyQuestions":["어떤 콘텐츠가 허용/금지되는가","신고 처리와 제재 집행의 기준과 기한은 무엇인가","이의제기와 복구는 어떻게 진행되는가"],"detailLevel":"detailed specification","relatedDocuments":["04-pol-econ-board-functional-requirements.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["EARS 형식으로 제재/중재 요구사항 정의","정책·규정 준수 관점 강조"],"content":"# Community Governance and Moderation Requirements (pol-econ-board)\n\n## 1) Scope and Principles\n- Purpose: establish unambiguous, enforceable rules and processes for content governance, reporting, moderation actions, sanctions, transparency, and appeals, including special election-period policies aligned to domestic law.\n- Scope: applies to all user-generated content (UGC): posts, comments, replies, titles, tags, attachments, profile bios, display names, and any user-visible metadata or labels.\n- Principles:\n  - Legality: comply with applicable domestic regulations in the primary jurisdiction; prohibit unlawful content and behavior.\n  - Truthfulness: encourage evidence-based discourse; mitigate unverified or manipulative content through labels and distribution controls while preserving legitimate opinion.\n  - Proportionality: apply progressive sanctions proportional to severity and recurrence, with clear thresholds and windows.\n  - Due process: provide reason codes, timelines, and an appeal channel; record audit trails suitable for review.\n  - Transparency: publish aggregated moderation statistics, and provide user-facing case histories and outcomes.\n\nEARS (Foundational)\n- THE governance subsystem SHALL apply these policies consistently across roles, content types, and workflows.\n- THE governance subsystem SHALL maintain a standardized taxonomy for reason codes, decisions, sanctions, and closure statuses.\n\n## 2) Roles and Governance Responsibilities (Business)\n- member: may create and report content, block users, and receive sanctions; cannot sanction others.\n- expert: inherits member; can propose expert topics, publish in-depth research, participate in expert Q&A; must meet higher disclosure standards for affiliations/conflicts.\n- moderator: operates the moderation queue; can hide/remove content; can issue warnings and temporary suspensions up to 30 days; manages disputes; maintains transparency logs.\n- editor: curates featured content; manages announcements/pinned posts; edits topics/tags; may hide content for editorial quality but cannot sanction users; must escalate policy violations to moderators.\n- admin: full oversight; manages roles/policies; handles legal requests; may impose permanent sanctions; approves election-period configurations and policy updates.\n\nEARS (Roles)\n- THE governance subsystem SHALL enforce role-specific authorization boundaries and approval flows for all moderation actions.\n- WHERE the actor role is \"editor\", THE system SHALL restrict enforcement actions to temporary editorial hiding without user sanctions.\n- WHERE the actor role is \"moderator\", THE system SHALL allow warnings and suspensions of 24h/7d/30d and content removal within defined scope only.\n- WHERE the actor role is \"admin\", THE system SHALL allow permanent sanctions, role/policy changes, and election-policy activation.\n- WHEN any role performs a moderation-relevant action, THE system SHALL record actor role, action, target, timestamp, reason code, and outcome in an audit log.\n\n## 3) Community Rules: Allowed/Restricted/Prohibited Content\n3.1 Allowed with Expectations (Examples)\n- Opinion/Analysis framed as subjective perspective, clearly separated from factual assertions.\n- Critique of public policy/officials without doxxing or unlawful exposure of personal data.\n- Satire/Parody labeled to prevent confusion with factual reporting.\n\n3.2 Restricted (Require Labels/Disclaimers or Distribution Mitigation)\n- Unverified claims: require a \"Unverified\" label until a credible source is provided; visibility may be reduced pending sourcing.\n- Polls/Surveys: require methodology disclosure; incomplete disclosures receive \"Methodology Incomplete\" label.\n- Economic/Financial content: require a \"Not financial advice\" disclaimer.\n\n3.3 Prohibited (Immediate Enforcement)\n- Illegal content: threats, incitement to violence, doxxing, non-consensual personal information, targeted harassment, discriminatory hate content, sexual exploitation, unlawful solicitation.\n- Harmful misinformation: fabricated facts presented as truth with potential imminent harm (public safety, election procedure manipulation).\n- Spam/Manipulation: mass posting, link farming, coordinated inauthentic behavior, undisclosed paid political content, astroturfing.\n- Copyright infringement: unauthorized reproduction where rights-holder objection is likely.\n\nEARS (Classification & Mitigation)\n- THE governance subsystem SHALL maintain a canonical reason code set (e.g., ILLEGAL_THREAT, HATE_SPEECH, DOXXING, MISINFO_HARM, SPAM, COPYRIGHT, OFF_TOPIC, LOW_QUALITY, HARASSMENT, ELECTION_PROCEDURE_FALSE).\n- WHEN content is classified as prohibited, THE system SHALL immediately block public exposure and move it to \"Under Review\" state.\n- WHEN content requires labeling, THE system SHALL attach the specified label(s) and reduce algorithmic amplification until criteria are satisfied.\n- IF classification confidence is low, THEN THE system SHALL apply the \"Unverified\" label and route the item to the review queue without permanent action.\n\n## 4) Political-Sensitive Content Guidelines (Factuality, Source, Tone)\n4.1 Factuality\n- Assertions of fact must be verifiable via reliable sources (primary records, reputable media, official statistics). Opinions remain permissible if clearly framed.\n\n4.2 Sourcing\n- Political claims must include source citations (URL, publication, date). Missing sources trigger mitigation labels and reduced promotion.\n\n4.3 Expression Level\n- Robust debate is encouraged; dehumanizing language, slurs, calls for violence, and targeted harassment are prohibited.\n\nEARS (Political-Sensitive)\n- WHEN a user publishes content claiming political facts, THE system SHALL provide source fields and apply \"Unverified\" where absent.\n- WHEN a user adds credible sources to previously unverified content, THE system SHALL update the label to \"Sourced\" and lift exposure limits within 1 hour of submission.\n- IF dehumanizing or violent-incitement expressions are detected, THEN THE system SHALL hide the content immediately and route to the high-severity queue.\n\n## 5) Reporting Taxonomy and Processing SLAs\n5.1 Report Types (Reason Families)\n- Safety: Threat/Violence, Doxxing, Harassment.\n- Integrity: Hate Speech, Misinformation, Copyright.\n- Quality: Spam, Off-topic, Low-quality/Noise.\n- Election Integrity: Undisclosed paid political content, False procedural claims.\n\n5.2 Reporter Credibility Tiers (Business Concept)\n- Tier A: report validity ≥ 80% in the last 90 days or verified expert.\n- Tier B: 50–79%.\n- Tier C: <50% or new reporters.\n\n5.3 Thresholds and SLAs\n- High severity (Safety, Election Integrity): auto-hide when ≥ 5 unique reports in 60 minutes including ≥ 2 Tier A; any single admin/moderator may hide immediately.\n- Medium severity (Hate, Misinformation, Copyright): soft-hide when ≥ 8 unique reports in 6 hours including ≥ 2 Tier B+.\n- Low severity (Spam/Off-topic/Quality): queue-only; apply rate-limit to the author if ≥ 12 valid reports in 24 hours.\n\nEARS (Reporting & SLA)\n- WHEN the same content receives ≥ 5 high-severity reports within 60 minutes including ≥ 2 Tier A, THE system SHALL auto-hide the content within 1 minute.\n- WHEN the same content receives ≥ 8 medium-severity reports within 6 hours including ≥ 2 Tier B+, THE system SHALL soft-hide the content and mark it \"Under Review\".\n- WHEN the same author accrues ≥ 3 valid spam reports within 24 hours, THE system SHALL apply a 24-hour posting restriction.\n- THE governance subsystem SHALL create a unique case ID for every report and record creation time, classification, reporter tier, and affected resource.\n- IF a reporter’s invalid-report ratio exceeds 70% over 30 days, THEN THE system SHALL rate-limit further reports to 5/day for 14 days and inform the reporter.\n\n## 6) Moderation Workflow and Automation Rules\n6.1 States\n- Visible, Labeled, Soft-Hidden (visible to author and direct participants), Hidden (not publicly visible), Removed, Restored, Under Review, Closed.\n\n6.2 Workflow Summary\n- Intake → Auto-triage (severity and thresholds) → Queue assignment (priority, specialization) → Decision (label/hide/remove/sanction) → Notify parties → Transparency logging → Appeal (if any) → Closure.\n\n6.3 Closure Statuses\n- No Action (policy compliant), Action Applied (specify), Reversed on Appeal, Withdrawn (insufficient evidence), Duplicate, Abandoned (reporter non-response where required).\n\nEARS (Workflow)\n- WHEN a report is received, THE system SHALL auto-classify, assess severity, and route to the appropriate queue within 30 seconds.\n- WHILE content is \"Under Review\", THE system SHALL restrict public exposure per state rules (Soft-Hidden or Hidden).\n- WHEN a moderation decision is finalized, THE system SHALL notify the author with reason code(s), action summary, and appeal window within 5 minutes.\n- THE governance subsystem SHALL record every state transition in an auditable log with actor, timestamp, and reason.\n- WHERE conflict-of-interest is detected (moderator is the author or followed party), THE system SHALL reassign the case to a different moderator automatically.\n\n## 7) Sanction Ladder and Triggers\n7.1 Sanction Types\n- Warning (no feature restriction), Content Removal, Feature Restriction (posting/commenting/messaging), Temporary Suspension: 24h, 7d, 30d, Permanent Suspension, Shadow-visibility reduction (distribution dampening without user-facing label where policy allows).\n\n7.2 Escalation Rules (General)\n- First offense (low/medium): warning + policy education.\n- Repeated offense (same code) within 90 days: escalate one level.\n- High severity (threats, doxxing, targeted hate): minimum 7-day suspension at first offense; permanent at the third within 365 days.\n\n7.3 Special Cases\n- Evasion (sockpuppeting) to bypass sanctions: immediate 30-day suspension; link accounts for enforcement.\n- Undisclosed paid political content: content removal + 7-day suspension; repeat → 30-day → permanent.\n- Coordinated manipulation (brigading/botting): feature restrictions for 30 days; repeat → suspension.\n\nEARS (Sanctions)\n- WHEN the same reason code recurs twice within 90 days, THE system SHALL escalate the sanction by one level.\n- IF the reason code is ILLEGAL_THREAT or DOXXING, THEN THE system SHALL apply a minimum 7-day suspension at first offense.\n- IF three high-severity offenses accrue within 365 days, THEN THE system SHALL impose a permanent suspension.\n- WHERE any sanction is applied, THE system SHALL notify the user with duration, affected features, and expiration date/time.\n- WHEN evasion is detected, THE system SHALL link related accounts for consistent enforcement and record linkage rationale.\n\n## 8) Transparency Reporting and Logs\n8.1 Public Transparency (Aggregated)\n- Monthly summary: total reports, actions by category, reversal rates, appeal outcomes, median time-to-action; no personal data.\n\n8.2 User-Facing Case History\n- Authors can view their own moderation history including case IDs, timestamps, reason codes, actions, and appeal status.\n\n8.3 Internal Audit Access\n- Authorized roles may review detailed audit trails for compliance and training.\n\nEARS (Transparency)\n- THE governance subsystem SHALL publish a monthly transparency report with category counts and median processing times by the 10th of the following month.\n- WHEN a user sanction is finalized, THE system SHALL add the case to the user’s history within 1 minute.\n- THE governance subsystem SHALL store anonymized sample cases for public education consistent with data retention policy.\n- WHERE internal audit access is granted, THE system SHALL limit visibility to least-privilege scopes by role.\n\n## 9) Appeals, Re-review, and Restoration\n9.1 Timelines\n- Appeal window: 14 days from action notification (48 hours for election-period takedowns).\n- Acknowledgment: within 24 hours; decision: within 7 days (3 days during election periods).\n\n9.2 Outcomes\n- Uphold, Modify (relabel or reduce sanction), Reverse (restore content/access).\n\nEARS (Appeals)\n- WHEN a user submits an appeal within 14 days of notice, THE system SHALL acknowledge receipt within 24 hours.\n- WHEN an appeal is accepted for review, THE system SHALL issue a decision within 7 days and communicate result + reason codes.\n- IF the outcome is Reverse, THEN THE system SHALL restore content/access and remove exposure limits within 15 minutes.\n- WHILE an appeal is active, THE system SHALL maintain current enforcement state and present a status message to the user.\n- WHERE the original reviewer has a conflict, THE system SHALL assign a different reviewer for the appeal.\n\n## 10) Election-Period Special Policies (Domestic Law Compliance)\n10.1 Activation and Duration\n- Election windows defined per domestic regulations; activation is recorded and announced by admins with effective dates and summary of stricter standards.\n\n10.2 Stricter Standards\n- New accounts (≤ 7 days since registration): cannot publish political campaign content; may comment under policy-compliant labels.\n- Claims about election procedures must include an official source; absent source → immediate soft-hide pending verification.\n- Paid political content must include sponsor identity and labeling; undisclosed → immediate removal and sanction per escalation.\n- Polling blackout and other jurisdictional rules are enforced as policy text configured by admins.\n\nEARS (Election)\n- WHERE an election period is active, THE system SHALL restrict campaign-content publishing for new accounts (≤ 7 days since registration).\n- WHEN election-procedure claims lack official sources, THE system SHALL soft-hide immediately and maintain restriction until sources are added and verified.\n- WHEN paid political content is detected without sponsor disclosure, THE system SHALL remove it and apply the sanction ladder per policy.\n- THE governance subsystem SHALL display an in-product banner linking to the active election policy and user guidance.\n\n## 11) Labels, Disclaimers, and Conflicts of Interest\n11.1 Labels Catalog (non-exhaustive)\n- \"Opinion\", \"Analysis\", \"Unverified\", \"Sourced\", \"Satire\", \"Paid Promotion\", \"Sensitive\", \"Methodology Incomplete\".\n\n11.2 Disclaimers\n- Economic/financial content: \"Not financial advice\".\n- Polls/Surveys: disclosure of methodology, sample size, collection dates.\n- Expert disclosures: affiliation/conflict-of-interest where material.\n\n11.3 COI (Experts)\n- Experts disclose affiliations materially related to discussed entities when posting or answering in their domain.\n\nEARS (Labels & COI)\n- WHEN content meets label criteria, THE system SHALL attach applicable labels to content metadata and present them visibly to users.\n- WHERE an expert author’s conflict is reasonably anticipated, THE system SHALL require entry of affiliation/sponsorship details before public posting.\n- WHEN a required disclaimer is missing, THE system SHALL block publication and prompt for completion.\n\n## 12) Performance and Availability Expectations for Moderation\n- Report acknowledgment: under 2 seconds.\n- Auto-triage classification: under 30 seconds.\n- Auto-hide execution: under 60 seconds from threshold crossing.\n- Decision notice to author: within 5 minutes of decision.\n- Queue coverage: 24/7 for high severity; business hours for medium/low with clear ETAs.\n\nEARS (Performance)\n- WHEN a report is submitted, THE system SHALL return an acknowledgment status within 2 seconds.\n- WHEN an auto-action threshold is reached, THE system SHALL complete the action within 60 seconds.\n- WHERE a case is high severity, THE system SHALL target initial moderator handling within 60 minutes at any time of day.\n\n## 13) Permission Matrix (Role × Action)\n\n| Action (Business) | member | expert | editor | moderator | admin |\n|---|---|---|---|---|---|\n| Submit report | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View report queue | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Auto-triage override | ❌ | ❌ | ❌ | ✅ (within scope) | ✅ |\n| Hide content (policy) | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Hide content (editorial quality) | ❌ | ❌ | ✅ (temporary) | ✅ | ✅ |\n| Remove content | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Issue warning | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Suspend 24h/7d/30d | ❌ | ❌ | ❌ | ✅ | ✅ |\n| Permanent suspend | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Publish transparency report | ❌ | ❌ | ❌ | ✅ (draft) | ✅ (approve) |\n| Approve election policy activation | ❌ | ❌ | ❌ | ❌ | ✅ |\n\nEARS (Permission Rules)\n- WHEN an editor flags suspected policy violations, THE system SHALL require moderator approval for sanctions.\n- WHERE a requested action exceeds moderator limits, THE system SHALL route the request for admin approval.\n\n## 14) Diagrams\n\n14.1 Report Lifecycle\n```mermaid\ngraph LR\n  A[\"Report Submitted\"] --> B[\"Auto-Triage(Classify/Severity)\"]\n  B --> C{\"Auto-Hide Threshold Met?\"}\n  C -->|\"Yes\"| D[\"Auto-Hide Content\"]\n  C -->|\"No\"| E[\"Queue Assignment\"]\n  D --> E\n  E --> F[\"Moderator Review\"]\n  F --> G{\"Decision\"}\n  G -->|\"Label\"| H[\"Apply Labels\"]\n  G -->|\"Hide/Remove\"| I[\"Enforce Action\"]\n  G -->|\"No Action\"| J[\"Close Case\"]\n  H --> K[\"Notify Parties\"]\n  I --> K\n  J --> K\n  K --> L[\"Log & Transparency\"]\n  L --> M[\"Appeal Window\"]\n```\n\n14.2 Appeals Flow\n```mermaid\ngraph LR\n  A[\"Appeal Submitted\"] --> B[\"Acknowledge Receipt\"]\n  B --> C[\"Assign Reviewer(Independent)\"]\n  C --> D[\"Re-review Evidence\"]\n  D --> E{\"Outcome?\"}\n  E -->|\"Uphold\"| F[\"Maintain Action\"]\n  E -->|\"Modify\"| G[\"Adjust Labels/Sanction\"]\n  E -->|\"Reverse\"| H[\"Restore Content/Access\"]\n  F --> I[\"Notify & Log\"]\n  G --> I\n  H --> I\n```\n\n14.3 Sanction Escalation (Decision Aid)\n```mermaid\ngraph LR\n  A[\"Confirmed Violation\"] --> B{\"Severity?\"}\n  B -->|\"Low/Medium\"| C[\"Issue Warning + Education\"]\n  C --> D{\"Repeat Within 90d?\"}\n  D -->|\"Yes\"| E[\"Escalate One Level\"]\n  D -->|\"No\"| F[\"Close Case\"]\n  B -->|\"High\"| G[\"Apply ≥7d Suspension\"]\n  G --> H{\"Third High in 365d?\"}\n  H -->|\"Yes\"| I[\"Permanent Suspension\"]\n  H -->|\"No\"| F\n```\n\n## 15) Glossary of Reason Codes (Examples)\n- ILLEGAL_THREAT: credible threats of violence or harm.\n- DOXXING: publishing personal identifiable information without consent.\n- HATE_SPEECH: dehumanizing or derogatory content targeting protected classes.\n- HARASSMENT: targeted abusive behavior toward an individual or group.\n- MISINFO_HARM: fabricated or misleading facts likely to cause public harm.\n- ELECTION_PROCEDURE_FALSE: false claims about voting procedures or counting.\n- SPAM: unsolicited repetitive or promotional content or link farming.\n- OFF_TOPIC: content unrelated to the thread/topic.\n- LOW_QUALITY: extremely short/noise/non-substantive posts.\n- COPYRIGHT: unauthorized reproduction of copyrighted material.\n- ELECTION_UNDISCLOSED: paid political content without sponsor disclosure.\n\n## 16) Data Retention and Security Alignment\n- Align moderation logs, transparency data, and user case histories with retention windows and privacy constraints defined in the data lifecycle and security/compliance policies.\n\nEARS (Retention & Privacy)\n- THE governance subsystem SHALL retain and dispose of case logs according to the published retention schedule.\n- THE governance subsystem SHALL record only the minimum necessary personal data to execute moderation and transparency obligations.\n- WHERE third-party personal data appears in evidence, THE system SHALL redact or pseudonymize it in public-facing artifacts.\n\n## 17) Change Management\n- Policy updates require admin approval and public changelog entries with effective dates and material change summaries.\n\nEARS (Change Mgmt)\n- WHEN a policy is updated, THE system SHALL publish its effective date and a summary of key changes in the user policy area within 24 hours of activation.\n- WHERE election-period policies are enabled/disabled, THE system SHALL log the activation/deactivation event with actor and timestamps.\n\n## 18) Related Documents\n- For feature-level behaviors and validations, refer to the [Functional Requirements Specification](./04-pol-econ-board-functional-requirements.md).\n- For privacy, data rights, and lawful processing, refer to the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n---\nThis document provides business requirements only. Developers retain full autonomy over technical implementation, including architecture, APIs, and database design."},{"reason":"성능/가용성/확장성 등 비기능 요구를 사용자 체감 기준으로 명확히 하기 위함.","filename":"08-pol-econ-board-non-functional-requirements.md","documentType":"requirement","outline":["성능 기대치(응답 시간/처리량/동시성)","가용성 및 복구 목표(RTO/RPO 개념)","확장성·유연성 기대","관측가능성 요구(로그/지표/경보) 비즈니스 기준","개인정보 최소 수집/보관 원칙 연계","알림·배치 작업 시간 제약 기대","용량 계획 가이드와 성장 가정"],"audience":"development team","keyQuestions":["사용자가 체감하는 성능 기준은 무엇인가","장애/복구/확장 관점의 기대 수준은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["01-pol-econ-board-service-overview.md","09-pol-econ-board-security-and-compliance.md"],"constraints":["정량적·검증 가능한 기준 제시","기술 구현 세부 금지"],"content":"# pol-econ-board Non-Functional Requirements\n\nMeasurable, testable non-functional requirements for pol-econ-board are defined from a user-perceived perspective across performance, availability, recovery, scalability, observability, privacy-by-design, time windows, and capacity planning. Technical implementation decisions (architecture, APIs, data models, infrastructure) belong to the development team.\n\n## 1. Scope, Principles, and Assumptions\n\n### 1.1 Scope and Intent\n- Business-level, verifiable criteria govern quality attributes for pol-econ-board, expressed as user-perceived outcomes and operational expectations.\n- Applicable across development, QA, operations, and product to plan, validate, and operate the service.\n\n### 1.2 Related Documents\n- Product context and priorities: [Service Overview for Pol-Econ Board](./01-pol-econ-board-service-overview.md).\n- Legal, privacy, and security controls: [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n### 1.3 Definitions (Business-Level)\n- SLO: Service Level Objective, a target performance or availability level measured over a time window.\n- Error Budget: The permissible amount of unavailability or SLO violation within the SLO window.\n- RTO: Recovery Time Objective (time to restore service after a disruption).\n- RPO: Recovery Point Objective (maximum acceptable data loss measured in time).\n- P50/P95/P99: Percentile distribution for response times (server-side processing), excluding end-user network and device rendering time.\n- KST: Korea Standard Time (Asia/Seoul), the primary business timezone for scheduling.\n\n### 1.4 Service Boundaries and Assumptions\n- THE service SHALL operate scheduling windows in KST and primarily target users in Korea.\n- WHERE third-party providers are involved (e.g., email), THE service SHALL measure hand-off times independently and treat provider delays separately for SLO calculations.\n- THE baseline usage assumptions and capacity planning in this specification SHALL be revisited quarterly and on major product changes.\n- WHERE national events (election periods, major policy/news cycles) elevate load, THE service SHALL preserve P0 SLOs using fair-use and prioritization policies.\n\n## 2. Performance Expectations (Response Time, Throughput, Concurrency)\n\nAll performance targets are user-perceived server-side processing times measured at the service boundary, unless stated otherwise.\n\n### 2.1 Core Response Time SLOs (Per Request)\n\n| User Journey (Server-Side) | P50 Target | P95 Target | P99 Target | Notes |\n|----------------------------|------------|------------|------------|-------|\n| Read timeline/feed         | 150 ms     | 500 ms     | 900 ms     | Personalization and filtering included.\n| View a post with comments  | 180 ms     | 600 ms     | 1000 ms    | Initial comment page only.\n| Create/edit post save      | 200 ms     | 700 ms     | 1200 ms    | Excludes large media uploads; see 2.5.\n| Post publish action        | 220 ms     | 750 ms     | 1200 ms    | Moderation hooks may add queueing; see 2.4.\n| Add comment/reply          | 150 ms     | 500 ms     | 900 ms     | Idempotent to avoid duplicates.\n| Search (keyword/tag)       | 250 ms     | 800 ms     | 1500 ms    | Typo tolerance and sorting included.\n| Login (credential verify)  | 200 ms     | 600 ms     | 1000 ms    | Excludes email verification roundtrips.\n| Notification fetch (in-app)| 120 ms     | 350 ms     | 700 ms     | Last 50 notifications.\n| Moderation queue load      | 200 ms     | 700 ms     | 1200 ms    | Standard filters applied.\n\n#### EARS Requirements: Response Time\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions (Section 8), THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\n### 2.2 Throughput and Concurrency Targets\n\n| Metric | Baseline Target | Peak Target (Burst ≤ 10 min) | Notes |\n|-------|------------------|-------------------------------|-------|\n| Read requests per second (RPS) | 350 RPS | 900 RPS | Mix of feed, post, and notification fetch.\n| Write requests per second (RPS) | 70 RPS  | 200 RPS | Posts, edits, comments, reactions, reports.\n| Concurrent authenticated sessions | 6,000 | 15,000 | Active sessions during national events.\n| Concurrent content creators | 800 | 2,000 | Members, experts, editors, moderators combined.\n\n#### EARS Requirements: Throughput and Concurrency\n- THE service SHALL sustain the baseline throughput and concurrency targets continuously during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet the peak targets without violating P95 response SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling and present clear user messaging.\n\n### 2.3 Data Consistency Windows\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second for posts and comments in the same region.\n- WHERE global counters, aggregates, and ranking feeds are displayed, THE service SHALL allow eventual consistency with a maximum staleness of 3 seconds under normal conditions and 10 seconds under peak bursts.\n- IF a moderation action hides content, THEN THE service SHALL reflect the hidden state across all user-visible endpoints within 5 seconds.\n\n### 2.4 Queueing and Background Work\n- THE service SHALL separate user-facing acknowledgement from heavy background processing, ensuring acknowledgements meet response time SLOs while background tasks complete within defined deadlines (Section 7).\n- IF background processing exceeds deadlines, THEN THE service SHALL notify operators through alerts and inform impacted users through non-intrusive in-app messages when relevant.\n\n### 2.5 Media Handling (Business-Level)\n- WHERE users upload large attachments, THE service SHALL provide progress feedback and SHALL acknowledge the upload request within 1 second, with final processing completed within 2 minutes for files up to 100 MB.\n- IF media processing fails, THEN THE service SHALL preserve the draft state and allow retry without data loss.\n\n## 3. Availability, Recovery, and Release Guardrails\n\n### 3.1 Availability SLOs by Business Tier\n\n| Tier | Description | Monthly Availability Target | Error Budget |\n|------|-------------|-----------------------------|--------------|\n| P0 | Authentication, read feed/post, submit content, moderation hide/unhide | 99.90% | 43.2 minutes downtime/month |\n| P1 | Search, notifications fetch, reactions, bookmarks | 99.50% | 3.6 hours downtime/month |\n| P2 | Batch digests, analytics exports, editorial curation updates | 99.00% | 7.3 hours downtime/month |\n\n#### EARS Requirements: Availability & Releases\n- THE service SHALL meet the monthly availability targets by tier as defined in the table.\n- WHEN maintenance is required, THE service SHALL schedule it within the maintenance window (Sundays 02:00–05:00 KST) and SHALL not breach P0 availability.\n- IF unplanned downtime occurs, THEN THE service SHALL prioritize restoration of P0 functions before P1 and P2.\n- IF the P0 error budget is exhausted within the month, THEN THE service SHALL pause non-urgent feature launches and focus on reliability until budget recovers the following month.\n- WHERE heightened risk windows exist (e.g., election days), THE service SHALL enforce a release freeze for P0-impacting changes starting 24 hours before the window and ending after stability is confirmed.\n\n### 3.2 Recovery Objectives\n\n| Tier | RTO (Restore Service) | RPO (Acceptable Data Loss) | Notes |\n|------|------------------------|----------------------------|-------|\n| P0 | 30 minutes | 5 minutes | Auth, read, submit, moderation state.\n| P1 | 60 minutes | 15 minutes | Search indices, notifications, reactions.\n| P2 | 180 minutes | 60 minutes | Batch jobs, exports, curation.\n\n#### EARS Requirements: Recovery\n- THE service SHALL restore P0 capabilities within 30 minutes of a major incident and limit data loss to 5 minutes.\n- WHERE partial restoration is possible, THE service SHALL restore read-only access first if full write capability cannot be immediately recovered.\n- IF RTO or RPO targets are at risk, THEN THE service SHALL publish a user-facing status update within 15 minutes of detection and every 30 minutes thereafter until resolved.\n\n## 4. Scalability and Flexibility Expectations\n\n#### EARS Requirements: Scalability and Updates\n- THE service SHALL scale to maintain P95 response targets across baseline and peak loads defined in Section 2.2.\n- WHERE traffic grows beyond peak targets for two consecutive weeks, THE service SHALL raise capacity planning actions within 5 business days (Section 8).\n- THE service SHALL perform updates with zero user-visible downtime for P0 functions; brief degradations for P1/P2 are acceptable within respective error budgets.\n- WHERE a gradual rollout is required, THE service SHALL support audience-based enablement by role (member, expert, moderator, editor, admin) and by percentage-based cohorts.\n- WHERE capacity expansions occur, THE service SHALL pre-warm capacity such that cold-start effects do not exceed P95 latency targets during the first 10 minutes of traffic ramp.\n\n## 5. Observability Requirements (Business Criteria)\n\n### 5.1 Business Event Logging\n- THE service SHALL log key business events: authentication successes/failures, content creation/edits/deletions, moderation actions, policy violations, notification dispatches, and user preference changes.\n- WHERE events include personal data, THE service SHALL minimize logged identifiers and apply redaction per compliance policy in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- IF logging fails, THEN THE service SHALL not block user actions and SHALL record a compensating audit entry indicating the gap.\n\n### 5.2 Metrics and SLO Monitoring\n- THE service SHALL continuously measure request rates, success/error ratios, latency percentiles, queue backlogs, and notification delivery latencies for each tier.\n- WHEN P95 latency or availability deviates from targets for 10 minutes, THE service SHALL raise a warning; for 20 minutes, THE service SHALL raise a critical alert.\n- WHERE alert noise exceeds 10 false-positive P0 alerts in a month, THE service SHALL trigger a tuning review within 5 business days.\n\n### 5.3 Alerting and Response Expectations\n\n| Severity | Trigger (Examples) | Operator Response Time (KST) | User Communication |\n|----------|---------------------|------------------------------|--------------------|\n| P0-Critical | P0 unavailability > 5 min; P95 latency breach > 20 min; security incident indicators | Acknowledge ≤ 5 min, Mitigation start ≤ 15 min, 24/7 | Status page update ≤ 15 min; 30-min cadence thereafter |\n| P1-High | P1 unavailability > 20 min; repeated retries on notifications | Acknowledge ≤ 15 min, Business hours (07:00–23:00 KST) | Status page update if user impact material |\n| P2-Medium | Batch delays > 2 hours; digest backlog | Acknowledge ≤ 4 hours, Business hours | Optional update in release notes |\n\n#### EARS Requirements: Alerting and Response\n- THE service SHALL dispatch alerts according to the severity matrix and SHALL meet the operator response times stated.\n- IF a P0 incident is declared, THEN THE service SHALL publish a status page update within 15 minutes and maintain updates at least every 30 minutes until resolution.\n- WHERE an incident meets criteria for postmortem, THE service SHALL publish an internal post-incident review within 5 business days including contributing factors and follow-up actions.\n\n### 5.4 Incident Management Flow\n- THE service SHALL follow a consistent detect → triage → mitigate → recover → review cycle with operator and user communications.\n\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"SLO Monitor(Deviations)\"] --> B{\"P0/P1/P2?\"}\n  end\n  subgraph \"Triage\"\n    C[\"Assign Severity\"] --> D[\"Notify On-call\"]\n  end\n  subgraph \"Mitigation\"\n    E[\"Throttling/Feature Toggle\"] --> F[\"Partial Restore(Read-first)\"]\n  end\n  subgraph \"Recovery\"\n    G[\"Full Service Restore\"] --> H[\"Backlog Drain\"]\n  end\n  subgraph \"Communication\"\n    I[\"Status Page Update\"] --> J[\"Postmortem(Within 5 Business Days)\"]\n  end\n  B -->|\"P0\"| C\n  B -->|\"P1/P2\"| C\n  D --> E\n  E --> F\n  F --> G\n  G --> H\n  C -.-> I\n  G -.-> I\n  H -.-> J\n```\n\n## 6. Privacy by Design and Data Minimization (Business Link)\n- THE service SHALL collect only the minimum personal data necessary to provide features, following the principles defined in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n- WHERE personal data is processed for analytics or diagnostics, THE service SHALL prefer aggregated or pseudonymized forms aligned to approved business purposes.\n- IF a user opts out of certain data processing, THEN THE service SHALL honor preferences within 24 hours across all processing pipelines.\n- WHERE data residency requirements apply by policy or law, THE service SHALL keep personal data within approved jurisdictions for primary storage and processing.\n\n## 7. Notification and Batch Time Windows\n\n### 7.1 Real-time Notifications (In-App)\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99 after the triggering event under normal conditions.\n- IF delivery exceeds 60 seconds for more than 1% of notifications in a 15-minute window, THEN THE service SHALL raise a warning and prioritize notification pipelines.\n\n### 7.2 Email/Scheduled Digests\n- THE service SHALL send daily digests between 07:00–09:00 KST on user-selected days, and weekly digests between 08:00–10:00 KST on user-selected weekdays.\n- WHERE users change preferences, THE service SHALL reflect changes in the next eligible digest cycle.\n\n### 7.3 Batch and Heavy Processing Windows\n- THE service SHALL run heavy batch processes (e.g., re-indexing, large exports) primarily between 02:00–05:00 KST.\n- WHERE batch tasks risk impacting P0 workloads, THE service SHALL defer or throttle them to preserve P0 SLOs.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and, where user-facing, inform affected users with a revised completion window within 60 minutes.\n\n## 8. Capacity Planning Guide and Growth Assumptions\n\n### 8.1 Baseline Assumptions (Quarter 1–2)\n\n| Metric | Value | Notes |\n|--------|-------|-------|\n| MAU | 120,000 | General audience during initial adoption.\n| DAU | 36,000 | 30% of MAU.\n| Peak concurrent sessions | 12,000 | Major news cycles, debates.\n| Daily posts | 8,000 | Includes expert insights and editor features.\n| Daily comments | 80,000 | High engagement threads.\n| Daily reactions/bookmarks | 400,000 | Lightweight interactions.\n| Storage growth | 60 GB/day | Posts, comments, logs, and media references.\n\n### 8.2 Scaling Triggers and Actions\n- THE service SHALL review capacity monthly and after significant product launches or public events.\n- WHEN P95 latency approaches targets within 10% for two consecutive weeks, THE service SHALL initiate capacity increase planning within 5 business days.\n- WHERE storage growth exceeds plan by 25% over a month, THE service SHALL adjust retention and archiving policies according to data lifecycle standards.\n- WHERE traffic ramp events are announced (elections, debates), THE service SHALL stage pre-event load tests and capacity checks at least 5 business days in advance.\n\n### 8.3 Fair-Use and Backpressure\n- THE service SHALL protect overall user experience by applying fair-use limits during bursts, prioritizing P0 traffic, and transparently communicating delays for non-critical actions.\n- WHERE backlogs accumulate for non-P0 tasks, THE service SHALL degrade non-critical features before affecting P0 paths.\n\n## 9. Reliability and Rate Limiting Expectations\n\n### 9.1 Idempotency and Duplicate Prevention (Business-Level)\n- THE service SHALL treat repeated submissions of the same post/comment within 30 seconds as a single action and avoid duplicates while returning a single confirmation to the user.\n\n### 9.2 Eventual Consistency and User Feedback\n- THE service SHALL surface non-blocking indicators when background processing is pending and SHALL ensure final consistency within deadlines (Sections 2.3 and 7.3).\n\n### 9.3 Rate Limiting and User Messaging\n- WHERE users exceed fair-use thresholds (e.g., reports, comments, reactions), THE service SHALL return a clear message indicating temporary limits and the expected retry horizon.\n- IF limits are applied erroneously, THEN THE service SHALL automatically lift them within 5 minutes after the triggering condition is cleared.\n- WHERE rate limiting is applied due to service protection, THE service SHALL avoid consuming quota for refused retries after a RATE_LIMIT_EXCEEDED response.\n\n## 10. Non-Functional Acceptance Criteria (Testable)\n\n- THE service SHALL achieve P95 and P99 response time targets in Section 2.1 for the defined user journeys during synthetic load tests matching Section 8 assumptions.\n- THE service SHALL sustain throughput and concurrency targets in Section 2.2 for at least 8 continuous hours without breaching P95 SLOs.\n- THE service SHALL meet monthly availability targets in Section 3.1 and recovery objectives in Section 3.2 across two consecutive months prior to general release.\n- THE service SHALL meet notification timeliness in Section 7 with at least 99% of in-app notifications delivered within 15 seconds under normal conditions.\n- THE service SHALL satisfy observability requirements including alerting within thresholds (Sections 5.2–5.3) and incident communications timelines.\n- THE service SHALL demonstrate adherence to data minimization commitments in Section 6 through audit of sampled events and stored logs.\n- THE service SHALL pass a chaos test where termination of non-critical services does not breach P0 SLOs for 30 minutes.\n\n## 11. Constraints and Out-of-Scope\n- Business requirements only; technical implementation decisions belong to the development team, including architecture, APIs, and data models.\n- UI/UX specifications, screen design, and styling are out of scope.\n- Detailed encryption algorithms, provider selections, and infrastructure topology are out of scope.\n\n## 12. Appendix: Glossary\n- Availability: The proportion of time a service is usable by users within agreed functionality thresholds.\n- Business Hours: 07:00–23:00 KST for operational staffing expectations, unless otherwise noted.\n- Consistency Window: The time allowed for data to become visible across all parts of the service after a change.\n- Maintenance Window: A reserved time for planned changes with minimized user impact.\n- Percentile Latency: A statistical measure where P95 indicates 95% of requests are at or below the specified time.\n\n---\n\n### Consolidated EARS Requirements Index\n\nPerformance\n- THE service SHALL meet the response time table targets for at least 99% of business hours each calendar month.\n- WHEN a user requests the timeline/feed, THE service SHALL return results within 500 ms at P95 measured monthly.\n- WHEN a user opens a post with initial comments, THE service SHALL complete server-side processing within 600 ms at P95 measured monthly.\n- WHEN a user submits a new post or saves edits, THE service SHALL acknowledge persistence within 700 ms at P95 measured monthly.\n- WHEN a user performs a search, THE service SHALL return results within 800 ms at P95 measured monthly.\n- WHEN a user logs in with correct credentials, THE service SHALL complete authentication within 600 ms at P95 measured monthly.\n- WHILE the service experiences elevated traffic within stated capacity assumptions, THE service SHALL still meet P95 targets without degradation.\n- IF P95 targets are missed for two consecutive 15-minute intervals, THEN THE service SHALL trigger a performance incident and apply throttling/deferral policies.\n\nThroughput and Concurrency\n- THE service SHALL sustain baseline throughput and concurrency during business hours.\n- WHERE burst traffic occurs for up to 10 minutes, THE service SHALL meet peak targets without violating P95 SLOs.\n- IF concurrency exceeds peak targets for more than 10 minutes, THEN THE service SHALL apply fair-use throttling with clear messaging.\n\nConsistency and Background Work\n- THE service SHALL provide read-after-write consistency for a user’s own content within 1 second.\n- WHERE aggregates and rankings are displayed, THE service SHALL limit staleness to 3 seconds (10 seconds at peak).\n- IF moderation hides content, THEN THE service SHALL reflect the state across endpoints within 5 seconds.\n- THE service SHALL acknowledge user-facing actions quickly and complete heavy work in background within deadlines.\n\nAvailability, Recovery, Releases\n- THE service SHALL meet monthly availability targets by tier (P0 99.90%, P1 99.50%, P2 99.00%).\n- WHEN maintenance is needed, THE service SHALL schedule it Sundays 02:00–05:00 KST without breaching P0.\n- IF unplanned downtime occurs, THEN THE service SHALL restore P0 before P1/P2.\n- THE service SHALL restore P0 within 30 minutes and limit data loss to 5 minutes; P1 and P2 per table.\n- WHERE partial restore is possible, THE service SHALL enable read-only first.\n- IF RTO/RPO are at risk, THEN THE service SHALL publish status updates within 15 minutes and every 30 minutes thereafter.\n- IF the P0 error budget is exhausted in a month, THEN THE service SHALL pause non-urgent launches until budget recovery.\n- WHERE risk windows exist, THE service SHALL apply release freezes for P0-impacting changes.\n\nScalability and Updates\n- THE service SHALL scale to maintain P95 targets at baseline and peak.\n- WHERE traffic exceeds peaks for two weeks, THE service SHALL raise capacity planning within 5 business days.\n- THE service SHALL perform updates with zero user-visible downtime for P0; controlled degradations for P1/P2 within error budgets.\n- WHERE gradual rollout is required, THE service SHALL support audience and cohort-based enablement.\n- WHERE capacity expansions occur, THE service SHALL pre-warm to avoid cold-start breaches.\n\nObservability and Alerts\n- THE service SHALL log key business events with data minimization.\n- WHERE logging fails, THE service SHALL not block actions and SHALL audit the gap.\n- THE service SHALL measure core metrics continuously and alert on deviations (10 min warn, 20 min critical).\n- THE service SHALL meet operator response times by severity and publish timely user communications for P0.\n- WHERE alert noise exceeds thresholds, THE service SHALL initiate tuning reviews.\n\nPrivacy and Data Minimization\n- THE service SHALL collect the minimum personal data necessary and favor aggregated or pseudonymized forms for secondary purposes.\n- IF a user opts out, THEN THE service SHALL honor preferences within 24 hours.\n- WHERE data residency applies, THE service SHALL keep personal data within approved jurisdictions.\n\nNotifications and Batch\n- THE service SHALL deliver in-app notifications within 5 seconds P95 and 15 seconds P99.\n- IF delivery exceeds 60 seconds for >1% in 15 minutes, THEN THE service SHALL raise a warning and prioritize pipelines.\n- THE service SHALL schedule digests within the defined morning windows in KST and reflect preference changes in the next cycle.\n- THE service SHALL run heavy batches primarily 02:00–05:00 KST and defer/throttle to protect P0.\n- IF a batch deadline is missed, THEN THE service SHALL notify operators and inform users with a revised window within 60 minutes.\n\nCapacity Planning and Fair Use\n- THE service SHALL review capacity monthly and after major events.\n- WHEN P95 latency is within 10% of the target for two weeks, THE service SHALL plan capacity increases within 5 business days.\n- WHERE storage growth exceeds plan by 25% in a month, THE service SHALL adjust retention/archiving per data lifecycle standards.\n- WHERE major events are anticipated, THE service SHALL pre-stage load testing.\n- THE service SHALL apply fair-use limits during bursts and communicate delays for non-critical actions.\n\nReliability and Limits\n- THE service SHALL treat repeated submissions within 30 seconds as a single action to prevent duplicates.\n- THE service SHALL surface pending indicators for background processing and ensure final consistency within deadlines.\n- IF fair-use limits are applied erroneously, THEN THE service SHALL lift them within 5 minutes of clearing conditions.\n- WHERE protective rate limiting is active, THE service SHALL not consume quota for refused retries after notification.\n"},{"reason":"개인정보/법규 준수 및 오남용 방지 정책을 비즈니스 관점에서 규정하기 위함.","filename":"09-pol-econ-board-security-and-compliance.md","documentType":"requirement","outline":["개인정보 보호 원칙과 동의 관리","데이터 권리(열람/정정/삭제/이동) 처리 프로세스","연령/본인확인 및 민감 시기 정책(필요 시)","법률·정책 준수(국내 PIPA 등)와 유관 요청 대응","감사 추적 및 투명성 요구","오남용/스팸/봇 방지 정책과 레이트리밋 원칙","보안 이벤트 커뮤니케이션"],"audience":"development team","keyQuestions":["개인정보 및 법적 요구는 무엇이며 어떻게 충족하는가","오남용 방지와 투명성 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["07-pol-econ-board-community-governance-and-moderation.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["법/정책은 비즈니스 해석 수준으로 기술","API/암호화 상세 구현 금지"],"content":"# 09-pol-econ-board Security and Compliance Requirements\n\n## Purpose and Scope\nSpecifies business-level security, privacy, legal-compliance, abuse prevention, and incident communication requirements for the pol-econ-board service. All statements define WHAT must occur from a compliance perspective in measurable, testable terms using EARS. Technical implementation decisions (architecture, APIs, database schemas, encryption choices, vendor tools) belong to the development team.\n\nProvides business requirements only. All technical implementation decisions are at the discretion of developers. Describes WHAT the system shall do, not HOW to build it.\n\n## Definitions and Scope of Personal Data\n- Personal Data: Information relating to an identified or identifiable natural person (e.g., name, email, IP address, device identifiers, account identifiers, and authored content when linkable to a person).\n- Sensitive Data: Government-issued IDs, financial account numbers, precise geolocation, political opinions, health data, and other special categories defined by applicable law.\n- Processing: Any operation on personal data (collection, storage, use, disclosure, transfer, deletion).\n- Controller (Business Role): Service operator (admin role) determining purposes and means of processing.\n- Processor (Operational Role): Third parties processing on behalf of the controller.\n\n## Privacy Principles, Legal Bases, and Consent Management\n### Core Principles\n- Lawfulness, fairness, transparency\n- Purpose limitation and data minimization\n- Accuracy\n- Storage limitation and retention schedules\n- Integrity and confidentiality\n- Accountability and auditability\n\n### Legal Bases (Business-Level)\n- Contract necessity: providing core service functions (e.g., account, content hosting, moderation safety).\n- Legal obligation: fulfilling statutory duties (e.g., responding to lawful requests, retention for compliance).\n- Legitimate interests: protecting platform integrity, fraud prevention, product analytics using minimized/aggregated signals (balancing test documented).\n- Consent: optional communications, marketing, non-essential analytics/trackers, or features that require opt-in.\n\n### Consent and Preference Governance (EARS)\n- THE service SHALL present clear privacy notices at each point of personal data collection describing purposes, categories, recipients, and retention periods.\n- THE service SHALL collect only the minimum data necessary for stated purposes and legal compliance.\n- THE service SHALL maintain a registry of processing activities including purposes, data categories, recipient categories, geographic locations, and retention periods.\n- WHEN a user registers, THE service SHALL obtain explicit consent for optional processing (e.g., marketing communications) separate from essential processing.\n- WHEN consent is required by law, THE service SHALL record consent with timestamp, user identifier, consent scope, and source context.\n- WHEN a user withdraws consent, THE service SHALL cease the corresponding processing within 24 hours and update the consent registry.\n- WHEN processing purposes change materially, THE service SHALL notify users prior to changes and request renewed consent where required.\n- WHERE cookies or trackers are used for analytics or marketing, THE service SHALL obtain opt-in consent before activation and provide per-category controls.\n- WHILE executing essential service features, THE service SHALL permit processing without optional consents strictly limited to essential purposes specified in privacy notices.\n- IF a user declines optional tracking, THEN THE service SHALL honor the choice across sessions within the same account and device context.\n- THE service SHALL provide granular preference controls for marketing, newsletter digests, and topic-based communications at category×channel level.\n- THE service SHALL retain consent and preference change logs for at least 2 years for auditability.\n- WHERE Global Privacy Control (GPC) or equivalent browser signals are detected, THE service SHALL treat the signal as an opt-out for non-essential processing for that browser session and associated account context.\n\n## Data Subject Rights (Access, Rectification, Deletion, Portability)\n### Process Overview\nData rights requests (DSAR) are accepted via authenticated channels, acknowledged, verified, processed, and recorded within defined SLAs. Actions include access copy, rectification, deletion, portability export, restriction of processing, and objection where applicable.\n\n### Requirements (EARS)\n- WHEN a user submits a rights request, THE service SHALL acknowledge receipt within 1 hour via the user’s preferred contact channel.\n- THE service SHALL require identity verification for all rights requests before actioning them.\n- WHEN identity verification succeeds, THE service SHALL begin processing within 1 business day.\n- THE service SHALL fulfill access and portability requests within 14 calendar days, with one 14-day extension for complex cases where permitted by law.\n- THE service SHALL fulfill rectification requests within 7 calendar days after verification.\n- THE service SHALL fulfill deletion requests within 7 calendar days except where retention is required by law or for dispute resolution per published policies.\n- IF legal retention obligations prevent immediate deletion, THEN THE service SHALL restrict processing to storage-only and inform the user of the legal basis and retention duration.\n- THE service SHALL provide access copies limited to the requesting user’s data and exclude third-party personal data unless law permits disclosure.\n- WHERE portability applies, THE service SHALL provide a structured, commonly used, machine-readable export of the user’s data and metadata relevant to their content and account settings.\n- THE service SHALL log each request with request type, timestamps, verification outcome, action taken, and final resolution status for audit purposes.\n- IF a request is manifestly unfounded or excessive, THEN THE service SHALL decline with justification and provide an appeal path.\n- THE service SHALL provide an appeal path with review by a moderator or admin independent from the initial handler.\n- WHEN a deletion request completes, THE service SHALL remove the user’s profile data and pseudonymize authored public content where policy requires content continuity.\n- THE service SHALL limit concurrent open DSARs per user to 3 and rate-limit submissions to 1 per 24 hours per request type to prevent abuse.\n- IF identity verification fails after 2 attempts, THEN THE service SHALL close the request with status \"verification_failed\" and provide retry guidance after 7 days.\n\n### DSAR Evidence, Channels, and Status\n- THE service SHALL surface DSAR status and processing timestamps in a user-accessible portal with history of the last 12 months of DSAR events.\n- THE service SHALL provide downloadable records of completed DSAR responses for 90 days after closure.\n\n## Age/Identity Verification and Sensitive Period Policies\n### Context\nPolitical and economic discourse may involve heightened risk periods (elections, regulatory windows). Age and identity verification may be required by law for specific features or content.\n\n### Requirements (EARS)\n- WHERE age-based restrictions apply, THE service SHALL require date-of-birth declaration at registration and provide guardian consent workflows for users under 14 years old.\n- IF a user is identified as under 14 years old without guardian consent, THEN THE service SHALL suspend data processing beyond essential safety operations and request consent.\n- WHERE real-name verification is mandated for specific publishing features by applicable law, THE service SHALL require identity verification before enabling those features.\n- WHILE an election-sensitive period is active as defined by policy, THE service SHALL enable heightened review workflows for flagged political content per community governance policies.\n- THE service SHALL provide clear notices about additional processing involved in identity or age verification and retain verification evidence only for the minimum period necessary for compliance.\n\n## Legal/Policy Compliance and Official Requests\n### Scope\nCovers compliance with Korea’s Personal Information Protection Act (PIPA) and other applicable local regulations for the service’s operating jurisdictions, as well as handling of official requests from authorities or litigants.\n\n### Requirements (EARS)\n- THE service SHALL maintain up-to-date records of applicable laws, regulatory guidance, and policy interpretations relevant to privacy and platform governance in operating jurisdictions.\n- WHEN a lawful request for user information is received, THE service SHALL verify legal validity and scope before disclosure and document the decision process.\n- IF a request is overbroad, THEN THE service SHALL seek to narrow scope and refuse disclosure beyond lawful requirements.\n- THE service SHALL notify affected users of disclosure requests unless legally prohibited or risk of harm is identified.\n- THE service SHALL preserve relevant data upon receipt of a valid preservation notice and limit access to authorized personnel only.\n- THE service SHALL publish jurisdiction-specific policies for cross-border transfers and apply appropriate safeguards consistent with law.\n- WHEN policies or laws change materially, THE service SHALL update internal procedures and staff training within 30 days.\n\n## Vendor and Processor Management\n- THE service SHALL maintain a vendor inventory listing processors, processing purposes, data categories processed, jurisdictions, and retention dependencies.\n- THE service SHALL execute data processing agreements (DPAs) with processors before processing begins and review them annually.\n- WHEN a new processor is onboarded, THE service SHALL perform a privacy and security assessment and record the outcome in the processing registry.\n- IF a processor fails to meet obligations or suffers a relevant incident, THEN THE service SHALL assess risk, implement mitigations, and notify affected users and/or authorities where required.\n\n## Cross-Border Transfer Governance\n- WHERE personal data is transferred cross-border, THE service SHALL identify transfer mechanisms compliant with applicable law (e.g., contractual safeguards) and record them in the processing registry.\n- THE service SHALL disclose cross-border transfer destinations and safeguards in privacy notices.\n\n## Audit Trail and Transparency Requirements\n### Auditability\n- THE service SHALL record administrative and moderation actions with actor role, target resource, action type, timestamp, and standardized reason codes.\n- THE service SHALL protect audit logs from tampering via controlled access and integrity controls under developer-chosen mechanisms.\n- THE service SHALL retain audit logs for 2 years unless law requires longer retention.\n\n### Transparency\n- THE service SHALL publish a transparency report at least quarterly summarizing content moderation actions, government requests, privacy incidents, and DSAR statistics.\n- THE service SHALL provide category-level metrics without exposing personal data.\n- WHEN any admin or moderator performs a content action, THE service SHALL require a reason code from a standardized taxonomy.\n- WHEN DSARs are processed, THE service SHALL update the transparency dataset with count and average resolution time within 7 days of closure.\n- IF audit logs reach 80% of planned capacity, THEN THE service SHALL trigger capacity review and retention optimization according to published retention rules.\n\n## Abuse/Spam/Bot Prevention and Rate Limiting Principles\n### Philosophy\nBalance community participation with platform integrity, using measurable thresholds and fair appeal mechanisms. Thresholds apply per role with stricter limits for new or flagged accounts.\n\n### Default Thresholds by Role\n| Action | member | expert | moderator | editor | admin |\n|--------|--------|--------|-----------|--------|-------|\n| Post creations per hour | 5 | 8 | 12 | 8 | 20 |\n| Comments per 10 minutes | 30 | 40 | 60 | 40 | 80 |\n| Follows per hour | 20 | 30 | 60 | 30 | 80 |\n| Reports filed per hour | 10 | 15 | 40 | 40 | 80 |\n| DMs/invites per hour (if enabled) | 10 | 15 | 40 | 20 | 80 |\n\nAdditional states:\n- New accounts (<72 hours since registration) use 50% of the above limits.\n- Flagged accounts (policy or security risk) use 25% of the above limits until review.\n\n### Requirements (EARS)\n- THE service SHALL enforce the default thresholds by role and state as listed in the table for posting, commenting, following, reporting, and messaging actions.\n- WHILE an account is in new state (<72 hours), THE service SHALL apply the \"new\" thresholds automatically.\n- WHILE an account is in flagged state, THE service SHALL apply the \"flagged\" thresholds and require manual review by a moderator within 72 hours.\n- WHEN a rate limit is exceeded, THE service SHALL block the action and display the remaining wait time before the next allowed action.\n- IF automated signals indicate bot-like behavior (e.g., actions at constant intervals or high burstiness), THEN THE service SHALL require an interactive challenge before allowing further actions.\n- THE service SHALL provide an appeal path for rate-limit or restriction decisions and resolve appeals within 7 calendar days.\n- WHERE abuse is detected across IP/device clusters, THE service SHALL apply graduated restrictions at the cluster level while permitting legitimate users to request review.\n\n## Security Event Communication\n### Severity Levels (Business)\n- Low: No personal data involved; limited functionality impact.\n- Medium: Limited personal data exposure or moderate functionality impact.\n- High: Confirmed or likely personal data breach affecting a meaningful subset of users or sustained service degradation.\n- Critical: Large-scale personal data breach or service-wide impact.\n\n### Requirements (EARS)\n- WHEN a personal data breach is confirmed at Medium severity or higher, THE service SHALL notify affected users without undue delay and within 24 hours of confirmation, including incident overview, data types affected, protective steps, and contact details.\n- THE service SHALL notify the competent authority in jurisdictions where required within statutory time limits (target within 72 hours for reportable incidents).\n- WHEN a High or Critical incident occurs, THE service SHALL publish public status updates at least every 6 hours until containment and provide a post-incident report within 14 days.\n- IF incident investigation identifies compromised credentials or sessions, THEN THE service SHALL invalidate the affected sessions and require re-authentication for impacted users.\n- THE service SHALL maintain an incident communication playbook specifying roles, approval steps, and message templates consistent with these timeframes.\n- THE service SHALL record incident timelines, decisions, and messages in an immutable audit trail for at least 2 years.\n\n## Roles and Responsibilities for Compliance\n### Role Capabilities\n| Compliance Action | member | expert | moderator | editor | admin |\n|-------------------|--------|--------|-----------|--------|-------|\n| Submit DSAR | ✅ | ✅ | ✅ | ✅ | ✅ |\n| View own DSAR status | ✅ | ✅ | ✅ | ✅ | ✅ |\n| Approve/deny DSAR | ❌ | ❌ | ✅ (review) | ❌ | ✅ (final) |\n| View audit logs | ❌ | ❌ | ✅ (limited) | ✅ (content ops) | ✅ (full) |\n| Modify retention schedules | ❌ | ❌ | ❌ | ❌ | ✅ |\n| Apply account restrictions | ❌ | ❌ | ✅ | ❌ | ✅ |\n| Publish transparency metrics | ❌ | ❌ | ❌ | ✅ (content metrics) | ✅ (full) |\n| Handle legal requests | ❌ | ❌ | ❌ | ❌ | ✅ |\n\n### Requirements (EARS)\n- THE service SHALL restrict DSAR approval authority to admin with optional moderator review as a prerequisite.\n- WHEN a moderator applies a restriction, THE service SHALL record the reason code and notify the user with appeal instructions.\n- THE service SHALL limit audit log visibility for moderators and editors to their operational scope and exclude sensitive personal data fields.\n- THE service SHALL require dual control (two-person review) for changes to retention schedules and transparency report publication.\n\n## Performance and Service Level Expectations\n### User-Perceived Performance (KST as business reference)\n- THE service SHALL provide DSAR portal responses (status retrieval) within 2 seconds under normal load.\n- THE service SHALL deliver consent preference changes and reflect them in processing decisions within 5 minutes.\n- THE service SHALL deliver incident notification emails or in-app messages within 15 minutes of the communication decision.\n\n### Operational SLAs\n- THE service SHALL maintain availability for DSAR submission endpoints 99.9% monthly, excluding planned maintenance announced 48 hours in advance.\n- THE service SHALL ensure audit log write operations succeed for 99.99% of eligible actions measured monthly.\n- THE service SHALL acknowledge lawful request intake within 1 business day and record action status changes within 1 hour of each transition.\n\n## Training, Awareness, and Governance\n- THE service SHALL conduct annual privacy and security training for moderators, editors, and admins, with completion tracking.\n- WHEN material policy changes occur, THE service SHALL issue targeted training updates within 30 days.\n- THE service SHALL designate a compliance owner for privacy and governance workflows and publish contact details for inquiries.\n\n## Risk Assessments (PIA/DPIA Triggers)\n- WHERE processing introduces high risk to individuals (e.g., new large-scale profiling, sensitive political categories, identity verification expansions), THE service SHALL conduct a privacy impact assessment prior to launch and record mitigations.\n- WHEN residual risks remain high, THE service SHALL seek legal/compliance consultation before proceeding.\n\n## Cookie and Tracker Governance\n- THE service SHALL categorize trackers into essential, analytics, and marketing; essential operates without consent strictly for service provision.\n- WHEN a user opts out of analytics/marketing trackers, THE service SHALL honor the choice for at least 6 months unless earlier preference changes are recorded.\n- THE service SHALL display per-category controls and an easily accessible consent management interface on every page.\n- WHERE applicable signals like GPC are present, THE service SHALL treat them as an opt-out for non-essential categories in that context.\n\n## Data Minimization and Retention Alignment\n- THE service SHALL align privacy retention with the business policies defined in the [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md), favoring pseudonymization and aggregation wherever feasible.\n- THE service SHALL ensure that deletion or anonymization outcomes propagate to dependent systems and analytics aggregates according to published windows.\n\n## Visual Process Diagrams (Mermaid)\n### DSAR Processing Flow\n```mermaid\ngraph LR\n  subgraph \"User Submission\"\n    A[\"Submit DSAR\"] --> B[\"Acknowledge(1h)\"]\n  end\n  subgraph \"Verification\"\n    C[\"Verify Identity\"] --> D{\"Verified?\"}\n  end\n  subgraph \"Processing\"\n    E[\"Assign Handler\"] --> F[\"Process Request\"] --> G{\"Type?\"}\n    G -->|\"Access/Portability\"| H[\"Assemble Export\"]\n    G -->|\"Rectification\"| I[\"Apply Corrections\"]\n    G -->|\"Deletion\"| J[\"Delete/Restrict\"]\n  end\n  subgraph \"Closure\"\n    K[\"Quality Review\"] --> L[\"Respond & Close\"]\n  end\n  B --> C\n  D -->|\"Yes\"| E\n  D -->|\"No\"| M[\"Close: verification_failed\"]\n  H --> K\n  I --> K\n  J --> K\n  E --> F\n  F --> G\n  K --> L\n```\n\n### Abuse Detection and Rate Limit Flow\n```mermaid\ngraph LR\n  A[\"User Action\"] --> B[\"Check Thresholds\"] --> C{\"Exceeded?\"}\n  C -->|\"No\"| D[\"Allow Action\"]\n  C -->|\"Yes\"| E[\"Block & Show Wait Time\"] --> F{\"Bot-like?\"}\n  F -->|\"No\"| G[\"Log Event\"]\n  F -->|\"Yes\"| H[\"Challenge User\"] --> I{\"Pass?\"}\n  I -->|\"Yes\"| D\n  I -->|\"No\"| J[\"Apply Restriction\"] --> K[\"Queue Review(72h)\"]\n```\n\n### Incident Communication Flow\n```mermaid\ngraph LR\n  subgraph \"Detection\"\n    A[\"Identify Incident\"] --> B[\"Classify Severity\"]\n  end\n  subgraph \"Notification\"\n    C[\"Authority Notify(≤72h)\"]\n    D[\"User Notify(≤24h)\"]\n    E[\"Status Update(6h cadence)\"]\n  end\n  subgraph \"Containment & Postmortem\"\n    F[\"Contain & Invalidate Sessions\"] --> G[\"Post-Incident Report(≤14d)\"]\n  end\n  B --> C\n  B --> D\n  D --> E\n  C --> F\n  E --> F\n  F --> G\n```\n\n## References to Related Documents\n- See the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md) for content policy definitions, enforcement triggers, and appeal processes.\n- See the [Non-Functional Requirements](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, observability, and capacity expectations that underpin compliance operations.\n- See the [Data Lifecycle and Retention Policy](./10-pol-econ-board-data-lifecycle-and-retention.md) for lifecycle stages, preservation, and disposal rules.\n\n## Compliance Notes\nInterprets laws and policies at a business-requirements level and deliberately omits technical implementation details, APIs, encryption specifics, and vendor selections. Developers retain full autonomy over how to implement these requirements."},{"reason":"정보의 생성→사용→보존→삭제 전주기를 비즈니스 레벨에서 규정하기 위함.","filename":"10-pol-econ-board-data-lifecycle-and-retention.md","documentType":"requirement","outline":["데이터 흐름 개요(개념적)","게시물/댓글 라이프사이클(초안/발행/수정/아카이브/삭제)","신고/중재 라이프사이클과 증빙 보존","로그/지표/백업의 보존 기간과 파기 원칙","익명화/가명처리의 비즈니스 요건","사용자 요청 기반 삭제 및 복구 창구"],"audience":"development team","keyQuestions":["핵심 데이터의 라이프사이클 단계와 보존 원칙은 무엇인가","삭제/복구/익명화 요구는 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["09-pol-econ-board-security-and-compliance.md","07-pol-econ-board-community-governance-and-moderation.md"],"constraints":["정책은 검증 가능하고 감사 가능해야 함","기술 구현 세부 금지"],"content":"# pol-econ-board Data Lifecycle and Retention Requirements\n\nBusiness requirements only; all technical implementation decisions (architecture, APIs, database design, storage tiers, job orchestration) belong to the development team. Defines WHAT must happen across the data lifecycle, not HOW to implement it.\n\n## 1. Scope and Intent\n- Establish verifiable and auditable business rules for creation, use, preservation, anonymization, and deletion of information across its lifecycle in the pol-econ-board service.\n- Clarify responsibilities and constraints by role (member, expert, moderator, editor, admin) over data states.\n- Align with the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md) and the [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 2. Definitions and Data Classes\n- Core data classes (business-level):\n  - Account Profile: minimal identity and preferences for member/expert/moderator/editor/admin.\n  - Post: authored content including title/body and metadata (topics, tags, visibility, language, content warnings, sources).\n  - Comment/Reply: discussion items attached to a post or comment; includes mentions.\n  - Reaction/Vote: engagement signals tied to posts or comments.\n  - Follow/Subscription/Bookmark: user-interest signals for topics, authors, or items.\n  - Report: user-submitted complaint about content or behavior.\n  - Moderation Record: decisions, reasons, sanctions, transparency notes.\n  - Notification Record: delivery attempts, status, category/channel, preferences snapshot.\n  - Audit Log: immutable traces of sensitive actions and lifecycle transitions.\n  - Metrics/Analytics Event: granular events and aggregated counters for business analytics (non-identifying beyond policy limits).\n  - Backup Artifact: point-in-time preservation of business records for disaster recovery.\n  - DSAR Record: data subject access/rectify/delete/portability requests and fulfillment artifacts (business tracking).\n  - Legal Hold Record: records of holds with scope, basis, approver, and review history.\n  - Taxonomy Change Record: topic/tag/category adjustments with effective dates and mapping notes.\n\n- Role scope (business perspective):\n  - Member/Expert: create and manage own content; request deletion; exercise data rights per policy.\n  - Moderator: handle reports; hide/remove content; propose or apply sanctions per policy scope; manage evidence and transparency entries.\n  - Editor: curate/pin/feature; manage taxonomy; no unilateral access to personal data beyond business need.\n  - Admin: oversee policy application; impose legal holds; manage roles/policies; access audit and transparency logs.\n\n## 3. Conceptual Data Flow Overview\n```mermaid\ngraph LR\n  subgraph \"Creation\"\n    A1[\"Create Draft(Post/Comment)\"] --> A2[\"Validate & Classify\"]\n  end\n  subgraph \"Usage\"\n    B1[\"Publish & Engage\"] --> B2[\"Edit & Version\"]\n  end\n  subgraph \"Governance\"\n    C1[\"Report Submitted\"] --> C2[\"Moderation Review\"] --> C3[\"Decision/Sanction\"]\n  end\n  subgraph \"Preservation\"\n    D1[\"Audit Logging\"] --> D2[\"Backups & Metrics\"]\n  end\n  subgraph \"Disposition\"\n    E1[\"User/Policy Delete Request\"] --> E2[\"Soft Delete/Archive\"] --> E3[\"Permanent Deletion/Anonymize\"]\n  end\n  A2 --> B1\n  B2 -.-> D1\n  B1 --> D2\n  C3 --> D1\n  E1 --> D1\n```\n\n## 4. Global Lifecycle Concepts\n- States (business-level): Draft, Published, Edited (Versioned), Archived, Hidden (policy/moderation), Soft Deleted, Permanently Deleted, Under Hold (legal/moderation), Restored.\n- Transitions: Valid transitions are constrained by holds, appeals, and policy gates.\n\nEARS requirements (global):\n- WHILE 항목이 \"Under Hold\" 상태, THE lifecycle policy SHALL prohibit permanent deletion or anonymization for the affected records.\n- WHEN 상태 전이가 발생(create, publish, edit, archive, delete, restore, hold apply/release), THE lifecycle policy SHALL record actor role, timestamp, and reason in an immutable audit trail.\n- WHERE referential dependencies exist (e.g., comment → post), THE lifecycle policy SHALL preserve discussion continuity using placeholders when parents are removed.\n\n## 5. Post Lifecycle\nStates: Draft → Published → Edited (Versioned) → Archived (optional) → Deleted (Soft) → Permanently Deleted.\n\nCreation and drafts\n- WHEN a user saves a post as draft, THE service SHALL retain the draft for 90 days since last edit.\n- IF a draft remains inactive for 90 consecutive days, THEN THE service SHALL mark it for permanent deletion within 7 days.\n- THE service SHALL allow authors to self-delete drafts at any time; WHEN a draft is self-deleted, THE service SHALL purge it permanently within 7 days.\n\nPublishing and editing\n- WHEN a draft is published, THE service SHALL record a publication timestamp and initial version identifier.\n- WHEN an author edits a published post, THE service SHALL preserve the immediately prior version for 30 days for rollback and audit purposes unless a legal/moderation hold requires longer retention.\n- IF a published post is edited within 10 minutes of publication, THEN THE service SHALL treat the edit as a minor update not requiring separate archival unless content meaning materially changes per moderation rules.\n\nArchiving (business visibility management)\n- WHERE a post is older than 365 days without new engagement (views, comments, reactions), THE service SHALL be eligible to move it to an archived state where it remains readable but excluded from default feeds.\n- WHEN a post enters archived state, THE service SHALL maintain all references (comments, reactions) intact.\n\nDeletion\n- WHEN an author deletes a published post, THE service SHALL transition it to soft delete immediately, exclude it from public access, and begin a 30-day recovery window for the author.\n- WHEN the 30-day recovery window elapses without restoration, THE service SHALL permanently delete post body and attachments while retaining minimal non-content metadata (author pseudonymous identifier, deletion timestamp, content identifier) for 180 days for audit/abuse-prevention, after which THE service SHALL anonymize or delete such metadata unless under legal hold.\n- IF a post is under active moderation investigation or legal hold when deletion is requested, THEN THE service SHALL defer permanent deletion until the hold is lifted and SHALL inform the author through standard communication channels.\n\nCross-References\n- WHEN a post is permanently deleted, THE service SHALL remove or anonymize dependent objects per their own policies (e.g., comments by others remain but lose parent pointer visibility and show a \"missing parent\" placeholder; reactions are removed).\n\n### Visual: Post Lifecycle\n```mermaid\ngraph LR\n  A[\"Draft\"] --> B[\"Published\"] --> C[\"Edited(Versioned)\"]\n  B --> D[\"Archived\"]\n  C --> D\n  B --> E[\"Soft Deleted\"]\n  E --> F[\"Permanently Deleted\"]\n  D --> E\n  subgraph \"Constraints\"\n    G[\"Under Hold\"]\n  end\n  E -.-> G\n  F -.-> G\n```\n\n## 6. Comment/Reply Lifecycle\nStates: Draft → Published → Edited → Deleted (Soft) → Permanently Deleted.\n\nDrafts and publishing\n- THE service SHALL apply the same draft retention rules as posts (90-day inactivity purge).\n- WHEN a comment is published, THE service SHALL record a publication timestamp and link to the parent post/comment.\n\nEditing\n- WHERE editing is permitted by policy, THE service SHALL allow comment edits within 24 hours of posting; WHEN edited, THE service SHALL keep a prior version for 7 days for moderation audit.\n\nDeletion\n- WHEN a commenter deletes their comment, THE service SHALL soft delete immediately and offer a 14-day recovery window.\n- WHEN the 14-day window elapses, THE service SHALL permanently delete comment content while retaining minimal non-content metadata for 90 days for audit unless under legal hold.\n- IF the comment has replies, THEN THE service SHALL display a \"comment removed\" placeholder at the business content layer and preserve reply visibility.\n\n## 7. Reactions and Votes\n- WHEN a user adds or removes a reaction or vote, THE service SHALL apply the change immediately and record an event in audit logs where required.\n- WHEN a user account is deleted, THE service SHALL delete or aggregate reactions and votes such that individual attribution is removed within 7 days.\n- THE service SHALL retain reaction events for 90 days for abuse detection, after which THE service SHALL aggregate or purge individual events, keeping only aggregate counts.\n\n## 8. Follows, Subscriptions, and Bookmarks\n- WHEN a user follows a topic or author, THE service SHALL store the preference until the user unfollows or the account is deleted.\n- WHEN a user removes a bookmark, THE service SHALL delete the bookmark record immediately and exclude it from backups after the standard retention window.\n- WHERE an account is deleted, THE service SHALL purge follows/subscriptions/bookmarks within 7 days.\n\n## 9. Account Profile and Preferences\n- WHEN an account is created, THE service SHALL store only minimal required profile fields and preferences per data minimization principle.\n- WHEN a user updates profile fields or preferences, THE service SHALL overwrite prior values and retain a change-audit entry for 180 days.\n- WHEN a user requests account deletion, THE service SHALL begin a 14-day cooling-off period during which sign-in cancels the deletion if the user explicitly revokes the request; after the period, THE service SHALL permanently delete or anonymize personal data except data needed for legal obligations or transparency logs.\n\n### Visual: Account Deletion Flow (Cooling-Off → Final Disposition)\n```mermaid\ngraph LR\n  A[\"Account Deletion Request\"] --> B[\"Acknowledge(≤24h)\"] --> C[\"Cooling-Off(14d)\"]\n  C --> D{\"Revoked?\"}\n  D -->|\"Yes\"| E[\"Cancel Deletion\"]\n  D -->|\"No\"| F[\"Delete/Anonymize(≤15d)\"]\n  F --> G{\"Legal/Moderation Hold?\"}\n  G -->|\"Yes\"| H[\"Defer Until Hold Lifted\"]\n  G -->|\"No\"| I[\"Confirm Completion\"]\n```\n\n## 10. Report/Moderation Lifecycle and Evidence Retention\nStates: Reported → Triaged → Under Review → Decision → Sanction (if any) → Appeal → Finalized.\n\nReport intake\n- WHEN a report is submitted, THE service SHALL timestamp, classify, and place it into the moderation queue.\n- THE service SHALL preserve report details and a referenced content snapshot at time of report for evidence.\n\nReview and decision\n- WHEN a moderator opens a report, THE service SHALL record reviewer role, actions taken, and timing for transparency.\n- WHEN a decision is issued, THE service SHALL store decision, rationale, and policy references.\n\nEvidence retention\n- THE service SHALL retain report records, content snapshots used as evidence, and moderation decisions for 2 years from finalization unless stricter statutory requirements apply.\n- IF a sanction includes account suspension or permanent ban, THEN THE service SHALL retain minimal identifiers necessary to enforce sanctions for the sanction duration plus 2 years.\n\nAppeals and interactions\n- WHEN an appeal is filed within the allowed window, THE service SHALL lock evidence from deletion until appeal closure.\n- WHEN an appeal concludes, THE service SHALL reset the retention start to the appeal closure date.\n- IF the reported content’s author requests deletion, THEN THE service SHALL keep evidence under hold until the case is finalized, then apply standard deletion rules.\n\nReference: [Community Governance and Moderation Requirements](./07-pol-econ-board-community-governance-and-moderation.md).\n\n## 11. Logs, Metrics, DSARs, and Backups: Retention and Disposal\nAudit and security logs\n- THE service SHALL retain authentication, authorization, and sensitive action audit logs for 180 days at minimum and up to 1 year where required by internal policy.\n- WHERE logs contain personal identifiers, THE service SHALL pseudonymize identifiers within 30 days unless strict identity is required for ongoing investigations.\n\nTransparency logs\n- THE service SHALL retain public-facing transparency records of moderation actions for 2 years, with personal data minimized and pseudonymized where possible.\n\nOperational metrics and analytics\n- THE service SHALL retain granular metrics and event samples for 90 days; after 90 days THE service SHALL keep only aggregated, non-identifying statistics for longitudinal analysis.\n\nNotification delivery logs\n- THE service SHALL retain notification delivery attempts and outcomes for 90 days to support troubleshooting and opt-in/opt-out proof.\n\nDSAR records\n- THE service SHALL retain DSAR request logs and responses for 2 years for audit and compliance, with personal data minimized.\n\nBackups (business-level principles)\n- THE service SHALL maintain daily recovery points sufficient to restore to a business-acceptable point-in-time; WHERE monthly full retention applies, THE service SHALL retain monthly recovery points for 3 months and daily recovery points for 30 days.\n- IF a user exercises deletion rights, THEN THE service SHALL ensure deleted personal data ages out of backup media within 35 days after deletion completion, acknowledging backup immutability windows.\n- THE service SHALL document and publish effective backup retention windows for audit.\n\nDisposal\n- WHEN retention expires and no legal or moderation hold exists, THE service SHALL dispose of logs, metrics, DSAR records, and backups in an irreversible manner and record disposal in audit entries.\n\n## 12. Anonymization and Pseudonymization Requirements\nPseudonymization\n- WHEN storing data for audit or transparency, THE service SHALL replace direct personal identifiers with stable pseudonymous identifiers sufficient for role-based review but insufficient for public re-identification.\n- WHERE cross-record correlation is necessary for abuse detection, THE service SHALL use rotating pseudonymous identifiers that change at most every 90 days while maintaining internal linkage.\n\nAnonymization\n- WHEN permanent deletion is required but analytics value remains, THE service SHALL anonymize records by removing or irreversibly altering personal identifiers and quasi-identifiers so re-identification is not reasonably possible.\n- IF anonymization cannot guarantee non-reidentifiability for a dataset, THEN THE service SHALL opt for full deletion.\n\nRe-identification prohibition and documentation\n- THE service SHALL prohibit attempts to reverse pseudonymization/anonymization and SHALL record violations as security incidents.\n- THE service SHALL maintain a business-level data dictionary mapping data classes to anonymization/pseudonymization strategies.\n\n## 13. User-Requested Deletion and Recovery\nContent deletion by author\n- WHEN an author deletes own content (posts or comments), THE service SHALL begin the applicable recovery window (30 days for posts, 14 days for comments) and provide a self-service restoration option during that window.\n- WHEN content is restored during the window, THE service SHALL reinstate visible links and engagement counts except those already purged by separate user actions.\n\nAccount deletion\n- WHEN a verified user submits an account deletion request, THE service SHALL acknowledge within 24 hours, start a 14-day cooling-off period, and communicate the scheduled deletion date.\n- WHEN the cooling-off period ends without revocation, THE service SHALL delete/anonymize personal data within 15 additional days and notify the user of completion if channels remain valid.\n- WHERE legal obligations require retention (e.g., moderation transparency, fraud prevention), THE service SHALL retain only minimal necessary data and SHALL document the legal basis.\n\nExceptions and holds\n- IF an active moderation case, payment dispute, or legal hold exists, THEN THE service SHALL defer deletion until closure and SHALL inform the user of deferral reason and next steps.\n\nRecovery portal\n- THE service SHALL provide a history of user-initiated deletions within the active recovery window and SHALL allow one-click restoration by the owner.\n- WHERE recovery would violate a moderation decision, THE service SHALL block restoration and display the applicable policy reference in user-facing communications.\n\n## 14. Legal Hold and Exceptions\n- WHEN an Admin establishes a legal hold for specific subjects or data classes, THE service SHALL freeze deletion and anonymization actions for affected records until the hold is explicitly lifted.\n- THE service SHALL record the hold’s scope, reason (business reference), start/end timestamps, and approver role in the audit log and SHALL review active holds every 90 days.\n\n## 15. Retention Matrix (Business Summary)\n\n| Data Category | State/Trigger | Retention Policy | Deletion Type | Recovery Window | Notes |\n|---|---|---|---|---|---|\n| Draft Posts/Comments | Last edit inactive | Delete after 90 days inactivity; purge within 7 days | Permanent | N/A | User can self-delete anytime |\n| Published Post Versions | Edit event | Prior version kept 30 days | Auto purge 30 days | N/A | Longer if under hold |\n| Posts (Author-deleted) | Soft deleted | Recovery 30 days; then delete content; metadata 180 days | Permanent (content); anonymize metadata | 30 days | Defer if under hold |\n| Comments (Author-deleted) | Soft deleted | Recovery 14 days; then delete content; metadata 90 days | Permanent (content); anonymize metadata | 14 days | Placeholder remains |\n| Reactions/Votes | Event created | Keep raw 90 days; keep aggregates indefinitely | Aggregate only | N/A | Remove attribution on account deletion (7 days) |\n| Follows/Bookmarks | Preference removed | Immediate deletion | Permanent | N/A | Purge within 7 days on account deletion |\n| Account Profiles | Deletion requested | 14-day cooling; delete/anonymize within +15 days | Permanent/Anonymize | N/A | Minimal retention if required by law |\n| Reports & Evidence | Finalization/Appeal close | 2 years | N/A | N/A | Extend under legal requirements |\n| Audit/Security Logs | Log creation | 180 days up to 1 year | Permanent | N/A | Pseudonymize in 30 days unless needed |\n| Transparency Logs | Action published | 2 years | N/A | N/A | Personal data minimized |\n| Metrics/Analytics | Event creation | Granular 90 days; aggregates thereafter | Aggregate | N/A | Non-identifying aggregates |\n| Notification Logs | Event creation | 90 days | Permanent | N/A | Proof of consent history |\n| DSAR Records | Request closure | 2 years | Permanent | N/A | Minimized content |\n| Backups | Recovery point creation | Daily 30 days; Monthly 3 months | Secure destruction | N/A | Deleted data ages out ≤35 days |\n| Taxonomy Change Records | Change applied | 1 year | Permanent | N/A | For curation audit |\n| Legal Hold Records | Hold creation | Duration of hold + 2 years | N/A | N/A | Scope/review trail retained |\n\n## 16. Error Handling and Edge Cases (Business)\nConflicts and holds\n- IF a user requests deletion while a legal or moderation hold exists, THEN THE service SHALL process the request to the extent possible and queue the remainder until the hold is lifted, with user notification per communications policy.\n\nReferential integrity\n- WHEN a parent post is permanently deleted, THE service SHALL ensure that child comments remain visible if policy allows, with a clear placeholder and without broken navigation.\n\nPartial failures\n- IF a deletion workflow partially completes, THEN THE service SHALL mark the item as \"deletion pending\" and retry within 24 hours until completion or hold.\n\nRace conditions\n- WHEN simultaneous restore and delete actions occur within a recovery window, THE service SHALL prioritize the most recent, explicitly confirmed user action and record the decision in the audit log.\n\nAttachments and embedded media\n- WHEN content is deleted, THE service SHALL apply the same retention schedule to associated attachments and embedded media unless under hold.\n\nData residency and localization (business-level)\n- WHERE data residency constraints apply, THE service SHALL ensure residency-compliant storage locations for preserved data classes and SHALL document residency scope in audit.\n\n## 17. Auditability and Policy Governance\nLifecycle event logging\n- THE service SHALL record lifecycle transitions (create, publish, edit, archive, delete, restore, hold apply/release) with actor role, timestamp, and reason in an immutable audit trail accessible to Admins for compliance review.\n\nPolicy versioning\n- THE service SHALL maintain a versioned registry of lifecycle and retention rules; WHEN rules change, THE service SHALL apply new rules prospectively and SHALL not retroactively shorten required legal retention unless permitted by law.\n\nReviews and certification\n- THE service SHALL review lifecycle and retention practices at least annually and after major regulatory updates, certifying compliance status at the business level.\n\nMinimization and purpose limitation\n- THE service SHALL collect and retain only data necessary for the stated purpose and duration, as detailed in the [Security and Compliance Requirements](./09-pol-econ-board-security-and-compliance.md).\n\n## 18. Performance and Success Criteria\nVerifiability\n- WHEN auditors review samples, THE service SHALL demonstrate adherence to stated retention timelines within ±2 days for date-specific windows where no holds existed.\n\nUser experience timing\n- WHEN users delete content, THE service SHALL remove content from user-facing views within 1 minute and complete background cleanup according to this policy.\n\nBackup aging\n- WHEN users exercise deletion rights, THE service SHALL verify that personal data no longer appears in restore points older than 35 days after deletion completion.\n\nTransparency\n- THE service SHALL produce a quarterly summary of deletions, holds, appeals, and restoration events without exposing personal data.\n\nProcessing deadlines\n- WHERE anonymization is selected instead of deletion, THE service SHALL complete anonymization within the same deadlines as deletion for the relevant data class.\n\n---\nBusiness requirements only; developers retain full autonomy over architecture, APIs, database design, and infrastructure choices while ensuring consistency with related policy documents."},{"reason":"사용자 커뮤니케이션 전반을 비즈니스 레벨에서 표준화하여 일관된 경험을 보장하기 위함.","filename":"11-pol-econ-board-notifications-and-communications.md","documentType":"requirement","outline":["알림 유형(실시간/배치/다이제스트)과 트리거 이벤트","채널(앱 내/이메일 등)과 빈도·레이트 한도","구독·팔로우·주제 다이제스트 정책","수신 동의/거부 및 선호 설정","콘텐츠 톤·메시지 구성 원칙","실패·지연 시 재시도/폴백 원칙"],"audience":"development team","keyQuestions":["어떤 이벤트에 어떤 알림을 어떤 채널로 보낼 것인가","이용자 통제권과 빈도 관리 정책은 무엇인가"],"detailLevel":"moderate detail","relatedDocuments":["04-pol-econ-board-functional-requirements.md","08-pol-econ-board-non-functional-requirements.md"],"constraints":["EARS 형식 요구사항 포함","기술 구현 세부 금지"],"content":"# Notifications and Communications Requirements — pol-econ-board\n\n## 1) Scope and Principles\n- Coverage: In-app notifications, email communications, and batch/digest messages related to user activity, content interactions, moderation/governance, editorial operations, and account/security events.\n- Exclusions: Frontend UI layouts, transport/infrastructure specifics, vendor/protocol details, code or API definitions.\n- Goals: Timely, relevant, controllable, and compliant communications that respect user consent and minimize noise.\n- Timezone: THE notifications program SHALL operate on user-local timezone; WHERE user timezone is unknown, the default SHALL be Asia/Seoul (KST).\n\nEARS Principles\n- THE communications policy for pol-econ-board SHALL prioritize user control (opt-in/opt-out, preferences), relevance, timeliness, and minimal intrusiveness.\n- THE communications policy SHALL distinguish transactional messages (account/security/obligatory) and non-transactional messages (community growth/marketing/editorial digests).\n- THE communications service SHALL support user-local scheduling for batch and digest deliveries with Asia/Seoul as default.\n- THE communications service SHALL maintain compliance with privacy and consent boundaries for all channels and categories.\n\n## 2) Notification Taxonomy and Trigger Events\n\nCategories (business-level)\n- Account & Security (transactional): sign-up verification, password reset, password changed, email change confirmation, device/session revocation confirmation, role change.\n- Engagement (community interactions): mention, direct reply to a user’s post/comment, new post by followed author, new post in followed topic, expert Q&A invitation or assignment, content featured notification, new follower.\n- Moderation & Governance: content reported about user, auto-hide applied, decision issued (warning/suspension), appeal received, appeal outcome, report assigned to moderator, SLA reminder for open reports.\n- Editorial Operations: draft submitted for review, review decision, scheduled publish reminder, featured/curated selection, special topic program updates.\n- Digests & Summaries: daily/weekly topic digest, author digest, personalized activity summary, moderator/editor ops digests (role-scoped).\n\nEvent-driven Requirements (representative and testable)\n- WHEN a user is mentioned in a post or comment, THE notification service SHALL create a mention notification for the mentioned user.\n- WHEN a new reply is posted to a user’s comment, THE notification service SHALL prepare and deliver a reply notification to the original commenter per preferences.\n- WHEN a followed topic publishes a new post, THE notification service SHALL consult the recipient’s category/channel preferences and applicable limits before delivery.\n- WHEN a followed author publishes multiple posts within 10 minutes, THE notification service SHALL coalesce the events into a single notification for that window.\n- WHEN an expert Q&A answer request is assigned to an expert, THE notification service SHALL generate a high-priority real-time notification to the expert.\n- WHEN a user’s content is reported and moderation begins, THE notification service SHALL notify the author that review has started while minimizing sensitive identifiers.\n- WHEN a new report is assigned to a moderator, THE notification service SHALL dispatch a priority notification to the assigned moderator.\n- WHEN a draft is submitted to the review queue, THE notification service SHALL notify the responsible editor of the review request.\n- WHEN a review decision is recorded as approved or changes requested, THE notification service SHALL notify the author of the outcome with reason summary.\n- WHEN a security-sensitive account event occurs (password reset request, email change confirmation), THE notification service SHALL dispatch transactional notifications without delay.\n- WHEN the scheduled weekly digest window arrives, THE notification service SHALL aggregate the user’s followed sources and compile a summary.\n- WHEN a user gains a new follower, THE notification service SHALL create an engagement notification per the recipient’s preferences and rate limits.\n- WHEN a user’s post is featured by editors, THE notification service SHALL inform the author with the feature context.\n\nUbiquitous Rules (classification and envelope)\n- THE notification service SHALL apply a category tag (account/security, engagement, moderation, editorial, digest) to every notification.\n- THE notification service SHALL include a unique identifier, creation timestamp (with user timezone reference), category, priority, and related resource reference in every notification.\n\n## 3) Channels, Frequency, and Rate Limits\n\nChannels\n- In-app: notification center entries and badges (user-visible counters).\n- Email: transactional and digest communications.\n\nChannel Assignment (policy)\n- WHERE the event is transactional (account/security), THE notification service SHALL use In-app + Email as default channels.\n- WHERE the event is engagement (mentions/replies), THE notification service SHALL use In-app by default and use Email only if the user has enabled Email for that category.\n- WHERE the event is digest, THE notification service SHALL use Email for the digest and provide an In-app summary card.\n- WHERE the event targets moderators/editors/admins for operational duties, THE notification service SHALL support both In-app and Email according to their role preferences.\n\nFrequency and Rate Limits (per user unless specified)\n- THE notification service SHALL enforce a global per-user cap of up to 200 In-app notifications/day and up to 20 Emails/day.\n- WHERE engagement events relate to the same post/thread, THE notification service SHALL coalesce events into a single notification within a 10-minute window.\n- WHERE followed-author events occur within 10 minutes, THE notification service SHALL roll up into one notification.\n- WHERE digest delivery is enabled, THE notification service SHALL limit frequency to Daily or Weekly, and SHALL not allow both simultaneously per digest type.\n- WHILE a user has DND (Do Not Disturb) hours configured, THE notification service SHALL defer real-time non-transactional notifications until DND ends; transactional alerts may bypass DND.\n\nPerformance Expectations (aligned with Non-Functional Requirements)\n- THE notification service SHALL make In-app notifications available within 5 seconds at P95 and within 15 seconds at P99 under normal conditions.\n- THE notification service SHALL enqueue transactional Emails within 2 minutes at P95 and digests within 10 minutes at P95 from their scheduled time.\n\nBurst and Abuse Protections\n- WHERE event volume exceeds 50 notifications/hour for a single recipient outside digests, THE notification service SHALL throttle non-critical engagement notifications to protect experience and suggest digest mode.\n- IF a recipient reaches the daily Email cap, THEN THE notification service SHALL defer non-critical Email notifications to the next digest or the next day per user preference.\n\n## 4) Subscription, Follow, and Digest Policies\n\nFollow Defaults\n- WHEN a user follows a topic or author, THE notification service SHALL set the default alert level to “In-app real-time” for that source.\n- WHERE a user unfollows a source, THE notification service SHALL cease future notifications from that source immediately across all channels.\n\nDigest Composition and Scheduling\n- THE notification service SHALL include up to 10 highlight items per digest, prioritizing engagement and followed-source relevance.\n- WHERE the Daily Digest is enabled, THE notification service SHALL deliver between 07:00 and 09:00 user-local time using a randomized slot within the window.\n- WHERE the Weekly Digest is enabled, THE notification service SHALL deliver on Mondays between 08:00 and 10:00 user-local time.\n- THE notification service SHALL exclude items already consumed In-app during the digest period to avoid redundancy.\n\nCoalescing and Deduplication\n- THE notification service SHALL present a single roll-up notification when more than one event of the same type occurs within a 10-minute window, incrementing a count.\n- IF duplicate creation conditions are detected for the same recipient and resource, THEN THE notification service SHALL suppress subsequent duplicates.\n\n## 5) Consent Management and Preference Settings\n\nConsent Boundaries\n- THE notification service SHALL treat transactional messages as permitted under the service contract and essential operations.\n- THE notification service SHALL send non-transactional (marketing/community growth/editorial) messages only with explicit opt-in for the relevant categories.\n\nPreference Model\n- THE notification service SHALL provide category × channel toggles for: account/security, engagement, follows (authors/topics), moderation, editorial, digest; channels: In-app, Email.\n- WHERE no explicit user setting exists, THE notification service SHALL apply rational defaults: engagement In-app=ON, Email=OFF; follows In-app=ON, Email=OFF; digest Email=Weekly ON; account/security Email=ON.\n- THE notification service SHALL support DND windows (e.g., 22:00–08:00 user-local) and Snooze durations (e.g., 2h/8h/24h).\n- THE notification service SHALL support Mute at author/post/topic granularity to block notifications from specific sources.\n\nUser Control Actions\n- WHEN a user uses the unsubscribe link in an Email, THE notification service SHALL immediately stop Email delivery for that message category for the user.\n- WHEN a user opts out of all marketing/community messages, THE notification service SHALL prohibit delivery of such messages across all channels.\n- WHEN a user changes preferences, THE notification service SHALL apply the changes to subsequent events immediately.\n\nProof and Audit of Consent\n- THE notification service SHALL record the timestamp, scope, and channel for opt-ins and opt-outs to support audit and compliance inquiries.\n\n## 6) Message Composition and Tone Guidelines\n\nMessage Structure and Limits\n- THE notification service SHALL provide a title (max 80 characters), a summary (max 140 characters), and a core sentence in the body copy for clarity.\n- THE notification service SHALL avoid including sensitive personal data (full email addresses, phone numbers, exact locations) in notification bodies.\n- THE notification service SHALL use descriptive link text in messages (avoid “click here”).\n\nTone and Content\n- THE notification service SHALL maintain a factual, neutral, and non-inflammatory tone appropriate to political/economic topics.\n- THE notification service SHALL include minimal sufficient context (e.g., post title) and a direct link to the relevant resource.\n\nLocalization and Accessibility\n- THE notification service SHALL localize message content to the user’s preferred language; the baseline default is en-US.\n- THE notification service SHALL provide accessible copy suitable for assistive technologies and avoid color-only or icon-only significance.\n\nBrand Safety and Safety Checks\n- IF prohibited terms, excessive claims, or misleading constructs are detected by policy checks, THEN THE notification service SHALL hold the message for review and mark it as requiring attention.\n\nExamples (business copy patterns)\n- Mention: “You were mentioned in ‘Title’ by Author.”\n- Reply: “New reply to your comment in ‘Title’.”\n- Moderation: “Your post was temporarily hidden pending review.”\n- Digest: “Your weekly highlights in topics you follow.”\n\n## 7) Delivery Performance, Retry, and Fallback\n\nDelivery Targets\n- THE notification service SHALL create notification records within 1 second of event ingestion and make In-app notifications available within 5 seconds at P95 and 15 seconds at P99 under normal conditions.\n- THE notification service SHALL enqueue transactional Email within 2 minutes at P95 and digest Email within 10 minutes at P95.\n\nRetry and Fallback (Email and In-app)\n- IF an Email delivery attempt fails, THEN THE notification service SHALL retry at 5, 30, and 120 minutes for a maximum of 3 attempts.\n- IF all Email retries fail, THEN THE notification service SHALL maintain In-app delivery only and record the failure for audit.\n- IF In-app presentation is deferred due to DND, THEN THE notification service SHALL present immediately upon DND expiration.\n\nBounce and Complaint Handling\n- WHEN hard bounces or repeated complaints are detected for Email, THE notification service SHALL disable Email channel for the affected address and prompt the user to update preferences.\n- WHEN soft bounces persist across all three retries, THE notification service SHALL mark the attempt as failed and retain In-app delivery only.\n\nAggregation Windows\n- THE notification service SHALL use a default coalescing window of 10 minutes and SHALL allow policy-defined adjustments by event type.\n\n## 8) Role-specific Rules and Governance Alignment\n\nMember\n- THE notification service SHALL provide mentions/replies/follow-based content alerts via In-app by default.\n- WHERE sanctions or policy actions affect the user, THE notification service SHALL deliver In-app + Email notices with reason summaries.\n\nExpert\n- THE notification service SHALL provide expert Q&A assignments, feature placements, and significant follower growth summaries.\n\nModerator\n- THE notification service SHALL display report assignments, SLA threshold breaches, and appeal arrivals with high priority.\n- THE notification service SHALL cap moderator Emails at 40/day per moderator and distribute non-urgent notifications in cohorts to avoid overload.\n\nEditor\n- THE notification service SHALL provide alerts for drafts awaiting review, scheduled publish reminders, and featured queue updates.\n\nAdmin\n- THE notification service SHALL provide role change approval requests, policy update announcements, and transparency report preparation notifications.\n\nGovernance Alignment\n- THE notification service SHALL include a concise reference to relevant community rules in moderation-related notices.\n\n## 9) Error Handling and User Recovery (communications context)\n\nCommon Error Scenarios (business handling)\n- IF a send request targets a category that the user has opted out of, THEN THE notification service SHALL refuse delivery and honor user preferences.\n- IF the referenced resource is deleted or private, THEN THE notification service SHALL not create the notification.\n- IF the user has muted the source (author/post/topic), THEN THE notification service SHALL not create the notification for that source.\n- IF rate-limit conditions are exceeded, THEN THE notification service SHALL suppress additional notifications and consider digest deferral.\n\nUser Recovery\n- THE notification service SHALL provide mark-as-read, delete, mark-all-as-read, and source mute controls in the In-app notification center.\n- THE notification service SHALL include category-level subscription management links at the bottom of Emails.\n\n## 10) Data Retention and Auditability (communications context)\n\nRetention Windows\n- THE notification service SHALL retain In-app notifications for 180 days.\n- THE notification service SHALL retain digest creation records for 365 days.\n- THE notification service SHALL retain notification delivery attempt logs for 90 days to support troubleshooting and consent proof.\n\nAuditability and Privacy\n- THE notification service SHALL record for each delivery attempt: recipient reference, category, channel, result state, and timestamp.\n- THE notification service SHALL provide a downloadable user-facing history of notifications for the last 90 days upon request.\n- THE notification service SHALL adhere to data minimization and exclude sensitive personal data from notification payloads and logs.\n\n## 11) Mermaid Flow Diagram (end-to-end)\n```mermaid\ngraph LR\n  subgraph \"Event Sources\"\n    E1[\"User Interaction(Event)\"] --> E2[\"Content Lifecycle(Event)\"]\n    E3[\"Moderation(Event)\"] --> E4[\"Editorial(Event)\"]\n  end\n\n  subgraph \"Policy & Preferences\"\n    P1[\"Classify Category\"] --> P2[\"Check Consent & Preferences\"]\n    P2 --> P3{\"Within Rate Limits?\"}\n    P3 -->|\"Yes\"| P4[\"Apply Coalescing(10m)\"]\n    P3 -->|\"No\"| P5[\"Suppress or Defer\"]\n  end\n\n  subgraph \"Delivery Orchestration\"\n    D1{\"Select Channels\"} --> D2[\"Create Notification Record\"]\n    D2 --> D3[\"Queue In-App\"]\n    D2 --> D4[\"Queue Email\"]\n    D4 --> D5{\"Email Success?\"}\n    D5 -->|\"Yes\"| D6[\"Mark Delivered\"]\n    D5 -->|\"No\"| D7[\"Retry(5m,30m,120m)\"]\n    D7 --> D8{\"Succeeded?\"}\n    D8 -->|\"Yes\"| D6\n    D8 -->|\"No\"| D9[\"Fallback In-app Only\"]\n  end\n\n  subgraph \"User Experience\"\n    U1[\"Notification Center\"] --> U2[\"Email Inbox\"]\n    U3[\"Manage Preferences\"] --> U4[\"Snooze/Mute/DND\"]\n  end\n\n  subgraph \"Observability\"\n    O1[\"Log Attempt\"] --> O2[\"Metrics & KPIs\"]\n  end\n\n  E1 --> P1\n  E2 --> P1\n  E3 --> P1\n  E4 --> P1\n  P4 --> D1\n  P5 -.-> D1\n  D3 --> U1\n  D4 --> U2\n  U3 -.-> P2\n  O1 -.-> O2\n```\n\n## 12) Success Criteria and KPIs (business-level)\n- THE notification service SHALL target monthly complaint rate (spam markings/unsubscribes) under 0.5% per user.\n- THE notification service SHALL maintain first-attempt transactional Email success ≥ 98% and 24-hour final success ≥ 99.5%.\n- THE notification service SHALL target digest open rate ≥ 20% and mention notification In-app view rate ≥ 70%.\n- THE notification service SHALL meet In-app timeliness targets (P95 ≤ 5s, P99 ≤ 15s) for ≥ 99% of business hours.\n\n## 13) Related Documents and Business-only Scope\n- See the [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md) for end-to-end feature behaviors and event triggers.\n- Refer to the [Non-Functional Requirements for pol-econ-board](./08-pol-econ-board-non-functional-requirements.md) for performance, availability, and observability expectations.\n\nBusiness-only scope statement: Defines WHAT the system should do in business terms. All technical implementation decisions (architecture, APIs, database design) belong to the development team, which retains full autonomy over HOW to implement these requirements."},{"reason":"오류/예외 상황에서의 사용자 관점 처리 원칙과 복구 절차를 표준화하기 위함.","filename":"12-pol-econ-board-exception-handling-and-error-scenarios.md","documentType":"requirement","outline":["공통 에러 분류와 사용자 메시지 원칙","인증/인가 관련 오류 처리","콘텐츠 작업 오류(업로드/저장/충돌) 처리","신고/중재 실패 및 재처리","외부 연동 실패 시 처리(로그인 제공자 등)","레이트리밋/스팸 차단에 따른 제한 알림","데이터 무결성/중복 감지와 정정","사용자 복구 절차와 안내"],"audience":"development team","keyQuestions":["대표적인 오류 상황과 기대되는 시스템 반응은 무엇인가","사용자 복구 경로와 재시도 정책은 무엇인가"],"detailLevel":"detailed specification","relatedDocuments":["03-pol-econ-board-user-roles-and-authentication.md","04-pol-econ-board-functional-requirements.md","06-pol-econ-board-user-flows.md"],"constraints":["EARS 형식으로 오류 처리 요구사항 작성","사용자 메시지 원칙 명시","API/코드 수준 상세 금지"],"content":"# pol-econ-board Exception Handling and Error Scenarios\n\nBusiness requirements for handling exceptions and user-visible error scenarios, including recovery procedures and consistency rules. Business requirements only; all technical implementation decisions (architecture, APIs, database design, libraries) are owned by the development team. Describes WHAT must happen, not HOW to build it.\n\n## 1. Purpose and Scope\n- Standardize error taxonomy, user-facing messaging, recovery flows, and cross-cutting policies across authentication, authorization, content operations, moderation, external integrations, rate limiting/spam control, notification delivery, system incidents, and data integrity.\n- Ensure consistent, actionable responses with measurable performance targets and user recovery guidance.\n- Define testable, unambiguous requirements using EARS syntax.\n\n## 2. Related Documents\n- User and role definitions with authentication policies: [User Roles and Authentication Requirements](./03-pol-econ-board-user-roles-and-authentication.md).\n- End-to-end feature behaviors and validations: [Functional Requirements for pol-econ-board](./04-pol-econ-board-functional-requirements.md).\n- Visual user journeys and decision branches: [User Flow Diagrams and Journeys](./06-pol-econ-board-user-flows.md).\n\n## 3. Common Error Taxonomy and User Message Principles\n\n### 3.1 Error Categories and Codes\n- Categories (business-level): AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- Error code format: CATEGORY_SUBJECT_REASON (UPPERCASE with underscores). Examples: AUTH_INVALID_CREDENTIALS, CONTENT_VERSION_CONFLICT, RATE_LIMIT_EXCEEDED, INTEGRATION_PROVIDER_UNAVAILABLE, DATA_DUPLICATE_SUBMISSION, SYSTEM_MAINTENANCE_ACTIVE.\n- Severity levels (business impact): INFO (no user action required), WARNING (user action suggested), ERROR (user action required), CRITICAL (widespread impact; some features degraded or unavailable).\n\n### 3.2 Standard Error Payload (Business-Level Content)\nBusiness information the response must convey to users and audit (not an API schema):\n- errorCode (follows format above)\n- title (short human-readable summary)\n- message (actionable description with next steps and context bounds)\n- userAction (specific recommended user step)\n- supportId (opaque identifier for support/audit; unique per incident)\n- category (one from §3.1)\n- severity (INFO/WARNING/ERROR/CRITICAL)\n- retryAfter (optional; seconds or timestamp for earliest retry)\n\n### 3.3 User Message Principles\n- Clarity: plain language; no jargon, stack traces, or internal error dumps.\n- Actionability: include what the user can do now and when to try again.\n- Non-disclosure: hide sensitive internals (validation heuristics, internal IDs, provider secrets, exact anti-abuse thresholds).\n- Consistency: uniform tone, structure, and placement across modules; predictable codes.\n- Localization: messages localized to the user’s language; placeholders substituted correctly; sensitive content neutral.\n- Accessibility: concise text alternatives; avoid color-only signals; no emoji-only indicators.\n\n### 3.4 Performance Expectations for Error Responses\n- Detection-to-display latency: ≤ 1.0 second for synchronous actions; ≤ 5.0 seconds for asynchronous confirmations.\n- Retryability hints: provided in the same response when applicable.\n- supportId: present for all ERROR and CRITICAL severities.\n\n## 4. Global Cross-Cutting Requirements (EARS)\n- THE pol-econ-board service SHALL classify every error into exactly one category from AUTH, PERM, ACCOUNT, SESSION, CONTENT, UPLOAD, CONFLICT, MODERATION, REPORT, INTEGRATION, RATE_LIMIT, SPAM, DATA, VALIDATION, NOTIFICATION, SYSTEM.\n- THE pol-econ-board service SHALL produce a localized user-facing payload with errorCode, title, message, userAction, category, severity, and supportId for errors of severity ERROR or CRITICAL.\n- THE pol-econ-board service SHALL include retryAfter where a bounded retry is appropriate.\n- THE pol-econ-board service SHALL avoid exposing internal identifiers, stack traces, SQL details, or provider-specific secrets in user-facing messages.\n- THE pol-econ-board service SHALL generate a unique supportId for each user-visible error and persist an audit log correlated by that identifier.\n- THE pol-econ-board service SHALL display a user-visible error within 1 second for synchronous failures.\n- THE pol-econ-board service SHALL record severity on error creation using the defined scale.\n- THE pol-econ-board service SHALL attach remediation guidance in userAction for all actionable errors.\n- THE pol-econ-board service SHALL suppress duplicate error messages for the same root cause within a single user action.\n- THE pol-econ-board service SHALL provide idempotent handling for user-triggered actions retried due to transient failures.\n- WHERE rate limiting applies, THE pol-econ-board service SHALL communicate the next eligible retry time using retryAfter.\n- WHERE the user role is moderator or admin and the context involves a policy outcome, THE pol-econ-board service SHALL include standardized reason codes and policy references without exposing personal data beyond business necessity.\n\n## 5. Authentication and Authorization Error Handling\n\n### 5.1 Scenarios\n- Invalid credentials at login.\n- Email not verified.\n- Account locked or suspended per policy.\n- Access token expired or invalid.\n- Refresh token invalid, expired, revoked, or reused.\n- Permission denied due to role/permission mismatch.\n- Forced logout due to device revocation or global sign-out.\n- Multi-factor step-up required by policy or risk.\n\n### 5.2 EARS Requirements\n- WHEN invalid login credentials are submitted, THE pol-econ-board service SHALL return AUTH_INVALID_CREDENTIALS with guidance to check email/password and a link to reset, without indicating which field is wrong.\n- WHEN the account email is unverified during login, THE pol-econ-board service SHALL return ACCOUNT_EMAIL_UNVERIFIED with an option to resend verification and indicate expected arrival time within 5 minutes.\n- WHEN the account is locked due to policy violation, THE pol-econ-board service SHALL return ACCOUNT_LOCKED with lock duration or appeal instructions according to governance policy.\n- WHEN the access token has expired, THE pol-econ-board service SHALL attempt silent renewal using a valid refresh context and, upon failure, present SESSION_EXPIRED requiring re-authentication.\n- IF the refresh token is expired, revoked, or reused, THEN THE pol-econ-board service SHALL clear session context and present AUTH_REAUTHENTICATION_REQUIRED with userAction \"Sign in again\".\n- WHEN a user with insufficient permissions attempts a restricted action, THE pol-econ-board service SHALL return PERM_FORBIDDEN with a message indicating that the action is not permitted for the user’s role.\n- WHEN an admin performs sign-out from all devices, THE pol-econ-board service SHALL present SESSION_REVOKED and require re-authentication before any protected action.\n- WHERE multi-factor authentication is required by policy for the action, THE pol-econ-board service SHALL present AUTH_STEP_UP_REQUIRED with guidance to complete additional checks.\n- THE pol-econ-board service SHALL limit login attempts to prevent enumeration and return AUTH_ATTEMPT_LIMIT with a cooldown window not exceeding 15 minutes.\n\n### 5.3 Token Refresh and Failure Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Session Lifecycle\"\n    A[\"Protected Action\"] --> B[\"Access Token Validation\"]\n    B --> C{\"Valid?\"}\n    C -->|\"Yes\"| D[\"Proceed Action\"]\n    C -->|\"No\"| E[\"Attempt Silent Refresh\"]\n    E --> F{\"Refresh Succeeds?\"}\n    F -->|\"Yes\"| D\n    F -->|\"No\"| G[\"Present SESSION_EXPIRED\"]\n  end\n  G --> H[\"User Re-authenticates\"]\n  H --> D\n```\n\n## 6. Content Operation Errors (Upload/Save/Conflict)\n\n### 6.1 Scenarios\n- Draft autosave failure.\n- Publish validation errors (missing required fields, policy constraints).\n- Attachment upload failures (size/type/timeout/corrupted file).\n- Version conflicts due to concurrent edits.\n- Storage quota exceeded for attachments or saved items.\n- Network interruption during save/publish.\n\n### 6.2 EARS Requirements\n- WHEN draft autosave fails, THE pol-econ-board service SHALL display CONTENT_AUTOSAVE_FAILED within 1 second and queue a background retry up to 3 attempts within 2 minutes.\n- WHEN a publish request fails mandatory business rule validation, THE pol-econ-board service SHALL return VALIDATION_FAILED with a list of violated business rules in user language and preserve the user’s data.\n- WHEN an attachment upload exceeds allowed size or type, THE pol-econ-board service SHALL return UPLOAD_POLICY_REJECTED specifying allowed limits without exposing internal anti-abuse thresholds beyond published policy.\n- WHEN an upload fails due to a transient network error, THE pol-econ-board service SHALL return UPLOAD_TRANSIENT_FAILURE with userAction to retry and SHALL allow up to 3 retries with exponential backoff not exceeding 60 seconds total.\n- WHEN a version conflict is detected due to concurrent edits, THE pol-econ-board service SHALL return CONTENT_VERSION_CONFLICT and provide options to reload latest, keep local copy, or create a new revision.\n- WHEN the connection is interrupted during save or publish, THE pol-econ-board service SHALL guarantee idempotent processing so that repeated submission does not create duplicates.\n- WHERE user storage quota policies apply, THE pol-econ-board service SHALL return UPLOAD_QUOTA_EXCEEDED with guidance on freeing space or upgrading if applicable.\n\n### 6.3 Save Conflict Resolution Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Edit and Save\"\n    A[\"User Edits Content\"] --> B[\"Submit Save\"]\n    B --> C[\"Validate Business Rules\"]\n    C --> D[\"Check Latest Version\"]\n    D --> E{\"Conflict?\"}\n    E -->|\"No\"| F[\"Persist Changes\"]\n    E -->|\"Yes\"| G[\"Return CONTENT_VERSION_CONFLICT\"]\n  end\n  G --> H[\"Offer Options\"]\n  H --> I[\"Reload Latest\"]\n  H --> J[\"Keep Local Copy\"]\n  H --> K[\"Create New Revision\"]\n  I --> F\n  J -.-> F\n  K --> F\n```\n\n## 7. Report/Moderation Failures and Reprocessing\n\n### 7.1 Scenarios\n- Report submission transient failure.\n- Moderation queue backlog causing SLA risk.\n- Temporary moderation action later reversed.\n- Appeal submission validation failure.\n\n### 7.2 EARS Requirements\n- WHEN report submission fails transiently, THE pol-econ-board service SHALL return REPORT_SUBMISSION_FAILED with userAction to retry and SHALL preserve the report details locally for 24 hours.\n- WHILE the moderation queue backlog threatens SLA, THE pol-econ-board service SHALL surface MODERATION_DELAY_NOTICE to reporters with an updated expected resolution window.\n- IF conditions for reversing a moderation outcome are met on re-review, THEN THE pol-econ-board service SHALL issue MODERATION_ACTION_REVERSED notices to impacted users and restore content state where applicable.\n- WHEN an appeal submission fails validation, THE pol-econ-board service SHALL return VALIDATION_FAILED with missing or invalid elements summarized in user language.\n- THE pol-econ-board service SHALL maintain a transparency log entry for moderation errors with supportId correlation.\n\n## 8. External Integration Failures\n\n### 8.1 Scenarios\n- Third-party login provider unavailable or timeout.\n- Email delivery provider error or rate limit.\n- Webhook or partner feed delays.\n\n### 8.2 EARS Requirements\n- WHEN an external login provider is unavailable or returns errors, THE pol-econ-board service SHALL return INTEGRATION_PROVIDER_UNAVAILABLE with userAction to try an alternative method or try again later and SHALL not block native email login.\n- WHEN sending an email verification or password reset message fails, THE pol-econ-board service SHALL return NOTIFICATION_DELIVERY_FAILED with an option to resend and guidance to check spam folders.\n- WHEN partner integration data is delayed, THE pol-econ-board service SHALL present INTEGRATION_DELAY_NOTICE with an estimated refresh time window not exceeding 60 minutes.\n- IF external integration errors persist, THEN THE pol-econ-board service SHALL degrade gracefully by disabling dependent optional features and informing users via a banner-level message.\n\n## 9. Rate Limit and Spam Blocking Notifications\n\n### 9.1 Scenarios\n- Short-term throttling due to bursts.\n- Behavioral spam patterns detected.\n- Automated challenge required to continue.\n\n### 9.2 EARS Requirements\n- WHEN short-term request bursts exceed thresholds, THE pol-econ-board service SHALL return RATE_LIMIT_EXCEEDED with retryAfter indicating the earliest retry time and SHALL not consume quota on refused retries after notification.\n- WHEN spam-suspect patterns are detected, THE pol-econ-board service SHALL return SPAM_SUSPECTED and limit posting or messaging features for a cooldown period while offering appeal instructions.\n- WHERE an automated challenge is permitted by policy, THE pol-econ-board service SHALL present CHALLENGE_REQUIRED and restore normal limits upon challenge success.\n- THE pol-econ-board service SHALL avoid permanent blocks on a first offense absent clear abuse signals and SHALL provide a path to remediation or appeal.\n\n## 10. Data Integrity, Duplicate Detection, and Correction\n\n### 10.1 Scenarios\n- Double submissions due to retries/back button.\n- Duplicate posts/comments within a short interval.\n- Orphan references to deleted content; broken parent links.\n\n### 10.2 EARS Requirements\n- WHEN the same user action is submitted repeatedly within a short window, THE pol-econ-board service SHALL enforce idempotent processing and return DATA_DUPLICATE_SUBMISSION referencing the original successful action via a user-safe reference.\n- WHEN duplicate post content is detected within a policy time window (e.g., 5 minutes), THE pol-econ-board service SHALL return CONTENT_DUPLICATE_DETECTED and offer userAction to edit, merge, or discard.\n- IF a referential integrity violation is detected, THEN THE pol-econ-board service SHALL return DATA_INTEGRITY_ERROR and guide the user to refresh or navigate to valid resources while recording the condition for backend reconciliation.\n- THE pol-econ-board service SHALL prevent publishing content that violates referential integrity rules and SHALL present a corrective checklist.\n\n## 11. User Recovery Procedures and Guidance\n\n### 11.1 Recovery Center (Business-Level)\nCentralized, role-aware recovery page that consolidates recent failed actions with status, diagnostics, and next steps (no UI spec implied).\n\n### 11.2 EARS Requirements\n- THE pol-econ-board service SHALL provide a recovery center summarizing the last 20 failed actions per user with timestamps, errorCodes, supportIds, and userAction.\n- THE pol-econ-board service SHALL allow resubmission of eligible failed actions from the recovery center where safe and idempotent.\n- WHERE a recovery requires specific permissions, THE pol-econ-board service SHALL verify authorization and present PERM_FORBIDDEN if insufficient.\n- IF the same failure repeats 3 times consecutively, THEN THE pol-econ-board service SHALL prompt the user with alternative actions or support contact guidance.\n- THE pol-econ-board service SHALL include a copyable diagnostics summary (non-sensitive) and the supportId in the recovery center for each failure.\n\n## 12. Notification Delivery Errors and Fallbacks\n\n### 12.1 Scenarios\n- In-app notification creation succeeds but display is delayed by quiet hours or client state.\n- Email delivery failures due to provider rate limits, bounces, or authentication issues.\n- Digest generation backlogs.\n\n### 12.2 EARS Requirements\n- WHEN a non-critical notification is suppressed by user quiet hours, THE pol-econ-board service SHALL defer in-app display until quiet hours end and annotate the deferral state.\n- WHEN email sending fails transiently, THE pol-econ-board service SHALL retry within policy limits and record outcomes; IF retries are exhausted, THEN THE pol-econ-board service SHALL keep the item in in-app notifications and mark email delivery as failed for user visibility.\n- WHERE digest generation backlogs occur, THE pol-econ-board service SHALL prioritize transactional notifications and present a DIGEST_DELAY_NOTICE with the next expected send window.\n\n## 13. System, Maintenance, and Degradation Errors\n\n### 13.1 Scenarios\n- Planned maintenance.\n- Partial outage or feature degradation.\n- Global incident affecting core operations.\n\n### 13.2 EARS Requirements\n- WHEN planned maintenance is active, THE pol-econ-board service SHALL present SYSTEM_MAINTENANCE_ACTIVE with a maintenance window and a link to the status page; essential read-only access SHALL be preserved when possible.\n- IF a partial outage occurs, THEN THE pol-econ-board service SHALL present SYSTEM_PARTIAL_DEGRADATION and disable dependent optional features while preserving core read capabilities when feasible.\n- WHEN a global incident is declared, THE pol-econ-board service SHALL surface SYSTEM_INCIDENT_NOTICE across affected areas with scope, impact summary, and expected next update time.\n- WHERE user actions are deferred due to degradation, THE pol-econ-board service SHALL queue the action safely and present the queued state with a later auto-retry policy; idempotency SHALL be maintained.\n\n## 14. Composite Operations and Partial Failures\n\n### 14.1 Scenarios\n- Post publish with multiple attachments where some attachments fail processing.\n- Multi-step moderation workflow actions where one step succeeds and a subsequent step fails.\n- Follow and notify chain where follow succeeds but notification creation fails.\n\n### 14.2 EARS Requirements\n- WHEN composite operations include independently retryable sub-steps, THE pol-econ-board service SHALL commit successful sub-steps and present a PARTIAL_COMPLETION notice with specific next steps to resolve failed sub-steps without data loss.\n- IF a sub-step is non-compensable and fails, THEN THE pol-econ-board service SHALL roll back the composite action to a consistent prior state and present a clear message describing what was undone.\n- WHERE partial completion is user-acceptable (e.g., publish without failed optional attachments), THE pol-econ-board service SHALL offer a choice to proceed without the failed parts and to retry them later.\n\n## 15. Error Code to Message Examples\n\nRepresentative examples of business content; developers retain autonomy over formatting and transport.\n\n| Category | Example Code | Title | Example User Message | Primary User Action |\n|----------|--------------|-------|----------------------|---------------------|\n| AUTH | AUTH_INVALID_CREDENTIALS | Sign-in failed | Unable to sign you in. Check your email and password, then try again. | Reset password or try again |\n| ACCOUNT | ACCOUNT_EMAIL_UNVERIFIED | Email not verified | Your email is not verified. A new verification message was sent. | Open email and verify |\n| SESSION | SESSION_EXPIRED | Session expired | Your session ended. Sign in again to continue. | Sign in again |\n| PERM | PERM_FORBIDDEN | Action not permitted | Your account does not have permission to perform this action. | Review permissions |\n| CONTENT | CONTENT_VERSION_CONFLICT | Edit conflict detected | Another edit was saved while you were editing. Review the latest version. | Review and resolve |\n| UPLOAD | UPLOAD_TRANSIENT_FAILURE | Upload interrupted | The upload was interrupted. You can retry safely. | Retry upload |\n| VALIDATION | VALIDATION_FAILED | Needs correction | Some required fields are missing or invalid. Review the highlighted issues. | Fix and resubmit |\n| RATE_LIMIT | RATE_LIMIT_EXCEEDED | Too many requests | You’ve reached the limit. Try again later. | Try again after retryAfter |\n| SPAM | SPAM_SUSPECTED | Posting temporarily limited | Unusual activity detected. Posting is limited for a short time. | Follow instructions or appeal |\n| INTEGRATION | INTEGRATION_PROVIDER_UNAVAILABLE | Provider unavailable | A login provider is temporarily unavailable. Try another method. | Try another method |\n| NOTIFICATION | NOTIFICATION_DELIVERY_FAILED | Email not sent | We could not send a verification email. Try again or check spam. | Resend email |\n| SYSTEM | SYSTEM_MAINTENANCE_ACTIVE | Maintenance in progress | Some features are unavailable during scheduled maintenance. | Try again after window |\n| DATA | DATA_DUPLICATE_SUBMISSION | Duplicate submission | It looks like this was already submitted. | View previous result |\n\n## 16. Success Criteria and Monitoring (Business-Level)\n- THE pol-econ-board service SHALL achieve ≥ 99% of synchronous error displays within 1 second, measured at the client boundary.\n- THE pol-econ-board service SHALL include supportId in 100% of ERROR/CRITICAL cases and maintain auditable logs.\n- THE pol-econ-board service SHALL ensure that 95% of transient upload failures succeed within 3 total retries.\n- THE pol-econ-board service SHALL provide retryAfter for 100% of rate limit responses and for planned maintenance windows.\n- THE pol-econ-board service SHALL publish monthly summaries for moderation reversals in transparency logs.\n\n## 17. Glossary (Business Terms)\n- supportId: User-visible opaque identifier used to correlate an incident with audit logs.\n- retryAfter: User-understandable indicator for when a retry is allowed or expected.\n- Idempotent processing: Repeating the same user action does not create additional side effects.\n- Severity: Business impact classification guiding priority and user communications.\n- Partial completion: A result where some sub-steps succeed and others are deferred or failed, communicated clearly to the user.\n\n## 18. Additional EARS Requirements by Area (Comprehensive)\n\n### 18.1 Messaging and Localization\n- THE pol-econ-board service SHALL ensure messages are written at a reading level accessible to the general public and avoid legal jargon except where mandated.\n- WHERE localization is available for a language, THE pol-econ-board service SHALL deliver messages in that language with placeholders correctly substituted.\n- IF message rendering fails, THEN THE pol-econ-board service SHALL fall back to a default language and preserve the supportId.\n\n### 18.2 Logging and Privacy\n- THE pol-econ-board service SHALL log sufficient context to diagnose user-visible errors while redacting personal data that is not necessary for diagnosis.\n- WHERE privacy regulations require minimization, THE pol-econ-board service SHALL avoid logging content bodies for private messages and log only metadata sufficient for audit.\n\n### 18.3 Retries and Backoff (Business Policy)\n- THE pol-econ-board service SHALL cap automated retries to prevent cascading failures and user confusion, not exceeding 3 attempts within 2 minutes for content saves and uploads.\n- THE pol-econ-board service SHALL surface retry exhaustion clearly and provide a definitive next step.\n\n### 18.4 Accessibility and Inclusivity\n- THE pol-econ-board service SHALL avoid using color-only or icon-only indications for errors.\n- THE pol-econ-board service SHALL include concise text alternatives for all alerts.\n\n## 19. Global Error Handling Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"User Initiated Action\"\n    A[\"User Action\"] --> B[\"Validate Input\"]\n    B --> C{\"Valid?\"}\n    C -->|\"No\"| D[\"Return VALIDATION_FAILED\"]\n    C -->|\"Yes\"| E[\"Process Request\"]\n  end\n\n  subgraph \"Error Detection\"\n    E --> F{\"Transient Failure?\"}\n    F -->|\"Yes\"| G[\"Retry with Backoff(≤3)\"]\n    F -->|\"No\"| H{\"Rate Limit?\"}\n    H -->|\"Yes\"| I[\"Return RATE_LIMIT_EXCEEDED with retryAfter\"]\n    H -->|\"No\"| J{\"Permission?\"}\n    J -->|\"Denied\"| K[\"Return PERM_FORBIDDEN\"]\n    J -->|\"Allowed\"| L{\"Integration Issue?\"}\n    L -->|\"Yes\"| M[\"Return INTEGRATION_PROVIDER_UNAVAILABLE\"]\n    L -->|\"No\"| N{\"System Incident?\"}\n    N -->|\"Yes\"| O[\"Return SYSTEM_* Notice\"]\n    N -->|\"No\"| P[\"Return Specific Error Code\"]\n  end\n\n  subgraph \"User Guidance\"\n    P --> Q[\"Attach userAction & supportId\"]\n    D --> Q\n    I --> Q\n    K --> Q\n    M --> Q\n    O --> Q\n  end\n```\n\n## 20. Rate Limit Handling Flow (Mermaid)\n```mermaid\ngraph LR\n  subgraph \"Request Handling\"\n    A[\"User Action\"] --> B[\"Check Rate Quota\"]\n    B --> C{\"Exceeded?\"}\n    C -->|\"No\"| D[\"Proceed\"]\n    C -->|\"Yes\"| E[\"Return RATE_LIMIT_EXCEEDED\"]\n  end\n  E --> F[\"Show Retry Time(retryAfter)\"]\n  F --> G{\"Challenge Allowed?\"}\n  G -->|\"Yes\"| H[\"Present CHALLENGE_REQUIRED\"]\n  G -->|\"No\"| I[\"Wait Cooldown\"]\n  H --> J{\"Challenge Passed?\"}\n  J -->|\"Yes\"| D\n  J -->|\"No\"| I\n```\n\n---\n\nBusiness requirements only. All technical implementation decisions, including architecture, APIs, and database design, are under the full autonomy of the development team. Scope is limited to defining user-visible behaviors, rules, and recovery paths for error scenarios in pol-econ-board."}],"step":0,"elapsed":558253,"created_at":"2025-08-12T04:23:42.761Z"},"tokenUsage":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"facade":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"analyze":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"prisma":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"interface":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"test":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"realize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}]
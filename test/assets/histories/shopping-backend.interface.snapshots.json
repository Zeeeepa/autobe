[{"event":{"type":"interfaceStart","created_at":"2025-07-28T03:29:19.639Z","reason":"Step to the interface designing after DB schema generation","step":0},"tokenUsage":{"facade":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"analyze":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"prisma":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"interface":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"test":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"realize":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}},{"event":{"type":"interfaceEndpoints","endpoints":[{"path":"/ai-mall/files","method":"post"},{"path":"/ai-mall/files","method":"patch"},{"path":"/ai-mall/files/{id}","method":"get"},{"path":"/ai-mall/files/{id}","method":"put"},{"path":"/ai-mall/files/{id}","method":"delete"},{"path":"/ai-mall/fileUsages","method":"post"},{"path":"/ai-mall/fileUsages","method":"patch"},{"path":"/ai-mall/fileUsages/{id}","method":"get"},{"path":"/ai-mall/fileUsages/{id}","method":"put"},{"path":"/ai-mall/fileUsages/{id}","method":"delete"}],"created_at":"2025-07-28T03:29:19.640Z","step":0},"tokenUsage":{"facade":{"aggregate":{"total":58720,"input":{"total":58557,"cached":0},"output":{"total":163,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":58720,"input":{"total":58557,"cached":0},"output":{"total":163,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"analyze":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"prisma":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"interface":{"aggregate":{"total":58720,"input":{"total":58557,"cached":0},"output":{"total":163,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":58720,"input":{"total":58557,"cached":0},"output":{"total":163,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"test":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"realize":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}},{"event":{"type":"interfaceOperations","operations":[{"specification":"Create a new file resource in the ai_mall_files table. This endpoint is for uploading file metadata (not binary data) such as URI, name, type (MIME), size, and optionally the expiration date for the file. Upon creation, only fields defined in the schema (uri, name, type, size, created_at, expires_at) are accepted. This does NOT create actual storage—only metadata registration in the marketplace file registry. The endpoint strictly follows the actual columns in the Prisma schema for ai_mall_files.","description":"This operation registers a new file in the ai_mall_files table, which acts as the attachment and file repository for mall resources in the AI-Mall system. The endpoint expects all necessary metadata fields including the file's permanent storage URI, original name, MIME type, size (in bytes), upload timestamp, and optional expiration timestamp. Actual binary file uploads are handled separately by storage systems; this endpoint is for metadata management only.\n\nThe endpoint is used in workflows like product image association, admin banner uploads, or manual documentation management. All fields referenced in the API description are present in the actual schema: uri, name, type, size, created_at, expires_at (the only nullable property). No references are made to non-existent audit fields like created_by or is_deleted.\n\nUpon creation, the file is available for use by business resources via ai_mall_file_usages. Security considerations dictate that this resource is usually restricted to admins and sellers, with access logged. Validation checks ensure uploaded metadata matches expected content-type/size. Deletion and updates are done through separate endpoints outlined in the API.\n\nNo soft-delete field like deleted_at exists for files in the schema, so deletion will be hard-delete via the appropriate endpoint.","summary":"Create file metadata in ai_mall_files (no file binary, just metadata).","parameters":[],"requestBody":{"description":"File metadata for creation (uri, name, type, size, created_at, expires_at) as defined in ai_mall_files schema.","typeName":"IAiMallFiles.ICreate"},"responseBody":{"description":"The created file resource from ai_mall_files. All actual fields returned from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"create","path":"/ai-mall/files","method":"post"},{"specification":"Search or list file metadata resources from ai_mall_files table. This endpoint supports filtered listing and complex querying of file metadata using PATCH on /ai-mall/files, aligned with modern best practices for deep queries. Only schema fields such as id, uri, name, type, size, created_at, expires_at are supported for filtering or searching. Returns a paginated/searchable list based on request.","description":"This operation lists, filters, or searches the file metadata records stored in ai_mall_files. All queryable properties must correspond to actual columns present in the schema, such as id, uri, name, type, size, created_at, and expires_at. No unsupported fields are referenced.\n\nThe endpoint supports bulk querying for UI paginators, admin audit tools, and dashboard listings. Common use cases include filtering files by upload date, type (e.g., image/png), size range, or expiration. Security and permissions typically restrict this endpoint to admins, sellers, or automated systems. No soft delete exists, so results only show currently present files.\n\nResponse includes a list of ai_mall_files resources matching the requested query and a pagination object if applicable. No is_deleted or created_by fields are referenced in request or response.","summary":"List/search file metadata resources from ai_mall_files using deep query.","parameters":[],"requestBody":{"description":"Filter/search criteria for file metadata, using only schema fields in ai_mall_files.","typeName":"IAiMallFiles.IRequest"},"responseBody":{"description":"Paginated/searchable result list of file records from ai_mall_files.","typeName":"IPageIAiMallFiles"},"authorizationRole":"admin","name":"index","path":"/ai-mall/files","method":"patch"},{"specification":"Get detailed file metadata by its id (UUID) from ai_mall_files. Returns a single file's full metadata as defined in the schema. Path parameter {id} must be a valid UUID and match an entry in the table. The returned object contains all columns in the table but only those defined in the schema.","description":"Retrieves metadata for a single file resource in ai_mall_files, using its unique id (a UUID) as the path parameter. All returned fields are present in the Prisma schema: id, uri, name, type, size, created_at, expires_at. This endpoint is used for displaying metadata in file detail UIs, validating links for attachments, or for permissions/audit tools where precise information is required.\n\nIf the file with the given id does not exist, an appropriate error is returned. Only fields present in the Prisma definition are included—no references to is_deleted or audit fields that are not defined. This endpoint does not expose any business logic not represented by the schema structure; it is a stateless fetch.","summary":"Get file metadata by id from ai_mall_files (UUID lookup).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":{"description":"Single ai_mall_files resource (file metadata) from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"at","path":"/ai-mall/files/{id}","method":"get"},{"specification":"Update file metadata in ai_mall_files by id (UUID). All updatable fields must strictly exist in the schema: uri, name, type, size, created_at, expires_at. No references to fields outside the schema are allowed. The {id} path parameter identifies the resource.","description":"This operation updates an existing file resource in the ai_mall_files table. The file to update is specified by the UUID in the path parameter {id}. All fields that can be updated are those present in the table: uri, name, type, size, created_at, expires_at. No audit or is_deleted fields are referenced in descriptions or logic, as these are not present in schema.\n\nThis endpoint is used for updating file metadata such as correcting file names, changing expiration time, fixing URIs after migration, or updating content-type. Security and validations are usually stricter for files in use (referenced by ai_mall_file_usages). Only exact schema columns are available for PATCH/PUT; unknown fields are disregarded.\n\nReturns updated file metadata if the operation succeeds. Errors are returned if the file id does not exist in ai_mall_files.","summary":"Update file metadata in ai_mall_files by id (PUT, only schema fields).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files.","schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"Fields to update (only those from ai_mall_files: uri, name, type, size, created_at, expires_at).","typeName":"IAiMallFiles.IUpdate"},"responseBody":{"description":"Updated ai_mall_files resource (file metadata) from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"update","path":"/ai-mall/files/{id}","method":"put"},{"specification":"Permanently delete (hard delete) a file resource from ai_mall_files by id (UUID). This table does NOT have a soft-delete (deleted_at) field, so deletion must irreversibly remove the row. The {id} path parameter is required and must match an existing file.","description":"This endpoint deletes a single file resource from the ai_mall_files table by its unique id (UUID). Since ai_mall_files does NOT have a soft-delete or is_deleted field, this is a hard delete operation that physically removes the row from the database. There is no recoverable state: the file metadata is erased and cannot be restored except by backup.\n\nIntended for administrative actions such as removing obsolete or inappropriate uploads. Attempts to delete a file that does not exist will result in an error. Deletion cascades are not managed at this endpoint; downstream business logic must handle orphaned references (e.g., in ai_mall_file_usages).\n\nSecurity policies should restrict this operation to users with administrative rights. The endpoint does not reference any columns not present in the actual schema.","summary":"Hard delete file from ai_mall_files by id (no soft delete as field not present).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files to hard delete.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":null,"authorizationRole":"admin","name":"erase","path":"/ai-mall/files/{id}","method":"delete"},{"specification":"Create a new file usage record (linking a file to a business entity) in ai_mall_file_usages. All fields in the schema—ai_mall_file_id, usage_domain, usage_field, entity_id, created_at—are used for creation. No non-existent audit or state fields referenced.","description":"This operation creates a new file usage association in the ai_mall_file_usages table, allowing files to be linked to business entities (such as products, promotions, or channels). Requires all fields from the schema: ai_mall_file_id (UUID referencing ai_mall_files), usage_domain (e.g., 'product'), usage_field (e.g., 'cover_image'), entity_id (UUID of the linked entity), and created_at timestamp.\n\nCommonly used when associating uploaded files with products, banners, or other mall resources. No support for soft-deletion or additional audit fields (the schema does not have them). Security policies may restrict usage creation to specific roles depending on domain context.","summary":"Create file usage (attach file to business entity) in ai_mall_file_usages.","parameters":[],"requestBody":{"description":"Required fields to create a file usage per ai_mall_file_usages schema.","typeName":"IAiMallFileUsages.ICreate"},"responseBody":{"description":"Created file usage association from ai_mall_file_usages schema.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"create","path":"/ai-mall/fileUsages","method":"post"},{"specification":"Search or list file usage records from ai_mall_file_usages table. Uses PATCH to support complex filtering/search on file usages. Only schema fields are queryable: ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. No soft-delete or non-schema fields allowed.","description":"This endpoint lists or filters file usage records in ai_mall_file_usages based on fields defined in the schema: ai_mall_file_id, usage_domain, usage_field, entity_id, and created_at. PATCH method is used to allow complex search criteria for large-scale UIs or audit dashboards.\n\nNo additional audit or deleted_at fields are referenced, as soft delete does not exist in schema. Filtering may include searching for all usages of a specific file, domain, or usage type (e.g., all banner images for a channel). Results are paginated if necessary. Security: typically only admins or resource owners can search mappings. Deletion and update are managed with other endpoints.","summary":"List/search file usages from ai_mall_file_usages, supporting deep query.","parameters":[],"requestBody":{"description":"Search or filter criteria for file usages as defined by ai_mall_file_usages schema fields.","typeName":"IAiMallFileUsages.IRequest"},"responseBody":{"description":"Paginated/searchable result set of file usages from ai_mall_file_usages.","typeName":"IPageIAiMallFileUsages"},"authorizationRole":"admin","name":"index","path":"/ai-mall/fileUsages","method":"patch"},{"specification":"Get a single file usage association from ai_mall_file_usages by id (UUID). Path parameter {id} is the primary key, and returns all actual schema fields. Only columns that exist in Prisma schema are included in description/response.","description":"Retrieves a single file usage record in ai_mall_file_usages by its unique id (UUID). All return fields are present in schema: id, ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. This is typically used to show relationships between files and business resources (e.g., product images list, campaign attachments).\n\nIf the usage record does not exist, the API returns an appropriate error. Security checks should ensure that only authorized users can view sensitive associations depending on usage_domain. The endpoint description and implementation do not reference any column that isn't an actual schema field; there is no soft delete or created_by field.\n\nThe endpoint is a stateless fetch only and does not alter application logic or data.","summary":"Get a file usage association by id from ai_mall_file_usages (UUID lookup).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":{"description":"Single file usage association from ai_mall_file_usages.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"at","path":"/ai-mall/fileUsages/{id}","method":"get"},{"specification":"Update a file usage association in ai_mall_file_usages by id (UUID). Updates are limited to fields included in the schema: ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. No references to non-existent schema fields are allowed. Path parameter {id} is required.","description":"This operation updates a file usage association record in ai_mall_file_usages by id (UUID). Only fields found in the schema—ai_mall_file_id, usage_domain, usage_field, entity_id, created_at—can be updated. No soft delete or audit fields are referenced in the schema, so these are not present in the API or description.\n\nCommon use cases: correcting the file link, updating domain/context tags, or moving the usage to a different business entity. Security checks should ensure only permitted actors can edit file usages depending on the resource.\n\nThe response returns the updated association, containing only fields defined in the schema. If the id does not exist, an error is returned.","summary":"Update a file usage association by id in ai_mall_file_usages (PUT, schema fields only).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages to update.","schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"All updatable/required fields from ai_mall_file_usages for the given id.","typeName":"IAiMallFileUsages.IUpdate"},"responseBody":{"description":"Updated file usage association from ai_mall_file_usages.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"update","path":"/ai-mall/fileUsages/{id}","method":"put"},{"specification":"Delete (hard delete, no soft delete field) a file usage association from ai_mall_file_usages by id (UUID). The resource is removed entirely as the schema does not support soft delete. Path param {id} is required.","description":"Deletes a file usage association record by its id from ai_mall_file_usages. Because there is no deleted_at or is_deleted field in ai_mall_file_usages, this operation is a hard delete: the row is physically removed from the database.\n\nAppropriate for unlinking files from business entities (e.g., removing product images or campaign banners). Errors are returned if the id does not exist. Security permissions should restrict this endpoint to owners or admins depending on usage_domain.\n\nThe operation references only properties present in the schema. There is no recovery of deleted usage. No non-existent fields are referenced in description or code.","summary":"Hard delete file usage from ai_mall_file_usages by id (no soft delete field).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages to hard delete.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":null,"authorizationRole":"admin","name":"erase","path":"/ai-mall/fileUsages/{id}","method":"delete"}],"completed":10,"total":10,"step":0,"created_at":"2025-07-28T03:30:45.709Z"},"tokenUsage":{"facade":{"aggregate":{"total":281206,"input":{"total":270648,"cached":0},"output":{"total":10558,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":281206,"input":{"total":270648,"cached":0},"output":{"total":10558,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"analyze":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"prisma":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"interface":{"aggregate":{"total":281206,"input":{"total":270648,"cached":0},"output":{"total":10558,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":281206,"input":{"total":270648,"cached":0},"output":{"total":10558,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"test":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"realize":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}},{"event":{"type":"interfaceComponents","components":{"schemas":{"IAiMallFiles.ICreate":{"type":"object","properties":{"uri":{"type":"string","description":"파일의 물리적 위치 혹은 URL.\n\nPrisma의 ai_mall_files.uri 컬럼 주석과 일치합니다. 클라우드, CDN 또는 온프레미스 스토리지 상의 고유 식별 경로를 명시해야 하며, 실제 파일 바이너리를 업로드하는 대신 메타데이터만 등록합니다."},"name":{"type":"string","description":"파일의 원본 이름 및 확장자.\n\nPrisma 스키마 ai_mall_files.name 컬럼 주석을 반영합니다. 관리 UI 및 파일 조회 시 표시되기 위한 값입니다."},"type":{"type":"string","description":"파일의 미디어 타입(MIME ex: 'image/png').\n\nPrisma 스키마 ai_mall_files.type 주석에 따라, 파일 유형 식별 및 다운로드/프리뷰 시 유용하게 활용됩니다."},"size":{"type":"integer","description":"파일 크기(바이트 단위).\n\nPrisma의 ai_mall_files.size 컬럼 기반. 용량 확인 및 다운로드 제한 조건 등에 사용됩니다."},"created_at":{"type":"string","format":"date-time","description":"파일 메타데이터 등록 시각(업로드 시각).\n\nPrisma의 ai_mall_files.created_at 설명 반영. 추적, 감사 및 최근 업로드 정렬에 사용됩니다."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."},{"type":"null","format":"date-time","description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."}],"description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."}},"required":["uri","name","type","size","created_at"],"description":"파일 메타데이터 등록 객체. AI-Mall의 첨부/이미지/문서 통합 관리 시스템의 마스터 레코드로 사용됩니다.\n\nPrisma ai_mall_files 테이블의 생성 시 스키마 구조 및 컬럼 주석을 기반으로 작성되었습니다."},"IAiMallFiles":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일의 UUID 기본키.\n\nPrisma ai_mall_files.id 컬럼의 주석을 정확히 따릅니다."},"uri":{"type":"string","description":"파일의 물리적/논리적 위치(URL).\n\nPrisma ai_mall_files.uri 컬럼 설명을 참조."},"name":{"type":"string","description":"원본 파일명 및 확장자.\n\nPrisma 스키마 컬럼 설명과 대응."},"type":{"type":"string","description":"파일의 MIME 타입.\n\nPrisma ai_mall_files.type 주석을 반영."},"size":{"type":"integer","description":"파일 크기(바이트 단위).\n\nPrisma ai_mall_files.size 컬럼 기반 설명."},"created_at":{"type":"string","format":"date-time","description":"파일 메타데이터 생성 시각.\n\nPrisma ai_mall_files.created_at 컬럼에 정의된 목적과 일치."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."},{"type":"null","format":"date-time","description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."}],"description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."}},"required":["id","uri","name","type","size","created_at"],"description":"단일 ai_mall_files 레코드 객체. 파일의 메타데이터 전체 정보를 포함합니다.\n\nPrisma 스키마 컬럼 설명 및 구매몰 파일 리포지토리 설계 의도를 모두 문서화하였습니다."},"IAiMallFiles.IRequest":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일 UUID, 선택적 검색 필터로 사용.\n\nPrisma ai_mall_files.id 컬럼 및 인덱스 활용 목적을 함께 서술하였습니다."},"uri":{"type":"string","description":"파일 경로/URL. 서브스트링 검색 가능.\n\nPrisma 컬럼 설명 및 실제 검색 케이스(상품 이미지, 배너 등)를 함께 명시."},"name":{"type":"string","description":"원본 파일명. 트라이그램 인덱스를 활용한 부분 매치 지원.\n\n실제 운영시 대량 파일 필터링에서 빠른 검색을 위해 활용됩니다."},"type":{"type":"string","description":"MIME 타입.\n\n이미지, 문서 등 유형별 필터링 구현에 쓰입니다."},"size":{"type":"integer","description":"파일 크기(바이트 단위), min/max 조건 검색용."},"created_at":{"type":"string","format":"date-time","description":"업로드 일시 입력. 범위/정확 일치 필터에 사용. Prisma 인덱스 및 컬럼 코멘트에서 요구됨."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."},{"type":"null","format":"date-time","description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."}],"description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."}},"description":"ai_mall_files에서 메타데이터 검색/필터링을 위한 요청 객체. 모든 검색 필드는 Prisma 컬럼 정의와 완벽히 일치하며, 트라이그램, 인덱스 활용 패턴까지 상세 주석화하였습니다.","required":[]},"IPageIAiMallFiles":{"type":"object","properties":{"pagination":{"$ref":"#/components/schemas/IPage.IPagination","description":"페이지네이션 정보. 전체 개수, 페이지, 레코드 수 등 반환 목적."},"data":{"type":"array","items":{"$ref":"#/components/schemas/IAiMallFiles"},"description":"현재 페이지의 파일 레코드 목록."}},"required":["pagination","data"],"description":"파일 레코드 목록에 대한 페이지 컨테이너 타입.\n\n표준 IPage 구조를 따르며, IPage.IPagination과 단일 파일 스키마를 조합하였습니다."},"IAiMallFiles.IUpdate":{"type":"object","properties":{"uri":{"type":"string","description":"업데이트시 파일 경로(URI) 변경."},"name":{"type":"string","description":"수정할 경우 새로운 파일명 지정."},"type":{"type":"string","description":"MIME 타입 변경."},"size":{"type":"integer","description":"파일 크기 변경(보정 등)."},"created_at":{"type":"string","format":"date-time","description":"메타데이터 생성 시각 (수정이 필요한 경우에만)."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"만료일 갱신/제거용."},{"type":"null","format":"date-time","description":"만료일 갱신/제거용."}],"description":"만료일 갱신/제거용."}},"description":"파일 메타데이터 수정 객체. 수정 가능한 컬럼은 Prisma ai_mall_files 컬럼 구조와 동일하게 설계되었습니다.\n\n모든 필드는 nullable로 지정 가능하며, 실제 수정 대상만 부분적으로 결합해 사용합니다.","required":[]},"IAiMallFileUsages.ICreate":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"연결할 파일의 UUID.\n\nPrisma ai_mall_file_usages.ai_mall_file_id 컬럼과 동일. ai_mall_files와의 참조 관계를 설명합니다."},"usage_domain":{"type":"string","description":"도메인(예시: 'product', 'promotion', 'channel' 등).\n\n파일이 어디에 연결/사용되는지 구분할 수 있도록 활용."},"usage_field":{"type":"string","description":"특정 필드(예시: 'cover_image', 'banner', 'description' 등).\n\n비즈니스 엔터티에서 파일을 바라보는 컨텍스트/역할."},"entity_id":{"type":"string","format":"uuid","description":"실제 파일이 연결되는 비즈니스 개체의 UUID.\n\n제품/배너/채널 등의 ID가 여기에 저장됨."},"created_at":{"type":"string","format":"date-time","description":"파일 사용 내역이 생성된 시각.\n\nPrisma 컬럼과 실생성일 동기화를 위해 반드시 입력."}},"required":["ai_mall_file_id","usage_domain","usage_field","entity_id","created_at"],"description":"파일과 비즈니스 리소스를 연결하는 사용 이력 등록 객체. ai_mall_file_usages 테이블의 모든 컬럼 구조 및 주석을 반영하였습니다."},"IAiMallFileUsages":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일 사용 이력의 고유 UUID(PK).\n\nPrisma ai_mall_file_usages.id 컬럼 정의와 일치."},"ai_mall_file_id":{"type":"string","format":"uuid","description":"참조된 파일 UUID.\n\n실제 ai_mall_files 테이블과의 외래키 및 사용 목적 설명."},"usage_domain":{"type":"string","description":"사용 도메인 참조.(e.g., product, article, promotion).\n\nai_mall_file_usages.usage_domain 컬럼의 목적과 연결성 주석."},"usage_field":{"type":"string","description":"비즈니스 용도에서의 사용 필드.\n\nPrisma 컬럼 usage_field의 비즈니스 컨텍스트에 대한 설명."},"entity_id":{"type":"string","format":"uuid","description":"연결된 개체(제품, 배너 등) UUID.\n\n비즈니스 리소스와의 매핑 목적, ai_mall_file_usages.entity_id 컬럼 사용 예시."},"created_at":{"type":"string","format":"date-time","description":"사용 이력이 최초 기입된 시각.\n\nAI-Mall의 감사 및 변경 이력 파악을 위해 사용."}},"required":["id","ai_mall_file_id","usage_domain","usage_field","entity_id","created_at"],"description":"파일 사용 이력 단건 레코드 객체.\n\nPrisma 테이블 스키마의 모든 컬럼을 명확히 매핑하고 비즈니스 사용 시나리오(프로모션, 상품, 채널 등)의 처리를 위한 정보를 참조합니다."},"IAiMallFileUsages.IRequest":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"검색 대상이 되는 파일 UUID.\n\n파일 기준 사용 이력 조회 시 활용."},"usage_domain":{"type":"string","description":"사용 도메인(예시: product, promotion, channel 등)별 이력 필터. Prisma 스키마 컬럼 설명 참고."},"usage_field":{"type":"string","description":"사용 필드 구분 값. 예시: cover_image, description\n\n비즈니스 컨텍스트별 검색 구현에 활용."},"entity_id":{"type":"string","format":"uuid","description":"비즈니스 엔티티(상품, 채널 등)별 파일 연결 이력 질의.\n\n실제 운영시 개별 entity별 딥 쿼리에서 FC로 사용."},"created_at":{"type":"string","format":"date-time","description":"이력 생성일 기준 범위 조회 지원용. Prisma 컬럼 구조 참조."}},"description":"ai_mall_file_usages 파일 연결 이력 검색용 요청 객체. 모든 필드 및 목적은 Prisma 실제 컬럼 정의의 사용 용례와 완벽히 일치합니다.","required":[]},"IPageIAiMallFileUsages":{"type":"object","properties":{"pagination":{"$ref":"#/components/schemas/IPage.IPagination","description":"페이지네이션 정보(전체 레코드 수, 현 페이지 등)."},"data":{"type":"array","items":{"$ref":"#/components/schemas/IAiMallFileUsages"},"description":"파일 사용 이력 목록."}},"required":["pagination","data"],"description":"파일 사용 이력 목록에 대한 페이징 컨테이너.\n\n표준 IPage 구조를 이용하며, 실제 목록은 IAiMallFileUsages 리스트 형태입니다."},"IAiMallFileUsages.IUpdate":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"파일 UUID 갱신(변경시).\n\nPrisma 기본 스키마 적용."},"usage_domain":{"type":"string","description":"수정할 사용 도메인.\n\n파일 사용처 변경 시 지정."},"usage_field":{"type":"string","description":"수정할 컨텍스트 필드."},"entity_id":{"type":"string","format":"uuid","description":"연결 개체 UUID 수정."},"created_at":{"type":"string","format":"date-time","description":"이력 생성일 재설정(특정 감사/수정용)."}},"description":"파일 사용 이력 레코드 업데이트를 위한 입력 객체. 수정 가능한 모든 필드를 null 가능 및 부분적 변경에 활용합니다.","required":[]},"IPage.IPagination":{"type":"object","properties":{"current":{"type":"integer","description":"현재 페이지 번호(1부터 시작)."},"limit":{"type":"integer","description":"페이지당 최대 표시 레코드 수.\n\n기본값 100, 운영 정책에 따라 조정 가능."},"records":{"type":"integer","description":"DB 내 전체 레코드 수(검색 조건 일치 기준)."},"pages":{"type":"integer","description":"전체 페이지 수(ceil(records/limit))."}},"required":["current","limit","records","pages"],"description":"페이지네이션 정보 표준 구조체. 전체 페이징 API에서 동일하게 사용."}}},"completed":10,"total":10,"step":0,"created_at":"2025-07-28T03:31:19.218Z"},"tokenUsage":{"facade":{"aggregate":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"analyze":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"prisma":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"interface":{"aggregate":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"test":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"realize":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}},{"event":{"type":"interfaceComplete","document":{"operations":[{"specification":"Create a new file resource in the ai_mall_files table. This endpoint is for uploading file metadata (not binary data) such as URI, name, type (MIME), size, and optionally the expiration date for the file. Upon creation, only fields defined in the schema (uri, name, type, size, created_at, expires_at) are accepted. This does NOT create actual storage—only metadata registration in the marketplace file registry. The endpoint strictly follows the actual columns in the Prisma schema for ai_mall_files.","description":"This operation registers a new file in the ai_mall_files table, which acts as the attachment and file repository for mall resources in the AI-Mall system. The endpoint expects all necessary metadata fields including the file's permanent storage URI, original name, MIME type, size (in bytes), upload timestamp, and optional expiration timestamp. Actual binary file uploads are handled separately by storage systems; this endpoint is for metadata management only.\n\nThe endpoint is used in workflows like product image association, admin banner uploads, or manual documentation management. All fields referenced in the API description are present in the actual schema: uri, name, type, size, created_at, expires_at (the only nullable property). No references are made to non-existent audit fields like created_by or is_deleted.\n\nUpon creation, the file is available for use by business resources via ai_mall_file_usages. Security considerations dictate that this resource is usually restricted to admins and sellers, with access logged. Validation checks ensure uploaded metadata matches expected content-type/size. Deletion and updates are done through separate endpoints outlined in the API.\n\nNo soft-delete field like deleted_at exists for files in the schema, so deletion will be hard-delete via the appropriate endpoint.","summary":"Create file metadata in ai_mall_files (no file binary, just metadata).","parameters":[],"requestBody":{"description":"File metadata for creation (uri, name, type, size, created_at, expires_at) as defined in ai_mall_files schema.","typeName":"IAiMallFiles.ICreate"},"responseBody":{"description":"The created file resource from ai_mall_files. All actual fields returned from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"create","path":"/ai-mall/files","method":"post"},{"specification":"Search or list file metadata resources from ai_mall_files table. This endpoint supports filtered listing and complex querying of file metadata using PATCH on /ai-mall/files, aligned with modern best practices for deep queries. Only schema fields such as id, uri, name, type, size, created_at, expires_at are supported for filtering or searching. Returns a paginated/searchable list based on request.","description":"This operation lists, filters, or searches the file metadata records stored in ai_mall_files. All queryable properties must correspond to actual columns present in the schema, such as id, uri, name, type, size, created_at, and expires_at. No unsupported fields are referenced.\n\nThe endpoint supports bulk querying for UI paginators, admin audit tools, and dashboard listings. Common use cases include filtering files by upload date, type (e.g., image/png), size range, or expiration. Security and permissions typically restrict this endpoint to admins, sellers, or automated systems. No soft delete exists, so results only show currently present files.\n\nResponse includes a list of ai_mall_files resources matching the requested query and a pagination object if applicable. No is_deleted or created_by fields are referenced in request or response.","summary":"List/search file metadata resources from ai_mall_files using deep query.","parameters":[],"requestBody":{"description":"Filter/search criteria for file metadata, using only schema fields in ai_mall_files.","typeName":"IAiMallFiles.IRequest"},"responseBody":{"description":"Paginated/searchable result list of file records from ai_mall_files.","typeName":"IPageIAiMallFiles"},"authorizationRole":"admin","name":"index","path":"/ai-mall/files","method":"patch"},{"specification":"Get detailed file metadata by its id (UUID) from ai_mall_files. Returns a single file's full metadata as defined in the schema. Path parameter {id} must be a valid UUID and match an entry in the table. The returned object contains all columns in the table but only those defined in the schema.","description":"Retrieves metadata for a single file resource in ai_mall_files, using its unique id (a UUID) as the path parameter. All returned fields are present in the Prisma schema: id, uri, name, type, size, created_at, expires_at. This endpoint is used for displaying metadata in file detail UIs, validating links for attachments, or for permissions/audit tools where precise information is required.\n\nIf the file with the given id does not exist, an appropriate error is returned. Only fields present in the Prisma definition are included—no references to is_deleted or audit fields that are not defined. This endpoint does not expose any business logic not represented by the schema structure; it is a stateless fetch.","summary":"Get file metadata by id from ai_mall_files (UUID lookup).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":{"description":"Single ai_mall_files resource (file metadata) from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"at","path":"/ai-mall/files/{id}","method":"get"},{"specification":"Update file metadata in ai_mall_files by id (UUID). All updatable fields must strictly exist in the schema: uri, name, type, size, created_at, expires_at. No references to fields outside the schema are allowed. The {id} path parameter identifies the resource.","description":"This operation updates an existing file resource in the ai_mall_files table. The file to update is specified by the UUID in the path parameter {id}. All fields that can be updated are those present in the table: uri, name, type, size, created_at, expires_at. No audit or is_deleted fields are referenced in descriptions or logic, as these are not present in schema.\n\nThis endpoint is used for updating file metadata such as correcting file names, changing expiration time, fixing URIs after migration, or updating content-type. Security and validations are usually stricter for files in use (referenced by ai_mall_file_usages). Only exact schema columns are available for PATCH/PUT; unknown fields are disregarded.\n\nReturns updated file metadata if the operation succeeds. Errors are returned if the file id does not exist in ai_mall_files.","summary":"Update file metadata in ai_mall_files by id (PUT, only schema fields).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files.","schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"Fields to update (only those from ai_mall_files: uri, name, type, size, created_at, expires_at).","typeName":"IAiMallFiles.IUpdate"},"responseBody":{"description":"Updated ai_mall_files resource (file metadata) from schema.","typeName":"IAiMallFiles"},"authorizationRole":"admin","name":"update","path":"/ai-mall/files/{id}","method":"put"},{"specification":"Permanently delete (hard delete) a file resource from ai_mall_files by id (UUID). This table does NOT have a soft-delete (deleted_at) field, so deletion must irreversibly remove the row. The {id} path parameter is required and must match an existing file.","description":"This endpoint deletes a single file resource from the ai_mall_files table by its unique id (UUID). Since ai_mall_files does NOT have a soft-delete or is_deleted field, this is a hard delete operation that physically removes the row from the database. There is no recoverable state: the file metadata is erased and cannot be restored except by backup.\n\nIntended for administrative actions such as removing obsolete or inappropriate uploads. Attempts to delete a file that does not exist will result in an error. Deletion cascades are not managed at this endpoint; downstream business logic must handle orphaned references (e.g., in ai_mall_file_usages).\n\nSecurity policies should restrict this operation to users with administrative rights. The endpoint does not reference any columns not present in the actual schema.","summary":"Hard delete file from ai_mall_files by id (no soft delete as field not present).","parameters":[{"name":"id","description":"UUID of the target file in ai_mall_files to hard delete.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":null,"authorizationRole":"admin","name":"erase","path":"/ai-mall/files/{id}","method":"delete"},{"specification":"Create a new file usage record (linking a file to a business entity) in ai_mall_file_usages. All fields in the schema—ai_mall_file_id, usage_domain, usage_field, entity_id, created_at—are used for creation. No non-existent audit or state fields referenced.","description":"This operation creates a new file usage association in the ai_mall_file_usages table, allowing files to be linked to business entities (such as products, promotions, or channels). Requires all fields from the schema: ai_mall_file_id (UUID referencing ai_mall_files), usage_domain (e.g., 'product'), usage_field (e.g., 'cover_image'), entity_id (UUID of the linked entity), and created_at timestamp.\n\nCommonly used when associating uploaded files with products, banners, or other mall resources. No support for soft-deletion or additional audit fields (the schema does not have them). Security policies may restrict usage creation to specific roles depending on domain context.","summary":"Create file usage (attach file to business entity) in ai_mall_file_usages.","parameters":[],"requestBody":{"description":"Required fields to create a file usage per ai_mall_file_usages schema.","typeName":"IAiMallFileUsages.ICreate"},"responseBody":{"description":"Created file usage association from ai_mall_file_usages schema.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"create","path":"/ai-mall/fileUsages","method":"post"},{"specification":"Search or list file usage records from ai_mall_file_usages table. Uses PATCH to support complex filtering/search on file usages. Only schema fields are queryable: ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. No soft-delete or non-schema fields allowed.","description":"This endpoint lists or filters file usage records in ai_mall_file_usages based on fields defined in the schema: ai_mall_file_id, usage_domain, usage_field, entity_id, and created_at. PATCH method is used to allow complex search criteria for large-scale UIs or audit dashboards.\n\nNo additional audit or deleted_at fields are referenced, as soft delete does not exist in schema. Filtering may include searching for all usages of a specific file, domain, or usage type (e.g., all banner images for a channel). Results are paginated if necessary. Security: typically only admins or resource owners can search mappings. Deletion and update are managed with other endpoints.","summary":"List/search file usages from ai_mall_file_usages, supporting deep query.","parameters":[],"requestBody":{"description":"Search or filter criteria for file usages as defined by ai_mall_file_usages schema fields.","typeName":"IAiMallFileUsages.IRequest"},"responseBody":{"description":"Paginated/searchable result set of file usages from ai_mall_file_usages.","typeName":"IPageIAiMallFileUsages"},"authorizationRole":"admin","name":"index","path":"/ai-mall/fileUsages","method":"patch"},{"specification":"Get a single file usage association from ai_mall_file_usages by id (UUID). Path parameter {id} is the primary key, and returns all actual schema fields. Only columns that exist in Prisma schema are included in description/response.","description":"Retrieves a single file usage record in ai_mall_file_usages by its unique id (UUID). All return fields are present in schema: id, ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. This is typically used to show relationships between files and business resources (e.g., product images list, campaign attachments).\n\nIf the usage record does not exist, the API returns an appropriate error. Security checks should ensure that only authorized users can view sensitive associations depending on usage_domain. The endpoint description and implementation do not reference any column that isn't an actual schema field; there is no soft delete or created_by field.\n\nThe endpoint is a stateless fetch only and does not alter application logic or data.","summary":"Get a file usage association by id from ai_mall_file_usages (UUID lookup).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":{"description":"Single file usage association from ai_mall_file_usages.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"at","path":"/ai-mall/fileUsages/{id}","method":"get"},{"specification":"Update a file usage association in ai_mall_file_usages by id (UUID). Updates are limited to fields included in the schema: ai_mall_file_id, usage_domain, usage_field, entity_id, created_at. No references to non-existent schema fields are allowed. Path parameter {id} is required.","description":"This operation updates a file usage association record in ai_mall_file_usages by id (UUID). Only fields found in the schema—ai_mall_file_id, usage_domain, usage_field, entity_id, created_at—can be updated. No soft delete or audit fields are referenced in the schema, so these are not present in the API or description.\n\nCommon use cases: correcting the file link, updating domain/context tags, or moving the usage to a different business entity. Security checks should ensure only permitted actors can edit file usages depending on the resource.\n\nThe response returns the updated association, containing only fields defined in the schema. If the id does not exist, an error is returned.","summary":"Update a file usage association by id in ai_mall_file_usages (PUT, schema fields only).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages to update.","schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"All updatable/required fields from ai_mall_file_usages for the given id.","typeName":"IAiMallFileUsages.IUpdate"},"responseBody":{"description":"Updated file usage association from ai_mall_file_usages.","typeName":"IAiMallFileUsages"},"authorizationRole":"admin","name":"update","path":"/ai-mall/fileUsages/{id}","method":"put"},{"specification":"Delete (hard delete, no soft delete field) a file usage association from ai_mall_file_usages by id (UUID). The resource is removed entirely as the schema does not support soft delete. Path param {id} is required.","description":"Deletes a file usage association record by its id from ai_mall_file_usages. Because there is no deleted_at or is_deleted field in ai_mall_file_usages, this operation is a hard delete: the row is physically removed from the database.\n\nAppropriate for unlinking files from business entities (e.g., removing product images or campaign banners). Errors are returned if the id does not exist. Security permissions should restrict this endpoint to owners or admins depending on usage_domain.\n\nThe operation references only properties present in the schema. There is no recovery of deleted usage. No non-existent fields are referenced in description or code.","summary":"Hard delete file usage from ai_mall_file_usages by id (no soft delete field).","parameters":[{"name":"id","description":"UUID of the file usage association in ai_mall_file_usages to hard delete.","schema":{"type":"string","format":"uuid"}}],"requestBody":null,"responseBody":null,"authorizationRole":"admin","name":"erase","path":"/ai-mall/fileUsages/{id}","method":"delete"}],"components":{"schemas":{"IAiMallFiles.ICreate":{"type":"object","properties":{"uri":{"type":"string","description":"파일의 물리적 위치 혹은 URL.\n\nPrisma의 ai_mall_files.uri 컬럼 주석과 일치합니다. 클라우드, CDN 또는 온프레미스 스토리지 상의 고유 식별 경로를 명시해야 하며, 실제 파일 바이너리를 업로드하는 대신 메타데이터만 등록합니다."},"name":{"type":"string","description":"파일의 원본 이름 및 확장자.\n\nPrisma 스키마 ai_mall_files.name 컬럼 주석을 반영합니다. 관리 UI 및 파일 조회 시 표시되기 위한 값입니다."},"type":{"type":"string","description":"파일의 미디어 타입(MIME ex: 'image/png').\n\nPrisma 스키마 ai_mall_files.type 주석에 따라, 파일 유형 식별 및 다운로드/프리뷰 시 유용하게 활용됩니다."},"size":{"type":"integer","description":"파일 크기(바이트 단위).\n\nPrisma의 ai_mall_files.size 컬럼 기반. 용량 확인 및 다운로드 제한 조건 등에 사용됩니다."},"created_at":{"type":"string","format":"date-time","description":"파일 메타데이터 등록 시각(업로드 시각).\n\nPrisma의 ai_mall_files.created_at 설명 반영. 추적, 감사 및 최근 업로드 정렬에 사용됩니다."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."},{"type":"null","format":"date-time","description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."}],"description":"파일 만료 또는 삭제 예정 시점. 선택적 필드로, 만료 로직이 필요치 않은 경우 null로 둘 수 있습니다.\n\nPrisma의 ai_mall_files.expires_at 컬럼 설명과 일치."}},"required":["uri","name","type","size","created_at"],"description":"파일 메타데이터 등록 객체. AI-Mall의 첨부/이미지/문서 통합 관리 시스템의 마스터 레코드로 사용됩니다.\n\nPrisma ai_mall_files 테이블의 생성 시 스키마 구조 및 컬럼 주석을 기반으로 작성되었습니다."},"IAiMallFiles":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일의 UUID 기본키.\n\nPrisma ai_mall_files.id 컬럼의 주석을 정확히 따릅니다."},"uri":{"type":"string","description":"파일의 물리적/논리적 위치(URL).\n\nPrisma ai_mall_files.uri 컬럼 설명을 참조."},"name":{"type":"string","description":"원본 파일명 및 확장자.\n\nPrisma 스키마 컬럼 설명과 대응."},"type":{"type":"string","description":"파일의 MIME 타입.\n\nPrisma ai_mall_files.type 주석을 반영."},"size":{"type":"integer","description":"파일 크기(바이트 단위).\n\nPrisma ai_mall_files.size 컬럼 기반 설명."},"created_at":{"type":"string","format":"date-time","description":"파일 메타데이터 생성 시각.\n\nPrisma ai_mall_files.created_at 컬럼에 정의된 목적과 일치."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."},{"type":"null","format":"date-time","description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."}],"description":"파일 만료 시각, 선택적 필드.\n\nPrisma 정의와 일치."}},"required":["id","uri","name","type","size","created_at"],"description":"단일 ai_mall_files 레코드 객체. 파일의 메타데이터 전체 정보를 포함합니다.\n\nPrisma 스키마 컬럼 설명 및 구매몰 파일 리포지토리 설계 의도를 모두 문서화하였습니다."},"IAiMallFiles.IRequest":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일 UUID, 선택적 검색 필터로 사용.\n\nPrisma ai_mall_files.id 컬럼 및 인덱스 활용 목적을 함께 서술하였습니다."},"uri":{"type":"string","description":"파일 경로/URL. 서브스트링 검색 가능.\n\nPrisma 컬럼 설명 및 실제 검색 케이스(상품 이미지, 배너 등)를 함께 명시."},"name":{"type":"string","description":"원본 파일명. 트라이그램 인덱스를 활용한 부분 매치 지원.\n\n실제 운영시 대량 파일 필터링에서 빠른 검색을 위해 활용됩니다."},"type":{"type":"string","description":"MIME 타입.\n\n이미지, 문서 등 유형별 필터링 구현에 쓰입니다."},"size":{"type":"integer","description":"파일 크기(바이트 단위), min/max 조건 검색용."},"created_at":{"type":"string","format":"date-time","description":"업로드 일시 입력. 범위/정확 일치 필터에 사용. Prisma 인덱스 및 컬럼 코멘트에서 요구됨."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."},{"type":"null","format":"date-time","description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."}],"description":"만료일 조건 검색. 딥 쿼리 및 배치 정리 시 유용함."}},"description":"ai_mall_files에서 메타데이터 검색/필터링을 위한 요청 객체. 모든 검색 필드는 Prisma 컬럼 정의와 완벽히 일치하며, 트라이그램, 인덱스 활용 패턴까지 상세 주석화하였습니다.","required":[]},"IPageIAiMallFiles":{"type":"object","properties":{"pagination":{"$ref":"#/components/schemas/IPage.IPagination","description":"페이지네이션 정보. 전체 개수, 페이지, 레코드 수 등 반환 목적."},"data":{"type":"array","items":{"$ref":"#/components/schemas/IAiMallFiles"},"description":"현재 페이지의 파일 레코드 목록."}},"required":["pagination","data"],"description":"파일 레코드 목록에 대한 페이지 컨테이너 타입.\n\n표준 IPage 구조를 따르며, IPage.IPagination과 단일 파일 스키마를 조합하였습니다."},"IAiMallFiles.IUpdate":{"type":"object","properties":{"uri":{"type":"string","description":"업데이트시 파일 경로(URI) 변경."},"name":{"type":"string","description":"수정할 경우 새로운 파일명 지정."},"type":{"type":"string","description":"MIME 타입 변경."},"size":{"type":"integer","description":"파일 크기 변경(보정 등)."},"created_at":{"type":"string","format":"date-time","description":"메타데이터 생성 시각 (수정이 필요한 경우에만)."},"expires_at":{"oneOf":[{"type":"string","format":"date-time","description":"만료일 갱신/제거용."},{"type":"null","format":"date-time","description":"만료일 갱신/제거용."}],"description":"만료일 갱신/제거용."}},"description":"파일 메타데이터 수정 객체. 수정 가능한 컬럼은 Prisma ai_mall_files 컬럼 구조와 동일하게 설계되었습니다.\n\n모든 필드는 nullable로 지정 가능하며, 실제 수정 대상만 부분적으로 결합해 사용합니다.","required":[]},"IAiMallFileUsages.ICreate":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"연결할 파일의 UUID.\n\nPrisma ai_mall_file_usages.ai_mall_file_id 컬럼과 동일. ai_mall_files와의 참조 관계를 설명합니다."},"usage_domain":{"type":"string","description":"도메인(예시: 'product', 'promotion', 'channel' 등).\n\n파일이 어디에 연결/사용되는지 구분할 수 있도록 활용."},"usage_field":{"type":"string","description":"특정 필드(예시: 'cover_image', 'banner', 'description' 등).\n\n비즈니스 엔터티에서 파일을 바라보는 컨텍스트/역할."},"entity_id":{"type":"string","format":"uuid","description":"실제 파일이 연결되는 비즈니스 개체의 UUID.\n\n제품/배너/채널 등의 ID가 여기에 저장됨."},"created_at":{"type":"string","format":"date-time","description":"파일 사용 내역이 생성된 시각.\n\nPrisma 컬럼과 실생성일 동기화를 위해 반드시 입력."}},"required":["ai_mall_file_id","usage_domain","usage_field","entity_id","created_at"],"description":"파일과 비즈니스 리소스를 연결하는 사용 이력 등록 객체. ai_mall_file_usages 테이블의 모든 컬럼 구조 및 주석을 반영하였습니다."},"IAiMallFileUsages":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"파일 사용 이력의 고유 UUID(PK).\n\nPrisma ai_mall_file_usages.id 컬럼 정의와 일치."},"ai_mall_file_id":{"type":"string","format":"uuid","description":"참조된 파일 UUID.\n\n실제 ai_mall_files 테이블과의 외래키 및 사용 목적 설명."},"usage_domain":{"type":"string","description":"사용 도메인 참조.(e.g., product, article, promotion).\n\nai_mall_file_usages.usage_domain 컬럼의 목적과 연결성 주석."},"usage_field":{"type":"string","description":"비즈니스 용도에서의 사용 필드.\n\nPrisma 컬럼 usage_field의 비즈니스 컨텍스트에 대한 설명."},"entity_id":{"type":"string","format":"uuid","description":"연결된 개체(제품, 배너 등) UUID.\n\n비즈니스 리소스와의 매핑 목적, ai_mall_file_usages.entity_id 컬럼 사용 예시."},"created_at":{"type":"string","format":"date-time","description":"사용 이력이 최초 기입된 시각.\n\nAI-Mall의 감사 및 변경 이력 파악을 위해 사용."}},"required":["id","ai_mall_file_id","usage_domain","usage_field","entity_id","created_at"],"description":"파일 사용 이력 단건 레코드 객체.\n\nPrisma 테이블 스키마의 모든 컬럼을 명확히 매핑하고 비즈니스 사용 시나리오(프로모션, 상품, 채널 등)의 처리를 위한 정보를 참조합니다."},"IAiMallFileUsages.IRequest":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"검색 대상이 되는 파일 UUID.\n\n파일 기준 사용 이력 조회 시 활용."},"usage_domain":{"type":"string","description":"사용 도메인(예시: product, promotion, channel 등)별 이력 필터. Prisma 스키마 컬럼 설명 참고."},"usage_field":{"type":"string","description":"사용 필드 구분 값. 예시: cover_image, description\n\n비즈니스 컨텍스트별 검색 구현에 활용."},"entity_id":{"type":"string","format":"uuid","description":"비즈니스 엔티티(상품, 채널 등)별 파일 연결 이력 질의.\n\n실제 운영시 개별 entity별 딥 쿼리에서 FC로 사용."},"created_at":{"type":"string","format":"date-time","description":"이력 생성일 기준 범위 조회 지원용. Prisma 컬럼 구조 참조."}},"description":"ai_mall_file_usages 파일 연결 이력 검색용 요청 객체. 모든 필드 및 목적은 Prisma 실제 컬럼 정의의 사용 용례와 완벽히 일치합니다.","required":[]},"IPageIAiMallFileUsages":{"type":"object","properties":{"pagination":{"$ref":"#/components/schemas/IPage.IPagination","description":"페이지네이션 정보(전체 레코드 수, 현 페이지 등)."},"data":{"type":"array","items":{"$ref":"#/components/schemas/IAiMallFileUsages"},"description":"파일 사용 이력 목록."}},"required":["pagination","data"],"description":"파일 사용 이력 목록에 대한 페이징 컨테이너.\n\n표준 IPage 구조를 이용하며, 실제 목록은 IAiMallFileUsages 리스트 형태입니다."},"IAiMallFileUsages.IUpdate":{"type":"object","properties":{"ai_mall_file_id":{"type":"string","format":"uuid","description":"파일 UUID 갱신(변경시).\n\nPrisma 기본 스키마 적용."},"usage_domain":{"type":"string","description":"수정할 사용 도메인.\n\n파일 사용처 변경 시 지정."},"usage_field":{"type":"string","description":"수정할 컨텍스트 필드."},"entity_id":{"type":"string","format":"uuid","description":"연결 개체 UUID 수정."},"created_at":{"type":"string","format":"date-time","description":"이력 생성일 재설정(특정 감사/수정용)."}},"description":"파일 사용 이력 레코드 업데이트를 위한 입력 객체. 수정 가능한 모든 필드를 null 가능 및 부분적 변경에 활용합니다.","required":[]},"IPage.IPagination":{"type":"object","properties":{"current":{"type":"integer","description":"현재 페이지 번호(1부터 시작)."},"limit":{"type":"integer","description":"페이지당 최대 표시 레코드 수.\n\n기본값 100, 운영 정책에 따라 조정 가능."},"records":{"type":"integer","description":"DB 내 전체 레코드 수(검색 조건 일치 기준)."},"pages":{"type":"integer","description":"전체 페이지 수(ceil(records/limit))."}},"required":["current","limit","records","pages"],"description":"페이지네이션 정보 표준 구조체. 전체 페이징 API에서 동일하게 사용."}},"authorization":[{"name":"customer","description":"Can browse products, manage shopping cart, place orders, view order history, write reviews/inquiries, manage personal information, and interact with AI-driven personalized features."},{"name":"seller","description":"Can manage storefront and products, handle inventory and orders, view analytics, respond to inquiries/reviews, participate in AI-driven promotional and recommendation features."},{"name":"admin","description":"Full backend access: manages all users, sellers, channels, categories, site-wide analytics, approval workflows, compliance, and oversees AI-driven system functions and configuration."}]}},"created_at":"2025-07-28T03:29:19.639Z","reason":"Step to the interface designing after DB schema generation","step":0},"tokenUsage":{"facade":{"aggregate":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"analyze":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"prisma":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"interface":{"aggregate":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":342993,"input":{"total":329534,"cached":0},"output":{"total":13459,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"test":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}},"realize":{"aggregate":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"initialize":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"select":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"cancel":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"call":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}},"describe":{"total":0,"input":{"total":0,"cached":0},"output":{"total":0,"reasoning":0,"accepted_prediction":0,"rejected_prediction":0}}}}}]